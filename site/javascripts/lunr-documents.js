var lunrDocuments = [{"id":0,"title":"The Basics of Creating Rails Plugins","heading":"1 Setup","subheading":"1 Setup","content":"currently, rails plugins built gems, gemified plugins. they shared across different rails applications using rubygems bundler desired."},{"id":1,"title":"The Basics of Creating Rails Plugins","heading":"1 Setup","subheading":"1.1 Generate a gemified plugin.","content":"rails ships with rails plugin command which creates skeleton developing kind rails extension with ability integration tests using dummy rails application. create your plugin with command: usage options asking help: navigate directory that contains plugin, bundle install command generated test using bin/test command. should see: this will tell that everything generated properly ready start adding functionality. this section will explain method string that will available anywhere your rails application. this example will method string named to_squawk. begin, create test file with assertions: bin/test test. this test should fail because haven't implemented to_squawk method: great ready start development. lib/yaffle.rb, require \"yaffle/core_ext\": finally, create core_ext.rb file to_squawk method: test that your method does what says does, unit tests with bin/test from your plugin directory. this action, change test/dummy directory, fire console, start squawking: common pattern plugins method called acts_as_something models. this case, want write method called acts_as_yaffle that adds squawk method your active record models. begin, your files that have:"},{"id":2,"title":"The Basics of Creating Rails Plugins","heading":"4 Add an \"acts_as\" Method to Active Record","subheading":"4.1 Add a Class Method","content":"this plugin will expect that you've added method your model named last_squawk. however, plugin users might have already defined method their model named last_squawk that they something else. this plugin will allow name changed adding class method called yaffle_text_field. start out, write failing test that shows behavior you'd like: when bin/test, should following: this tells that don't have necessary models (hickwall wickwall) that trying test. easily generate these models \"dummy\" rails application running following commands from test/dummy directory: create necessary database tables your testing database navigating your dummy migrating database. first, run: while here, change hickwall wickwall models that they know that they supposed like yaffles. will also code define acts_as_yaffle method. then return root directory ../..) your plugin rerun tests using bin/test. getting closer... will implement code acts_as_yaffle method make tests pass. when bin/test, should tests pass:"},{"id":3,"title":"The Basics of Creating Rails Plugins","heading":"4 Add an \"acts_as\" Method to Active Record","subheading":"4.2 Add an Instance Method","content":"this plugin will method named 'squawk' active record object that calls acts_as_yaffle. 'squawk' method will simply value fields database. start out, write failing test that shows behavior you'd like: test make sure last tests fail with error that contains \"nomethoderror: undefined method squawk'\", then updateacts_as_yaffle.rb` look like this: bin/test final time should see: generators included your simply creating them lib/generators directory your plugin. more information about creation generators found generators guide. plugins currently development easily shared from repository. share yaffle with others, simply commit code repository (like github) line gemfile application question: after running bundle install, your functionality will available application. when ready shared formal release, published rubygems. more information about publishing gems rubygems, see: publishing your gem. once your plugin stable ready deploy, everyone else favor document luckily, writing documentation your plugin easy. first step update readme file with detailed information about your plugin. things include are: once your readme solid, through rdoc comments methods that developers will use. it's also customary #:nodoc: comments those parts code that included public api. once your comments good navigate your plugin directory run:"},{"id":4,"title":"The Basics of Creating Rails Plugins","heading":"7 RDoc Documentation","subheading":"7.1 References","content":"você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":5,"title":"Layouts e Renderização no Rails","heading":"1 Visão Geral: Como as peças se encaixam","subheading":"1 Visão Geral: Como as peças se encaixam","content":"este guia concentra-se interação entre controller view triângulo model-view-controller. como você sabe, controller responsável orquestrar todo processo como lidar requisição rails, embora normalmente entregue qualquer código pesado model. porém, hora enviar resposta volta usuário, controller transfere informações view. essa transferência assunto deste guia. linhas gerais, isso envolve decidir deve enviado como resposta chamar método apropriado criar essa resposta. resposta view completa, rails também fará trabalho extra encapsular view layout possivelmente, obter partials. você verá todos esses caminhos posteriormente neste guia. ponto vista controller, três maneiras criar resposta http:"},{"id":6,"title":"Layouts e Renderização no Rails","heading":"2 Criando respostas","subheading":"2.1 Renderização por padrão: Convenção sobre configuração em ação","content":"você ouviu falar rails promove \"convenção sobre configuração\". renderização padrão excelente exemplo disso. padrão, controllers rails renderizam automaticamente views nomes correspondem rotas válidas. exemplo, você tiver esse código classe bookscontroller: seguinte arquivo rotas: você arquivo exibição app/views/books/index.html.erb: rails renderizará automaticamente app/views/books/index.html.erb quando você navegar /books verá livros chegarão breve!\" tela. entanto, tela breve apenas minimamente útil; portanto, breve você criará modelo book adicionará action index bookscontroller: observe temos render explícito final action index, acordo princípio \"convenção sobre configuração\". regra que, você renderizar explicitamente algo final action controller, rails procurará automaticamente template action_name.html.erb caminho view controller renderizará. portanto, neste caso, rails renderizará arquivo app/views/books/index.html.erb. queremos exibir propriedades todos livros nossa view, podemos fazer isso template como este:"},{"id":7,"title":"Layouts e Renderização no Rails","heading":"2 Criando respostas","subheading":"2.2 Usando render","content":"maioria casos, método actioncontroller::base#render trabalho pesado renderizar conteúdo aplicativo utilizado navegador. existem várias maneiras personalizar comportamento render. você pode renderizar view padrão template rails, template específico, arquivo, código embutido, nada. você pode renderizar text, json xml. você também pode especificar tipo conteúdo status http resposta renderizada. você deseja renderizar view corresponde modelo diferente dentro mesmo controller, você pode usar render nome view: chamada update falhar, action update neste controller renderizará template edit.html.erb pertencente mesmo controller. preferir, você pode usar símbolo string especificar action renderizada: você quiser renderizar template controller totalmente diferente daquele contém código action? você também pode fazer isso render, aceita caminho completo (relativo app/views) template renderizado. exemplo, você estiver executando código adminproductscontroller fica emapp/controllers/admin, você pode renderizar resultados action template app/views/products desta maneira: rails sabe essa view pertence controller diferente devido caractere barra contido string. você quer explícito, você pode usar opção :template (necessária rails versões anteriores): três maneiras acima renderizar (renderizar outro template dentro controller, renderizar template dentro outro controller renderizar arquivo arbitrário sistema arquivos) verdade variantes mesma ação. fato, classe bookscontroller, dentro action update qual queremos renderizar template edit, livro atualizado êxito, todas seguintes chamadas render renderizarão template edit.html.erb diretório views/books: qual deles você realmente questão estilo convenção, regra geral usar mais simples faça sentido código você está escrevendo. método render pode ficar completamente view você estiver disposto usar opção :inline fornecer como parte chamada método. isso perfeitamente válido: padrão, renderização inline erb. como alternativa, você pode forçá-lo usar builder opção :type: você pode enviar texto formatação nenhuma marcação volta navegador usando opção :plain emrender: você pode enviar string html volta navegador usando opção :html render: json formato dados javascript usado muitas bibliotecas ajax. rails possui suporte interno converter objetos json renderizar esse json volta navegador: rails também possui suporte interno converter objetos renderizar esse volta quem chamou: rails pode renderizar javascript convencional: isso enviará string fornecida navegador mime type text/javascript. você pode enviar conteúdo bruto volta navegador, definir nenhum tipo conteúdo, usando opção :body render: rails pode renderizar arquivo bruto partir caminho absoluto. isso útil condicionalmente renderizar arquivos estáticos, como páginas erro. isso renderiza arquivo bruto (não suporta outros manipuladores). padrão renderizado layout atual. chamadas método render geralmente aceitam seis opções: padrão, rails exibirá resultados renderização tipo conteúdo mime como text/html application/json você usar opção :json ouapplication/xml opção :xml.). momentos você pode alterar isso, pode fazê-lo definindo opção :content_type: maioria opções render, conteúdo renderizado exibido como parte layout atual. você aprenderá mais sobre layouts como usá-los posteriormente neste guia. você pode usar opção :layout rails arquivo específico como layout action atual: você também pode dizer rails renderizar nenhum layout: você pode usar opção :location definir cabeçalho http location: rails gerará automaticamente resposta código status http correto maioria casos, isso ok). você pode usar opção :status alterar isso: rails entende códigos númericos status símbolos correspondentes mostrados abaixo. rails formato especificado solicitação :html padrão). você pode mudar isso passando opção :formats símbolo array: template formato especificado existir, será gerado erro actionview::missingtemplate. isso rails procurar variações template mesmo formato. você pode especificar lista variações passando opção :variants símbolo array. exemplo seria este. esse conjunto variantes, rails procurará conjunto modelos seguir usará primeiro encontrar. template formato especificado existir, será gerado erro actionview::missingtemplate. definir variação chamada renderização, você também pode configurá-la objeto solicitação action controller. encontrar layout atual, rails primeiro procura arquivo app/views/layouts mesmo nome base controller. exemplo, renderizar actions classe photoscontroller usam app/views/layouts/photos.html.erb app/views/layouts/photos.builder). houver esse layout específico controller, rails usará app/views/layouts/application.html.erb ouapp/views/layouts/application.builder. houver layout .erb, rails usará layout.builder, houver. rails também fornece várias maneiras atribuir layouts específicos mais precisão controllers actions individuais. você pode substituir convenções layout padrão seus controllers usando declaração layout. exemplo: esta declaração, todas views renderizadas pelo productscontroller usarãoapp/views/layouts/inventário.html.erb como layout. atribuir layout específico toda aplicação, declare layout classeapplicationcontroller: esta declaração, todas views, toda aplicação, usarão app/views/layouts/main.html.erb layout. você pode usar símbolo adiar escolha layout requisição seja processada: agora, usuário atual usuário especial, receberá layout especial visualizar produto. você pode usar método inline, como proc, determinar layout. exemplo, você passar objeto proc, bloco você fornecer proc receberá instância controller, layout possa determinado base solicitação atual: layouts especificados nível controller suportam opções :only e:except. essas opções recebem nome método array nomes métodos correspondem nomes métodos controller: esta declaração, layout product seria usado tudo, menos métodosrss index. declarações layout cascateam hierarquia, declarações layout mais específicas sempre substituem mais gerais. exemplo: nesta aplicação: similar lógica herança layout, template partial encontrado caminho convencional, controller procurará template partial renderizar cadeia herança. exemplo: ordem busca action admin/products#index será: isso torna app/views/application/ ótimo lugar suas partials compartilhadas, podem renderizadas seguinte forma: mais cedo mais tarde, maioria pessoas desenvolvedoras rails verá mensagem erro pode renderizar redirecionar ação\" (\"can only render redirect once action\"). embora isso seja irritante, relativamente fácil corrigir. geralmente isso ocorre devido mal-entendido sobre modo como render funciona. exemplo, aqui está código acionará esse erro: @book.special? avaliado como true, rails iniciará processo renderização despejar variável @book view special_show. isso interrompe execução restante código action show, quando rails chegar final ação, começará renderizar view regular_show gerará erro. solução simples: verifique você apenas chamada render redirect único fluxo código. coisa pode ajudar return. aqui está versão corrigida método: certifique-se usar return return, porque return funcionará devido precedência operador linguagem ruby. observe renderização implícita feita pelo actioncontroller detecta render chamado, portanto, seguinte código funcionará erros: isso renderizará livro special? configurado template special_show, enquanto outros livros serão renderizados template padrão show."},{"id":8,"title":"Layouts e Renderização no Rails","heading":"2 Criando respostas","subheading":"2.3 Usando redirect_to","content":"outra maneira lidar retorno respostas requisição http redirect_to. como você viu, render rails qual view outro asset) deve usado construção resposta. método redirect_to algo completamente diferente: navegador enviar nova requisição diferente. exemplo, você pode redirecionar onde quer esteja código index fotos aplicação esta chamada: você pode usar redirect_back retornar usuário página onde eles vieram. este local extraído cabeçalho http_referer, garante esteja definido pelo navegador, portanto, você deve fornecer fallback_location usar neste caso. rails código status http 302, redirecionamento temporário, quando você chama redirect_to. você quiser usar código status diferente, talvez 301, redirecionamento permanente, opção :status: assim como opção :status pararender, :status redirect_to aceita designações numéricas simbólicas cabeçalho vezes, pessoas desenvolvedoras inexperientes pensam redirect_to como espécie comando goto, movendo execução lugar outro código rails. isso está correto. código executado aguarda nova requisição navegador. acontece você informou navegador qual requisição deve acontecer seguida, enviando volta código status http considere estas ações diferença: código neste formulário, provavelmente haverá problema variável @book nil. lembre-se render: action executa nenhum código action destino, então nada configurará variável @books view index provavelmente exigirá. maneira corrigir isso redirecionar renderizar: esse código, navegador fará nova requisição página índice, código método index será executado tudo ficará bem. única desvantagem desse código requer navegador faça volta: navegador solicitou action show /books/1 controller descobre livros, portanto controller envia resposta redirecionamento navegador dizendo /books/, navegador obedece envia nova requisição volta controller solicitando agora action index, controller obtém todos livros banco dados renderiza template index, enviando-o volta navegador, exibe tela. enquanto aplicação pequena essa latência adicional pode problema, algo pensar tempo resposta preocupação. podemos demonstrar maneira lidar isso exemplo: isso detectaria livros especificado, define variável instância @books todos livros modelo depois renderiza diretamente template index.html.erb, retornando-o navegador mensagem alerta flash informar usuário aconteceu."},{"id":9,"title":"Layouts e Renderização no Rails","heading":"2 Criando respostas","subheading":"2.4 Usando head para criar respostas com apenas o cabeçalho (Header-Only)","content":"método head pode usado enviar respostas apenas cabeçalhos navegador. método head aceita número símbolo (consulte tabela referência) representando código status http. argumento options interpretado como hash nomes valores cabeçalho. exemplo, você pode retornar apenas cabeçalho erro: isso produziria seguinte cabeçalho: você pode usar outros cabeçalhos http transmitir outras informações: produziria: quando rails renderiza view como resposta, isso combinando view layout atual, usando regras achar layout atual foram mencionadas neste guia. dentro layout, você acesso três ferramentas combinar pedaços diferentes saídas formar resposta geral:"},{"id":10,"title":"Layouts e Renderização no Rails","heading":"3 Estruturando Layouts","subheading":"3.1 Helpers de Asset Tags","content":"helpers asset tags fornecem métodos gerar html liga views feeds, javascript, stylesheets, imagens, vídeos, áudios. seis helpers asset tags disponíveis rails: você pode usar essas tags layouts outras views, embora métodos auto_discovery_link_tag, javascript_include_tag stylesheet_link_tag apareçam mais seção <head> layout. helper auto_discovery_link_tag monta html maioria navegadores leitores feeds conseguem usar detectar presenta feeds rss, atom, json. recebe tipo link (:rss, :atom, :json), hash opções encaminhados url_for, hash opções tag: três opções tags disponíveis método auto_discovery_link_tag: helper javascript_include_tag retorna html script cada fonte fornecida. você está usando rails asset pipeline habilitada, este helper criará link /assets/javascripts/ invés public/javascripts usado versões anteriores rails. este link será disponibilizado pelo asset pipeline. arquivo javascript dentro aplicação engine rails pode dentro entre três possíveis pastas: app/assets, lib/assets vendor/assets. estas pastas explicadas detalhes seção organização assets guia asset pipeline. você pode especificar caminho completo relativo raiz documento, url, você preferir. exemplo, ligar arquivo javascript está dentro diretório chamado javascripts dentro deapp/assets, lib/assets vendor/assets, você faria isto: rails criará então script como esta: requisição este asset será então disponibilizada pela sprockets. incluir vários arquivos como app/assets/javascripts/main.js app/assets/javascripts/columns.js mesmo tempo: incluir app/assets/javascripts/main.js app/assets/javascripts/photos/columns.js: incluir http://example.com/main.js: helper stylesheet_link_tag retorna html <link> cada fonte fornecida. você está usando rails \"asset pipeline\" habilitada, este helper criará link /assets/stylesheets/. este link então será processado pela sprockets. arquivo stylesheet pode armazenado três endereços: app/assets, lib/assets vendor/assets. você pode especificar caminho completo relativo raiz documento, url. exemplo, ligar arquivo stylesheet está dentro diretório chamado stylesheets dentro app/assets, lib/assets vendor/assets, você faria isto: incluir app/assets/stylesheets/main.css app/assets/stylesheets/columns.css: incluir app/assets/stylesheets/main.css app/assets/stylesheets/photos/columns.css: incluir http://example.com/main.css: padrão, método stylesheet_link_tag cria links media=\"screen\" rel=\"stylesheet\". você pode sobrescrever qualquer destes padrões especificando opção apropriada (:media, :rel): helper image_tag monta <img aponta arquivo especificado. padrão, arquivos carregados partir public/images. você pode fornecer caminho imagem preferir: você pode fornecer hash opções adicionais html: você pode fornecer texto alternativo imagem será utilizado pessoa usuária estiver imagens desabilitadas navegador. você especificar texto alternativo forma explícita, valor padrão será nome arquivo, inicial maiúscula extensão. exemplo, estas duas imagens devolvem mesmo código: você também pode especificar size especial, formato \"{largura}x{altura}\": além especial acima, você pode fornecer hash final opções html padrão, como :class, :name: helper video_tag monta html <video> apontando arquivo especificado. padrão, arquivos carregados partir public/videos. produz como método image_tag, você pode fornecer caminho absoluto relativo diretório public/videos. além disso você pode especificar opção size: \"#{width}x#{height}\" assim como método image_tag. tags vídeo também podem qualquer opções html especificadas método (id, class al). método video_tag também suporta todas opções html <video> através hash opções html, incluindo: você também pode especificar vários vídeos reprodução consecutiva passando array vídeos método video_tag: isto produzir: helper audio_tag monta html <audio> apontando arquivo especificado. padrão, arquivos carregados partir public/audios. você pode fornecer caminho arquivo áudio preferir: você também pode fornecer hash opções adicionais, como :id, :class etc. como método video_tag, método audio_tag opções especiais:"},{"id":11,"title":"Layouts e Renderização no Rails","heading":"3 Estruturando Layouts","subheading":"3.2 Entendendo yield","content":"dentro contexto layout, yield identifica seção onde conteúdo view deve inserido. maneira mais simples utilizar isto colocar único yield, dentro qual todo conteúdo view renderizada momento inserido: você também pode criar layout várias regiões yield: body principal view sempre manda conteúdo dentro yield nome. direcionar conteúdo tags yield nome, usa-se método content_for."},{"id":12,"title":"Layouts e Renderização no Rails","heading":"3 Estruturando Layouts","subheading":"3.3 Usando o Método content_for","content":"método content_for permite inserir conteúdo dentro bloco yield nome layout. exmeplo, esta view funcionaria layout você acabou ver: resultado renderização desta página dentro layout fornecido seria este html: método content_for ajuda muito quando layout contém regiões distintas como sidebars rodapés precisam receber blocos conteúdo próprios. também útil inserir tags carregam javascript arquivos dentro cabeçalho layout seria genérico outro cenário."},{"id":13,"title":"Layouts e Renderização no Rails","heading":"3 Estruturando Layouts","subheading":"3.4 Usando Partials","content":"templates parciais normalmente chamados \"partials\" outro dispositivo quebrar processo renderização pedaços menores. partial, você pode mover código renderizar pedaço específico resposta arquivo próprio. renderizar partial como parte view, usa-se método render dentro view: isto inclui conteúdo arquivo chamado _menu.html.erb neste ponto dentro view renderizada. note underscore inicial nome arquivo: partials recebem nomes underscore inicial distingui-los views regulares, mesmo usar esta notação casos mais comuns. isso continua sendo verdade mesmo quando você incluir partial outro diretório: este código puxará partial app/views/shared/_menu. jeito usar partials tratá-los como algo equivalente sub-rotinas: como jeito mover detalhes fora view forma você entenda está acontecendo forma mais fácil. exemplo, você pode view estava assim: aqui, partials _ad_banner.html.erb _footer.html.erb podem conteúdo compartilhado muitas páginas aplicação. você precisa detalhes destas seções quando concentrar atenção página particular. como seções anteriores deste guia, yield ferramenta muito poderosa fazer faxina seus layouts. tenha mente isto ruby puro, então possível usar isto quase qualquer lugar. exemplo, podemos usar yield remover duplicação definições layout formulário vários recursos similares: partial pode usar próprio arquivo, assim como view pode usar layout. exemplo, você pode chamar partial assim: isto procura partial chamado _link_area.html.erb renderiza usando layout _graybar.html.erb. note layouts partials seguem mesma nomenclatura underscore inicial partials comuns, ficam mesmo diretório partial qual pertencem (não diretório principal layouts). note também necessário especificar :partial forma explícita quando passar opções adicionais como :layout. você também pode passar variáveis locais partials, tornando-os ainda mais poderosos flexíveis. exemplo, você pode utilizar esta técnica reduzir duplicação entre páginas edit, enquanto mantém pouco conteúdo distinto: mesmo mesma partial renderizado dentro duas views, helper submit retorna \"create zone\" ação \"update zone\" ação edit. passar variável local partial apenas casos específicos usa-se local_assigns. desta forma possível utilizar partial necessidade declarar todas variáveis locais. toda partial também variável local mesmo nome partial (sem underscore inicial). você pode passar objeto esta variável local opção :object. dentro partial customer, variável customer refere @new_customer partir view superior. você instância model renderizar dentro partial, você pode usar sintaxe reduzida: presumindo variável instância @customer contém instância model customer, isto utilizará _customer.html.erb renderizá-la passará variável local customer dentro partial refere variável instância @customer view superior. partials muito úteis renderizar coleções. quando você passa coleção partial através opção :collection, partial será inserido cada membro coleção: quando partial chamado coleção pluralizada, então instâncias individuais partial acesso membro coleção renderizado variável nomeada base partial. neste caso, partial _product, dentro partial _product, você pode referir product pegar instância renderizada. também sintaxe reduzida isto. presumindo question @products coleção instâncias product, você pode simplesmente escrever isto dentro index.html.erb produzir mesmo resultado: rails determina nome partial utilizar olhando nome model coleção. aliás, você pode criar coleção heterogênea fazer renderização deste jeito, rails escolherá partial apropriado cada membro coleção: neste caso, rails utilizará partials cliente empregado situações apropriadas cada membro coleção. caso coleção esteja vazia, render retornará nil, então deve haver dificuldades fornecer conteúdo alternativo. usar variável local personalizada dentro partial, especifique opção chamada partial: esta mudança, você pode acessar instância coleção @products como variável local item dentro partial. você também pode passar variáveis locais arbitrárias qualquer partial você renderizar opção locals: neste caso, partial terá acesso variável local title valor \"products page\". você também pode especificar segunda partial renderizar entre instâncias partial principal usando opção :spacer_template: rails renderizar partial _product_ruler (sem dados encaminhados ele) entre cada partials _product. possível usar opção :layout quando renderizar coleções: layout será renderizado junto partial cada item coleção. variáveis objeto atual object_counter ficam disponíveis layout também, mesma forma ficam dentro partial."},{"id":14,"title":"Layouts e Renderização no Rails","heading":"3 Estruturando Layouts","subheading":"3.5 Usando Layouts Aninhados","content":"pode aplicação necessite layout seja ligeiramente diferente layout aplicação suporte controller particular. invés repetir layout principal editá-lo, possível fazer isso através layouts aninhados (algumas vezes chamados sub-templates). segue exemplo: suponha você este layout applicationcontroller: páginas geradas pelo newscontroller, você quer esconder menu topo colocar menu direita: isto. view news utilizar novo layout, menu topo menu novo direita dentro \"content\". vários jeitos conseguir resultados similares esquemas diferentes sub-templates através desta técnica. note limite nível aninhamento. possível utilizar método actionview::render render template: 'layouts/news' criar novo layout base layout news. você certeza criará outros templates partir layout news, você pode substituir content_for?(:news_content) yield(:news_content) yield simplesmente yield. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":15,"title":"Securing Rails Applications","heading":"1 Introduction","subheading":"1 Introduction","content":"application frameworks made help developers build applications. some them also help with securing application. fact framework more secure than another: correctly, will able build secure apps with many frameworks. ruby rails some clever helper methods, example against injection, that this hardly problem. general there such thing plug-n-play security. security depends people using framework, sometimes development method. depends layers application environment: back-end storage, server, application itself (and possibly other layers applications). gartner group, however, estimates that attacks application layer, found \"that audited sites, vulnerable attack\". this because applications relatively easy attack, they simple understand manipulate, even person. threats against applications include user account hijacking, bypass access control, reading modifying sensitive data, presenting fraudulent content. attacker might able install trojan horse program unsolicited e-mail sending software, financial enrichment, cause brand name damage modifying company resources. order prevent attacks, minimize their impact remove points attack, first all, have fully understand attack methods order find correct countermeasures. that what this guide aims order develop secure applications have keep date layers know your enemies. keep date subscribe security mailing lists, read security blogs, make updating security checks habit (check additional resources chapter). done manually because that's find nasty logical security problems. this chapter describes some particular attacks related sessions, security measures protect your session data."},{"id":16,"title":"Securing Rails Applications","heading":"2 Sessions","subheading":"2.1 What are Sessions?","content":"most applications need keep track state users that interact with application. this could contents shopping basket, user currently logged user. this kind user-specific state stored session. rails provides session object each user that accesses application. user already active session, rails uses existing session. otherwise session created."},{"id":17,"title":"Securing Rails Applications","heading":"2 Sessions","subheading":"2.2 Session Hijacking","content":"many applications have authentication system: user provides user name password, application checks them stores corresponding user session hash. from session valid. every request application will load user, identified user session, without need authentication. session cookie identifies session. hence, cookie serves temporary authentication application. anyone seizes cookie from someone else, application this user with possibly severe consequences. here some ways hijack session, their countermeasures: main objective most attackers make money. underground prices stolen bank login accounts range from 0.5%-10% account balance, $0.5-$30 credit card numbers ($20-$60 with full details), $0.1-$1.5 identities (name, dob), $20-$50 retailer accounts, $6-$10 cloud service provider accounts, according symantec internet security threat report (2017)."},{"id":18,"title":"Securing Rails Applications","heading":"2 Sessions","subheading":"2.3 Session Storage","content":"rails cookiestore saves session hash cookie client-side. server retrieves session hash from cookie eliminates need session that will greatly increase speed application, controversial storage option have think about security implications storage limitations cookiestore uses encrypted cookie provide secure, encrypted location store session data. cookie-based sessions thus provide both integrity well confidentiality their contents. encryption key, well verification used signed cookies, derived from secret_key_base configuration value. also important different salt values encrypted signed cookies. using same value different salt configuration values lead same derived being used different security features which turn weaken strength key. test development applications secret_key_base derived from name. other environments must random present config/credentials.yml.enc, shown here decrypted state:"},{"id":19,"title":"Securing Rails Applications","heading":"2 Sessions","subheading":"2.4 Rotating Encrypted and Signed Cookies Configurations","content":"rotation ideal changing cookie configurations ensuring cookies aren't immediately invalid. your users then have chance visit your site, their cookie read with configuration have rewritten with change. rotation then removed once you're comfortable enough users have their chance their cookies upgraded. it's possible rotate ciphers digests used encrypted signed cookies. instance change digest used signed cookies from sha1 sha256, would first assign configuration value: rotation sha1 digest existing cookies seamlessly upgraded sha256 digest. then written signed cookies will digested with sha256. cookies that were written with sha1 still read, accessed will written with digest they're upgraded won't invalid when remove rotation. once users with sha1 digested signed cookies should longer have chance have their cookies rewritten, remove rotation. while setup many rotations you'd like it's common have many rotations going time. more details rotation with encrypted signed messages well various options rotate method accepts, please refer messageencryptor messageverifier documentation."},{"id":20,"title":"Securing Rails Applications","heading":"2 Sessions","subheading":"2.5 Replay Attacks for CookieStore Sessions","content":"works like this: including nonce random value) session solves replay attacks. nonce valid only once, server keep track valid nonces. gets even more complicated have several application servers. storing nonces database table would defeat entire purpose cookiestore (avoiding accessing database). best solution against store this kind data session, database. this case store credit database logged_in_user_id session."},{"id":21,"title":"Securing Rails Applications","heading":"2 Sessions","subheading":"2.6 Session Fixation","content":" this attack focuses fixing user's session known attacker, forcing user's browser into using this therefore necessary attacker steal session afterwards. here this attack works:"},{"id":22,"title":"Securing Rails Applications","heading":"2 Sessions","subheading":"2.7 Session Fixation - Countermeasures","content":"most effective countermeasure issue session identifier declare invalid after successful login. that way, attacker cannot fixed session identifier. this good countermeasure against session hijacking, well. here create session rails: popular devise user management, will automatically expire sessions sign sign you. roll your own, remember expire session after your sign action (when session created). this will remove values from session, therefore will have transfer them session. another countermeasure save user-specific properties session, verify them every time request comes deny access, information does match. such properties could remote address user agent (the browser name), though latter less user-specific. when saving address, have bear mind that there internet service providers large organizations that their users behind proxies. these might change over course session, these users will able your application, only limited way."},{"id":23,"title":"Securing Rails Applications","heading":"2 Sessions","subheading":"2.8 Session Expiry","content":"possibility expiry time-stamp cookie with session however client edit cookies that stored browser expiring sessions server safer. here example expire sessions database table. call session.sweep(\"20 minutes\") expire sessions that were used longer than minutes ago. section about session fixation introduced problem maintained sessions. attacker maintaining session every five minutes keep session alive forever, although expiring sessions. simple solution this would created_at column sessions table. delete sessions that were created long time ago. this line sweep method above: this attack method works including malicious code link page that accesses application that user believed have authenticated. session that application timed out, attacker execute unauthorized commands.  session chapter have learned that most rails applications cookie-based sessions. either they store session cookie have server-side session hash, entire session hash client-side. either case browser will automatically send along cookie every request domain, find cookie that domain. controversial point that request comes from site different domain, will also send cookie. let's start with example: important notice that actual crafted image link doesn't necessarily have situated application's domain, anywhere forum, blog post, email. csrf appears very rarely (common vulnerabilities exposures) less than 0.1% really 'sleeping giant' [grossman]. this stark contrast results many security contract works csrf important security issue."},{"id":24,"title":"Securing Rails Applications","heading":"3 Cross-Site Request Forgery (CSRF)","subheading":"3.1 CSRF Countermeasures","content":"http protocol basically provides main types requests post (delete, put, patch should used like post). world wide consortium (w3c) provides checklist choosing http post:  post your application restful, might used additional http verbs, such patch, put, delete. some legacy browsers, however, support them only post. rails uses hidden _method field handle these cases. post requests sent automatically, too. this example, link www.harmless.com shown destination browser's status bar. actually dynamically created form that sends post request. attacker places code into onmouseover event handler image: there many other possibilities, like using <script> make cross-site request with jsonp javascript response. response executable code that attacker find run, possibly extracting sensitive data. protect against this data leakage, must disallow cross-site <script> tags. ajax requests, however, obey browser's same-origin policy (only your site allowed initiate xmlhttprequest) safely allow them return javascript responses. protect against other forged requests, introduce required security token that site knows other sites don't know. include security token requests verify server. this one-liner your application controller, default newly created rails applications: this will automatically include security token forms ajax requests generated rails. security token doesn't match what expected, exception will thrown. common persistent cookies store user information, with cookies.permanent example. this case, cookies will cleared csrf protection will effective. using different cookie store than session this information, must handle what with yourself: above method placed applicationcontroller will called when csrf token present incorrect non-get request. note that cross-site scripting (xss) vulnerabilities bypass csrf protections. gives attacker access elements page, they read csrf security token from form directly submit form. read more about later. another class security vulnerabilities surrounds redirection files applications."},{"id":25,"title":"Securing Rails Applications","heading":"4 Redirection and Files","subheading":"4.1 Redirection","content":"whenever user allowed pass (parts redirection, possibly vulnerable. most obvious attack would redirect users fake application which looks feels exactly original one. this so-called phishing attack works sending unsuspicious link email users, injecting link application putting link into external site. unsuspicious, because link starts with application malicious site hidden redirection parameter: http://www.example.com/site/redirect?to=www.attacker.com. here example legacy action: this will redirect user main action they tried access legacy action. intention preserve parameters legacy action pass them main action. however, exploited attacker they included host url: will hardly noticed redirects user attacker.com host. simple countermeasure would include only expected parameters legacy action (again permitted list approach, opposed removing unexpected parameters). redirect url, check with permitted list regular expression. another redirection self-contained attack works firefox opera data protocol. this protocol displays contents directly browser anything from html javascript entire images: data:text/html;base64,phnjcmlwdd5hbgvydcgnwfntjyk8l3njcmlwdd4k this example base64 encoded javascript which displays simple message box. redirection url, attacker could redirect this with malicious code countermeasure, allow user supply (parts redirected"},{"id":26,"title":"Securing Rails Applications","heading":"4 Redirection and Files","subheading":"4.2 File Uploads","content":"many applications allow users upload files. file names, which user choose (partly), should always filtered attacker could malicious file name overwrite file server. store file uploads /var/www/uploads, user enters file name like \"../../../etc/passwd\", overwrite important file. course, ruby interpreter would need appropriate permissions more reason servers, database servers, other programs less privileged unix user. when filtering user input file names, don't remove malicious parts. think situation where application removes \"../\" file name attacker uses string such \"....//\" result will \"../\". best permitted list approach, which checks validity file name with accepted characters. this opposed restricted list approach which attempts remove allowed characters. case isn't valid file name, reject replace accepted characters), don't remove them. here file name sanitizer from attachment_fu plugin: significant disadvantage synchronous processing file uploads attachment_fu plugin with images), vulnerability denial-of-service attacks. attacker synchronously start image file uploads from many computers which increases server load eventually crash stall server. solution this best process media files asynchronously: save media file schedule processing request database. second process will handle processing file background."},{"id":27,"title":"Securing Rails Applications","heading":"4 Redirection and Files","subheading":"4.3 Executable Code in File Uploads","content":"popular apache server option called documentroot. this home directory site, everything this directory tree will served server. there files with certain file name extension, code will executed when requested (might require some options set). examples this files. think situation where attacker uploads file \"file.cgi\" with code which will executed when someone downloads file. your apache documentroot points rails' /public directory, file uploads store files least level upwards."},{"id":28,"title":"Securing Rails Applications","heading":"4 Redirection and Files","subheading":"4.4 File Downloads","content":"just have filter file names uploads, have downloads. send_file() method sends files from server client. file name, that user entered, without filtering, file downloaded: simply pass file name like \"../../../etc/passwd\" download server's login information. simple solution against this, check that requested file expected directory: another (additional) approach store file names database name files disk after database. this also good approach avoid possible code uploaded file executed. attachment_fu plugin does this similar way. intranet administration interfaces popular attack targets, because they allow privileged access. although this would require several extra-security measures, opposite case real world. there first tailor-made trojan which stole information from intranet, namely \"monster employers\" site monster.com, online recruitment application. tailor-made trojans very rare, far, risk quite low, certainly possibility example security client host important, too. however, highest threat intranet admin applications csrf. your application re-displays malicious user input from extranet, application will vulnerable xss. user names, comments, spam reports, order addresses just uncommon examples, where there xss. having single place admin interface intranet, where input been sanitized, makes entire application vulnerable. possible exploits include stealing privileged administrator's cookie, injecting iframe steal administrator's password installing malicious software through browser security holes take over administrator's computer. refer injection section countermeasures against xss. csrf cross-site request forgery (csrf), also known cross-site reference forgery (xsrf), gigantic attack method, allows attacker everything administrator intranet user have already seen above csrf works, here examples what attackers intranet admin interface. real-world example router reconfiguration csrf. attackers sent malicious e-mail, with csrf mexican users. e-mail claimed there e-card waiting user, also contained image that resulted http-get request reconfigure user's router (which popular model mexico). request changed dns-settings that requests mexico-based banking site would mapped attacker's site. everyone accessed banking site through that router attacker's fake site their credentials stolen. another example changed google adsense's e-mail address password. victim logged into google adsense, administration interface google advertisement campaigns, attacker could change credentials victim. another popular attack spam your application, your blog, forum propagate malicious xss. course, attacker know structure, most rails urls quite straightforward they will easy find out, open-source application's admin interface. attacker even 1,000 lucky guesses just including malicious img-tags which every possible combination. countermeasures against csrf administration interfaces intranet applications, refer countermeasures csrf section."},{"id":29,"title":"Securing Rails Applications","heading":"5 Intranet and Admin Security","subheading":"5.1 Additional Precautions","content":"common admin interface works like this: it's located www.example.com/admin, accessed only admin flag user model, re-displays user input allows admin delete/add/edit whatever data desired. here some thoughts about this: there number authentication plug-ins rails available. good ones, such popular devise authlogic, store only encrypted passwords, plain-text passwords. rails built-in has_secure_password method which similar features. every user gets activation code activate their account when they e-mail with link after activating account, activation_code columns will null database. someone requested like these, they would logged first activated user found database (and chances that this administrator): this possible because some servers, this parameter params[:id], would nil. however, here finder from activation action: parameter nil, resulting query will thus found first user database, returned logged them find more about this blog post. advisable update your plug-ins from time time. moreover, review your application find more flaws like this."},{"id":30,"title":"Securing Rails Applications","heading":"6 User Management","subheading":"6.1 Brute-Forcing Accounts","content":"list user names your application misused brute-force corresponding passwords, because most people don't sophisticated passwords. most passwords combination dictionary words possibly numbers. armed with list user names dictionary, automatic program find correct password matter minutes. because this, most applications will display generic error message \"user name password correct\", these correct. said \"the user name entered been found\", attacker could automatically compile list user names. however, what most application designers neglect, forgot-password pages. these pages often admit that entered user name e-mail address (not) been found. this allows attacker compile list user names brute-force accounts. order mitigate such attacks, display generic error message forgot-password pages, too. moreover, require enter captcha after number failed logins from certain address. note, however, that this bullet-proof solution against automatic programs, because these programs change their address exactly often. however, raises barrier attack."},{"id":31,"title":"Securing Rails Applications","heading":"6 User Management","subheading":"6.2 Account Hijacking","content":"many applications make easy hijack user accounts. different make more difficult?. think situation where attacker stolen user's session cookie thus co-use application. easy change password, attacker will hijack account with clicks. change-password form vulnerable csrf, attacker will able change victim's password luring them page where there crafted img-tag which does csrf. countermeasure, make change-password forms safe against csrf, course. require user enter password when changing however, attacker also take over account changing e-mail address. after they change they will forgotten-password page (possibly new) password will mailed attacker's e-mail address. countermeasure require user enter password when changing e-mail address, too. depending your application, there more ways hijack user's account. many cases csrf will help example, csrf vulnerability google mail. this proof-of-concept attack, victim would have been lured site controlled attacker. that site crafted img-tag which results http request that changes filter settings google mail. victim logged google mail, attacker would change filters forward e-mails their e-mail address. this nearly harmful hijacking entire account. countermeasure, review your application logic eliminate csrf vulnerabilities."},{"id":32,"title":"Securing Rails Applications","heading":"6 User Management","subheading":"6.3 CAPTCHAs","content":"popular positive captcha recaptcha which displays distorted images words from books. also adds angled line, rather than distorted background high levels warping text earlier captchas did, because latter were broken. bonus, using recaptcha helps digitize books. recaptcha also rails plug-in with same name api. will keys from api, public private key, which have into your rails environment. after that recaptcha_tags method view, verify_recaptcha method controller. verify_recaptcha will return false validation fails. problem with captchas that they have negative impact user experience. additionally, some visually impaired users have found certain kinds distorted captchas difficult read. still, positive captchas best methods prevent kinds bots from submitting forms. most bots really dumb. they crawl their spam into every form's field they find. negative captchas take advantage that include \"honeypot\" field form which will hidden from human user javascript. note that negative captchas only effective against dumb bots won't suffice protect critical applications from targeted bots. still, negative positive captchas combined increase performance, e.g., \"honeypot\" field empty (bot detected), won't need verify positive captcha, which would require https request google recaptcha before computing response. here some ideas hide honeypot fields javascript and/or css: most simple negative captcha hidden honeypot field. server side, will check value field: contains text, must bot. then, either ignore post return positive result, saving post database. this will satisfied moves find more sophisticated negative captchas batchelder's blog post: note that this protects only from automatic bots, targeted tailor-made bots cannot stopped this. negative captchas might good protect login forms."},{"id":33,"title":"Securing Rails Applications","heading":"6 User Management","subheading":"6.4 Logging","content":"default, rails logs requests being made application. files huge security issue, they contain login credentials, credit card numbers cetera. when designing application security concept, should also think about what will happen attacker (full) access server. encrypting secrets passwords database will quite useless, files list them clear text. filter certain request parameters from your files appending them config.filter_parameters application configuration. these parameters will marked [filtered] log."},{"id":34,"title":"Securing Rails Applications","heading":"6 User Management","subheading":"6.5 Regular Expressions","content":"ruby uses slightly different approach than many other languages match beginning string. that even many ruby rails books this wrong. this security threat? wanted loosely validate field used simple regular expression like this: this work fine some languages. however, ruby match line beginning line end. thus like this passes filter without problems: this passes filter because regular expression matches second line, rest does matter. imagine view that showed like this: link looks innocent visitors, when it's clicked, will execute javascript function \"exploit_code\" other javascript attacker provides. regular expression, should used instead like since this frequent mistake, format validator (validates_format_of) raises exception provided regular expression starts with ends with need instead (which rare), :multiline option true, like note that this only protects against most common mistake when using format validator always need keep mind that match line beginning line ruby, beginning string."},{"id":35,"title":"Securing Rails Applications","heading":"6 User Management","subheading":"6.6 Privilege Escalation","content":"most common parameter that user might tamper with, parameter, http://www.domain.com/project/1, whereas will available params controller. there, will most likely something like this: this alright some applications, certainly user authorized view projects. user changes they allowed that information, they will have access anyway. instead, query user's access rights, too: depending your application, there will many more parameters user tamper with. rule thumb, user input data secure, until proven otherwise, every parameter from user potentially manipulated. don't fooled security obfuscation javascript security. developer tools review change every form's hidden fields. javascript used validate user input data, certainly prevent attackers from sending malicious requests with unexpected values. firebug addon mozilla firefox logs every request repeat change them. that easy bypass javascript validations. there even client-side proxies that allow intercept request response from internet. injection very tricky, because same code parameter malicious context, totally harmless another. context scripting, query, programming language, shell, ruby/rails method. following sections will cover important contexts where injection attacks happen. first section, however, covers architectural decision connection with injection."},{"id":36,"title":"Securing Rails Applications","heading":"7 Injection","subheading":"7.1 Permitted lists versus Restricted lists","content":"restricted list list e-mail addresses, non-public actions html tags. this opposed permitted list which lists good e-mail addresses, public actions, good html tags, although sometimes possible create permitted list spam filter, example), prefer permitted list approaches: permitted lists also good approach against human factor forgetting something restricted list."},{"id":37,"title":"Securing Rails Applications","heading":"7 Injection","subheading":"7.2 SQL Injection","content":"injection attacks influencing database queries manipulating application parameters. popular goal injection attacks bypass authorization. another goal carry data manipulation reading arbitrary data. here example user input data query: this could search action user enter project's name that they want find. malicious user enters resulting query will dashes start comment ignoring everything after query returns records from projects table including those blind user. this because condition true records. usually application includes access control. user enters their login credentials application tries find matching record users table. application grants access when finds record. however, attacker possibly bypass this check with injection. following shows typical database query rails find first record users table which matches login credentials parameters supplied user. attacker enters '1'='1 name, '2'>'1 password, resulting query will this will simply find first record database, grants access this user. union statement connects queries returns data set. attacker read arbitrary data from database. let's take example from above: let's inject another query using union statement: this will result following query: result won't list projects (because there project with empty name), list user names their password. hopefully encrypted passwords database! only problem attacker that number columns same both queries. that's second query includes list ones (1), which will always value order match number columns first query. also, second query renames some columns with statement that application displays values from user table. sure update your rails least 2.1.1. ruby rails built-in filter special characters, which will escape null character, line breaks. using model.find(id) model.find_by_some thing(something) automatically applies this countermeasure. fragments, especially conditions fragments (where(\"...\")), connection.execute() model.find_by_sql() methods, applied manually. instead passing string conditions option, pass array sanitize tainted strings like this: see, first part array fragment with question marks. sanitized versions variables second part array replace question marks. pass hash same result: array hash form only available model instances. sanitize_sql() elsewhere. make habit think about security consequences when using external string sql."},{"id":38,"title":"Securing Rails Applications","heading":"7 Injection","subheading":"7.3 Cross-Site Scripting (XSS)","content":"entry point vulnerable parameters where attacker start attack. most common entry points message posts, user comments, guest books, project titles, document names, search result pages have also been vulnerable just about everywhere where user input data. input does necessarily have come from input boxes sites, parameter obvious, hidden internal. remember that user intercept traffic. applications client-site proxies make easy change requests. there also other attack vectors like banner advertisements. attacks work like this: attacker injects some code, application saves displays page, later presented victim. most examples simply display alert box, more powerful than that. steal cookie, hijack session, redirect victim fake website, display advertisements benefit attacker, change elements site confidential information install malicious software through security holes browser. during second half 2007, there were vulnerabilities reported mozilla browsers, safari, opera. symantec global internet security threat report also documented browser plug-in vulnerabilities last months mpack very active up-to-date attack framework which exploits these vulnerabilities. criminal hackers, very attractive exploit sql-injection vulnerability application framework insert malicious code every textual table column. april more than 510,000 sites were hacked like this, among them british government, united nations, many more high profile targets. most common language course most popular client-side scripting language javascript, often combination with html. escaping user input essential. here most straightforward test check xss: this javascript code will simply display alert box. next examples exactly same, only very uncommon places: these examples don't harm far, let's attacker steal user's cookie (and thus hijack user's session). javascript document.cookie property read write document's cookie. javascript enforces same origin policy, that means script from domain cannot access cookies another domain. document.cookie property holds cookie originating server. however, read write this property, embed code directly html document happens with xss). inject this anywhere your application your cookie result page: attacker, course, this useful, victim will their cookie. next example will load image from http://www.attacker.com/ plus cookie. course this does exist, browser displays nothing. attacker review their server's access files victim's cookie. files www.attacker.com will read like this: mitigate these attacks obvious way) adding httponly flag cookies, that document.cookie read javascript. http only cookies used from v6.sp1, firefox v2.0.0.5, opera 9.5, safari chrome 1.0.154 onwards. other, older browsers (such webtv mac) actually cause page fail load. warned that cookies will still visible using ajax, though. with page defacement attacker things, example, present false information lure victim attackers site steal cookie, login credentials, other sensitive data. most popular include code from external sources iframes: this loads arbitrary html and/or javascript from external source embeds part site. this iframe taken from actual attack legitimate italian sites using mpack attack framework. mpack tries install malicious software through security holes browser very successfully, attacks succeed. more specialized attack could overlap entire site display login form, which looks same site's original, transmits user name password attacker's site. could and/or javascript hide legitimate link application, display another place which redirects fake site. reflected injection attacks those where payload stored present victim later included url. especially search forms fail escape search string. following link presented page which stated that \"george bush appointed year chairperson...\": very important filter malicious input, also important escape output application. especially xss, important permitted input filtering instead restricted. permitted list filtering states values allowed opposed values allowed. restricted lists never complete. imagine restricted list deletes \"script\" from user input. attacker injects \"<scrscriptipt>\", after filter, \"<script>\" remains. earlier versions rails used restricted list approach strip_tags(), strip_links() sanitize() method. this kind injection possible: this returned \"some<script>alert('hello')</script>\", which makes attack work. that's permitted list approach better, using updated rails method sanitize(): this allows only given tags does good job, even against kinds tricks malformed tags. second step, good practice escape output application, especially when re-displaying user input, which hasn't been input-filtered search form example earlier on). escapehtml() alias h()) method replace html input characters their uninterpreted representations html (&amp;, &quot;, &lt;, &gt;). network traffic mostly based limited western alphabet, character encodings, such unicode, emerged, transmit characters other languages. but, this also threat applications, malicious code hidden different encodings that browser might able process, application might not. here attack vector utf-8 encoding: this example pops message box. will recognized above sanitize() filter, though. great tool obfuscate encode strings, thus \"get know your enemy\", hackvertor. rails' sanitize() method does good fend encoding attacks. order understand today's attacks applications, it's best take look some real-world attack vectors. following excerpt from js.yamanner@m yahoo! mail worm. appeared june first webmail interface worm: worms exploit hole yahoo's html/javascript filter, which usually filters targets onload attributes from tags (because there javascript). filter applied only once, however, onload attribute with worm code stays place. this good example restricted list filters never complete hard allow html/javascript application. another proof-of-concept webmail worm nduja, cross-domain worm four italian webmail services. find more details rosario valotta's paper. both webmail worms have goal harvest email addresses, something criminal hacker could make money with. december 2006, 34,000 actual user names passwords were stolen myspace phishing attack. idea attack create profile page named \"login_home_index_html\", looked very convincing. specially-crafted html used hide genuine myspace content from page instead display login form."},{"id":39,"title":"Securing Rails Applications","heading":"7 Injection","subheading":"7.4 CSS Injection","content":"injection explained best well-known myspace samy worm. this worm automatically sent friend request samy (the attacker) simply visiting profile. within several hours over million friend requests, which created much traffic that myspace went offline. following technical explanation that worm. myspace blocked many tags, allowed css. worm's author javascript into like this: payload style attribute. there quotes allowed payload, because single double quotes have already been used. javascript handy eval() function which executes string code. eval() function nightmare restricted list input filters, allows style attribute hide word \"innerhtml\": next problem myspace filtering word \"javascript\", author used \"java<newline>script\" around this: another problem worm's author csrf security tokens. without them couldn't send friend request over post. around sending page right before adding user parsing result csrf token. end, worm, which injected into profile page. moz-binding property proved another introduce javascript gecko-based browsers (firefox, example). this example, again, showed that restricted list filter never complete. however, custom applications quite rare feature, hard find good permitted filter. want allow custom colors images, allow user choose them build application. rails' sanitize() method model permitted filter, really need one."},{"id":40,"title":"Securing Rails Applications","heading":"7 Injection","subheading":"7.5 Textile Injection","content":"want provide text formatting other than html (due security), mark-up language which converted html server-side. redcloth such language ruby, without precautions, also vulnerable xss. example, redcloth translates _test_ <em>test<em>, which makes text italic. however, current version 3.0.4, still vulnerable xss. all-new version that removed serious bugs. however, even that version some security bugs, countermeasures still apply. here example version 3.0.4: :filter_html option remove html which created textile processor. however, this does filter html, tags will left design), example <a>: recommended redcloth combination with permitted input filter, described countermeasures against section."},{"id":41,"title":"Securing Rails Applications","heading":"7 Injection","subheading":"7.6 Ajax Injection","content":"in_place_editor plugin, actions that return string, rather than rendering view, have escape return value action. otherwise, return value contains string, malicious code will executed upon return browser. escape input value using method."},{"id":42,"title":"Securing Rails Applications","heading":"7 Injection","subheading":"7.7 Command Line Injection","content":"your application execute commands underlying operating system, there several methods ruby: exec(command), syscall(command), system(command) command. will have especially careful with these functions user enter whole command, part this because most shells, execute another command first one, concatenating them with semicolon vertical (|). countermeasure system(command, parameters) method which passes command line parameters safely."},{"id":43,"title":"Securing Rails Applications","heading":"7 Injection","subheading":"7.8 Header Injection","content":"http request headers have referer, user-agent (client software), cookie field, among others. response headers example have status code, cookie, location (redirection target url) field. them user-supplied manipulated with more less effort. remember escape these header fields, too. example when display user agent administration area. besides that, important know what doing when building response headers partly based user input. example want redirect user back specific page. that introduced \"referer\" field form redirect given address: what happens that rails puts string into location header field sends (redirect) status browser. first thing malicious user would this: (ruby and) rails version 2.1.2 (excluding it), hacker inject arbitrary header fields; example like this: note that \"%0d%0a\" url-encoded \"\\r\\n\" which carriage-return line-feed (crlf) ruby. resulting http header second example will following because second location header field overwrites first. attack vectors header injection based injection crlf characters header field. what could attacker with false redirection? they could redirect phishing site that looks same yours, login again (and sends login credentials attacker). they could install malicious software through browser security holes that site. rails 2.1.2 escapes these characters location field redirect_to method. make sure yourself when build other header fields with user input. header injection possible, response splitting might too. http, header block followed crlfs actual data (usually html). idea response splitting inject crlfs into header field, followed another response with malicious html. response will under certain circumstances this would present malicious html victim. however, this only seems work with keep-alive connections (and many browsers using one-time connections). can't rely this. case this serious bug, should update your rails version 2.0.5 2.1.2 eliminate header injection (and thus response splitting) risks. active record interprets parameters combination with that rack parses query parameters possible issue unexpected database queries with null where clauses. response that security issue (cve-2012-2660, cve-2012-2694 cve-2013-0155) deep_munge method introduced solution keep rails secure default. example vulnerable code that could used attacker, deep_munge wasn't performed when params[:token] [nil], [nil, nil, ...] ['foo', nil] will bypass test nil, null ('foo', null) where clauses still will added query. keep rails secure default, deep_munge replaces some values with nil. below table shows what parameters look like based json sent request: possible return behavior disable deep_munge configuring your application aware risk know handle every http response from your rails application receives following default security headers. configure default headers config/application.rb. remove them. here list common headers:"},{"id":44,"title":"Securing Rails Applications","heading":"9 Default Headers","subheading":"9.1 Content Security Policy","content":"rails provides that allows configure content security policy your application. configure global default policy then override per-resource basis even lambdas inject per-request values into header such account subdomains multi-tenant application. example global policy: example controller overrides: content_security_policy_report_only configuration attribute content-security-policy-report-only order report only content violations migrating legacy content enable automatic nonce generation: then automatic nonce value passing nonce: true part html_options. example: same works with javascript_include_tag: csp_meta_tag helper create meta \"csp-nonce\" with per-session nonce value allowing inline <script> tags. this used rails helper create dynamically loaded inline <script> elements. beyond scope this guide inform secure your application code environments. however, please secure your database configuration, e.g. config/database.yml, master credentials.yml, other unencrypted secrets. want further restrict access, using environment-specific versions these files others that contain sensitive information."},{"id":45,"title":"Securing Rails Applications","heading":"10 Environmental Security","subheading":"10.1 Custom credentials","content":"rails stores secrets config/credentials.yml.enc, which encrypted hence cannot edited directly. rails uses config/master.key alternatively looks environment variable env[\"rails_master_key\"] encrypt credentials file. credentials file stored version control, long master kept safe. secret credentials, first rails secret secret. then rails credentials:edit edit credentials, secret. running credentials:edit creates credentials file master key, they already exist. default, this file contains application's secret_key_base, could also used store other credentials such access keys external apis. secrets kept credentials file accessible rails.application.credentials. example, with following decrypted config/credentials.yml.enc: rails.application.credentials.some_api_key returns somekey environment. want exception raised when some blank, bang version: don’t bump dependencies just encourage versions, including security issues. this because application owners need manually update their gems regardless efforts. bundle update --conservative gem_name safely update vulnerable dependencies. security landscape shifts important keep date, because missing vulnerability catastrophic. find additional resources about (rails) security here: você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":46,"title":"Active Support Core Extensions","heading":"1 Como Carregar Core Extensions","subheading":"1.1 Active Support Stand-Alone","content":"configuração padrão mais básica, active support carrega nada padrão. isso, granularizado pequenas unidades seja possível carregar apenas necessário contexto, além oferecer pontos entrada interessantes carregamento extensões convenientes vez, mesmo carregar nenhuma. portanto, possível inicializar após simples require como: objetos respondem mesmo blank?. vejamos como carregar essa definição. forma mais limitada conseguir respostas blank? selecionando arquivo essa definição. cada método definido como core extension esse guia possui nota onde método definido. caso blank? nota diz: isso significa você pode fazer requires assim: active support cuidadosamente projetado seleções arquivos carreguem somente dependências extremamente necessárias, caso existam. próximo passo simplesmente carregar todas extensões object. como regra geral, extensões someclass estão disponíveis rápido carregamento active_support/core_ext/some_class. portanto, carregar todas extensões object (incluindo blank?): você pode escolher carregar todas extensões principais, arquivo isso: finalmente, você quer tudo active support fornece, basta apenas: isso inserir todo active support memória antes necessário, algumas funcionalidades configuradas ʻautoload`, então carregadas usadas."},{"id":47,"title":"Active Support Core Extensions","heading":"1 Como Carregar Core Extensions","subheading":"1.2 Active Support Em Uma Aplicação Ruby on Rails","content":"aplicação ruby rails carrega todo active support config.active_support.bare esteja definida como true. neste caso, aplicação carregar apenas próprio framework escolhe como suas próprias necessidades, ainda pode selecionar mesmo qualquer nível granularidade, conforme explicado seção anterior."},{"id":48,"title":"Active Support Core Extensions","heading":"2 Extensões para todos os objetos","subheading":"2.1 blank? e present?","content":"seguintes valores considerados blank aplicação rails: exemplo, este método actioncontroller::httpauthentication::token::controllermethods blank? checar token está presente: método present? equivalente !blank?. este exemplo disponível actiondispatch::http::cache::response:"},{"id":49,"title":"Active Support Core Extensions","heading":"2 Extensões para todos os objetos","subheading":"2.2 presence","content":"método presence retorna valor present? true, caso seja. isso muito útil expressões como esta:"},{"id":50,"title":"Active Support Core Extensions","heading":"2 Extensões para todos os objetos","subheading":"2.3 duplicable?","content":"partir ruby 2.5, maioria objetos podem duplicados clone: active support fornece duplicable? consultar objeto pode duplicado:"},{"id":51,"title":"Active Support Core Extensions","heading":"2 Extensões para todos os objetos","subheading":"2.4 deep_dup","content":"método deep_dup retorna cópia profunda objeto. normalmente, quando você objeto contêm outros objetos, ruby executa dup, então criada cópia superficial objeto. caso você possua array string, exemplo, terá algo parecido com: como podemos ver, depois duplicar instância array, possuímos agora outro objeto, portanto podemos modificá-lo alterar informações objeto original. isso funciona elementos array, entretanto. desde faça cópia profunda, string dentro array manterá como mesmo objeto. você precisa cópia profunda objeto, pode então usar deep_dup. confira exemplo: objeto duplicável, deep_dup apenas retornará:"},{"id":52,"title":"Active Support Core Extensions","heading":"2 Extensões para todos os objetos","subheading":"2.5 try","content":"quando você quer chamar método objeto somente nil, forma mais simples conseguir isso através estrutura condicional, adicionando desnecessária desordem. alternativa usar try. como object#send exceto retorno seja enviado nil. exemplo: outro exemplo código activerecord::connectionadapters::abstractadapter onde @logger pode nil. você pode código evita verificação desnecessária. pode também chamada argumentos, porém bloco, qual será executado objeto nil: perceba exibirá mensagens erro caso elas ocorram, retornando disso. você quiser proteger possíveis erros digitação, try!:"},{"id":53,"title":"Active Support Core Extensions","heading":"2 Extensões para todos os objetos","subheading":"2.6 class_eval(*args, &block)","content":"você pode evoluir código contexto singleton qualquer objeto usando class_eval:"},{"id":54,"title":"Active Support Core Extensions","heading":"2 Extensões para todos os objetos","subheading":"2.7 acts_like?(duck)","content":"método acts_like? fornece meio conferir alguma classe como alguma outra classe baseada simples convenção: classe fornece mesma interface definida como string apenas marcador, corpo valor retorno irrelevantes. então, código cliente pode consultar tipagem desta forma: rails possui classes agem como date time seguem essa linha."},{"id":55,"title":"Active Support Core Extensions","heading":"2 Extensões para todos os objetos","subheading":"2.8 to_param","content":"todos objetos rails respondem método to_param, qual usado retornar representações valores strings, qual podem usadas consultas, fragmentos url. padrão, to_param apenas chama método to_s: retorno valores to_param deve ignorado: várias classes rails sobrescrevem este método. exemplo nil, true, false retornam mesmo. array#to_param chama to_param cada elemento, exibindo resultado separando elementos \"/\": notavelmente, rotas sistemas rails chamam to_param models obter valor campo :id. activerecord::base#to_param retorna model, você pode redefinir esse método seus models. exemplo, dado temos:"},{"id":56,"title":"Active Support Core Extensions","heading":"2 Extensões para todos os objetos","subheading":"2.9 to_query","content":"exceto hashes, este método constrói parte string usada consultas onde mapear chave to_param retorna. exemplo, dado temos: este método traz necessário, tanto chave, como valor: então esse resultado esta pronto usado string busca. arrays retornam resultado aplicação to_query cada elemento key[] como chave, junta resultado \"&\": hashes tambem respondem to_query diferença. passar argumento chamada gera série ordenada chaves/valores atribuídas chamando to_query(key) seus valores. seguida, resultado mesclado \"&\": método hash#to_query aceita espaço nomear chaves:"},{"id":57,"title":"Active Support Core Extensions","heading":"2 Extensões para todos os objetos","subheading":"2.10 with_options","content":"método with_options fornece meio agrupar opções comuns série chamada métodos. dado opções default hash, with_options objeto \"ponte\" bloco. dentro bloco, métodos chamados objeto encaminhados receptor suas opções mescladas. exemplo, você livra duplicação desta forma: essa expressão pode transmitir agrupamento leitor também. exemplo, digamos você queira enviar boletim informativo cujo idioma depende usuário. algum lugar mailer você poderá agrupar receptores localidade como exemplo:"},{"id":58,"title":"Active Support Core Extensions","heading":"2 Extensões para todos os objetos","subheading":"2.11 Suporte ao JSON","content":"active support fornece melhor implementação to_json json normalmente fornece objetos ruby. isso porque algumas classes, como hash, orderedhash process::status precisam manipulações especiais fornecer representação json adequada."},{"id":59,"title":"Active Support Core Extensions","heading":"2 Extensões para todos os objetos","subheading":"2.12 Variáveis de Instância","content":"active support fornece vários métodos facilitar acesso variáveis instância. método instance_values retorna hash mapeia variáveis instância nomes seus valores correspondentes. chaves strings: método instance_variable_names retorna array. cada nome inclui sinal \"@\"."},{"id":60,"title":"Active Support Core Extensions","heading":"2 Extensões para todos os objetos","subheading":"2.13 Silenciando Warnings e Exceções","content":"métodos silence_warnings enable_warnings trocam valor $verbose acordo duração bloco, reiniciam depois: silenciar exceções também possível suppress. este método recebe número arbitrário classes exceção. exceção acionada durante execução bloco kind_of? qualquer argumentos, suppress captura retorna silenciosamente. caso contrário, exceção capturada:"},{"id":61,"title":"Active Support Core Extensions","heading":"2 Extensões para todos os objetos","subheading":"2.14 in?","content":"expressão testa objeto incluído outro objeto. exceção argumenterror será acionada argumento passado responder include?. exemplos in?:"},{"id":62,"title":"Active Support Core Extensions","heading":"3 Extensions to Module","subheading":"3.1 Attributes","content":"model attributes have reader, writer, predicate. alias model attribute having corresponding three methods defined shot. other aliasing methods, name first argument, name second (one mnemonic that they same order assignment): when defining attribute class that meant subclassed, name collisions risk. that's remarkably important libraries. active support defines macros attr_internal_reader, attr_internal_writer, attr_internal_accessor. they behave like their ruby built-in attr_* counterparts, except they name underlying instance variable that makes collisions less likely. macro attr_internal synonym attr_internal_accessor: previous example could case that :log_level does belong public interface library only used development. client code, unaware potential conflict, subclasses defines :log_level. thanks attr_internal there's collision. default internal instance variable named with leading underscore, @_log_level example above. that's configurable module.attr_internal_naming_format though, pass sprintf-like format string with leading somewhere, which where name will placed. default \"@_%s\". rails uses internal attributes spots, examples views: macros mattr_reader, mattr_writer, mattr_accessor same cattr_* macros defined class. fact, cattr_* macros just aliases mattr_* macros. check class attributes. example, dependencies mechanism uses them:"},{"id":63,"title":"Active Support Core Extensions","heading":"3 Extensions to Module","subheading":"3.2 Parents","content":"module_parent method nested named module returns module that contains corresponding constant: module anonymous belongs top-level, module_parent returns object. module_parent_name method nested named module returns fully qualified name module that contains corresponding constant: top-level anonymous modules module_parent_name returns nil. method module_parents calls module_parent receiver upwards until object reached. chain returned array, from bottom top:"},{"id":64,"title":"Active Support Core Extensions","heading":"3 Extensions to Module","subheading":"3.3 Anonymous","content":"module have name: check whether module name with predicate anonymous?: note that being unreachable does imply being anonymous: though anonymous module unreachable definition."},{"id":65,"title":"Active Support Core Extensions","heading":"3 Extensions to Module","subheading":"3.4 Method Delegation","content":"macro delegate offers easy forward methods. let's imagine that users some application have login information user model name other data separate profile model: with that configuration user's name their profile, user.profile.name, could handy still able access such attribute directly: that what delegate does you: shorter, intention more obvious. method must public target. delegate macro accepts several methods: when interpolated into string, option should become expression that evaluates object method delegated typically string symbol. such expression evaluated context receiver: default, delegation raises nomethoderror target exception propagated. that returned instead with :allow_nil option: with :allow_nil call user.name returns user profile. option :prefix adds prefix name generated method. this handy example better name: previous example generates address_street rather than street. custom prefix also configured: previous example macro generates avatar_size rather than size. option :private changes methods scope: delegated methods public default. pass private: true change that. imagine would like delegate everything missing from user object, profile one. delegate_missing_to macro lets implement this breeze: target anything callable within object, e.g. instance variables, methods, constants, etc. only public methods target delegated."},{"id":66,"title":"Active Support Core Extensions","heading":"3 Extensions to Module","subheading":"3.5 Redefining Methods","content":"there cases where need define method with define_method, don't know whether method with that name already exists. does, warning issued they enabled. deal, clean either. method redefine_method prevents such potential warning, removing existing method before needed. also silence_redefinition_of_method need define replacement method yourself (because you're using delegate, example)."},{"id":67,"title":"Active Support Core Extensions","heading":"4 Extensions to Class","subheading":"4.1 Class Attributes","content":"method class_attribute declares more inheritable class attributes that overridden level down hierarchy. example actionmailer::base defines: they also accessed overridden instance level. generation writer instance method prevented setting option :instance_writer false. model find that option useful prevent mass-assignment from setting attribute. generation reader instance method prevented setting option :instance_reader false. convenience class_attribute also defines instance predicate which double negation what instance reader returns. examples above would called when :instance_reader false, instance predicate returns nomethoderror just like reader method. want instance predicate, pass instance_predicate: false will defined. macros cattr_reader, cattr_writer, cattr_accessor analogous their attr_* counterparts classes. they initialize class variable unless already exists, generate corresponding class methods access also, pass block cattr_* attribute with default value: instance methods created well convenience, they just proxies class attribute. instances change class attribute, cannot override happens with class_attribute (see above). example given access field_error_proc views. generation reader instance method prevented setting :instance_reader false generation writer instance method prevented setting :instance_writer false. generation both methods prevented setting :instance_accessor false. cases, value must exactly false false value. model find useful :instance_accessor false prevent mass-assignment from setting attribute."},{"id":68,"title":"Active Support Core Extensions","heading":"4 Extensions to Class","subheading":"4.2 Subclasses & Descendants","content":"subclasses method returns subclasses receiver: order which these classes returned unspecified. descendants method returns classes that than receiver: order which these classes returned unspecified."},{"id":69,"title":"Active Support Core Extensions","heading":"5 Extensions to String","subheading":"5.1 Output Safety","content":"inserting data into html templates needs extra care. example, can't just interpolate @review.title verbatim into html page. thing, review title \"flanagan matz rules!\" output won't well-formed because ampersand escaped \"&amp;\". what's more, depending application, that security hole because users inject malicious html setting hand-crafted review title. check section about cross-site scripting security guide further information about risks. active support concept (html) safe strings. safe string that marked being insertable into html trusted, matter whether been escaped not. strings considered unsafe default: obtain safe string from given with html_safe method: important understand that html_safe performs escaping whatsoever, just assertion: your responsibility ensure calling html_safe particular string fine. append onto safe string, either in-place with concat/<<, with result safe string. unsafe arguments escaped: safe arguments directly appended: these methods should used ordinary views. unsafe values automatically escaped: insert something verbatim helper rather than calling html_safe: equivalently, <%==: helper calls html_safe you: rule thumb, except perhaps concatenation explained above, method that change string gives unsafe string. these downcase, gsub, strip, chomp, underscore, etc. case in-place transformations like gsub! receiver itself becomes unsafe. calling to_s safe string returns safe string, coercion with to_str returns unsafe string. calling clone safe strings yields safe strings."},{"id":70,"title":"Active Support Core Extensions","heading":"5 Extensions to String","subheading":"5.2 remove","content":"method remove will remove occurrences pattern: there's also destructive version string#remove!."},{"id":71,"title":"Active Support Core Extensions","heading":"5 Extensions to String","subheading":"5.3 squish","content":"method squish strips leading trailing whitespace, substitutes runs whitespace with single space each: there's also destructive version string#squish!. note that handles both ascii unicode whitespace."},{"id":72,"title":"Active Support Core Extensions","heading":"5 Extensions to String","subheading":"5.4 truncate","content":"method truncate returns copy receiver truncated after given length: ellipsis customized with :omission option: note particular that truncation takes into account length omission string. pass :separator truncate string natural break: option :separator regexp: above examples \"dear\" gets first, then :separator prevents"},{"id":73,"title":"Active Support Core Extensions","heading":"5 Extensions to String","subheading":"5.5 truncate_bytes","content":"method truncate_bytes returns copy receiver truncated most bytesize bytes: ellipsis customized with :omission option:"},{"id":74,"title":"Active Support Core Extensions","heading":"5 Extensions to String","subheading":"5.6 truncate_words","content":"method truncate_words returns copy receiver truncated after given number words: ellipsis customized with :omission option: pass :separator truncate string natural break: option :separator regexp:"},{"id":75,"title":"Active Support Core Extensions","heading":"5 Extensions to String","subheading":"5.7 inquiry","content":"inquiry method converts string into stringinquirer object making equality checks prettier."},{"id":76,"title":"Active Support Core Extensions","heading":"5 Extensions to String","subheading":"5.8 starts_with? and ends_with?","content":"active support defines person aliases string#start_with? string#end_with?:"},{"id":77,"title":"Active Support Core Extensions","heading":"5 Extensions to String","subheading":"5.9 strip_heredoc","content":"method strip_heredoc strips indentation heredocs. example user would usage message aligned against left margin. technically, looks least indented line whole string, removes that amount leading whitespace."},{"id":78,"title":"Active Support Core Extensions","heading":"5 Extensions to String","subheading":"5.10 indent","content":"indents lines receiver: second argument, indent_string, specifies which indent string use. default nil, which tells method make educated guess peeking first indented line, fallback space there none. while indent_string typically space tab, string. third argument, indent_empty_lines, flag that says whether empty lines should indented. default false. indent! method performs indentation in-place."},{"id":79,"title":"Active Support Core Extensions","heading":"5 Extensions to String","subheading":"5.11 Access","content":"returns character string position position: returns substring string starting position position: returns substring string position position: call str.first(n) equivalent str.to(n-1) returns empty string call str.last(n) equivalent str.from(-n) returns empty string"},{"id":80,"title":"Active Support Core Extensions","heading":"5 Extensions to String","subheading":"5.12 Inflections","content":"method pluralize returns plural receiver: previous example shows, active support knows some irregular plurals uncountable nouns. built-in rules extended config/initializers/inflections.rb. this file generated default, rails command instructions comments. pluralize also take optional count parameter. count singular form will returned. other value count plural form will returned: active record uses this method compute default table name that corresponds model: inverse pluralize: associations compute name corresponding default associated class using this method: method camelize returns receiver camel case: rule thumb think this method that transforms paths into ruby class module names, where slashes separate namespaces: example, action pack uses this method load class that provides certain session store: camelize accepts optional argument, :upper (default), :lower. with latter first letter becomes lowercase: that handy compute method names language that follows that convention, example javascript. camelize aliased camelcase. method underscore goes other around, from camel case paths: also converts \"::\" back \"/\": understands strings that start with lowercase: underscore accepts argument though. rails class module autoloading uses underscore infer relative path without extension file that would define given missing constant: method titleize capitalizes words receiver: titleize aliased titlecase. method dasherize replaces underscores receiver with dashes: serializer models uses this method dasherize node names: given string with qualified constant name, demodulize returns very constant name, that rightmost part active record example uses this method compute name counter cache column: given string with qualified constant reference expression, deconstantize removes rightmost segment, generally leaving name constant's container: method parameterize normalizes receiver that used pretty urls. preserve case string, preserve_case argument true. default, preserve_case false. custom separator, override separator argument. fact, result string wrapped instance activesupport::multibyte::chars. method tableize underscore followed pluralize. rule thumb, tableize returns table name that corresponds given model simple cases. actual implementation active record straight tableize indeed, because also demodulizes class name checks options that affect returned string. method classify inverse tableize. gives class name corresponding table name: method understands qualified table names: note that classify returns class name string. actual class object invoking constantize explained next. method constantize resolves constant reference expression receiver: string evaluates known constant, content even valid constant name, constantize raises nameerror. constant name resolution constantize starts always top-level object even there leading \"::\". general equivalent what ruby would same spot, real constant evaluated. mailer test cases obtain mailer being tested from name test class using constantize: method humanize tweaks attribute name display users. specifically performs these transformations: capitalization first word turned setting :capitalize option false (default true). \"ssl\" defined acronym: helper method full_messages uses humanize fallback include attribute names: method foreign_key gives foreign column name from class name. demodulizes, underscores, adds \"_id\": pass false argument want underscore \"_id\": associations this method infer foreign keys, example has_one has_many this:"},{"id":81,"title":"Active Support Core Extensions","heading":"5 Extensions to String","subheading":"5.13 Conversions","content":"methods to_date, to_time, to_datetime basically convenience wrappers around date._parse: to_time receives optional argument :utc :local, indicate which time zone want time default :local. please refer documentation date._parse further details."},{"id":82,"title":"Active Support Core Extensions","heading":"6 Extensions to Numeric","subheading":"6.1 Bytes","content":"numbers respond these methods: they return corresponding amount bytes, using conversion factor 1024: singular forms aliased able say:"},{"id":83,"title":"Active Support Core Extensions","heading":"6 Extensions to Numeric","subheading":"6.2 Time","content":"enables time calculations declarations, like 45.minutes 2.hours 4.weeks. these methods time#advance precise date calculations when using from_now, ago, etc. well adding subtracting their results from time object. example:"},{"id":84,"title":"Active Support Core Extensions","heading":"6 Extensions to Numeric","subheading":"6.3 Formatting","content":"enables formatting numbers variety ways. produce string representation number telephone number: produce string representation number currency: produce string representation number percentage: produce string representation number delimited form: produce string representation number rounded precision: produce string representation number human-readable number bytes: produce string representation number human-readable words:"},{"id":85,"title":"Active Support Core Extensions","heading":"7 Extensions to Integer","subheading":"7.1 multiple_of?","content":"method multiple_of? tests whether integer multiple argument:"},{"id":86,"title":"Active Support Core Extensions","heading":"7 Extensions to Integer","subheading":"7.2 ordinal","content":"method ordinal returns ordinal suffix string corresponding receiver integer:"},{"id":87,"title":"Active Support Core Extensions","heading":"7 Extensions to Integer","subheading":"7.3 ordinalize","content":"method ordinalize returns ordinal string corresponding receiver integer. comparison, note that ordinal method returns only suffix string."},{"id":88,"title":"Active Support Core Extensions","heading":"7 Extensions to Integer","subheading":"7.4 Time","content":"enables time calculations declarations, like 4.months 5.years. these methods time#advance precise date calculations when using from_now, ago, etc. well adding subtracting their results from time object. example:"},{"id":89,"title":"Active Support Core Extensions","heading":"8 Extensions to BigDecimal","subheading":"8.1 to_s","content":"method to_s provides default specifier \"f\". this means that simple call to_s will result floating point representation instead engineering notation: that symbol specifiers also supported: engineering notation still supported:"},{"id":90,"title":"Active Support Core Extensions","heading":"9 Extensions to Enumerable","subheading":"9.1 sum","content":"method adds elements enumerable: addition only assumes elements respond empty collection zero default, this customizable: block given, becomes iterator that yields elements collection sums returned values: empty receiver customized this form well:"},{"id":91,"title":"Active Support Core Extensions","heading":"9 Extensions to Enumerable","subheading":"9.2 index_by","content":"method index_by generates hash with elements enumerable indexed some key. iterates through collection passes each element block. element will keyed value returned block:"},{"id":92,"title":"Active Support Core Extensions","heading":"9 Extensions to Enumerable","subheading":"9.3 index_with","content":"method index_with generates hash with elements enumerable keys. value either passed default returned block."},{"id":93,"title":"Active Support Core Extensions","heading":"9 Extensions to Enumerable","subheading":"9.4 many?","content":"method many? shorthand collection.size optional block given, many? only takes into account those elements that return true:"},{"id":94,"title":"Active Support Core Extensions","heading":"9 Extensions to Enumerable","subheading":"9.5 exclude?","content":"predicate exclude? tests whether given object does belong collection. negation built-in include?:"},{"id":95,"title":"Active Support Core Extensions","heading":"9 Extensions to Enumerable","subheading":"9.6 without","content":"method without returns copy enumerable with specified elements removed:"},{"id":96,"title":"Active Support Core Extensions","heading":"9 Extensions to Enumerable","subheading":"9.7 pluck","content":"method pluck returns array based given key:"},{"id":97,"title":"Active Support Core Extensions","heading":"10 Extensions to Array","subheading":"10.1 Accessing","content":"active support augments arrays ease certain ways accessing them. example, returns subarray elements passed index: similarly, from returns tail from element passed index end. index greater than length array, returns empty array. methods second, third, fourth, fifth return corresponding element, second_to_last third_to_last (first last built-in). thanks social wisdom positive constructiveness around, forty_two also available."},{"id":98,"title":"Active Support Core Extensions","heading":"10 Extensions to Array","subheading":"10.2 Extracting","content":"method extract! removes returns elements which block returns true value. block given, enumerator returned instead."},{"id":99,"title":"Active Support Core Extensions","heading":"10 Extensions to Array","subheading":"10.3 Options Extraction","content":"when last argument method call hash, except perhaps &block argument, ruby allows omit brackets: that syntactic sugar used rails avoid positional arguments where there would many, offering instead interfaces that emulate named parameters. particular very idiomatic trailing hash options. method expects variable number arguments uses declaration, however, such options hash ends being item array arguments, where loses role. those cases, give options hash distinguished treatment with extract_options!. this method checks type last item array. hash pops returns otherwise returns empty hash. let's example definition caches_action controller macro: this method receives arbitrary number action names, optional hash options last argument. with call extract_options! obtain options hash remove from actions simple explicit way."},{"id":100,"title":"Active Support Core Extensions","heading":"10 Extensions to Array","subheading":"10.4 Conversions","content":"method to_sentence turns array into string containing sentence that enumerates items: this method accepts three options: defaults these options localized, their keys are: method to_formatted_s acts like to_s default. array contains items that respond however, symbol passed argument. that's typically used with collections active record objects. returned strings are: integers example above supposed come from respective calls method to_xml returns string containing representation receiver: sends to_xml every item turn, collects results under root node. items must respond to_xml, exception raised otherwise. default, name root element underscored dasherized plural name class first item, provided rest elements belong that type (checked with is_a?) they hashes. example above that's \"contributors\". there's element that does belong type first root node becomes \"objects\": receiver array hashes root element default also \"objects\": name children nodes default name root node singularized. examples above we've seen \"contributor\" \"object\". option :children allows these node names. default builder fresh instance builder::xmlmarkup. configure your builder :builder option. method also accepts options like :dasherize friends, they forwarded builder:"},{"id":101,"title":"Active Support Core Extensions","heading":"10 Extensions to Array","subheading":"10.5 Wrapping","content":"method array.wrap wraps argument array unless already array array-like). specifically: this method similar purpose kernel#array, there some differences: last point particularly worth comparing some enumerables: there's also related idiom that uses splat operator:"},{"id":102,"title":"Active Support Core Extensions","heading":"10 Extensions to Array","subheading":"10.6 Duplicating","content":"method array#deep_dup duplicates itself objects inside recursively with active support method object#deep_dup. works like array#map with sending deep_dup method each object inside."},{"id":103,"title":"Active Support Core Extensions","heading":"10 Extensions to Array","subheading":"10.7 Grouping","content":"method in_groups_of splits array into consecutive groups certain size. returns array with groups: yields them turn block passed: first example shows in_groups_of fills last group with many elements needed have requested size. change this padding value using second optional argument: tell method fill last group passing false: consequence false can't used padding value. method in_groups splits array into certain number groups. method returns array with groups: yields them turn block passed: examples above show that in_groups fills some groups with trailing element needed. group most these extra elements, rightmost any. groups that have them always last ones. change this padding value using second optional argument: tell method fill smaller groups passing false: consequence false can't used padding value. method split divides array separator returns resulting chunks. block passed separators those elements array which block returns true: otherwise, value received argument, which defaults nil, separator:"},{"id":104,"title":"Active Support Core Extensions","heading":"11 Extensions to Hash","subheading":"11.1 Conversions","content":"method to_xml returns string containing representation receiver: method loops over pairs builds nodes that depend values. given pair key, value: default root node \"hash\", that's configurable :root option. default builder fresh instance builder::xmlmarkup. configure your builder with :builder option. method also accepts options like :dasherize friends, they forwarded builder."},{"id":105,"title":"Active Support Core Extensions","heading":"11 Extensions to Hash","subheading":"11.2 Merging","content":"ruby built-in method hash#merge that merges hashes: active support defines more ways merging hashes that convenient. case collision hash argument wins merge. support option hashes with default values compact with this idiom: active support defines reverse_merge case prefer this alternative notation: bang version reverse_merge! that performs merge place: method reverse_update alias reverse_merge!, explained above. previous example found both hashes value argument wins. active support defines hash#deep_merge. deep merge, found both hashes their values hashes turn, then their merge becomes value resulting hash: method deep_merge! performs deep merge place."},{"id":106,"title":"Active Support Core Extensions","heading":"11 Extensions to Hash","subheading":"11.3 Deep duplicating","content":"method hash#deep_dup duplicates itself keys values inside recursively with active support method object#deep_dup. works like enumerator#each_with_object with sending deep_dup method each pair inside."},{"id":107,"title":"Active Support Core Extensions","heading":"11 Extensions to Hash","subheading":"11.4 Working with Keys","content":"method except returns hash with keys argument list removed, present: receiver responds convert_key, method called each arguments. this allows except play nice with hashes with indifferent access instance: there's also bang variant except! that removes keys very receiver. method stringify_keys returns hash that stringified version keys receiver. does sending to_s them: case collision, value will most recently inserted into hash: this method useful example easily accept both symbols strings options. instance actionview::helpers::formhelper defines: second line safely access \"type\" key, user pass either :type \"type\". there's also bang variant stringify_keys! that stringifies keys very receiver. besides that, deep_stringify_keys deep_stringify_keys! stringify keys given hash hashes nested into example result method symbolize_keys returns hash that symbolized version keys receiver, where possible. does sending to_sym them: case collision, value will most recently inserted into hash: this method useful example easily accept both symbols strings options. instance actioncontroller::urlrewriter defines second line safely access :params key, user pass either :params \"params\". there's also bang variant symbolize_keys! that symbolizes keys very receiver. besides that, deep_symbolize_keys deep_symbolize_keys! symbolize keys given hash hashes nested into example result methods to_options to_options! respectively aliases symbolize_keys symbolize_keys!. method assert_valid_keys receives arbitrary number arguments, checks whether receiver outside that white list. does argumenterror raised. active record does accept unknown options when building associations, example. implements that control assert_valid_keys."},{"id":108,"title":"Active Support Core Extensions","heading":"11 Extensions to Hash","subheading":"11.5 Working with Values","content":"method deep_transform_values returns hash with values converted block operation. this includes values from root hash from nested hashes arrays. there's also bang variant deep_transform_values! that destructively converts values using block operation."},{"id":109,"title":"Active Support Core Extensions","heading":"11 Extensions to Hash","subheading":"11.6 Slicing","content":"method slice! replaces hash with only given keys returns hash containing removed key/value pairs."},{"id":110,"title":"Active Support Core Extensions","heading":"11 Extensions to Hash","subheading":"11.7 Extracting","content":"method extract! removes returns key/value pairs matching given keys. method extract! returns same subclass hash, that receiver"},{"id":111,"title":"Active Support Core Extensions","heading":"11 Extensions to Hash","subheading":"11.8 Indifferent Access","content":"method with_indifferent_access returns activesupport::hashwithindifferentaccess receiver:"},{"id":112,"title":"Active Support Core Extensions","heading":"12 Extensions to Regexp","subheading":"12.1 multiline?","content":"method multiline? says whether regexp flag set, that whether matches newlines. rails uses this method single place, also routing code. multiline regexps disallowed route requirements this flag eases enforcing that constraint."},{"id":113,"title":"Active Support Core Extensions","heading":"13 Extensions to Range","subheading":"13.1 to_s","content":"active support extends method range#to_s that understands optional format argument. this writing only supported non-default format :db: example depicts, format generates between clause. that used active record support range values conditions."},{"id":114,"title":"Active Support Core Extensions","heading":"13 Extensions to Range","subheading":"13.2 ===, include?, and cover?","content":"methods range#===, range#include?, range#cover? whether some value falls between ends given instance: active support extends these methods that argument another range turn. that case test whether ends argument range belong receiver themselves:"},{"id":115,"title":"Active Support Core Extensions","heading":"13 Extensions to Range","subheading":"13.3 overlaps?","content":"method range#overlaps? says whether given ranges have non-void intersection:"},{"id":116,"title":"Active Support Core Extensions","heading":"14 Extensions to Date","subheading":"14.1 Calculations","content":"active support defines date.current today current time zone. that's like date.today, except that honors user time zone, defined. also defines date.yesterday date.tomorrow, instance predicates past?, today?, future?, on_weekday? on_weekend?, them relative date.current. when making date comparisons using methods which honor user time zone, make sure date.current date.today. there cases where user time zone might future compared system time zone, which date.today uses default. this means date.today equal date.yesterday. methods beginning_of_week end_of_week return dates beginning week, respectively. weeks assumed start monday, that changed passing argument, setting thread local date.beginning_of_week config.beginning_of_week. beginning_of_week aliased at_beginning_of_week end_of_week aliased at_end_of_week. methods monday sunday return dates previous monday next sunday, respectively. method next_week receives symbol with name english (default thread local date.beginning_of_week, config.beginning_of_week, :monday) returns date corresponding that day. method prev_week analogous: prev_week aliased last_week. both next_week prev_week work expected when date.beginning_of_week config.beginning_of_week set. methods beginning_of_month end_of_month return dates beginning month: beginning_of_month aliased at_beginning_of_month, end_of_month aliased at_end_of_month. methods beginning_of_quarter end_of_quarter return dates beginning quarter receiver's calendar year: beginning_of_quarter aliased at_beginning_of_quarter, end_of_quarter aliased at_end_of_quarter. methods beginning_of_year end_of_year return dates beginning year: beginning_of_year aliased at_beginning_of_year, end_of_year aliased at_end_of_year. method years_ago receives number years returns same date those many years ago: years_since moves forward time: such does exist, last corresponding month returned: last_year short-hand #years_ago(1). methods months_ago months_since work analogously months: such does exist, last corresponding month returned: last_month short-hand #months_ago(1). method weeks_ago works analogously weeks: most generic jump other days advance. this method receives hash with keys :years, :months, :weeks, :days, returns date advanced much present keys indicate: note previous example that increments negative. perform computation method first increments years, then months, then weeks, finally days. this order important towards months. example february 2010, want move month forward. method advance advances first month, then day, result while other around result would different: method change allows date which same receiver except given year, month, day: this method tolerant non-existing dates, change invalid argumenterror raised: durations added subtracted from dates: they translate calls since advance. example here correct jump calendar reform: method beginning_of_day returns timestamp beginning (00:00:00): method end_of_day returns timestamp (23:59:59): beginning_of_day aliased at_beginning_of_day, midnight, at_midnight. method beginning_of_hour returns timestamp beginning hour (hh:00:00): method end_of_hour returns timestamp hour (hh:59:59): beginning_of_hour aliased at_beginning_of_hour. method beginning_of_minute returns timestamp beginning minute (hh:mm:00): method end_of_minute returns timestamp minute (hh:mm:59): beginning_of_minute aliased at_beginning_of_minute. method receives number seconds argument returns timestamp those many seconds from midnight: similarly, since moves forward:"},{"id":117,"title":"Active Support Core Extensions","heading":"14 Extensions to Date","subheading":"14.2 Conversions","content":""},{"id":118,"title":"Active Support Core Extensions","heading":"15 Extensions to DateTime","subheading":"15.1 Calculations","content":"class datetime subclass date loading active_support/core_ext/date/calculations.rb inherit these methods their aliases, except that they will always return datetimes. following methods reimplemented need load active_support/core_ext/date/calculations.rb these ones: other hand, advance change also defined support more options, they documented below. following methods only implemented active_support/core_ext/date_time/calculations.rb they only make sense when used with datetime instance: active support defines datetime.current like time.now.to_datetime, except that honors user time zone, defined. also defines datetime.yesterday datetime.tomorrow, instance predicates past?, future? relative datetime.current. method seconds_since_midnight returns number seconds since midnight: method gives same datetime receiver expressed utc. this method also aliased getutc. predicate utc? says whether receiver time zone: most generic jump another datetime advance. this method receives hash with keys :years, :months, :weeks, :days, :hours, :minutes, :seconds, returns datetime advanced much present keys indicate. this method first computes destination date passing :years, :months, :weeks, :days date#advance documented above. after that, adjusts time calling since with number seconds advance. this order relevant, different ordering would give different datetimes some edge-cases. example date#advance applies, extend show order relevance related time bits. first move date bits (that have also relative order processing, documented before), then time bits example following computation: computed them other around, result would different: method change allows datetime which same receiver except given options, which include :year, :month, :day, :hour, :min, :sec, :offset, :start: hours zeroed, then minutes seconds (unless they have given values): similarly, minutes zeroed, then seconds (unless given value): this method tolerant non-existing dates, change invalid argumenterror raised: durations added subtracted from datetimes: they translate calls since advance. example here correct jump calendar reform:"},{"id":119,"title":"Active Support Core Extensions","heading":"16 Extensions to Time","subheading":"16.1 Calculations","content":"they analogous. please refer their documentation above take into account following differences: active support defines time.current today current time zone. that's like time.now, except that honors user time zone, defined. also defines instance predicates past?, today?, future?, them relative time.current. when making time comparisons using methods which honor user time zone, make sure time.current instead time.now. there cases where user time zone might future compared system time zone, which time.now uses default. this means time.now.to_date equal date.yesterday. method all_day returns range representing whole current time. analogously, all_week, all_month, all_quarter all_year serve purpose generating time ranges. prev_day next_day return time last next day: prev_month next_month return time with same last next month: such does exist, last corresponding month returned: prev_year next_year return time with same day/month last next year: date 29th february leap year, obtain 28th: prev_quarter next_quarter return date with same previous next quarter: such does exist, last corresponding month returned: prev_quarter aliased last_quarter."},{"id":120,"title":"Active Support Core Extensions","heading":"16 Extensions to Time","subheading":"16.2 Time Constructors","content":"active support defines time.current time.zone.now there's user time zone defined, with fallback time.now: analogously datetime, predicates past?, future? relative time.current. time constructed lies beyond range supported time runtime platform, usecs discarded datetime object returned instead. durations added subtracted from time objects: they translate calls since advance. example here correct jump calendar reform:"},{"id":121,"title":"Active Support Core Extensions","heading":"17 Extensions to File","subheading":"17.1 atomic_write","content":"with class method file.atomic_write write file that will prevent reader from seeing half-written content. name file passed argument, method yields file handle opened writing. once block done atomic_write closes file handle completes job. example, action pack uses this method write asset cache files like all.css: accomplish this atomic_write creates temporary file. that's file code block actually writes completion, temporary file renamed, which atomic operation posix systems. target file exists atomic_write overwrites keeps owners permissions. however there cases where atomic_write cannot change file ownership permissions, this error caught skipped over trusting user/filesystem ensure file accessible processes that need auxiliary file written standard directory temporary files, pass directory your choice second argument."},{"id":122,"title":"Active Support Core Extensions","heading":"18 Extensions to Marshal","subheading":"18.1 load","content":"active support adds constant autoloading support load. example, file cache store deserializes this way: cached data refers constant that unknown that point, autoloading mechanism triggered succeeds deserialization retried transparently. active support adds missing_name? nameerror, which tests whether exception raised because name passed argument. name given symbol string. symbol tested against bare constant name, string against fully qualified constant name. example, when action articlescontroller called rails tries optimistically articleshelper. that helper module does exist, exception that constant name raised should silenced. could case that articles_helper.rb raises nameerror actual unknown constant. that should reraised. method missing_name? provides distinguish both cases: active support adds is_missing? loaderror. given path name is_missing? tests whether exception raised that particular file (except perhaps \".rb\" extension). example, when action articlescontroller called rails tries load articles_helper.rb, that file exist. that's fine, helper module mandatory rails silences load error. could case that helper module does exist turn requires another library that missing. that case rails must reraise exception. method is_missing? provides distinguish both cases: você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":123,"title":"Action Cable Overview","heading":"1 Introdução","subheading":"1 Introdução","content":"action cable integra-se perfeitamente websockets resto aplicação rails. permite recursos tempo real sejam escritos ruby mesmo estilo forma resto aplicação rails, mesmo tempo possui desempenho escabilidade. isso oferta full-stack fornece framework javascript lado cliente (client-side) framework ruby lado servidor (server-side). você acesso model domínio completo escrito active record escolha. single action cable server handle multiple connection instances. connection instance websocket connection. single user have multiple websockets open your application they multiple browser tabs devices. client websocket connection called consumer. each consumer turn subscribe multiple cable channels. each channel encapsulates logical unit work, similar what controller does regular setup. example, could have chatchannel appearanceschannel, consumer could subscribed either both these channels. very least, consumer should subscribed channel. when consumer subscribed channel, they subscriber. connection between subscriber channel surprise-surprise, called subscription. consumer subscriber given channel number times. example, consumer could subscribe multiple chat rooms same time. (and remember that physical user have multiple consumers, tab/device open your connection). each channel then again streaming zero more broadcastings. broadcasting pubsub link where anything transmitted broadcaster sent directly channel subscribers streaming that named broadcasting. see, this fairly deep architectural stack. there's terminology identify pieces, that, you're dealing with both client server side reflections each unit. pub/sub, publish-subscribe, refere-se paradigma fila mensageria qual remetentes informação (publishers) enviam dados classe abstrata destinatários (subscribers) especificar destinatário individual. action cable utiliza essa abordagem manter comunicação entre servidor diversos clientes."},{"id":124,"title":"Action Cable Overview","heading":"4 Componentes Server-Side","subheading":"4.1 Connections","content":"connections formam fundação relacionamento cliente-servidor. cada websocket aceito pelo servidor, objeto connection instanciado. esse objeto torna todos channel subscriptions criados dali frente. connection lida nenhuma lógica específica aplicação além autenticação autorização. cliente websocket connection chamado consumer. usuário individual criará consumer-connection cada navegador, janela dispositivo tiver aberto. connections instâncias applicationcable::connection. nessa classe, você autoriza connection recebida procede estabelecê-la, caso usuário possa identificado. aqui, identified_by identificador connection pode usado encontrar connection específica mais tarde. note qualquer coisa marcada como identificador criará automaticamente delegate pelo mesmo nome qualquer instância channel criada partir connection. esse exemplo baseia fato você lidou autenticação usuário algum outro lugar aplicação essa autenticação sucedida definiu cookie assinado usuário. cookie então enviado automaticamente instância connection quando tentativa criar nova connection, você definir current_user. identificar connection mesmo usuário, você também garante você pode retornar todas connections aberto usuário específico potencialmente desconectá-los, caso usuário seja deletado desautorizado)."},{"id":125,"title":"Action Cable Overview","heading":"4 Componentes Server-Side","subheading":"4.2 Channels","content":"channel encapsula unidade lógica trabalho, parecido controller comum. padrão, rails cria classe applicationcable::channel encapsular lógica compartilhada entre seus channels. então, você criaria suas próprias classes channel. exemplo, você poderia chatchannel appearancechannel: consumer poderia então inscrito qualquer ambos channels. consumers inscrevem channels, agindo como subscribers. connection deles chamada subscription. mensagens produzidas então roteadas esses channel subscriptions baseados identificador enviado pelo cable consumer."},{"id":126,"title":"Action Cable Overview","heading":"5 Componentes Client-Side","subheading":"5.1 Conexões","content":"consumidores precisam instância conexão lado. esta conexão pode estabelecida usando seguinte javascript, gerado padrão pelo rails: isto preparar consumidor conectará /cable servidor padrão. conexão estabelecida você também tenha especificado menos inscrição você interesse ter. consumidor pode optar receber argumento especifica conectar. pode string, função retorna string chamada quando websocket aberto. consumidor torna assinante criando assinatura canal: enquanto isto cria assinatura, funcionalidade necessária responder dados recebidos será descrita mais tarde. consumidor pode agir como assinante dado canal qualquer número vezes. exemplo, consumidor pode assinar várias salas chat mesmo tempo."},{"id":127,"title":"Action Cable Overview","heading":"6 Client-Server Interactions","subheading":"6.1 Streams","content":"streams provide mechanism which channels route published content (broadcasts) their subscribers. have stream that related model, then broadcasting used generated from model channel. following example would subscribe broadcasting like comments:z2lkoi8vvgvzdefwcc9qb3n0lze then broadcast this channel like this:"},{"id":128,"title":"Action Cable Overview","heading":"6 Client-Server Interactions","subheading":"6.2 Broadcasting","content":"broadcasting pub/sub link where anything transmitted publisher routed directly channel subscribers streaming that named broadcasting. each channel streaming zero more broadcastings. broadcastings purely online queue time-dependent. consumer streaming (subscribed given channel), they'll broadcast should they connect later. broadcasts called elsewhere your rails application: webnotificationschannel.broadcast_to call places message current subscription adapter's pubsub queue under separate broadcasting name each user. default pubsub queue action cable redis production async development test environments. user with broadcasting name would web_notifications:1. channel been instructed stream everything that arrives web_notifications:1 directly client invoking received callback."},{"id":129,"title":"Action Cable Overview","heading":"6 Client-Server Interactions","subheading":"6.3 Subscriptions","content":"when consumer subscribed channel, they subscriber. this connection called subscription. incoming messages then routed these channel subscriptions based identifier sent cable consumer."},{"id":130,"title":"Action Cable Overview","heading":"6 Client-Server Interactions","subheading":"6.4 Passing Parameters to Channels","content":"pass parameters from client side server side when creating subscription. example: object passed first argument subscriptions.create becomes params hash cable channel. keyword channel required:"},{"id":131,"title":"Action Cable Overview","heading":"6 Client-Server Interactions","subheading":"6.5 Rebroadcasting a Message","content":"common case rebroadcast message sent client other connected clients. rebroadcast will received connected clients, including client that sent message. note that params same they were when subscribed channel. following setup steps common both examples:"},{"id":132,"title":"Action Cable Overview","heading":"7 Full-Stack Examples","subheading":"7.1 Example 1: User Appearances","content":"here's simple example channel that tracks whether user online what page they're (this useful creating presence features like showing green next user name they're online). create server-side appearance channel: when subscription initiated subscribed callback gets fired take that opportunity \"the current user indeed appeared\". that appear/disappear could backed redis, database, whatever else. create client-side appearance channel subscription:"},{"id":133,"title":"Action Cable Overview","heading":"7 Full-Stack Examples","subheading":"7.2 Example 2: Receiving New Web Notifications","content":"appearance example about exposing server functionality client-side invocation over websocket connection. great thing about websockets that it's two-way street. let's show example where server invokes action client. this notification channel that allows trigger client-side notifications when broadcast right streams: create server-side notifications channel: create client-side notifications channel subscription: broadcast content notification channel instance from elsewhere your application: webnotificationschannel.broadcast_to call places message current subscription adapter's pubsub queue under separate broadcasting name each user. user with broadcasting name would web_notifications:1. channel been instructed stream everything that arrives web_notifications:1 directly client invoking received callback. data passed argument hash sent second parameter server-side broadcast call, json encoded trip across wire unpacked data argument arriving received."},{"id":134,"title":"Action Cable Overview","heading":"7 Full-Stack Examples","subheading":"7.3 More Complete Examples","content":"rails/actioncable-examples repository full example setup action cable rails adding channels. action cable required configurations: subscription adapter allowed request origins."},{"id":135,"title":"Action Cable Overview","heading":"8 Configuration","subheading":"8.1 Subscription Adapter","content":"default, action cable looks configuration file config/cable.yml. file must specify adapter each rails environment. dependencies section additional information adapters. below list subscription adapters available users. async adapter intended development/testing should used production. redis adapter requires users provide pointing redis server. additionally, channel_prefix provided avoid channel name collisions when using same redis server multiple applications. redis pubsub documentation more details. postgresql adapter uses active record's connection pool, thus application's config/database.yml database configuration, connection. this change future. #27214"},{"id":136,"title":"Action Cable Overview","heading":"8 Configuration","subheading":"8.2 Allowed Request Origins","content":"action cable will only accept requests from specified origins, which passed server config array. origins instances strings regular expressions, against which check match will performed. disable allow requests from origin: default, action cable allows requests from localhost:3000 when running development environment."},{"id":137,"title":"Action Cable Overview","heading":"8 Configuration","subheading":"8.3 Consumer Configuration","content":"configure url, call action_cable_meta_tag your html layout head. this uses path typically config.action_cable.url environment configuration files."},{"id":138,"title":"Action Cable Overview","heading":"8 Configuration","subheading":"8.4 Worker Pool Configuration","content":"worker pool used connection callbacks channel actions isolation from server's main thread. action cable allows application configure number simultaneously processed threads worker pool. also, note that your server must provide least same number database connections have workers. default worker pool size that means have make least database connections available. change that config/database.yml through pool attribute."},{"id":139,"title":"Action Cable Overview","heading":"8 Configuration","subheading":"8.5 Other Configurations","content":"other common option configure tags applied per-connection logger. here's example that uses user account available, else \"no-account\" while tagging: full list configuration options, actioncable::server::configuration class."},{"id":140,"title":"Action Cable Overview","heading":"9 Running Standalone Cable Servers","subheading":"9.1 In App","content":"action cable alongside your rails application. example, listen websocket requests /websocket, specify that path config.action_cable.mount_path: actioncable.createconsumer() connect cable server action_cable_meta_tag invoked layout. otherwise, path specified first argument createconsumer (e.g. actioncable.createconsumer(\"/websocket\")). every instance your server create every worker your server spawns, will also have instance action cable, redis keeps messages synced across connections."},{"id":141,"title":"Action Cable Overview","heading":"9 Running Standalone Cable Servers","subheading":"9.2 Standalone","content":"cable servers separated from your normal application server. it's still rack application, rack application. recommended basic setup follows: then start server using binstub bin/cable ala: above will start cable server port"},{"id":142,"title":"Action Cable Overview","heading":"9 Running Standalone Cable Servers","subheading":"9.3 Notes","content":"websocket server doesn't have access session, access cookies. this used when need handle authentication. doing that with devise this article. action cable fornece interface adaptador assinatura processar seus pubsub internos. padrão, adaptadores assíncronos, inline, postgresql redis estão incluídos. adaptador padrão novas aplicações rails adaptador assíncrono (async). lado ruby coisas construído cima websocket-driver, nio4r concurrent-ruby. action cable alimentado combinação websockets threads. tanto plumbing framework trabalho channel especificado pelo usuário tratados internamente, usando suporte thread nativo ruby. isso significa você pode usar todos seus models rails problemas, contanto você tenha cometido nenhum pecado thread-safety. servidor action cable implementa rack socket hijacking api, permitindo assim padrão multithread gerenciamento conexões internamente, independentemente servidor aplicativos multiencadeado não. assim, action cable funciona servidores populares como unicorn, puma passenger. você pode encontrar instruções detalhadas como testar funcionalidade action cable guia teste. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":143,"title":"Ruby on Rails 4.2 Release Notes","heading":"1 Upgrading to Rails 4.2","subheading":"1 Upgrading to Rails 4.2","content":"you're upgrading existing application, it's great idea have good test coverage before going should also first upgrade rails case haven't make sure your application still runs expected before attempting upgrade rails 4.2. list things watch when upgrading available guide upgrading ruby rails."},{"id":144,"title":"Ruby on Rails 4.2 Release Notes","heading":"2 Major Features","subheading":"2.1 Active Job","content":"active framework rails 4.2. common interface queuing systems like resque, delayed job, sidekiq, more. jobs written with active supported queues thanks their respective adapters. active comes pre-configured with inline runner that executes jobs right away. jobs often need take active record objects arguments. active passes object references uris (uniform resource identifiers) instead marshalling object itself. global library builds uris looks objects they reference. passing active record objects arguments just works using global internally. example, trashable active record object, then this runs just fine with serialization involved: active basics guide more information."},{"id":145,"title":"Ruby on Rails 4.2 Release Notes","heading":"2 Major Features","subheading":"2.2 Asynchronous Mails","content":"building active job, action mailer comes with deliver_later method that sends emails queue, doesn't block controller model queue asynchronous (the default inline queue blocks). sending emails right away still possible with deliver_now."},{"id":146,"title":"Ruby on Rails 4.2 Release Notes","heading":"2 Major Features","subheading":"2.3 Adequate Record","content":"adequate record performance improvements active record that makes common find find_by calls some association queries faster. works caching common queries prepared statements reusing them similar calls, skipping most query-generation work subsequent calls. more details, please refer aaron patterson's blog post. active record will automatically take advantage this feature supported operations without user involvement code changes. here some examples supported operations: it's important highlight that, examples above suggest, prepared statements cache values passed method calls; rather, they have placeholders them. caching used following scenarios:"},{"id":147,"title":"Ruby on Rails 4.2 Release Notes","heading":"2 Major Features","subheading":"2.4 Web Console","content":"applications generated with rails come with console default. console adds interactive ruby console every error page provides console view controller helpers. interactive console error pages lets execute code context place where exception originated. console helper, called anywhere view controller, launches interactive console with final context, once rendering completed."},{"id":148,"title":"Ruby on Rails 4.2 Release Notes","heading":"2 Major Features","subheading":"2.5 Foreign Key Support","content":"migration supports adding removing foreign keys. they dumped schema.rb well. this time, only mysql, mysql2 postgresql adapters support foreign keys. documentation add_foreign_key remove_foreign_key full description. previously deprecated functionality been removed. please refer individual components deprecations this release. following changes require immediate action upon upgrade."},{"id":149,"title":"Ruby on Rails 4.2 Release Notes","heading":"3 Incompatibilities","subheading":"3.1 render with a String Argument","content":"previously, calling render \"foo/bar\" controller action equivalent render file: \"foo/bar\". rails 4.2, this been changed mean render template: \"foo/bar\" instead. need render file, please change your code explicit form (render file: \"foo/bar\") instead."},{"id":150,"title":"Ruby on Rails 4.2 Release Notes","heading":"3 Incompatibilities","subheading":"3.2 respond_with / Class-Level respond_to","content":"respond_with corresponding class-level respond_to have been moved responders gem. 'responders', 2.0' your gemfile instance-level respond_to unaffected:"},{"id":151,"title":"Ruby on Rails 4.2 Release Notes","heading":"3 Incompatibilities","subheading":"3.3 Default Host for rails server","content":"change rack, rails server listens localhost instead 0.0.0.0 default. this should have minimal impact standard development workflow both http://127.0.0.1:3000 http://localhost:3000 will continue work before your machine. however, with this change will longer able access rails server from different machine, example your development environment virtual machine would like access from host machine. such cases, please start server with rails server 0.0.0.0 restore behavior. this, sure configure your firewall properly such that only trusted machines your network access your development server."},{"id":152,"title":"Ruby on Rails 4.2 Release Notes","heading":"3 Incompatibilities","subheading":"3.4 Changed status option symbols for render","content":"change rack, symbols that render method accepts :status option have changed: keep mind that calling render with unknown symbol, response status will default"},{"id":153,"title":"Ruby on Rails 4.2 Release Notes","heading":"3 Incompatibilities","subheading":"3.5 HTML Sanitizer","content":"html sanitizer been replaced with new, more robust, implementation built upon loofah nokogiri. sanitizer more secure sanitization more powerful flexible. algorithm, sanitized output different certain pathological inputs. have particular need exact output sanitizer, rails-deprecated_sanitizer gemfile, have behavior. does issue deprecation warnings because opt-in. rails-deprecated_sanitizer will supported rails only; will maintained rails 5.0. this blog post more details changes sanitizer."},{"id":154,"title":"Ruby on Rails 4.2 Release Notes","heading":"3 Incompatibilities","subheading":"3.6 assert_select","content":"assert_select based nokogiri. result, some previously-valid selectors unsupported. your application using these spellings, will need update them: furthermore substitutions have changed syntax. have :match css-like selector: additionally regexp substitutions look different when assertion fails. notice /hello/ here: becomes \"(?-mix:hello)\": rails testing documentation more assert_select. please refer changelog detailed changes."},{"id":155,"title":"Ruby on Rails 4.2 Release Notes","heading":"4 Railties","subheading":"4.1 Removals","content":""},{"id":156,"title":"Ruby on Rails 4.2 Release Notes","heading":"4 Railties","subheading":"4.2 Deprecations","content":""},{"id":157,"title":"Ruby on Rails 4.2 Release Notes","heading":"4 Railties","subheading":"4.3 Notable changes","content":"please refer changelog detailed changes."},{"id":158,"title":"Ruby on Rails 4.2 Release Notes","heading":"5 Action Pack","subheading":"5.1 Removals","content":""},{"id":159,"title":"Ruby on Rails 4.2 Release Notes","heading":"5 Action Pack","subheading":"5.2 Deprecations","content":""},{"id":160,"title":"Ruby on Rails 4.2 Release Notes","heading":"5 Action Pack","subheading":"5.3 Notable changes","content":"please refer changelog detailed changes."},{"id":161,"title":"Ruby on Rails 4.2 Release Notes","heading":"6 Action View","subheading":"6.1 Deprecations","content":""},{"id":162,"title":"Ruby on Rails 4.2 Release Notes","heading":"6 Action View","subheading":"6.2 Notable changes","content":"please refer changelog detailed changes."},{"id":163,"title":"Ruby on Rails 4.2 Release Notes","heading":"7 Action Mailer","subheading":"7.1 Deprecations","content":""},{"id":164,"title":"Ruby on Rails 4.2 Release Notes","heading":"7 Action Mailer","subheading":"7.2 Notable changes","content":"please refer changelog detailed changes."},{"id":165,"title":"Ruby on Rails 4.2 Release Notes","heading":"8 Active Record","subheading":"8.1 Removals","content":""},{"id":166,"title":"Ruby on Rails 4.2 Release Notes","heading":"8 Active Record","subheading":"8.2 Deprecations","content":""},{"id":167,"title":"Ruby on Rails 4.2 Release Notes","heading":"8 Active Record","subheading":"8.3 Notable changes","content":"please refer changelog detailed changes."},{"id":168,"title":"Ruby on Rails 4.2 Release Notes","heading":"9 Active Model","subheading":"9.1 Removals","content":""},{"id":169,"title":"Ruby on Rails 4.2 Release Notes","heading":"9 Active Model","subheading":"9.2 Deprecations","content":""},{"id":170,"title":"Ruby on Rails 4.2 Release Notes","heading":"9 Active Model","subheading":"9.3 Notable changes","content":"please refer changelog detailed changes."},{"id":171,"title":"Ruby on Rails 4.2 Release Notes","heading":"10 Active Support","subheading":"10.1 Removals","content":""},{"id":172,"title":"Ruby on Rails 4.2 Release Notes","heading":"10 Active Support","subheading":"10.2 Deprecations","content":""},{"id":173,"title":"Ruby on Rails 4.2 Release Notes","heading":"10 Active Support","subheading":"10.3 Notable changes","content":"full list contributors rails many people spent many hours making rails stable robust framework today. kudos them. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":174,"title":"Ruby on Rails 2.3 Release Notes","heading":"1 Application Architecture","subheading":"1 Application Architecture","content":"there major changes architecture rails applications: complete integration rack modular server interface, renewed support rails engines."},{"id":175,"title":"Ruby on Rails 2.3 Release Notes","heading":"1 Application Architecture","subheading":"1.1 Rack Integration","content":"rails broken with past, uses rack everywhere. this required resulted tremendous number internal changes (but cgi, don't worry; rails supports through proxy interface.) still, this major change rails internals. after upgrading 2.3, should test your local environment your production environment. some things test: here's summary rack-related changes:"},{"id":176,"title":"Ruby on Rails 2.3 Release Notes","heading":"1 Application Architecture","subheading":"1.2 Renewed Support for Rails Engines","content":"after some versions without upgrade, rails offers some features rails engines (rails applications that embedded within other applications). first, routing files engines automatically loaded reloaded now, just like your routes.rb file (this also applies routing files other plugins). second, your plugin folder, then app/[models|controllers|helpers] will automatically added rails load path. engines also support adding view paths now, action mailer well action view will views from engines other plugins. ruby rails guides project published several additional guides rails 2.3. addition, separate site maintains updated copies guides edge rails. other documentation efforts include relaunch rails wiki early planning rails book. rails should pass tests whether running ruby now-released ruby 1.9.1. should aware, though, that moving 1.9.1 entails checking data adapters, plugins, other code that depend ruby 1.9.1 compatibility, well rails core. active record gets quite number features fixes rails 2.3. highlights include nested attributes, nested transactions, dynamic default scopes, batch processing."},{"id":177,"title":"Ruby on Rails 2.3 Release Notes","heading":"4 Active Record","subheading":"4.1 Nested Attributes","content":"active record update attributes nested models directly, provided tell turning nested attributes enables number things: automatic (and atomic) saving record together with associated children, child-aware validations, support nested forms (discussed later). also specify requirements records that added nested attributes using :reject_if option:"},{"id":178,"title":"Ruby on Rails 2.3 Release Notes","heading":"4 Active Record","subheading":"4.2 Nested Transactions","content":"active record supports nested transactions, much-requested feature. write code like this: nested transactions roll back inner transaction without affecting state outer transaction. want transaction nested, must explicitly :requires_new option; otherwise, nested transaction simply becomes part parent transaction does currently rails 2.2). under covers, nested transactions using savepoints they're supported even databases that don't have true nested transactions. there also magic going make these transactions play well with transactional fixtures during testing."},{"id":179,"title":"Ruby on Rails 2.3 Release Notes","heading":"4 Active Record","subheading":"4.3 Dynamic Scopes","content":"know about dynamic finders rails (which allow concoct methods like find_by_color_and_flavor fly) named scopes (which allow encapsulate reusable query conditions into friendly names like currently_active). well, have dynamic scope methods. idea together syntax that allows filtering method chaining. example: there's nothing define dynamic scopes: they just work."},{"id":180,"title":"Ruby on Rails 2.3 Release Notes","heading":"4 Active Record","subheading":"4.4 Default Scopes","content":"rails will introduce notion default scopes similar named scopes, applying named scopes find methods within model. example, write default_scope :order 'name asc' time retrieve records from that model they'll come sorted name (unless override option, course)."},{"id":181,"title":"Ruby on Rails 2.3 Release Notes","heading":"4 Active Record","subheading":"4.5 Batch Processing","content":"process large numbers records from active record model with less pressure memory using find_in_batches: pass most find options into find_in_batches. however, cannot specify order that records will returned (they will always returned ascending order primary key, which must integer), :limit option. instead, :batch_size option, which defaults 1000, number records that will returned each batch. find_each method provides wrapper around find_in_batches that returns individual records, with find itself being done batches default): note that should only this method batch processing: small numbers records (less than 1000), should just regular find methods with your loop."},{"id":182,"title":"Ruby on Rails 2.3 Release Notes","heading":"4 Active Record","subheading":"4.6 Multiple Conditions for Callbacks","content":"when using active record callbacks, combine :unless options same callback, supply multiple conditions array:"},{"id":183,"title":"Ruby on Rails 2.3 Release Notes","heading":"4 Active Record","subheading":"4.7 Find with having","content":"rails :having option find well has_many has_and_belongs_to_many associations) filtering records grouped finds. those with heavy backgrounds know, this allows filtering based grouped results:"},{"id":184,"title":"Ruby on Rails 2.3 Release Notes","heading":"4 Active Record","subheading":"4.8 Reconnecting MySQL Connections","content":"mysql supports reconnect flag connections true, then client will reconnecting server before giving case lost connection. reconnect true your mysql connections database.yml this behavior from rails application. default false, behavior existing applications doesn't change."},{"id":185,"title":"Ruby on Rails 2.3 Release Notes","heading":"4 Active Record","subheading":"4.9 Other Active Record Changes","content":"action controller rolls some significant changes rendering, well improvements routing other areas, this release."},{"id":186,"title":"Ruby on Rails 2.3 Release Notes","heading":"5 Action Controller","subheading":"5.1 Unified Rendering","content":"actioncontroller::base#render smarter about deciding what render. just tell what render expect right results. older versions rails, often need supply explicit information render: rails 2.3, just supply what want render: rails chooses between file, template, action depending whether there leading slash, embedded slash, slash what's rendered. note that also symbol instead string when rendering action. other rendering styles (:inline, :text, :update, :nothing, :json, :xml, :js) still require explicit option."},{"id":187,"title":"Ruby on Rails 2.3 Release Notes","heading":"5 Action Controller","subheading":"5.2 Application Controller Renamed","content":"you're people always been bothered special-case naming application.rb, rejoice! it's been reworked application_controller.rb rails 2.3. addition, there's rake task, rake rails:update:application_controller this automatically will part normal rake rails:update process."},{"id":188,"title":"Ruby on Rails 2.3 Release Notes","heading":"5 Action Controller","subheading":"5.3 HTTP Digest Authentication Support","content":"rails built-in support http digest authentication. call authenticate_or_request_with_http_digest with block that returns user's password (which then hashed compared against transmitted credentials):"},{"id":189,"title":"Ruby on Rails 2.3 Release Notes","heading":"5 Action Controller","subheading":"5.4 More Efficient Routing","content":"there couple significant routing changes rails 2.3. formatted_ route helpers gone, favor just passing :format option. this cuts down route generation process resource save substantial amount memory 100mb large applications). your code uses formatted_ helpers, will still work time being that behavior deprecated your application will more efficient rewrite those routes using standard. another change that rails supports multiple routing files, just routes.rb. routeset#add_configuration_file bring more routes time without clearing currently-loaded routes. while this change most useful engines, application that needs load routes batches."},{"id":190,"title":"Ruby on Rails 2.3 Release Notes","heading":"5 Action Controller","subheading":"5.5 Rack-based Lazy-loaded Sessions","content":"change pushed underpinnings action controller session storage down rack level. this involved good deal work code, though should completely transparent your rails applications bonus, some icky patches around session handler removed). it's still significant, though, simple reason: non-rails rack applications have access same session storage handlers (and therefore same session) your rails applications. addition, sessions lazy-loaded line with loading improvements rest framework). this means that longer need explicitly disable sessions don't want them; just don't refer them they won't load."},{"id":191,"title":"Ruby on Rails 2.3 Release Notes","heading":"5 Action Controller","subheading":"5.6 MIME Type Handling Changes","content":"there couple changes code handling mime types rails. first, mime::type implements operator, making things much cleaner when need check presence type that synonyms: other change that framework uses mime::js when checking javascript various spots, making handle those alternatives cleanly."},{"id":192,"title":"Ruby on Rails 2.3 Release Notes","heading":"5 Action Controller","subheading":"5.7 Optimization of respond_to","content":"some first fruits rails-merb team merger, rails includes some optimizations respond_to method, which course heavily used many rails applications allow your controller format results differently based mime type incoming request. after eliminating call method_missing some profiling tweaking, we're seeing improvement number requests second served with simple respond_to that switches between three formats. best part? change required code your application take advantage this speedup."},{"id":193,"title":"Ruby on Rails 2.3 Release Notes","heading":"5 Action Controller","subheading":"5.8 Improved Caching Performance","content":"rails keeps per-request local cache read from remote cache stores, cutting down unnecessary reads leading better site performance. while this work originally limited memcachestore, available remote store than implements required methods."},{"id":194,"title":"Ruby on Rails 2.3 Release Notes","heading":"5 Action Controller","subheading":"5.9 Localized Views","content":"rails provide localized views, depending locale that have set. example, suppose have posts controller with show action. default, this will render app/views/posts/show.html.erb. i18n.locale :da, will render app/views/posts/show.da.html.erb. localized template isn't present, undecorated version will used. rails also includes i18n#available_locales i18n::simplebackend#available_locales, which return array translations that available current rails project. addition, same scheme localize rescue files public directory: public/500.da.html public/404.en.html work, example."},{"id":195,"title":"Ruby on Rails 2.3 Release Notes","heading":"5 Action Controller","subheading":"5.10 Partial Scoping for Translations","content":"change translation makes things easier less repetitive write translations within partials. call translate(\".foo\") from people/index.html.erb template, you'll actually calling i18n.translate(\"people.index.foo\") don't prepend with period, then doesn't scope, just before."},{"id":196,"title":"Ruby on Rails 2.3 Release Notes","heading":"5 Action Controller","subheading":"5.11 Other Action Controller Changes","content":"action view rails picks nested model forms, improvements render, more flexible prompts date select helpers, speedup asset caching, among other things."},{"id":197,"title":"Ruby on Rails 2.3 Release Notes","heading":"6 Action View","subheading":"6.1 Nested Object Forms","content":"provided parent model accepts nested attributes child objects discussed active record section), create nested forms using form_for field_for. these forms nested arbitrarily deep, allowing edit complex object hierarchies single view without excessive code. example, given this model: write this view rails 2.3:"},{"id":198,"title":"Ruby on Rails 2.3 Release Notes","heading":"6 Action View","subheading":"6.2 Smart Rendering of Partials","content":"render method been getting smarter over years, it's even smarter now. have object collection appropriate partial, naming matches just render object things will work. example, rails 2.3, these render calls will work your view (assuming sensible naming):"},{"id":199,"title":"Ruby on Rails 2.3 Release Notes","heading":"6 Action View","subheading":"6.3 Prompts for Date Select Helpers","content":"rails 2.3, supply custom prompts various date select helpers (date_select, time_select, datetime_select), same with collection select helpers. supply prompt string hash individual prompt strings various components. also just :prompt true custom generic prompt:"},{"id":200,"title":"Ruby on Rails 2.3 Release Notes","heading":"6 Action View","subheading":"6.4 AssetTag Timestamp Caching","content":"you're likely familiar with rails' practice adding timestamps static asset paths \"cache buster.\" this helps ensure that stale copies things like images stylesheets don't served user's browser cache when change them server. modify this behavior with cache_asset_timestamps configuration option action view. enable cache, then rails will calculate timestamp once when first serves asset, save that value. this means fewer (expensive) file system calls serve static assets also means that can't modify assets while server running expect changes picked clients."},{"id":201,"title":"Ruby on Rails 2.3 Release Notes","heading":"6 Action View","subheading":"6.5 Asset Hosts as Objects","content":"asset hosts more flexible edge rails with ability declare asset host specific object that responds call. this allows implement complex logic need your asset hosting."},{"id":202,"title":"Ruby on Rails 2.3 Release Notes","heading":"6 Action View","subheading":"6.6 grouped_options_for_select Helper Method","content":"action view already bunch helpers generating select controls, there's more: grouped_options_for_select. this accepts array hash strings, converts them into string option tags wrapped with optgroup tags. example: returns"},{"id":203,"title":"Ruby on Rails 2.3 Release Notes","heading":"6 Action View","subheading":"6.7 Disabled Option Tags for Form Select Helpers","content":"form select helpers (such select options_for_select) support :disabled option, which take single value array values disabled resulting tags: returns also anonymous function determine runtime which options from collections will selected and/or disabled:"},{"id":204,"title":"Ruby on Rails 2.3 Release Notes","heading":"6 Action View","subheading":"6.8 A Note About Template Loading","content":"rails includes ability enable disable cached templates particular environment. cached templates give speed boost because they don't check template file when they're rendered they also mean that can't replace template fly\" without restarting server. most cases, you'll want template caching turned production, which making setting your production.rb file: this line will generated default rails application. you've upgraded from older version rails, rails will default caching templates production test development."},{"id":205,"title":"Ruby on Rails 2.3 Release Notes","heading":"6 Action View","subheading":"6.9 Other Action View Changes","content":"active support interesting changes, including introduction object#try."},{"id":206,"title":"Ruby on Rails 2.3 Release Notes","heading":"7 Active Support","subheading":"7.1 Object#try","content":"folks have adopted notion using try() attempt operations objects. it's especially helpful views where avoid nil-checking writing code like @person.try(:name) well, it's baked right into rails. implemented rails, raises nomethoderror private methods always returns object nil."},{"id":207,"title":"Ruby on Rails 2.3 Release Notes","heading":"7 Active Support","subheading":"7.2 Object#tap Backport","content":"object#tap addition ruby 1.8.7 that similar returning method that rails while: yields block, then returns object that yielded. rails includes code make this available under older versions ruby well."},{"id":208,"title":"Ruby on Rails 2.3 Release Notes","heading":"7 Active Support","subheading":"7.3 Swappable Parsers for XMLmini","content":"support parsing active support been made more flexible allowing swap different parsers. default, uses standard rexml implementation, easily specify faster libxml nokogiri implementations your applications, provided have appropriate gems installed:"},{"id":209,"title":"Ruby on Rails 2.3 Release Notes","heading":"7 Active Support","subheading":"7.4 Fractional seconds for TimeWithZone","content":"time timewithzone classes include xmlschema method return time xml-friendly string. rails 2.3, timewithzone supports same argument specifying number digits fractional second part returned string that time does:"},{"id":210,"title":"Ruby on Rails 2.3 Release Notes","heading":"7 Active Support","subheading":"7.5 JSON Key Quoting","content":"look spec \"json.org\" site, you'll discover that keys json structure must strings, they must quoted with double quotes. starting with rails 2.3, right thing here, even with numeric keys."},{"id":211,"title":"Ruby on Rails 2.3 Release Notes","heading":"7 Active Support","subheading":"7.6 Other Active Support Changes","content":"addition rack changes covered above, railties (the core code rails itself) sports number significant changes, including rails metal, application templates, quiet backtraces."},{"id":212,"title":"Ruby on Rails 2.3 Release Notes","heading":"8 Railties","subheading":"8.1 Rails Metal","content":"rails metal mechanism that provides superfast endpoints inside your rails applications. metal classes bypass routing action controller give speed cost things action controller, course). this builds recent foundation work make rails rack application with exposed middleware stack. metal endpoints loaded from your application from plugins."},{"id":213,"title":"Ruby on Rails 2.3 Release Notes","heading":"8 Railties","subheading":"8.2 Application Templates","content":"rails incorporates jeremy mcanally's application generator. what this means that have template-based application generation built right into rails; have plugins include every application (among many other cases), just template once over over again when rails command. there's also rake task apply template existing application: this will layer changes from template whatever code project already contains."},{"id":214,"title":"Ruby on Rails 2.3 Release Notes","heading":"8 Railties","subheading":"8.3 Quieter Backtraces","content":"building thoughtbot's quiet backtrace plugin, which allows selectively remove lines from test::unit backtraces, rails implements activesupport::backtracecleaner rails::backtracecleaner core. this supports both filters perform regex-based substitutions backtrace lines) silencers remove backtrace lines entirely). rails automatically adds silencers most common noise application, builds config/backtrace_silencers.rb file hold your additions. this feature also enables prettier printing from backtrace."},{"id":215,"title":"Ruby on Rails 2.3 Release Notes","heading":"8 Railties","subheading":"8.4 Faster Boot Time in Development Mode with Lazy Loading/Autoload","content":"quite work done make sure that bits rails (and dependencies) only brought into memory when they're actually needed. core frameworks active support, active record, action controller, action mailer, action view using autoload lazy-load their individual classes. this work should help keep memory footprint down improve overall rails performance. also specify using preload_frameworks option) whether core libraries should autoloaded startup. this defaults false that rails autoloads itself piece-by-piece, there some circumstances where still need bring everything once passenger jruby both want rails loaded together."},{"id":216,"title":"Ruby on Rails 2.3 Release Notes","heading":"8 Railties","subheading":"8.5 rake gem Task Rewrite","content":"internals various rake tasks have been substantially revised, make system work better variety cases. system knows difference between development runtime dependencies, more robust unpacking system, gives better information when querying status gems, less prone \"chicken egg\" dependency issues when you're bringing things from scratch. there also fixes using commands under jruby dependencies that bring external copies gems that already vendored."},{"id":217,"title":"Ruby on Rails 2.3 Release Notes","heading":"8 Railties","subheading":"8.6 Other Railties Changes","content":"pieces older code deprecated this release: release notes compiled mike gunderloy. this version rails release notes compiled based rails 2.3. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":218,"title":"Testing Rails Applications","heading":"1 Why Write Tests for your Rails Applications?","subheading":"1 Why Write Tests for your Rails Applications?","content":"rails makes super easy write your tests. starts producing skeleton test code while creating your models controllers. running your rails tests ensure your code adheres desired functionality even after some major code refactoring. rails tests also simulate browser requests thus test your application's response without having test through your browser. testing support woven into rails fabric from beginning. wasn't \"oh! let's bolt support running tests because they're cool\" epiphany."},{"id":219,"title":"Testing Rails Applications","heading":"2 Introduction to Testing","subheading":"2.1 Rails Sets up for Testing from the Word Go","content":"rails creates test directory soon create rails project using rails application_name. list contents this directory then shall see: helpers, mailers, models directories meant hold tests view helpers, mailers, models, respectively. channels directory meant hold tests action cable connection channels. controllers directory meant hold tests controllers, routes, views. integration directory meant hold tests interactions between controllers. system test directory holds system tests, which used full browser testing your application. system tests allow test your application your users experience help test your javascript well. system tests inherit from capybara perform browser tests your application. fixtures organizing test data; they reside fixtures directory. jobs directory will also created when associated test first generated. test_helper.rb file holds default configuration your tests. application_system_test_case.rb holds default configuration your system tests."},{"id":220,"title":"Testing Rails Applications","heading":"2 Introduction to Testing","subheading":"2.2 The Test Environment","content":"default, every rails application three environments: development, test, production. each environment's configuration modified similarly. this case, modify test environment changing options found config/environments/test.rb."},{"id":221,"title":"Testing Rails Applications","heading":"2 Introduction to Testing","subheading":"2.3 Rails meets Minitest","content":"remember, used rails generate model command getting started with rails guide. created first model, among other things created test stubs test directory: default test stub test/models/article_test.rb looks like this: line line examination this file will help oriented rails testing code terminology. requiring this file, test_helper.rb default configuration tests loaded. will include this with tests write, methods added this file available tests. articletest class defines test case because inherits from activesupport::testcase. articletest thus methods available from activesupport::testcase. later this guide, we'll some methods gives method defined within class inherited from minitest::test (which superclass activesupport::testcase) that begins with test_ simply called test. methods defined test_password test_valid_password legal test names automatically when test case run. rails also adds test method that takes test name block. generates normal minitest::unit test with method names prefixed with test_. don't have worry about naming methods, write something like: which approximately same writing this: although still regular method definitions, using test macro allows more readable test name. next, let's look first assertion: assertion line code that evaluates object expression) expected results. example, assertion check: every test contain more assertions, with restriction many assertions allowed. only when assertions successful will test pass. test failure reported, failing test article_test.rb test case. this newly added test (where number line where test defined). output, denotes failure. corresponding trace shown under failure along with name failing test. next lines contain stack trace followed message that mentions actual value expected value assertion. default assertion messages provide just enough information help pinpoint error. make assertion failure message more readable, every assertion provides optional message parameter, shown here: running this test shows friendlier assertion message: this test pass model level validation title field. test should pass. verify running test again: now, noticed, first wrote test which fails desired functionality, then wrote some code which adds functionality finally ensured that test passes. this approach software development referred test-driven development (tdd). error gets reported, here's test containing error: even more output console from running tests: notice output. denotes test with error. when test fails presented with corresponding backtrace. default rails filters that backtrace will only print lines relevant your application. this eliminates framework noise helps focus your code. however there situations when want full backtrace. --backtrace) argument enable this behavior: want this test pass modify assert_raises like this test should pass."},{"id":222,"title":"Testing Rails Applications","heading":"2 Introduction to Testing","subheading":"2.4 Available Assertions","content":"you've caught glimpse some assertions that available. assertions worker bees testing. they ones that actually perform checks ensure that things going planned. here's extract assertions with minitest, default testing library used rails. [msg] parameter optional string message specify make your test failure messages clearer. above subset assertions that minitest supports. exhaustive more up-to-date list, please check minitest documentation, specifically minitest::assertions. because modular nature testing framework, possible create your assertions. fact, that's exactly what rails does. includes some specialized assertions make your life easier."},{"id":223,"title":"Testing Rails Applications","heading":"2 Introduction to Testing","subheading":"2.5 Rails Specific Assertions","content":"rails adds some custom assertions minitest framework: you'll usage some these assertions next chapter."},{"id":224,"title":"Testing Rails Applications","heading":"2 Introduction to Testing","subheading":"2.6 A Brief Note About Test Cases","content":"basic assertions such assert_equal defined minitest::assertions also available classes test cases. fact, rails provides following classes inherit from: each these classes include minitest::assertions, allowing basic assertions tests."},{"id":225,"title":"Testing Rails Applications","heading":"2 Introduction to Testing","subheading":"2.7 The Rails Test Runner","content":"tests once using rails test command. single test file passing rails test command filename containing test cases. this will test methods from test case. also particular test method from test case providing --name flag test's method name. also test specific line providing line number. also entire directory tests providing path directory. test runner also provides other features like failing fast, deferring test output test check documentation test runner follows: parallel testing allows parallelize your test suite. while forking processes default method, threading supported well. running tests parallel reduces time takes your entire test suite run."},{"id":226,"title":"Testing Rails Applications","heading":"3 Parallel Testing","subheading":"3.1 Parallel testing with processes","content":"default parallelization method fork processes using ruby's system. processes forked based number workers provided. default number actual core count machine changed number passed parallelize method. enable parallelization following your test_helper.rb: number workers passed number times process will forked. want parallelize your local test suite differently from your environment variable provided able easily change number workers test should use: when parallelizing tests, active record automatically handles creating database loading schema into database each process. databases will suffixed with number corresponding worker. example, have workers tests will create test-database-0 test-database-1 respectively. number workers passed fewer processes will forked tests will parallelized tests will original test-database database. hooks provided, runs when process forked, runs before forked process closed. these useful your uses multiple databases perform other tasks that depend number workers. parallelize_setup method called right after processes forked. parallelize_teardown method called right before processes closed. these methods needed available when using parallel testing with threads."},{"id":227,"title":"Testing Rails Applications","heading":"3 Parallel Testing","subheading":"3.2 Parallel testing with threads","content":"prefer using threads using jruby, threaded parallelization option provided. threaded parallelizer backed minitest's parallel::executor. change parallelization method threads over forks following your test_helper.rb rails applications generated from jruby will automatically include with: :threads option. number workers passed parallelize determines number threads tests will use. want parallelize your local test suite differently from your environment variable provided able easily change number workers test should use: just about every rails application interacts heavily with database and, result, your tests will need database interact with well. write efficient tests, you'll need understand this database populate with sample data. default, every rails application three environments: development, test, production. database each them configured config/database.yml. dedicated test database allows interact with test data isolation. this your tests mangle test data with confidence, without worrying about data development production databases."},{"id":228,"title":"Testing Rails Applications","heading":"4 The Test Database","subheading":"4.1 Maintaining the test database schema","content":"order your tests, your test database will need have current structure. test helper checks whether your test database pending migrations. will load your db/schema.rb db/structure.sql into test database. migrations still pending, error will raised. usually this indicates that your schema fully migrated. running migrations against development database (rails db:migrate) will bring schema date."},{"id":229,"title":"Testing Rails Applications","heading":"4 The Test Database","subheading":"4.2 The Low-Down on Fixtures","content":"good tests, you'll need give some thought setting test data. rails, handle this defining customizing fixtures. find comprehensive documentation fixtures documentation. fixtures fancy word sample data. fixtures allow populate your testing database with predefined data before your tests run. fixtures database independent written yaml. there file model. you'll find fixtures under your test/fixtures directory. when rails generate model create model, rails automatically creates fixture stubs this directory. yaml-formatted fixtures human-friendly describe your sample data. these types fixtures have .yml file extension users.yml). here's sample yaml fixture file: each fixture given name followed indented list colon-separated key/value pairs. records typically separated blank line. place comments fixture file using character first column. working with associations, define reference node between different fixtures. here's example with belongs_to/has_many association: notice category first article found fixtures/articles.yml value about. this tells rails load category about found fixtures/categories.yml. allows embed ruby code within templates. yaml fixture format pre-processed with when rails loads fixtures. this allows ruby help generate some sample data. example, following code generates thousand users: rails automatically loads fixtures from test/fixtures directory default. loading involves three steps: fixtures instances active record. mentioned point above, access object directly because automatically available method whose scope local test case. example: multiple fixtures once, pass list fixture names. example: model tests used test various models your application. rails model tests stored under test/models directory. rails provides generator create model test skeleton you. model tests don't have their superclass like actionmailer::testcase instead they inherit from activesupport::testcase. system tests allow test user interactions with your application, running tests either real headless browser. system tests capybara under hood. creating rails system tests, test/system directory your application. rails provides generator create system test skeleton you. here's what freshly generated system test looks like: default, system tests with selenium driver, using chrome browser, screen size 1400x1400. next section explains change default settings."},{"id":230,"title":"Testing Rails Applications","heading":"6 System Testing","subheading":"6.1 Changing the default settings","content":"rails makes changing default settings system tests very simple. setup abstracted away focus writing your tests. when generate application scaffold, application_system_test_case.rb file created test directory. this where configuration your system tests should live. want change default settings change what system tests \"driven by\". want change driver from selenium poltergeist. first poltergeist your gemfile. then your application_system_test_case.rb file following: driver name required argument driven_by. optional arguments that passed driven_by :using browser (this will only used selenium), :screen_size change size screen screenshots, :options which used options supported driver. want headless browser, could headless chrome headless firefox adding headless_chrome headless_firefox :using argument. your capybara configuration requires more setup than provided rails, this additional configuration could added into application_system_test_case.rb file. please capybara's documentation additional settings."},{"id":231,"title":"Testing Rails Applications","heading":"6 System Testing","subheading":"6.2 Screenshot Helper","content":"screenshothelper helper designed capture screenshots your tests. this helpful viewing browser point test failed, view screenshots later debugging. methods provided: take_screenshot take_failed_screenshot. take_failed_screenshot automatically included after_teardown inside rails. take_screenshot helper method included anywhere your tests take screenshot browser."},{"id":232,"title":"Testing Rails Applications","heading":"6 System Testing","subheading":"6.3 Implementing a system test","content":"we're going system test blog application. we'll demonstrate writing system test visiting index page creating blog article. used scaffold generator, system test skeleton automatically created you. didn't scaffold generator, start creating system test skeleton. should have created test file placeholder with output previous command should see: let's open that file write first assertion: test should that there articles index page pass. system tests. let's test flow creating article blog. first step call visit articles_path. this will take test articles index page. then click_on \"new article\" will find \"new article\" button index page. this will redirect browser /articles/new. then test will fill title body article with specified text. once fields filled \"create article\" clicked which will send post request create article database. will redirected back articles index page there assert that text from article's title articles index page. want test mobile sizes testing desktop, create another class that inherits from systemtestcase your test suite. this example file called mobile_system_test_case.rb created /test directory with following configuration. this configuration, create test inside test/system that inherits from mobilesystemtestcase. test your using multiple different configurations. beauty system testing that similar integration testing that tests user's interaction with your controller, model, view, system testing much more robust actually tests your application real user were using going forward, test anything that user themselves would your application such commenting, deleting articles, publishing draft articles, etc. integration tests used test various parts your application interact. they generally used test important workflows within application. creating rails integration tests, test/integration directory application. rails provides generator create integration test skeleton here's what freshly generated integration test looks like: here test inheriting from actiondispatch::integrationtest. this makes some additional helpers available integration tests."},{"id":233,"title":"Testing Rails Applications","heading":"7 Integration Testing","subheading":"7.1 Helpers Available for Integration Tests","content":"addition standard testing helpers, inheriting from actiondispatch::integrationtest comes with some additional helpers available when writing integration tests. let's briefly introduced three categories helpers choose from. dealing with integration test runner, actiondispatch::integration::runner. when performing requests, will have actiondispatch::integration::requesthelpers available use. need modify session, state integration test, take look actiondispatch::integration::session help."},{"id":234,"title":"Testing Rails Applications","heading":"7 Integration Testing","subheading":"7.2 Implementing an integration test","content":"let's integration test blog application. we'll start with basic workflow creating blog article, verify that everything working properly. we'll start generating integration test skeleton: should have created test file placeholder with output previous command should see: let's open that file write first assertion: will take look assert_select query resulting html request \"testing views\" section below. used testing response request asserting presence html elements their content. when visit root path, should welcome/index.html.erb rendered view. this assertion should pass. about testing ability create article blog resulting article. let's break this test down understand start calling :new action articles controller. this response should successful. after this make post request :create action articles controller: lines following request handle redirect setup when creating article. finally assert that response successful article readable page. were able successfully test very small workflow visiting blog creating article. wanted take this further could tests commenting, removing articles, editing comments. integration tests great place experiment with kinds cases applications. rails, testing various actions controller form writing functional tests. remember your controllers handle incoming requests your application eventually respond with rendered view. when writing functional tests, testing your actions handle requests expected result response, some cases html view."},{"id":235,"title":"Testing Rails Applications","heading":"8 Functional Tests for Your Controllers","subheading":"8.1 What to include in your Functional Tests","content":"should test things such easiest functional tests action generate controller using scaffold generator: this will generate controller code tests article resource. take look file articles_controller_test.rb test/controllers directory. already have controller just want generate test scaffold code each seven default actions, following command: let's take look such test, test_should_get_index from file articles_controller_test.rb. test_should_get_index test, rails simulates request action called index, making sure request successful also ensuring that right response body been generated. method kicks request populates results into @response. accept arguments: these keyword arguments optional. example: calling :show action first article, passing http_referer header: another example: calling :update action last article, passing text title params, ajax request: modify test_should_create_article test articles_controller_test.rb that test pass: running tests they should pass."},{"id":236,"title":"Testing Rails Applications","heading":"8 Functional Tests for Your Controllers","subheading":"8.2 Available Request Types for Functional Tests","content":"you're familiar with http protocol, you'll know that type request. there request types supported rails functional tests: request types have equivalent methods that use. typical c.r.u.d. application you'll using get, post, put, delete more often."},{"id":237,"title":"Testing Rails Applications","heading":"8 Functional Tests for Your Controllers","subheading":"8.3 Testing XHR (AJAX) requests","content":"test ajax requests, specify xhr: true option get, post, patch, put, delete methods. example:"},{"id":238,"title":"Testing Rails Applications","heading":"8 Functional Tests for Your Controllers","subheading":"8.4 The Three Hashes of the Apocalypse","content":"after request been made processed, will have hash objects ready use: case with normal hash objects, access values referencing keys string. also reference them symbol name. example:"},{"id":239,"title":"Testing Rails Applications","heading":"8 Functional Tests for Your Controllers","subheading":"8.5 Instance Variables Available","content":"also have access three instance variables your functional tests, after request made:"},{"id":240,"title":"Testing Rails Applications","heading":"8 Functional Tests for Your Controllers","subheading":"8.6 Setting Headers and CGI variables","content":"http headers variables passed headers:"},{"id":241,"title":"Testing Rails Applications","heading":"8 Functional Tests for Your Controllers","subheading":"8.7 Testing flash notices","content":"remember from earlier, three hashes apocalypse flash. want flash message blog application whenever someone successfully creates article. let's start adding this assertion test_should_create_article test: test now, should failure: let's implement flash message controller. :create action should look like this: tests, should pass:"},{"id":242,"title":"Testing Rails Applications","heading":"8 Functional Tests for Your Controllers","subheading":"8.8 Putting it together","content":"this point articles controller tests :index well :new :create actions. what about dealing with existing data? let's write test :show action: remember from discussion earlier fixtures, articles() method will give access articles fixtures. about deleting existing article? also test updating existing article. notice we're starting some duplication these three tests, they both access same article fixture data. d.r.y. this using setup teardown methods provided activesupport::callbacks. test should look something what follows. disregard other tests now, we're leaving them brevity. similar other callbacks rails, setup teardown methods also used passing block, lambda, method name symbol call."},{"id":243,"title":"Testing Rails Applications","heading":"8 Functional Tests for Your Controllers","subheading":"8.9 Test helpers","content":"avoid code duplication, your test helpers. sign helper good example: find your helpers cluttering test_helper.rb, extract them into separate files. good place store them test/lib test/test_helpers. these helpers then explicitly required needed included needed they continue included directly into relevant parent classes find convenient eagerly require helpers test_helper.rb your test files have implicit access them. this accomplished using globbing, follows this downside increasing boot-up time, opposed manually requiring only necessary files your individual tests. like everything else your rails application, test your routes. route tests reside test/controllers/ part controller tests. more information routing assertions available rails, documentation actiondispatch::assertions::routingassertions. testing response your request asserting presence html elements their content common test views your application. like route tests, view tests reside test/controllers/ part controller tests. assert_select method allows query html elements response using simple powerful syntax. there forms assert_select: assert_select(selector, [equality], [message]) ensures that equality condition selected elements through selector. selector selector expression (string) expression with substitution values. assert_select(element, selector, [equality], [message]) ensures that equality condition selected elements through selector starting from element (instance nokogiri::xml::node nokogiri::xml::nodeset) descendants. example, could verify contents title element your response with: also nested assert_select blocks deeper investigation. following example, inner assert_select li.menu_item runs within collection elements selected outer block: collection selected elements iterated through that assert_select called separately each element. example response contains ordered lists, each with four nested list elements then following tests will both pass. this assertion quite powerful. more advanced usage, refer documentation. there more assertions that primarily used testing views: here's example using assert_select_email: helper just simple module where define methods which available your views. order test helpers, need check that output helper method matches what you'd expect. tests related helpers located under test/helpers directory. given have following helper: test output this method like this: moreover, since test class extends from actionview::testcase, have access rails' helper methods such link_to pluralize. testing mailer classes requires some specific tools thorough job."},{"id":244,"title":"Testing Rails Applications","heading":"12 Testing Your Mailers","subheading":"12.1 Keeping the Postman in Check","content":"your mailer classes like every other part your rails application should tested ensure that they working expected. goals testing your mailer classes ensure that: there aspects testing your mailer, unit tests functional tests. unit tests, mailer isolation with tightly controlled inputs compare output known value fixture.) functional tests don't much test minute details produced mailer; instead, test that controllers models using mailer right way. test prove that right email sent right time."},{"id":245,"title":"Testing Rails Applications","heading":"12 Testing Your Mailers","subheading":"12.2 Unit Testing","content":"order test that your mailer working expected, unit tests compare actual results mailer with pre-written examples what should produced. purposes unit testing mailer, fixtures used provide example output should look. because these example emails, active record data like other fixtures, they kept their subdirectory apart from other fixtures. name directory within test/fixtures directly corresponds name mailer. mailer named usermailer, fixtures should reside test/fixtures/user_mailer directory. generated your mailer, generator does create stub fixtures mailers actions. you'll have create those files yourself described above. here's unit test test mailer named usermailer whose action invite used send invitation friend. adapted version base test created generator invite action. test create email store returned object email variable. then ensure that sent (the first assert), then, second batch assertions, ensure that email does indeed contain what expect. helper read_fixture used read content from this file. here's content invite fixture: this right time understand little more about writing tests your mailers. line actionmailer::base.delivery_method :test config/environments/test.rb sets delivery method test mode that email will actually delivered (useful avoid spamming your users while testing) instead will appended array (actionmailer::base.deliveries)."},{"id":246,"title":"Testing Rails Applications","heading":"12 Testing Your Mailers","subheading":"12.3 Functional and System Testing","content":"unit testing allows test attributes email while functional system testing allows test whether user interactions appropriately trigger email delivered. example, check that invite friend operation sending email appropriately: since your custom jobs queued different levels inside your application, you'll need test both jobs themselves (their behavior when they enqueued) that other entities correctly enqueue them."},{"id":247,"title":"Testing Rails Applications","heading":"13 Testing Jobs","subheading":"13.1 A Basic Test Case","content":"default, when generate job, associated test will generated well under test/jobs directory. here's example test with billing job: this test pretty simple only asserts that work done expected. default, activejob::testcase will queue adapter :test that your jobs performed inline. will also ensure that previously performed enqueued jobs cleared before test safely assume that jobs have already been executed scope each test."},{"id":248,"title":"Testing Rails Applications","heading":"13 Testing Jobs","subheading":"13.2 Custom Assertions And Testing Jobs Inside Other Components","content":"active ships with bunch custom assertions that used lessen verbosity tests. full list available assertions, documentation activejob::testhelper. it's good practice ensure that your jobs correctly enqueued performed wherever invoke them (e.g. inside your controllers). this precisely where custom assertions provided active pretty useful. instance, within model:"},{"id":249,"title":"Testing Rails Applications","heading":"13 Testing Jobs","subheading":"13.3 Asserting Time Arguments in Jobs","content":"when serializing arguments, time, datetime, activesupport::timewithzone lose microsecond precision. this means comparing deserialized time with actual time doesn't always work. compensate loss precision, assert_enqueued_with assert_performed_with will remove microseconds from time objects argument assertions. since action cable used different levels inside your application, you'll need test both channels, connection classes themselves, that other entities broadcast correct messages."},{"id":250,"title":"Testing Rails Applications","heading":"14 Testing Action Cable","subheading":"14.1 Connection Test Case","content":"default, when generate rails application with action cable, test base connection class (applicationcable::connection) generated well under test/channels/application_cable directory. connection tests check whether connection's identifiers assigned properly that improper connection requests rejected. here example: also specify request cookies same integration tests: documentation actioncable::connection::testcase more information."},{"id":251,"title":"Testing Rails Applications","heading":"14 Testing Action Cable","subheading":"14.2 Channel Test Case","content":"default, when generate channel, associated test will generated well under test/channels directory. here's example test with chat channel: this test pretty simple only asserts that channel subscribes connection particular stream. also specify underlying connection identifiers. here's example test with notifications channel: documentation actioncable::channel::testcase more information."},{"id":252,"title":"Testing Rails Applications","heading":"14 Testing Action Cable","subheading":"14.3 Custom Assertions And Testing Broadcasts Inside Other Components","content":"action cable ships with bunch custom assertions that used lessen verbosity tests. full list available assertions, documentation actioncable::testhelper. it's good practice ensure that correct message been broadcasted inside other components (e.g. inside your controllers). this precisely where custom assertions provided action cable pretty useful. instance, within model: want test broadcasting made with channel.broadcast_to, shoud channel.broadcasting_for generate underlying stream name:"},{"id":253,"title":"Testing Rails Applications","heading":"15 Additional Testing Resources","subheading":"15.1 Testing Time-Dependent Code","content":"rails provides built-in helper methods that enable assert that your time-sensitive code works expected. here example using travel_to helper: please activesupport::testing::timehelpers documentation in-depth information about available time helpers. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":254,"title":"API de Internacionalização do Rails (I18n)","heading":"1 How I18n in Ruby on Rails Works","subheading":"1 How I18n in Ruby on Rails Works","content":"internationalization complex problem. natural languages differ many ways (e.g. pluralization rules) that hard provide tools solving problems once. that reason rails i18n focuses part this solution, every static string rails framework e.g. active record validation messages, time date formats been internationalized. localization rails application means defining translated values these strings desired languages. localize store update content your application (e.g. translate blog posts), translating model content section."},{"id":255,"title":"API de Internacionalização do Rails (I18n)","heading":"1 How I18n in Ruby on Rails Works","subheading":"1.1 The Overall Architecture of the Library","content":"thus, ruby i18n split into parts: user should always only access public methods i18n module, useful know about capabilities backend."},{"id":256,"title":"API de Internacionalização do Rails (I18n)","heading":"1 How I18n in Ruby on Rails Works","subheading":"1.2 The Public I18n API","content":"most important methods i18n are: these have aliases them like this: there also attribute readers writers following attributes: let's internationalize simple rails application from ground next chapters! there steps running with i18n support rails application."},{"id":257,"title":"API de Internacionalização do Rails (I18n)","heading":"2 Setup the Rails Application for Internationalization","subheading":"2.1 Configure the I18n Module","content":"following convention over configuration philosophy, rails i18n provides reasonable default translation strings. when different translation strings needed, they overridden. rails adds .yml files from config/locales directory translations load path, automatically. default en.yml locale this directory contains sample pair translation strings: this means, that locale, hello will hello world string. every string inside rails internationalized this way, instance active model validation messages activemodel/lib/active_model/locale/en.yml file time date formats activesupport/lib/active_support/locale/en.yml file. yaml standard ruby hashes store translations default (simple) backend. i18n library will english default locale, i.e. different locale set, will used looking translations. translations load path (i18n.load_path) array paths files that will loaded automatically. configuring this path allows customization translations directory structure file naming scheme. change default locale well configure translations load paths config/application.rb follows: load path must specified before translations looked change default locale from initializer instead config/application.rb: note that appending directly i18n.load_paths instead application's configured i18n will override translations from external gems."},{"id":258,"title":"API de Internacionalização do Rails (I18n)","heading":"2 Setup the Rails Application for Internationalization","subheading":"2.2 Managing the Locale across Requests","content":"localized application will likely need provide support multiple locales. accomplish this, locale should beginning each request that strings translated using desired locale during lifetime that request. default locale used translations unless i18n.locale= i18n.with_locale used. i18n.locale leak into subsequent requests served same thread/process consistently every controller. example executing i18n.locale post requests will have effects later requests controllers that don't locale, only that particular thread/process. that reason, instead i18n.locale i18n.with_locale which does have this leak issue. locale around_action applicationcontroller: this example illustrates this using query parameter locale (e.g. http://example.com/books?locale=pt). with this approach, http://localhost:3000?locale=pt renders portuguese localization, while http://localhost:3000?locale=de loads german localization. locale using many different approaches. option have locale from domain name where your application runs. example, want www.example.com load english default) locale, www.example.es load spanish locale. thus top-level domain name used locale setting. this several advantages: implement like this your applicationcontroller: also locale from subdomain very similar way: your application includes locale switching menu, would then have something like this assuming would app_config[:deutsch_website_url] some value like http://www.application.de. this solution aforementioned advantages, however, able want provide different localizations (\"language versions\") different domains. most obvious solution would include locale code params request path). most usual setting (and passing) locale would include params, i18n.with_locale(params[:locale], &action) around_action first example. would like have urls like www.example.com/books?locale=ja www.example.com/ja/books this case. this approach almost same advantages setting locale from domain name: namely that it's restful accord with rest world wide web. does require little more work implement, though. getting locale from params setting accordingly hard; including every thus passing through requests include explicit option every url, e.g. link_to(books_url(locale: i18n.locale)), would tedious probably impossible, course. rails contains infrastructure \"centralizing dynamic decisions about urls\" applicationcontroller#default_url_options, which useful precisely this scenario: enables \"defaults\" url_for helper methods dependent implementing/overriding default_url_options). include something like this applicationcontroller then: every helper method dependent url_for (e.g. helpers named routes like root_path root_url, resource routes like books_path books_url, etc.) will automatically include locale query string, like this: http://localhost:3001/?locale=ja. satisfied with this. does impact readability urls, though, when locale \"hangs\" every your application. moreover, from architectural standpoint, locale usually hierarchically above other parts application domain: urls should reflect this. probably want urls look like this: http://www.example.com/en/books (which loads english locale) http://www.example.com/nl/books (which loads dutch locale). this achievable with \"over-riding default_url_options\" strategy from above: just have your routes with scope: now, when call books_path method should \"/en/books\" (for default locale). like http://localhost:3001/nl/books should load dutch locale, then, following calls books_path should return \"/nl/books\" (because locale changed). don't want force locale your routes optional path scope (denoted parentheses) like with this approach will routing error when accessing your resources such http://localhost:3001/books without locale. this useful when want default locale when specified. course, need take special care root (usually \"homepage\" \"dashboard\") your application. like http://localhost:3001/nl will work automatically, because root \"books#index\" declaration your routes.rb doesn't take locale into account. (and rightly there's only \"root\" url.) would probably need urls like these: take special care about order your routes, this route declaration does \"eat\" other ones. (you want directly before root declaration.) application with authenticated users allow users locale preference through application's interface. with this approach, user's selected locale preference persisted database used locale authenticated requests that user. when explicit locale been request (e.g. above methods), application should attempt infer desired locale. accept-language http header indicates preferred language request's response. browsers this header value based user's language preference settings, making good first choice when inferring locale. trivial implementation using accept-language header would practice, more robust code necessary this reliably. iain hecker's http_accept_language library ryan tomayko's locale rack middleware provide solutions this problem. address client making request used infer client's region thus their locale. services such geoip lite country gems like geocoder used implement this approach. general, this approach less reliable than using language header recommended most applications. you've initialized i18n support your ruby rails application told which locale preserve between requests. next need internationalize application abstracting every locale-specific element. finally, need localize providing necessary translations these abstracts. given following example: "},{"id":259,"title":"API de Internacionalização do Rails (I18n)","heading":"3 Internationalization and Localization","subheading":"3.1 Abstracting Localized Code","content":"there strings code that english that users will rendered response (\"hello flash\" \"hello world\"). order internationalize this code, these strings need replaced calls rails' helper with appropriate each string: now, when this view rendered, will show error message which tells that translations keys :hello_world :hello_flash missing. "},{"id":260,"title":"API de Internacionalização do Rails (I18n)","heading":"3 Internationalization and Localization","subheading":"3.2 Providing Translations for Internationalized Strings","content":"missing translations into translation dictionary files: because default_locale hasn't changed, translations locale response renders english strings:  locale pirate locale (http://localhost:3000?locale=pirate), response renders pirate strings:  yaml (.yml) plain ruby (.rb) files storing your translations simplestore. yaml preferred option among rails developers. however, disadvantage. yaml very sensitive whitespace special characters, application load your dictionary properly. ruby files will crash your application first request, easily find what's wrong. encounter \"weird issues\" with yaml dictionaries, putting relevant portion your dictionary into ruby file.) your translations stored yaml files, certain keys must escaped. they are: examples:"},{"id":261,"title":"API de Internacionalização do Rails (I18n)","heading":"3 Internationalization and Localization","subheading":"3.3 Passing Variables to Translations","content":"consideration successfully internationalizing application avoid making incorrect assumptions about grammar rules when abstracting localized code. grammar rules that seem fundamental locale hold true another one. improper abstraction shown following example, where assumptions made about ordering different parts translation. note that rails provides number_to_currency helper handle following case. product's price then proper translation spanish instead \"€10\" abstraction cannot give create proper abstraction, i18n ships with feature called variable interpolation that allows variables translation definitions pass values these variables translation method. proper abstraction shown following example: grammatical punctuation decisions made definition itself, abstraction give proper translation."},{"id":262,"title":"API de Internacionalização do Rails (I18n)","heading":"3 Internationalization and Localization","subheading":"3.4 Adding Date/Time Formats","content":"let's timestamp view, demo date/time localization feature well. localize time format pass time object i18n.l (preferably) rails' helper. pick format passing :format option default :default format used. pirate translations file let's time format (it's already there rails' defaults english): that would give you: "},{"id":263,"title":"API de Internacionalização do Rails (I18n)","heading":"3 Internationalization and Localization","subheading":"3.5 Inflection Rules For Other Locales","content":"rails allows define inflection rules (such rules singularization pluralization) locales other than english. config/initializers/inflections.rb, define these rules multiple locales. initializer contains default example specifying additional rules english; follow that format other locales fit."},{"id":264,"title":"API de Internacionalização do Rails (I18n)","heading":"3 Internationalization and Localization","subheading":"3.6 Localized Views","content":"let's have bookscontroller your application. your index action renders content app/views/books/index.html.erb template. when localized variant this template: index.es.html.erb same directory, rails will render content this template, when locale :es. when locale default locale, generic index.html.erb view will used. (future rails versions well bring this automagic localization assets public, etc.) make this feature, e.g. when working with large amount static content, which would clumsy inside yaml ruby dictionaries. bear mind, though, that change would like later template must propagated them."},{"id":265,"title":"API de Internacionalização do Rails (I18n)","heading":"3 Internationalization and Localization","subheading":"3.7 Organization of Locale Files","content":"when using default simplestore shipped with i18n library, dictionaries stored plain-text files disk. putting translations parts your application file locale could hard manage. store these files hierarchy which makes sense you. example, your config/locales directory could look like this: this way, separate model model attribute names from text inside views, this from \"defaults\" (e.g. date time formats). other stores i18n library could provide different means such separation. should have good understanding using i18n library know internationalize basic rails application. following chapters, we'll cover features more depth. these chapters will show examples using both i18n.translate method well translate view helper method (noting additional feature provide view helper method). covered features like these:"},{"id":266,"title":"API de Internacionalização do Rails (I18n)","heading":"4 Overview of the I18n API Features","subheading":"4.1 Looking up Translations","content":"translations looked keys which both symbols strings, these calls equivalent: translate method also takes :scope option which contain more additional keys that will used specify \"namespace\" scope translation key: this looks :record_invalid message active record error messages. additionally, both scopes specified dot-separated keys thus following calls equivalent: when :default option given, value will returned translation missing: :default value symbol, will used translated. provide multiple values default. first that results value will returned. e.g., following first tries translate :missing then :also_missing. both yield result, string \"not here\" will returned: look multiple translations once, array keys passed: also, translate (potentially nested) hash grouped translations. e.g., receive active record error messages hash with: want perform interpolation bulk hash translations, need pass deep_interpolation: true parameter. when have following dictionary: then nested interpolation will ignored without setting: rails implements convenient look locale inside views. when have following dictionary: look books.index.title value inside app/views/books/index.html.erb template like this (note dot): \"lazy\" lookup also used controllers: this useful setting flash messages instance:"},{"id":267,"title":"API de Internacionalização do Rails (I18n)","heading":"4 Overview of the I18n API Features","subheading":"4.2 Pluralization","content":"many languages including english there only forms, singular plural, given string, e.g. message\" messages\". other languages (arabic, japanese, russian many more) have different grammars that have additional fewer plural forms. thus, i18n provides flexible pluralization feature. :count interpolation variable special role that both interpolated translation used pick pluralization from translations according pluralization rules defined pluralization backend. default, only english pluralization rules applied. algorithm pluralizations simple translation denoted :one regarded singular, :other used plural. count zero, :zero entry present, then will used instead :other. lookup does return hash suitable pluralization, i18n::invalidpluralizationdata exception raised. i18n provides pluralization backend that used enable locale-specific rules. include simple backend, then localized pluralization algorithms translation store, i18n.plural.rule. alternatively, separate rails-i18n used provide fuller locale-specific pluralization rules."},{"id":268,"title":"API de Internacionalização do Rails (I18n)","heading":"4 Overview of the I18n API Features","subheading":"4.3 Setting and Passing a Locale","content":"locale either pseudo-globally i18n.locale (which uses thread.current like, e.g., time.zone) passed option #translate #localize. locale passed, i18n.locale used: explicitly passing locale: i18n.locale defaults i18n.default_locale which defaults :en. default locale like this:"},{"id":269,"title":"API de Internacionalização do Rails (I18n)","heading":"4 Overview of the I18n API Features","subheading":"4.4 Using Safe HTML Translations","content":"keys with '_html' suffix keys named 'html' marked html safe. when them views html will escaped. interpolation escapes needed though. example, given: safely pass username user: safe strings other hand interpolated verbatim. "},{"id":270,"title":"API de Internacionalização do Rails (I18n)","heading":"4 Overview of the I18n API Features","subheading":"4.5 Translations for Active Record Models","content":"methods model.model_name.human model.human_attribute_name(attribute) transparently look translations your model attribute names. example when following translations: then user.model_name.human will return \"customer\" user.human_attribute_name(\"login\") will return \"handle\". also plural form model names, adding following: then user.model_name.human(count: will return \"customers\". with count: without params will return \"customer\". event need access nested attributes within given model, should nest these under model/attribute model level your translation file: then user.human_attribute_name(\"role.admin\") will return \"admin\". active record validation error messages also translated easily. active record gives couple namespaces where place your message translations order provide different messages translation certain models, attributes, and/or validations. also transparently takes single table inheritance into account. this gives quite powerful means flexibly adjust your messages your application's needs. consider user model with validation name attribute like this: error message this case :blank. active record will look this namespaces: thus, example will following keys this order return first result: when your models additionally using inheritance then messages looked inheritance chain. example, might have admin model inheriting from user: then active record will look messages this order: this provide special translations various error messages different points your models inheritance chain attributes, models, default scopes. translated model name, translated attribute name, value always available interpolation model, attribute value respectively. example, instead default error message \"cannot blank\" could attribute name like this \"please fill your %{attribute}\". using active record error_messages_for helper, will want translations rails ships with following translations:"},{"id":271,"title":"API de Internacionalização do Rails (I18n)","heading":"4 Overview of the I18n API Features","subheading":"4.6 Translations for Action Mailer E-Mail Subjects","content":"don't pass subject mail method, action mailer will find your translations. performed lookup will pattern <mailer_scope>.<action_name>.subject construct key. send parameters interpolation default_i18n_subject method mailer."},{"id":272,"title":"API de Internacionalização do Rails (I18n)","heading":"4 Overview of the I18n API Features","subheading":"4.7 Overview of Other Built-In Methods that Provide I18n Support","content":"rails uses fixed strings other localizations, such format strings other format information couple helpers. here's brief overview. simple backend shipped with active support allows store translations both plain ruby yaml format.2 example ruby hash providing translations look like this: equivalent yaml file would look like this: see, both cases level locale. :foo namespace :bar translation \"baz\". here \"real\" example from active support en.yml translations yaml file: following equivalent lookups will return :short date format %d\": generally recommend using yaml format storing translations. there cases, though, where want store ruby lambdas part your locale data, e.g. special date formats."},{"id":273,"title":"API de Internacionalização do Rails (I18n)","heading":"6 Customize your I18n Setup","subheading":"6.1 Using Different Backends","content":"several reasons simple backend shipped with active support only does \"simplest thing that could possibly work\" ruby rails3 which means that only guaranteed work english and, side effect, languages that very similar english. also, simple backend only capable reading translations cannot dynamically store them format. that does mean you're stuck with these limitations, though. ruby i18n makes very easy exchange simple backend implementation with something else that fits better your needs, passing backend instance i18n.backend= setter. example, replace simple backend with chain backend chain multiple backends together. this useful when want standard translations with simple backend store custom application translations database other backends. with chain backend, could active record backend fall back (default) simple backend:"},{"id":274,"title":"API de Internacionalização do Rails (I18n)","heading":"6 Customize your I18n Setup","subheading":"6.2 Using Different Exception Handlers","content":"i18n defines following exceptions that will raised backends when corresponding unexpected conditions occur: i18n will catch these exceptions when they thrown backend pass them default_exception_handler method. this method will re-raise exceptions except missingtranslationdata exceptions. when missingtranslationdata exception been caught, will return exception's error message string containing missing key/scope. reason this that during development you'd usually want your views still render even though translation missing. other contexts might want change this behavior, though. e.g. default exception handling does allow catch missing translations during automated tests easily. this purpose different exception handler specified. specified exception handler must method i18n module class with #call method: this would re-raise only missingtranslationdata exception, passing other input default exception handler. however, using i18n::backend::pluralization this handler will also raise i18n::missingtranslationdata: translation missing: en.i18n.plural.rule exception that should normally ignored fall back default pluralization rule english locale. avoid this additional check translation key: another example where default behavior less desirable rails translationhelper which provides method well #translate). when missingtranslationdata exception occurs this context, helper wraps message into span with class translation_missing. helper forces i18n#translate raise exceptions matter what exception handler defined setting :raise option: i18n described this guide primarily intended translating interface strings. looking translate model content (e.g. blog posts), will need different solution help with this. several gems help with this: this point should have good overview about i18n support ruby rails works ready start translating your project. i18n support ruby rails introduced release still evolving. project follows good ruby rails development tradition evolving solutions gems real applications first, only then cherry-picking best-of-breed most widely useful features inclusion core. thus encourage everybody experiment with ideas features gems other libraries make them available community. (don't forget announce your work mailing list!) find your locale (language) missing from example translations data repository ruby rails, please fork repository, your data, send pull request. quote wikipedia: \"internationalization process designing software application that adapted various languages regions without engineering changes. localization process adapting software specific region language adding locale-specific components translating text.\" other backends might allow require other formats, e.g. gettext backend might allow read gettext files. these reasons that don't want imply unnecessary load applications that need i18n capabilities, need keep i18n library simple possible english. another reason that virtually impossible implement one-fits-all solution problems related i18n existing languages. solution that allows exchange entire implementation easily appropriate anyway. this also makes much easier experiment with custom features extensions. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":275,"title":"Contribuindo para o Ruby on Rails","heading":"1 Reporting an Issue","subheading":"1 Reporting an Issue","content":"ruby rails uses github issue tracking track issues (primarily bugs contributions code). you've found ruby rails, this place start. you'll need create (free) github account order submit issue, comment them, create pull requests."},{"id":276,"title":"Contribuindo para o Ruby on Rails","heading":"1 Reporting an Issue","subheading":"1.1 Creating a Bug Report","content":"you've found problem ruby rails which security risk, search github under issues case already been reported. unable find open github issues addressing problem found, your next step will open one. (see next section reporting security issues.) your issue report should contain title clear description issue bare minimum. should include much relevant information possible should least post code sample that demonstrates issue. would even better could include unit test that shows expected behavior occurring. your goal should make easy yourself others reproduce figure fix. then, don't your hopes unless have \"code red, mission critical, world coming end\" kind bug, you're creating this issue report hope that others with same problem will able collaborate with solving expect that issue report will automatically activity that others will jump creating issue like this mostly help yourself start path fixing problem others confirm with \"i'm having this problem too\" comment."},{"id":277,"title":"Contribuindo para o Ruby on Rails","heading":"1 Reporting an Issue","subheading":"1.2 Create an Executable Test Case","content":"having reproduce your issue will very helpful others help confirm, investigate, ultimately your issue. this providing executable test case. make this process easier, have prepared several report templates starting point: these templates include boilerplate code test case against either released version rails (*_gem.rb) edge rails (*_master.rb). simply copy content appropriate template into file make necessary changes demonstrate issue. execute running ruby the_file.rb your terminal. goes well, should your test case failing. then share your executable test case gist, simply paste content into issue description."},{"id":278,"title":"Contribuindo para o Ruby on Rails","heading":"1 Reporting an Issue","subheading":"1.3 Special Treatment for Security Issues","content":""},{"id":279,"title":"Contribuindo para o Ruby on Rails","heading":"1 Reporting an Issue","subheading":"1.4 What about Feature Requests?","content":"please don't \"feature request\" items into github issues. there's feature that want added ruby rails, you'll need write code yourself convince someone else partner with write code. later this guide, you'll find detailed instructions proposing patch ruby rails. enter wish list item github issues with code, expect marked \"invalid\" soon it's reviewed. sometimes, line between 'bug' 'feature' hard draw. generally, feature anything that adds behavior, while anything that causes incorrect behavior. sometimes, core team will have make judgment call. that said, distinction generally just affects which release your patch will love feature submissions! they just won't backported maintenance branches. you'd like feedback idea feature before doing work make patch, please send email rails-core mailing list. might response, which means that everyone indifferent. might find someone who's also interested building that feature. might \"this won't accepted.\" it's proper place discuss ideas. github issues particularly good venue sometimes long involved discussions features require. next step beyond reporting issues, help core team resolve existing ones providing feedback about them. rails core development, that might great walk your first steps, you'll familiar with code base processes. check issues list github issues, you'll find lots issues already requiring attention. what these? quite bit, actually:"},{"id":280,"title":"Contribuindo para o Ruby on Rails","heading":"2 Helping to Resolve Existing Issues","subheading":"2.1 Verifying Bug Reports","content":"starters, helps just verify reports. reproduce reported issue your computer? comment issue saying that you're seeing same thing. issue very vague, help narrow down something more specific? maybe provide additional information help reproduce bug, help eliminating needless steps that aren't required demonstrate problem. find report without test, it's very useful contribute failing test. this also great started exploring source code: looking existing test files will teach write more tests. tests best contributed form patch, explained later \"contributing rails code\" section. anything make reports more succinct easier reproduce helps folks trying write code those bugs whether writing code yourself not."},{"id":281,"title":"Contribuindo para o Ruby on Rails","heading":"2 Helping to Resolve Existing Issues","subheading":"2.2 Testing Patches","content":"also help examining pull requests that have been submitted ruby rails github. order apply someone's changes, need first create dedicated branch: then, their remote branch update your codebase. example, let's github user johnsmith forked pushed topic branch \"orange\" located https://github.com/johnsmith/rails. after applying their branch, test out! here some things think about: once you're happy that pull request contains good change, comment github issue indicating your approval. your comment should indicate that like change what like about something like: your comment simply reads \"+1\", then odds that other reviewers aren't going take seriously. show that took time review pull request. ruby rails possui dois conjuntos principais documentação: guias, ajudam aprender sobre ruby rails, api, serve como referência. você pode ajudar melhorar guias rails tornando-os mais coerentes, consistentes legíveis, adicionando informações ausentes, corrigindo erros factuais, corrigindo erros digitação atualizando-os rails mais recentes. isso, faça alterações arquivos-fonte guias rails (localizados aqui github). então abra pull request aplicar suas mudanças branch principal (master/main). trabalhar documentação, leve consideração diretrizes documentação diretrizes guias ruby rails. happy have people volunteer translate rails guides. just follow these steps: note that translations submitted rails repository. detailed above, your work happens fork. this because practice documentation maintenance patches only sustainable english. generate guides html format into guides directory then (eg. it-it): this will generate guides output directory. translation efforts know about (various versions):"},{"id":282,"title":"Contribuindo para o Ruby on Rails","heading":"5 Contributing to the Rails Code","subheading":"5.1 Setting Up a Development Environment","content":"move from submitting bugs helping resolve existing issues contributing your code ruby rails, must able test suite. this section guide, you'll learn setup tests your computer. easiest recommended development environment ready hack rails-dev-box. case can't rails development box, this other guide."},{"id":283,"title":"Contribuindo para o Ruby on Rails","heading":"5 Contributing to the Rails Code","subheading":"5.2 Clone the Rails Repository","content":"able contribute code, need clone rails repository: create dedicated branch: doesn't matter much what name use, because this branch will only exist your local computer your personal repository github. won't part rails repository."},{"id":284,"title":"Contribuindo para o Ruby on Rails","heading":"5 Contributing to the Rails Code","subheading":"5.3 Bundle install","content":"install required gems."},{"id":285,"title":"Contribuindo para o Ruby on Rails","heading":"5 Contributing to the Rails Code","subheading":"5.4 Running an Application Against Your Local Branch","content":"case need dummy rails test changes, --dev flag rails generates application that uses your local branch: application generated ~/my-test-app runs against your local branch particular sees modifications upon server reboot."},{"id":286,"title":"Contribuindo para o Ruby on Rails","heading":"5 Contributing to the Rails Code","subheading":"5.5 Write Your Code","content":"busy add/edit code. you're your branch now, write whatever want (make sure you're right branch with branch -a). you're planning submit your change back inclusion rails, keep things mind: rails follows simple coding style conventions: above guidelines please your best judgment using them. additionally, have rubocop rules defined codify some coding conventions. rubocop locally against file that have modified before submitting pull request: rails-ujs coffeescript javascript files, lint actionview folder."},{"id":287,"title":"Contribuindo para o Ruby on Rails","heading":"5 Contributing to the Rails Code","subheading":"5.6 Benchmark Your Code","content":"changes that might have impact performance, please benchmark your code measure impact. please share benchmark script used well results. should consider including this information your commit message, which allows future contributors easily verify your findings determine they still relevant. (for example, future optimizations ruby might render certain optimizations unnecessary.) very easy make optimization that improves performance specific scenario care about regresses other common cases. therefore, should test your change against list representative scenarios. ideally, they should based real-world scenarios extracted from production applications. benchmark template starting point. includes boilerplate code setup benchmark using benchmark-ips gem. template designed testing relatively self-contained changes that inlined into script."},{"id":288,"title":"Contribuindo para o Ruby on Rails","heading":"5 Contributing to the Rails Code","subheading":"5.7 Running Tests","content":"customary rails full test suite before pushing changes. railties test suite particular takes long time, takes especially long time source code mounted /vagrant happens recommended workflow with rails-dev-box. compromise, test what your code obviously affects, change railties, whole test suite affected component. tests passing, that's enough propose your contribution. have buildkite safety catching unexpected breakages elsewhere. tests, tests only particular component (e.g. action pack). example, action mailer tests: want tests located specific directory test_dir environment variable. example, this will tests railties/test/generators directory only: tests particular file using: single test through ruby. instance: option allows single method instead whole file. test execution randomized with randomization seed. experiencing random test failures more accurately reproduce failing test scenario specifically setting randomization seed. running tests component: running single test file: first, create databases you'll need. find list required table names, usernames, passwords activerecord/test/config.example.yml. mysql postgresql, running statements create database activerecord_unittest create database activerecord_unittest2 sufficient. this necessary sqlite3. this active record test suite only sqlite3: tests sqlite3. tasks respectively: finally, will three them turn. also single test separately: single test against adapters, use: invoke test_jdbcmysql, test_jdbcsqlite3 test_jdbcpostgresql also. file activerecord/running_unit_tests.rdoc information running more targeted database tests."},{"id":289,"title":"Contribuindo para o Ruby on Rails","heading":"5 Contributing to the Rails Code","subheading":"5.8 Warnings","content":"test suite runs with warnings enabled. ideally, ruby rails should issue warnings, there few, well some from third-party libraries. please ignore fix!) them, any, submit patches that issue warnings."},{"id":290,"title":"Contribuindo para o Ruby on Rails","heading":"5 Contributing to the Rails Code","subheading":"5.9 Updating the CHANGELOG","content":"changelog important part every release. keeps list changes every rails version. should entry changelog framework that modified you're adding removing feature, committing fix, adding deprecation notices. refactorings documentation changes generally should changelog. changelog entry should summarize what changed should with author's name. multiple lines need more space attach code examples indented with spaces. change related specific issue, should attach issue's number. here example changelog entry: your name added directly after last word there code examples multiple paragraphs. otherwise, it's best make paragraph."},{"id":291,"title":"Contribuindo para o Ruby on Rails","heading":"5 Contributing to the Rails Code","subheading":"5.10 Updating the Gemfile.lock","content":"some changes require dependencies upgraded. these cases make sure bundle update right version dependency commit gemfile.lock file within your changes."},{"id":292,"title":"Contribuindo para o Ruby on Rails","heading":"5 Contributing to the Rails Code","subheading":"5.11 Commit Your Changes","content":"when you're happy with code your computer, need commit changes git: this should fire your editor write commit message. when have finished, save close continue. well-formatted descriptive commit message very helpful others understanding change made, please take time write good commit message looks like this:"},{"id":293,"title":"Contribuindo para o Ruby on Rails","heading":"5 Contributing to the Rails Code","subheading":"5.12 Update Your Branch","content":"it's pretty likely that other changes master have happened while were working. them: reapply your patch latest changes: conflicts? tests still pass? change still seems reasonable you? then move"},{"id":294,"title":"Contribuindo para o Ruby on Rails","heading":"5 Contributing to the Rails Code","subheading":"5.13 Fork","content":"navigate rails github repository press \"fork\" upper right hand corner. remote your local repository your local machine: have cloned your local repository from rails/rails have cloned from your forked repository. avoid ambiguity following commands assume that have made \"rails\" remote that points rails/rails. download commits branches from official repository: merge content: update your fork:"},{"id":295,"title":"Contribuindo para o Ruby on Rails","heading":"5 Contributing to the Rails Code","subheading":"5.14 Issue a Pull Request","content":"navigate rails repository just pushed (e.g. https://github.com/your-user-name/rails) click \"pull requests\" seen right panel. next page, press \"new pull request\" upper right hand corner. click \"edit\", need change branches being compared compares \"master\" default) press \"click create pull request this comparison\". ensure changesets introduced included. fill some details about your potential patch including meaningful title. when finished, press \"send pull request\". rails core team will notified about your submission."},{"id":296,"title":"Contribuindo para o Ruby on Rails","heading":"5 Contributing to the Rails Code","subheading":"5.15 Get some Feedback","content":"most pull requests will through iterations before they merged. different contributors will sometimes have different opinions, often patches will need revised before they merged. some contributors rails have email notifications from github turned others not. furthermore, (almost) everyone works rails volunteer, take days your first feedback pull request. don't despair! sometimes it's quick, sometimes it's slow. such open source life. it's been over week, haven't heard anything, might want nudge things along. rubyonrails-core mailing list this. also leave another comment pull request. while you're waiting feedback your pull request, open other pull requests give someone else some! sure they'll appreciate same that appreciate feedback your patches."},{"id":297,"title":"Contribuindo para o Ruby on Rails","heading":"5 Contributing to the Rails Code","subheading":"5.16 Iterate as Necessary","content":"it's entirely possible that feedback will suggest changes. don't discouraged: whole point contributing active open source project into knowledge community. people encouraging tweak your code, then it's worth making tweaks resubmitting. feedback that your code doesn't belong core, might still think about releasing gem. things that \"squash your commits\", which will combine your commits into single commit. prefer pull requests that single commit. this makes easier backport changes stable branches, squashing makes easier revert commits, history easier follow. rails large project, bunch extraneous commits noise. should able refresh pull request github that been updated. sometimes will asked make some changes code have already committed. this include amending existing commits. this case will allow push changes pushed branch local branch match. instead opening pull request, force push your branch github described earlier squashing commits section: this will update branch pull request github with your code. force pushing with --force-with-lease, will more safely update remote than with typical which delete work from remote that don't already have."},{"id":298,"title":"Contribuindo para o Ruby on Rails","heading":"5 Contributing to the Rails Code","subheading":"5.17 Older Versions of Ruby on Rails","content":"want older versions ruby rails, you'll need switch your local tracking branch. here example switch 4-0-stable branch: changes that merged into master intended next major release rails. sometimes, might beneficial your changes propagate back maintenance releases older stable branches. generally, security fixes fixes good candidates backport, while features patches that introduce change behavior will accepted. when doubt, best consult rails team member before backporting your changes avoid wasted effort. simple fixes, easiest backport your changes extract diff from your changes master apply them target branch. first, make sure your changes only difference between your current branch master: then extract diff: switch over target branch apply your changes: this works well simple changes. however, your changes complicated code master deviated significantly from your target branch, might require more work your part. difficulty backport varies greatly from case case, sometimes simply worth effort. once have resolved conflicts made sure tests passing, push your changes open separate pull request your backport. also worth noting that older branches might have different build targets than master. when possible, best first test your backport locally against oldest ruby version permitted target branch's rails.gemspec before submitting your pull request. then... think about your next contribution! todas contribuições recebem crédito contribuintes rails. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":299,"title":"Configurando Aplicações Rails","heading":"1 Locais para Código de Inicialização","subheading":"1 Locais para Código de Inicialização","content":"rails oferece quatro opções padrão adicionar código inicialização: raras situações aplicação necessita executar código antes próprio rails tenha sido carregado, coloque este código acima chamada require 'rails/all' arquivo config/application.rb. geral, configurar rails significa configurar componentes rails, assim como configurar rails arquivo configuração config/application.rb arquivos configuração específicos ambiente (como arquivo config/environments/production.rb) permitem definir diversas configurações serão passadas todos componentes. exemplo, você pode adicionar configuração abaixo arquivo config/application.rb: essa configuração próprio rails. você deseja definir ajustes componentes rails, você pode fazê-lo através mesmo objeto config config/application.rb: rails usar essa configuração particular active record."},{"id":300,"title":"Configurando Aplicações Rails","heading":"3 Configurando Componentes Rails","subheading":"3.1 Configuração Geral do Rails","content":"esses métodos configuração devem enviados objetos tipo rails::railtie, como subclasse rails::engine rails::application."},{"id":301,"title":"Configurando Aplicações Rails","heading":"3 Configurando Componentes Rails","subheading":"3.2 Configuring Assets","content":""},{"id":302,"title":"Configurando Aplicações Rails","heading":"3 Configurando Componentes Rails","subheading":"3.3 Configuring Generators","content":"rails allows alter what generators used with config.generators method. this method takes block: full methods that used this block follows:"},{"id":303,"title":"Configurando Aplicações Rails","heading":"3 Configurando Componentes Rails","subheading":"3.4 Configuring Middleware","content":"every rails application comes with standard middleware which uses this order development environment: other environments rails.application.config.hosts empty host header checks will done. want guard against header attacks production, have manually permit allowed hosts with: host request checked against hosts entries with case operator (#===), which lets hosts support entries type regexp, proc ipaddr name few. here example with regexp. special case supported that allows permit sub-domains: besides these usual middleware, your using config.middleware.use method: this will magical::unicorns middleware stack. insert_before wish middleware before another. insert middleware exact position using indexes. example, want insert magical::unicorns middleware stack, like there's also insert_after which will insert middleware after another: middlewares also completely swapped replaced with others: they also removed from stack completely:"},{"id":304,"title":"Configurando Aplicações Rails","heading":"3 Configurando Componentes Rails","subheading":"3.5 Configuring i18n","content":"these configuration options delegated i18n library."},{"id":305,"title":"Configurando Aplicações Rails","heading":"3 Configurando Componentes Rails","subheading":"3.6 Configuring Active Model","content":""},{"id":306,"title":"Configurando Aplicações Rails","heading":"3 Configurando Componentes Rails","subheading":"3.7 Configuring Active Record","content":"config.active_record includes variety configuration options: mysql adapter adds additional configuration option: postgresql adapter adds additional configuration option: schema dumper adds additional configuration options:"},{"id":307,"title":"Configurando Aplicações Rails","heading":"3 Configurando Componentes Rails","subheading":"3.8 Configuring Action Controller","content":"config.action_controller includes number configuration settings: default false which results following output:"},{"id":308,"title":"Configurando Aplicações Rails","heading":"3 Configurando Componentes Rails","subheading":"3.9 Configuring Action Dispatch","content":"exceptions that configured will mapped internal server error."},{"id":309,"title":"Configurando Aplicações Rails","heading":"3 Configurando Componentes Rails","subheading":"3.10 Configuring Action View","content":"config.action_view includes small number configuration settings:"},{"id":310,"title":"Configurando Aplicações Rails","heading":"3 Configurando Componentes Rails","subheading":"3.11 Configuring Action Mailbox","content":"config.action_mailbox provides following configuration options:"},{"id":311,"title":"Configurando Aplicações Rails","heading":"3 Configurando Componentes Rails","subheading":"3.12 Configuring Action Mailer","content":"there number settings available config.action_mailer:"},{"id":312,"title":"Configurando Aplicações Rails","heading":"3 Configurando Componentes Rails","subheading":"3.13 Configuring Active Support","content":"there configuration options available active support:"},{"id":313,"title":"Configurando Aplicações Rails","heading":"3 Configurando Componentes Rails","subheading":"3.14 Configuring Active Job","content":"config.active_job provides following configuration options:"},{"id":314,"title":"Configurando Aplicações Rails","heading":"3 Configurando Componentes Rails","subheading":"3.15 Configuring Action Cable","content":"find more detailed configuration options action cable overview."},{"id":315,"title":"Configurando Aplicações Rails","heading":"3 Configurando Componentes Rails","subheading":"3.16 Configuring Active Storage","content":"config.active_storage provides following configuration options: default minutes. default /rails/active_storage."},{"id":316,"title":"Configurando Aplicações Rails","heading":"3 Configurando Componentes Rails","subheading":"3.17 Results of config.load_defaults","content":"config.load_defaults sets defaults including version passed. such that passing, say, '6.0' also gets defaults from every version before"},{"id":317,"title":"Configurando Aplicações Rails","heading":"3 Configurando Componentes Rails","subheading":"3.18 Configuring a Database","content":"just about every rails application will interact with database. connect database setting environment variable env['database_url'] using configuration file called config/database.yml. using config/database.yml file specify information needed access your database: this will connect database named blog_development using postgresql adapter. this same information stored provided environment variable like this: config/database.yml file contains sections three different environments which rails default: wish, manually specify inside your config/database.yml config/database.yml file contain tags anything tags will evaluated ruby code. this pull data from environment variable perform calculations generate needed connection information."},{"id":318,"title":"Configurando Aplicações Rails","heading":"3 Configurando Componentes Rails","subheading":"3.19 Connection Preference","content":"since there ways configure your connection (using config/database.yml using environment variable) important understand they interact. have empty config/database.yml file your env['database_url'] present, then rails will connect database your environment variable: have config/database.yml env['database_url'] then this file will used connect your database: have both config/database.yml env['database_url'] then rails will merge configuration together. better understand this must some examples. when duplicate connection information provided environment variable will take precedence: here adapter, host, database match information env['database_url']. non-duplicate information provided will unique values, environment variable still takes precedence cases conflicts. since pool env['database_url'] provided connection information information merged since adapter duplicate, env['database_url'] connection information wins. only explicitly connection information env['database_url'] specify explicit connection using \"url\" key: here connection information env['database_url'] ignored, note different adapter database name. since possible embed your config/database.yml best practice explicitly show using env['database_url'] connect your database. this especially useful production since should commit secrets like your database password into your source control (such git). behavior clear, that only using connection information env['database_url']. rails comes with built-in support sqlite3, which lightweight serverless database application. while busy production environment overload sqlite, works well development testing. rails defaults using sqlite database when creating project, always change later. here's section default configuration file (config/database.yml) with connection information development environment: choose mysql mariadb instead shipped sqlite3 database, your config/database.yml will look little different. here's development section: your development database root user with empty password, this configuration should work you. otherwise, change username password development section appropriate. advisory locks enabled default mysql used make database migrations concurrent safe. disable advisory locks setting advisory_locks false: choose postgresql, your config/database.yml will customized postgresql databases: default active record uses database features like prepared statements advisory locks. might need disable those features you're using external connection pooler like pgbouncer: enabled, active record will create prepared statements database connection default. modify this behavior statement_limit different value: more prepared statements use: more memory your database will require. your postgresql database hitting memory limits, lowering statement_limit disabling prepared statements. choose sqlite3 using jruby, your config/database.yml will look little different. here's development section: choose mysql mariadb using jruby, your config/database.yml will look little different. here's development section: choose postgresql using jruby, your config/database.yml will look little different. here's development section: change username password development section appropriate."},{"id":319,"title":"Configurando Aplicações Rails","heading":"3 Configurando Componentes Rails","subheading":"3.20 Creating Rails Environments","content":"default rails ships with three environments: \"development\", \"test\", \"production\". while these sufficient most cases, there circumstances when want more environments. imagine have server which mirrors production environment only used testing. such server commonly called \"staging server\". define environment called \"staging\" this server, just create file called config/environments/staging.rb. please contents existing file config/environments starting point make necessary changes from there. that environment different than default ones, start server with rails server staging, console with rails console staging, rails.env.staging? works, etc."},{"id":320,"title":"Configurando Aplicações Rails","heading":"3 Configurando Componentes Rails","subheading":"3.21 Deploy to a subdirectory (relative URL root)","content":"default rails expects that your application running root (eg. this section explains your application inside directory. let's assume want deploy application \"/app1\". rails needs know this directory generate appropriate routes: alternatively rails_relative_url_root environment variable. rails will prepend \"/app1\" when generating links. passenger makes easy your application subdirectory. find relevant configuration passenger manual. deploying your application using reverse proxy definite advantages over traditional deploys. they allow have more control over your server layering components required your application. many modern servers used proxy server balance third-party elements such caching servers application servers. such application server unicorn behind reverse proxy. this case, would need configure proxy server (nginx, apache, etc) accept connections from your application server (unicorn). default unicorn will listen connections port 8080, change port configure sockets instead. find more information unicorn readme understand philosophy behind once you've configured application server, must proxy requests configuring your server appropriately. example your nginx config include: sure read nginx documentation most up-to-date information. some parts rails also configured externally supplying environment variables. following environment variables recognized various parts rails: after loading framework gems your application, rails turns loading initializers. initializer ruby file stored under config/initializers your application. initializers hold configuration settings that should made after frameworks gems loaded, such options configure settings these parts. rails initialization events which hooked into (listed order that they run): define event these hooks, block syntax within rails::application, rails::railtie rails::engine subclass: alternatively, also through config method rails.application object:"},{"id":321,"title":"Configurando Aplicações Rails","heading":"6 Initialization events","subheading":"6.1 Rails::Railtie#initializer","content":"rails several initializers that startup that defined using initializer method from rails::railtie. here's example set_helpers_path initializer from action controller: initializer method takes three arguments with first being name initializer second being options hash (not shown here) third being block. :before options hash specified specify which initializer this initializer must before, :after will specify which initializer this initializer after. initializers defined using initializer method will order they defined with exception ones that :before :after methods. block argument initializer method instance application itself, access configuration using config method done example. because rails::application inherits from rails::railtie (indirectly), initializer method config/application.rb define initializers application."},{"id":322,"title":"Configurando Aplicações Rails","heading":"6 Initialization events","subheading":"6.2 Initializers","content":"below comprehensive list initializers found rails order that they defined (and therefore unless otherwise stated). active record database connections managed activerecord::connectionadapters::connectionpool which ensures that connection pool synchronizes amount thread access limited number database connections. this limit defaults configured database.yml. since connection pooling handled inside active record default, application servers (thin, puma, unicorn etc.) should behave same. database connection pool initially empty. demand connections increases will create them until reaches connection pool limit. request will check connection first time requires access database. request will check connection back this means that additional connection slot will available again next request queue. more connections than available, active record will block wait connection from pool. cannot connection, timeout error similar that given below will thrown. above error, might want increase size connection pool incrementing pool option database.yml configure your code through rails configuration object with custom configuration under either config.x namespace, config directly. difference between these that should using config.x defining nested configuration (ex: config.x.nested.hi), just config single level configuration (ex: config.hello). these configuration points then available through configuration object: also rails::application.config_for load whole configuration files: sometimes, want prevent some pages your application visible search sites like google, bing, yahoo, duck duck robots that index these sites will first analyze http://your-site.com/robots.txt file know which pages allowed index. rails creates this file inside /public folder. default, allows search engines index pages your application. want block indexing pages your application, this: block just specific pages, it's necessary more complex syntax. learn official documentation. listen loaded rails uses evented file system monitor detect changes when config.cache_classes false: otherwise, every request rails walks application tree check anything changed. linux macos additional gems needed, some required *bsd windows. note that some setups unsupported. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":323,"title":"Rails on Rack","heading":"1 Introduction to Rack","subheading":"1 Introduction to Rack","content":"rack provides minimal, modular, adaptable interface developing applications ruby. wrapping http requests responses simplest possible, unifies distills servers, frameworks, software between (the so-called middleware) into single method call. explaining rack works really scope this guide. case familiar with rack's basics, should check resources section below."},{"id":324,"title":"Rails on Rack","heading":"2 Rails on Rack","subheading":"2.1 Rails Application's Rack Object","content":"rails.application primary rack application object rails application. rack compliant server should using rails.application object serve rails application."},{"id":325,"title":"Rails on Rack","heading":"2 Rails on Rack","subheading":"2.2 rails server","content":"rails server does basic creating rack::server object starting server. here's rails server creates instance rack::server rails::server inherits from rack::server calls rack::server#start method this way:"},{"id":326,"title":"Rails on Rack","heading":"2 Rails on Rack","subheading":"2.3 rackup","content":"rackup instead rails' rails server, following inside config.ru your rails application's root directory: start server: find more about different rackup options, run:"},{"id":327,"title":"Rails on Rack","heading":"2 Rails on Rack","subheading":"2.4 Development and auto-reloading","content":"middlewares loaded once monitored changes. will have restart server changes reflected running application. many action dispatcher's internal components implemented rack middlewares. rails::application uses actiondispatch::middlewarestack combine various internal external middlewares form complete rails rack application."},{"id":328,"title":"Rails on Rack","heading":"3 Action Dispatcher Middleware Stack","subheading":"3.1 Inspecting Middleware Stack","content":"rails handy command inspecting middleware stack use: freshly generated rails application, this might produce something like: default middlewares shown here (and some others) each summarized internal middlewares section, below."},{"id":329,"title":"Rails on Rack","heading":"3 Action Dispatcher Middleware Stack","subheading":"3.2 Configuring Middleware Stack","content":"rails provides simple configuration interface config.middleware adding, removing, modifying middlewares middleware stack application.rb environment specific configuration file environments/<environment>.rb. middleware middleware stack using following methods: swap existing middleware middleware stack using config.middleware.swap. following lines your application configuration: inspect middleware stack, you'll find that rack::runtime part want remove session related middleware, following: remove browser related middleware,"},{"id":330,"title":"Rails on Rack","heading":"3 Action Dispatcher Middleware Stack","subheading":"3.3 Internal Middleware Stack","content":"much action controller's functionality implemented middlewares. following list explains purpose each them: rack::sendfile actiondispatch::static rack::lock actiondispatch::executor activesupport::cache::strategy::localcache::middleware rack::runtime rack::methodoverride actiondispatch::requestid actiondispatch::remoteip sprockets::rails::quietassets rails::rack::logger actiondispatch::showexceptions actiondispatch::debugexceptions actiondispatch::reloader actiondispatch::callbacks activerecord::migration::checkpending actiondispatch::cookies actiondispatch::session::cookiestore actiondispatch::flash actiondispatch::contentsecuritypolicy::middleware rack::head rack::conditionalget rack::etag rack::tempfilereaper"},{"id":331,"title":"Rails on Rack","heading":"4 Resources","subheading":"4.1 Learning Rack","content":""},{"id":332,"title":"Rails on Rack","heading":"4 Resources","subheading":"4.2 Understanding Middlewares","content":"você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":333,"title":"Ruby on Rails 5.0 Release Notes","heading":"1 Upgrading to Rails 5.0","subheading":"1 Upgrading to Rails 5.0","content":"you're upgrading existing application, it's great idea have good test coverage before going should also first upgrade rails case haven't make sure your application still runs expected before attempting update rails 5.0. list things watch when upgrading available upgrading ruby rails guide."},{"id":334,"title":"Ruby on Rails 5.0 Release Notes","heading":"2 Major Features","subheading":"2.1 Action Cable","content":"action cable framework rails seamlessly integrates websockets with rest your rails application. action cable allows real-time features written ruby same style form rest your rails application, while still being performant scalable. it's full-stack offering that provides both client-side javascript framework server-side ruby framework. have access your full domain model written with active record your choice. action cable overview guide more information."},{"id":335,"title":"Ruby on Rails 5.0 Release Notes","heading":"2 Major Features","subheading":"2.2 API Applications","content":"rails used create slimmed down only applications. this useful creating serving apis similar twitter github api, that used serve public facing, well custom applications. generate rails using: this will three main things: application provides base apis, that then configured pull functionality suitable application's needs. using rails api-only applications guide more information."},{"id":336,"title":"Ruby on Rails 5.0 Release Notes","heading":"2 Major Features","subheading":"2.3 Active Record attributes API","content":"defines attribute with type model. will override type existing attributes needed. this allows control over values converted from when assigned model. also changes behavior values passed activerecord::base.where, which lets domain objects across much active record, without having rely implementation details monkey patching. some things that achieve with this: creating custom types: define your custom types, long they respond methods defined value type. method deserialize cast will called your type object, with input from database from your controllers. this useful, example, when doing custom conversion, like money data. querying: when activerecord::base.where called, will type defined model class convert value sql, calling serialize your type object. this gives objects ability specify, convert values when performing queries. dirty tracking: type attribute given opportunity change dirty tracking performed. documentation detailed write"},{"id":337,"title":"Ruby on Rails 5.0 Release Notes","heading":"2 Major Features","subheading":"2.4 Test Runner","content":"test runner been introduced enhance capabilities running tests from rails. this test runner simply type bin/rails test. test runner inspired from rspec, minitest-reporters, maxitest others. includes some these notable advancements: please refer changelog detailed changes."},{"id":338,"title":"Ruby on Rails 5.0 Release Notes","heading":"3 Railties","subheading":"3.1 Removals","content":""},{"id":339,"title":"Ruby on Rails 5.0 Release Notes","heading":"3 Railties","subheading":"3.2 Deprecations","content":""},{"id":340,"title":"Ruby on Rails 5.0 Release Notes","heading":"3 Railties","subheading":"3.3 Notable changes","content":"please refer changelog detailed changes."},{"id":341,"title":"Ruby on Rails 5.0 Release Notes","heading":"4 Action Pack","subheading":"4.1 Removals","content":""},{"id":342,"title":"Ruby on Rails 5.0 Release Notes","heading":"4 Action Pack","subheading":"4.2 Deprecations","content":""},{"id":343,"title":"Ruby on Rails 5.0 Release Notes","heading":"4 Action Pack","subheading":"4.3 Notable changes","content":"please refer changelog detailed changes."},{"id":344,"title":"Ruby on Rails 5.0 Release Notes","heading":"5 Action View","subheading":"5.1 Removals","content":""},{"id":345,"title":"Ruby on Rails 5.0 Release Notes","heading":"5 Action View","subheading":"5.2 Notable Changes","content":"please refer changelog detailed changes."},{"id":346,"title":"Ruby on Rails 5.0 Release Notes","heading":"6 Action Mailer","subheading":"6.1 Removals","content":""},{"id":347,"title":"Ruby on Rails 5.0 Release Notes","heading":"6 Action Mailer","subheading":"6.2 Notable changes","content":"please refer changelog detailed changes."},{"id":348,"title":"Ruby on Rails 5.0 Release Notes","heading":"7 Active Record","subheading":"7.1 Removals","content":""},{"id":349,"title":"Ruby on Rails 5.0 Release Notes","heading":"7 Active Record","subheading":"7.2 Deprecations","content":""},{"id":350,"title":"Ruby on Rails 5.0 Release Notes","heading":"7 Active Record","subheading":"7.3 Notable changes","content":"please refer changelog detailed changes."},{"id":351,"title":"Ruby on Rails 5.0 Release Notes","heading":"8 Active Model","subheading":"8.1 Removals","content":""},{"id":352,"title":"Ruby on Rails 5.0 Release Notes","heading":"8 Active Model","subheading":"8.2 Deprecations","content":""},{"id":353,"title":"Ruby on Rails 5.0 Release Notes","heading":"8 Active Model","subheading":"8.3 Notable changes","content":"please refer changelog detailed changes."},{"id":354,"title":"Ruby on Rails 5.0 Release Notes","heading":"9 Active Job","subheading":"9.1 Notable changes","content":"please refer changelog detailed changes."},{"id":355,"title":"Ruby on Rails 5.0 Release Notes","heading":"10 Active Support","subheading":"10.1 Removals","content":""},{"id":356,"title":"Ruby on Rails 5.0 Release Notes","heading":"10 Active Support","subheading":"10.2 Deprecations","content":""},{"id":357,"title":"Ruby on Rails 5.0 Release Notes","heading":"10 Active Support","subheading":"10.3 Notable changes","content":"full list contributors rails many people spent many hours making rails, stable robust framework kudos them. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":358,"title":"Básico de Active Model","heading":"1 Introdução","subheading":"1 Introdução","content":"active model biblioteca contém vários módulos utilizados desenvolvimento classes precisam algumas funções (features) existentes active record. alguns desses módulos serão explicados abaixo."},{"id":359,"title":"Básico de Active Model","heading":"1 Introdução","subheading":"1.1 Métodos de Atributo","content":"activemodel::attributemethods, módulo pode adicionar prefixos sufixos customizados metodos classe. isso feito pela definição prefixos sufixos quais métodos objeto utilizá-los."},{"id":360,"title":"Básico de Active Model","heading":"1 Introdução","subheading":"1.2 Callbacks","content":"activemodel::callbacks trazem callbacks padrão active record. isso provê habilidade definir callback rodará tempo apropriado. após definir callbacks, você pode envolvê-los métodos customizados antes, depois durante."},{"id":361,"title":"Básico de Active Model","heading":"1 Introdução","subheading":"1.3 Conversão","content":"classe define métodos persisted? então você pode incluir módulo activemodel::conversion naquela classe chamar métodos conversão rails objetos daquela classe."},{"id":362,"title":"Básico de Active Model","heading":"1 Introdução","subheading":"1.4 Sujeira","content":"objeto torna sujo quando passa mais mudanças seus atributos isso salvo. activemodel::dirty concede habilidade checar quando objeto alterado não. também possui atributos baseados métodos acesso. vamos considerar classe person atributos first_name last_name: acompanhe atributo específico alterado não. track previous value attribute. track both previous current value changed attribute. returns array changed, otherwise returns nil."},{"id":363,"title":"Básico de Active Model","heading":"1 Introdução","subheading":"1.5 Validações","content":"módulo activemodel::validations adiciona habilidade validar objetos como active record."},{"id":364,"title":"Básico de Active Model","heading":"1 Introdução","subheading":"1.6 Nomeação","content":"activemodel::naming adiciona vários métodos classe tornam nomeação roteamento mais fácil administrar. módulo define método classe model_name definirá vários acessadores usando alguns métodos activesupport::inflector."},{"id":365,"title":"Básico de Active Model","heading":"1 Introdução","subheading":"1.7 Model","content":"activemodel::model adiciona capacidade classe trabalhar action pack action view imediatamente. incluir activemodel::model, você obtém alguns recursos como: também oferece capacidade inicializar objeto hash atributos, muito parecido qualquer objeto active record. qualquer classe inclua activemodel::model pode usada form_for, render quaisquer outros métodos auxiliares action view, assim como active record objetos."},{"id":366,"title":"Básico de Active Model","heading":"1 Introdução","subheading":"1.8 Serialização","content":"activemodel::serialization fornece serialização básica objeto. você precisa declarar hash atributos contém atributos deseja serializar. atributos devem cadeias, símbolos. agora você pode acessar hash serializado objeto usando método serializable_hash. active model também fornece módulo activemodel::serializers::json serialização desserialização json. este módulo inclui automaticamente módulo activemodel::serialization discutido anteriormente. usar activemodel::serializers::json, você precisa alterar módulo você está incluindo activemodel::serialization paraactivemodel::serializers::json. método as_json, semelhante aoserializable_hash, fornece hash representando modelo. você também pode definir atributos modelo partir sequência json. entanto, você precisa definir método attribute classe: agora possível criar instância person definir atributos usandofrom_json."},{"id":367,"title":"Básico de Active Model","heading":"1 Introdução","subheading":"1.9 Tradução","content":"activemodel::translation fornece integração entre objeto rails internacionalização (i18n). método human_attribute_name, você pode transformar nomes atributos formato mais legível humanos. formato legível humanos definido seus arquivos localidade."},{"id":368,"title":"Básico de Active Model","heading":"1 Introdução","subheading":"1.10 Lint Tests","content":"activemodel::lint::tests permite testar objeto compatível model ativo. necessário objeto implementar todas apis trabalhar action pack. este módulo pretende apenas fornecer orientação caso você queira todos recursos prontos uso."},{"id":369,"title":"Básico de Active Model","heading":"1 Introdução","subheading":"1.11 SecurePassword","content":"activemodel::securepassword fornece maneira armazenar segurança qualquer senha forma criptografada. quando você inclui este módulo, fornecido método classe has_secure_password define acessador senha certas validações padrão. activemodel::securepassword depende bcrypt, portanto, inclua esta gemfile usar oactivemodel::securepassword corretamente. fazer isso funcionar, model deve acessador chamado xxx_digest. onde nome atributo senha desejada. seguintes validações adicionadas automaticamente: você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":370,"title":"Ruby on Rails 4.0 Release Notes","heading":"1 Upgrading to Rails 4.0","subheading":"1 Upgrading to Rails 4.0","content":"you're upgrading existing application, it's great idea have good test coverage before going should also first upgrade rails case haven't make sure your application still runs expected before attempting update rails 4.0. list things watch when upgrading available upgrading ruby rails guide."},{"id":371,"title":"Ruby on Rails 4.0 Release Notes","heading":"2 Creating a Rails 4.0 application","subheading":"2.1 Vendoring Gems","content":"rails uses gemfile application root determine gems require your application start. this gemfile processed bundler gem, which then installs your dependencies. even install dependencies locally your application that doesn't depend system gems. more information: bundler homepage"},{"id":372,"title":"Ruby on Rails 4.0 Release Notes","heading":"2 Creating a Rails 4.0 application","subheading":"2.2 Living on the Edge","content":"bundler gemfile makes freezing your rails application easy with dedicated bundle command. want bundle straight from repository, pass --edge flag: have local checkout rails repository want generate application using that, pass --dev flag: "},{"id":373,"title":"Ruby on Rails 4.0 Release Notes","heading":"3 Major Features","subheading":"3.1 Upgrade","content":""},{"id":374,"title":"Ruby on Rails 4.0 Release Notes","heading":"3 Major Features","subheading":"3.2 ActionPack","content":""},{"id":375,"title":"Ruby on Rails 4.0 Release Notes","heading":"3 Major Features","subheading":"3.3 General","content":""},{"id":376,"title":"Ruby on Rails 4.0 Release Notes","heading":"3 Major Features","subheading":"3.4 Security","content":"rails 4.0, several features have been extracted into gems. simply extracted gems your gemfile bring functionality back. please refer changelog detailed changes."},{"id":377,"title":"Ruby on Rails 4.0 Release Notes","heading":"6 Railties","subheading":"6.1 Notable changes","content":""},{"id":378,"title":"Ruby on Rails 4.0 Release Notes","heading":"6 Railties","subheading":"6.2 Deprecations","content":"please refer changelog detailed changes."},{"id":379,"title":"Ruby on Rails 4.0 Release Notes","heading":"7 Action Mailer","subheading":"7.1 Notable changes","content":""},{"id":380,"title":"Ruby on Rails 4.0 Release Notes","heading":"7 Action Mailer","subheading":"7.2 Deprecations","content":"please refer changelog detailed changes."},{"id":381,"title":"Ruby on Rails 4.0 Release Notes","heading":"8 Active Model","subheading":"8.1 Notable changes","content":""},{"id":382,"title":"Ruby on Rails 4.0 Release Notes","heading":"8 Active Model","subheading":"8.2 Deprecations","content":"please refer changelog detailed changes."},{"id":383,"title":"Ruby on Rails 4.0 Release Notes","heading":"9 Active Support","subheading":"9.1 Notable changes","content":""},{"id":384,"title":"Ruby on Rails 4.0 Release Notes","heading":"9 Active Support","subheading":"9.2 Deprecations","content":"please refer changelog detailed changes."},{"id":385,"title":"Ruby on Rails 4.0 Release Notes","heading":"10 Action Pack","subheading":"10.1 Notable changes","content":""},{"id":386,"title":"Ruby on Rails 4.0 Release Notes","heading":"10 Action Pack","subheading":"10.2 Deprecations","content":"please refer changelog detailed changes."},{"id":387,"title":"Ruby on Rails 4.0 Release Notes","heading":"11 Active Record","subheading":"11.1 Notable changes","content":""},{"id":388,"title":"Ruby on Rails 4.0 Release Notes","heading":"11 Active Record","subheading":"11.2 Deprecations","content":"full list contributors rails many people spent many hours making rails, stable robust framework kudos them. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":389,"title":"Trabalhando com JavaScript no Rails","heading":"1 Uma introdução ao Ajax","subheading":"1 Uma introdução ao Ajax","content":"entender ajax, você precisa entender primeiro navegador normalmente. quando você digita http://localhost:3000 barra endereço navegador clica enter, navegador (seu 'cliente') requisição servidor. analisa resposta, traz todos assets associados, como arquivos javascript, stylesheets imagens. então monta página. você clica link, repete mesmo processo: encontra página, encontra assets, coloca eles juntos mostra resultado. isso chamado 'ciclo requisição resposta'. javascript também pode fazer requisições servidor, analisar resposta. também habilidade atualizar informações página. combinando esses dois poderes, javascript permite página atualize partes próprio conteúdo, precisar pegar página inteira servidor. essa técnica poderosa chamamos ajax. rails distribuído padrão coffeescript, então resto exemplos neste guia serão coffeescript. todos essas lições, naturalmente, também funcionam javascript puro (vanilla). como exemplo, aqui está código coffeescript requisição ajax usando biblioteca jquery: este código pega dados \"/test\", então anexa resultado results. rails fornece muito suporte interno criação páginas essa técnica. você raramente terá escrever esse código. resto deste guia mostrar como rails pode ajudar escrever páginas desse modo, tudo isso feito partir dessa técnica muito simples. rails técnica chamada \"javascript discreto (unobtrusive)\" lidar junção javascript dom. essa costuma considerada melhor prática entre comunidade frontend, você pode ocasionalmente tutoriais demonstram outras formas. aqui está modo mais simples escrever javascript. você pode sendo referido como 'inline javascript': clicar link, ficará vermelho. aqui está problema: acontece quando queremos mais javascript seja executado clique? estranho, certo? poderíamos retirar definição função manipulador cliques, transformar coffeescript: então nossa página: esse pouco melhor, múltiplos links mesmo efeito? muito dry, ahn? podemos corrigir usando eventos. vamos adicionar atributo data-* nossos links, então vincular manipulador evento clique cada link tenha esse atributo: chamamos isso javascript 'discreto (unobtrusive)' porque estamos mais misturando nosso javascript dentro html. estamos separando propriamente nossos interesses, facilitando mudanças futuras. podemos facilmente adicionar comportamentos qualquer link adicionando atributo data. podemos rodar todo nosso javascript através minimizador concatenador. podemos entregar todo nosso pacote javascript cada página, significa terá baixado quando primeira página carregar então será salvo memória cache (cached) todas páginas depois disso. muitos pequenos benefícios realmente somam. time rails fortemente encoraja escrever coffeescript javascript) nesse estilo, você pode esperar muitas bibliotecas também seguirão esse padrão."},{"id":390,"title":"Trabalhando com JavaScript no Rails","heading":"3 Helpers Internos","subheading":"3.1 Elementos Remotos","content":"rails fornece grupo métodos view helper escritos ruby ajudar você criação html. vezes, você quer adicionar pouco ajax esses elementos, rails cobertura nesses casos. causa javascript obtrusivo (unobtrusive), \"ajax helpers\" rails estão atualmente duas partes: metade javascript metade rails. você desabilite asset pipeline, rails-ujs fornece metade javascript, view helpers regulares ruby adicionam tags apropriadas dom. você pode abaixo sobre diferença eventos disparados lidando elementos remotos dentro aplicação. form_with helper auxilia escrita formulários. padrão, form_with assume formulário estará usando ajax. você pode desativar esse comportamento passando opção :local form_with isso gerar seguinte html: veja data-remote=\"true\". agora, formulário será enviado ajax invés mecanismo normal envio browser. você provavelmente quer ficar sentado <form> preenchido, entretanto. você provavelmente quer algo aconteça após envio bem-sucedido. fazer isso, vincule evento ajax:success. caso falha, ajax:error. confira: obviamente, você querer pouco mais sofisticado isso, começo. link_to helper ajuda geração links. opção :remote você pode usar assim: gera você pode vincular mesmos eventos ajax form_with. aqui está exemplo. vamos assumir temos lista artigos podem deletadas apenas clique. iríamos gerar html como este: escrever pouco coffeescript como este: button_to helper ajuda você criar botões. opção :remote você pode chamar assim: isso gera apenas <form>, todas informações form_with também aplicam."},{"id":391,"title":"Trabalhando com JavaScript no Rails","heading":"3 Helpers Internos","subheading":"3.2 Personalize elementos remotos","content":"possível personalizar comportamento elementos atributo data-remote escrever linha javascript. você pode especificar extras atributos data- fazer isso. ativando hyperlinks sempre resultam requisição http get. seja como for, aplicação restful, alguns links verdade ações mudam dados servidor, devem executados requisições diferentes get. esse atributo permite mudar tais links método explícito tais como \"post\", \"put\" \"delete\". modo como isso funciona que, quando link ativado, constrói formulário escondido documento atributo \"action\" correspondendo valor \"href\" link, método corresponde valor data-method, envia esse formulário. certos elementos página estão atualmente referenciando alguma url, você pode querer eles acionem chamadas ajax. especificando atributo data-url juntamente data-remote disparar chamada ajax dada. você pode também especificar parâmetros extras através atributo data-params. isso pode útil disparar ação check-boxes exemplo: também possível definir ajax datatype explicitamente enquanto desempenha requisições elementos data-remote, meio atributo data-type"},{"id":392,"title":"Trabalhando com JavaScript no Rails","heading":"3 Helpers Internos","subheading":"3.3 Confirmations","content":"você pode pedir confirmação extra usuário adicionando atributo data-confirm links formulários. usuário verá caixa diálogo confirm() javascript contendo texto atributo. usuário escolher cancelar, ação acontece. adicionando esse atributo links, será disparado mensagem clique, adicionando formulários, será disparado submit. exemplo: isso gera: atributo também está disponível botão submit formulário. isso permite você customizar mensagem aviso dependendo botão ativado. nesse caso, você deve data-confirm formulário confirmação padrão mensagem confirmação javascript, você pode mudar isso pegando evento confirm, qual disparado antes janela confirmação aparecer usuário. cancelar essa confirmação padrão, você fazer gerenciador confirmação retornar false."},{"id":393,"title":"Trabalhando com JavaScript no Rails","heading":"3 Helpers Internos","subheading":"3.4 Desativando Automaticamente","content":"também possível desabilitar automaticamente input enquanto formulário está sendo enviado usando atributo data-disable-with. isso evita acidentes duplo cliques usuário, qual resultaria dupla requisição http backend pode detectar como tal. valor atributo texto tornará novo valor botão quando está estado desabilitado. isso também funciona links atributo data-method. exemplo: isso gera formulário com:"},{"id":394,"title":"Trabalhando com JavaScript no Rails","heading":"3 Helpers Internos","subheading":"3.5 Manipuladores de eventos Rails-ujs","content":"rails introduziu rails-ujs removeram jquery como dependência. como resultado javascript discreto (unobtrusive (ujs)) reescrito operar jquery. estas introduções causam pequenas mudanças eventos personalizados executados durante requisição: exemplo uso:"},{"id":395,"title":"Trabalhando com JavaScript no Rails","heading":"3 Helpers Internos","subheading":"3.6 Eventos Paravéis","content":"você pode parar execução requisição ajax executando event.preventdefault() partir métodos ajax:before ajax:beforesend. evento ajax:before pode manipular dados formulário antes serialização evento ajax:beforesend útil adicionar headers personalizados. você parar evento ajax:aborted:file, comportamento padrão permitir navegador envie formulário meios normais (i.e. requisição ajax) será cancelada formulário será enviado nenhuma forma. isso útil implementar próprio ambiente upload arquivos ajax. observação, você deveria usar return false prevenir eventos jquery-ujs e.preventdefault() rails-ujs ajax lado cliente, você também precisa trabalhar lado servidor oferecer suporte, geralmente, pessoas gostam suas requisições retornem json mais html. vamos discutir preciso fazer isso acontecer."},{"id":396,"title":"Trabalhando com JavaScript no Rails","heading":"4 Preocupações Do Lado Do Servidor","subheading":"4.1 Um Exemplo Simples","content":"imagine você tenha série usuários você gostaria mostrar fornecer formulário nessa mesma página criar novo usuário. ação index controller parece isso: view index (app/views/users/index.html.erb) contém: partial app/views/users/_user.html.erb contém seguinte: parte cima página index mostra usuários. parte baixo fornece formulário criar novo usuário. formulário baixo chamará ação create userscontroller. causa opção remote definida como true, requisição será enviada userscontroller como requisição ajax, procurando javascript. afim atender requisição, ação create controller ficaria assim: observe format.js bloco respond_to: permite controller responder requisição ajax. então você correspondente arquivo view app/views/users/create.js.erb gera atual código javascript será enviado executado lado cliente. rails biblioteca turbolinks, utiliza ajax acelerar renderização maioria aplicações."},{"id":397,"title":"Trabalhando com JavaScript no Rails","heading":"5 Turbolinks","subheading":"5.1 Como o Turbolinks Funciona","content":"turbolinks anexa manipulador cliques todas tags página. navegador tiver suporte pushstate, turbolinks fará requisição página, analisará resposta, trocará <body> inteiro página <body> resposta. então usará pushstate mudar correta, preservando semântica atualização retornando urls bonitas. você quiser desabilitar turbolinks certos links, adicione atributo data-turbolinks=\"false\" tag:"},{"id":398,"title":"Trabalhando com JavaScript no Rails","heading":"5 Turbolinks","subheading":"5.2 Eventos de Mudança de Página","content":"quando escrever coffeescript, muitas vezes você querer fazer algum tipo mudança carregamento página. jquery, você escreveria assim: contudo, como turbolinks sobreescreve processo padrão carregamento página, evento qual depende será disparado. você código parece isso, você deve mudar código fazer isso lugar: mais detalhes, incluindo outros eventos você pode disparar, veja readme turbolinks usar outra biblioteca fazer chamadas ajax, necessário adicionar token segurança como header padrão chamadas ajax biblioteca. pegar token: você pode então enviar esse token como x-csrf-token header requisições ajax. você precisa adicionar csrf requisições get, apenas requisições non-get. você pode mais sobre falsa requisição entre sites (csrf) segurança aqui estão alguns links úteis ajudar aprender mais: você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":399,"title":"Ruby on Rails 5.2 Release Notes","heading":"1 Upgrading to Rails 5.2","subheading":"1 Upgrading to Rails 5.2","content":"you're upgrading existing application, it's great idea have good test coverage before going should also first upgrade rails case haven't make sure your application still runs expected before attempting update rails 5.2. list things watch when upgrading available upgrading ruby rails guide."},{"id":400,"title":"Ruby on Rails 5.2 Release Notes","heading":"2 Major Features","subheading":"2.1 Active Storage","content":"pull request active storage facilitates uploading files cloud storage service like amazon google cloud storage, microsoft azure storage attaching those files active record objects. comes with local disk-based service development testing supports mirroring files subordinate services backups migrations. read more about active storage active storage overview guide."},{"id":401,"title":"Ruby on Rails 5.2 Release Notes","heading":"2 Major Features","subheading":"2.2 Redis Cache Store","content":"pull request rails ships with built-in redis cache store. read more about this caching with rails: overview guide."},{"id":402,"title":"Ruby on Rails 5.2 Release Notes","heading":"2 Major Features","subheading":"2.3 HTTP/2 Early Hints","content":"pull request rails supports http/2 early hints. start server with early hints enabled pass --early-hints bin/rails server."},{"id":403,"title":"Ruby on Rails 5.2 Release Notes","heading":"2 Major Features","subheading":"2.4 Credentials","content":"pull request added config/credentials.yml.enc file store production secrets. allows saving authentication credentials third-party services directly repository encrypted with config/master.key file rails_master_key environment variable. this will eventually replace rails.application.secrets encrypted secrets introduced rails 5.1. furthermore, rails opens underlying credentials, easily deal with other encrypted configurations, keys, files. read more about this securing rails applications guide."},{"id":404,"title":"Ruby on Rails 5.2 Release Notes","heading":"2 Major Features","subheading":"2.5 Content Security Policy","content":"pull request rails ships with that allows configure content security policy your application. configure global default policy then override per-resource basis even lambdas inject per-request values into header such account subdomains multi-tenant application. read more about this securing rails applications guide. please refer changelog detailed changes."},{"id":405,"title":"Ruby on Rails 5.2 Release Notes","heading":"3 Railties","subheading":"3.1 Deprecations","content":""},{"id":406,"title":"Ruby on Rails 5.2 Release Notes","heading":"3 Railties","subheading":"3.2 Notable changes","content":"please refer changelog detailed changes."},{"id":407,"title":"Ruby on Rails 5.2 Release Notes","heading":"4 Action Cable","subheading":"4.1 Removals","content":""},{"id":408,"title":"Ruby on Rails 5.2 Release Notes","heading":"4 Action Cable","subheading":"4.2 Notable changes","content":"please refer changelog detailed changes."},{"id":409,"title":"Ruby on Rails 5.2 Release Notes","heading":"5 Action Pack","subheading":"5.1 Removals","content":""},{"id":410,"title":"Ruby on Rails 5.2 Release Notes","heading":"5 Action Pack","subheading":"5.2 Deprecations","content":""},{"id":411,"title":"Ruby on Rails 5.2 Release Notes","heading":"5 Action Pack","subheading":"5.3 Notable changes","content":"please refer changelog detailed changes."},{"id":412,"title":"Ruby on Rails 5.2 Release Notes","heading":"6 Action View","subheading":"6.1 Removals","content":""},{"id":413,"title":"Ruby on Rails 5.2 Release Notes","heading":"6 Action View","subheading":"6.2 Deprecations","content":""},{"id":414,"title":"Ruby on Rails 5.2 Release Notes","heading":"6 Action View","subheading":"6.3 Notable changes","content":"please refer changelog detailed changes."},{"id":415,"title":"Ruby on Rails 5.2 Release Notes","heading":"7 Action Mailer","subheading":"7.1 Notable changes","content":"please refer changelog detailed changes."},{"id":416,"title":"Ruby on Rails 5.2 Release Notes","heading":"8 Active Record","subheading":"8.1 Removals","content":""},{"id":417,"title":"Ruby on Rails 5.2 Release Notes","heading":"8 Active Record","subheading":"8.2 Deprecations","content":""},{"id":418,"title":"Ruby on Rails 5.2 Release Notes","heading":"8 Active Record","subheading":"8.3 Notable changes","content":"please refer changelog detailed changes."},{"id":419,"title":"Ruby on Rails 5.2 Release Notes","heading":"9 Active Model","subheading":"9.1 Notable changes","content":"please refer changelog detailed changes."},{"id":420,"title":"Ruby on Rails 5.2 Release Notes","heading":"10 Active Support","subheading":"10.1 Removals","content":""},{"id":421,"title":"Ruby on Rails 5.2 Release Notes","heading":"10 Active Support","subheading":"10.2 Deprecations","content":""},{"id":422,"title":"Ruby on Rails 5.2 Release Notes","heading":"10 Active Support","subheading":"10.3 Notable changes","content":"please refer changelog detailed changes."},{"id":423,"title":"Ruby on Rails 5.2 Release Notes","heading":"11 Active Job","subheading":"11.1 Notable changes","content":"please refer changelog detailed changes."},{"id":424,"title":"Ruby on Rails 5.2 Release Notes","heading":"12 Ruby on Rails Guides","subheading":"12.1 Notable changes","content":"full list contributors rails many people spent many hours making rails, stable robust framework kudos them. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":425,"title":"Action Controller Overview","heading":"1 O que um Controller faz?","subheading":"1 O que um Controller faz?","content":"actioncontroller mvc. após router determinar qual controller usar requisição, controller será responsável entender requisição retornar resposta apropriada. sorte, actioncontroller maior parte trabalho fundamental você convenções inteligentes fazer esse processo intuitivo quanto possível. maior parte aplicações restful,o controller receberá requisição \"invisível\" você está desenvolvendo), busca e/ou salva dados model, view criar saída html. controller precisa tratar requisições pouco diferente, isso problema, este apenas jeito mais comum controller trabalhar. controller pode então pensado como intermediário entre model view. isso dados model fiquem disponíveis view possa mostrado usuário, salva atualiza dados usuário model. convenção nomenclatura controllers rails favorece pluralização última palavra nome controller, embora seja estritamente necessário (ex: applicationcontroller). exemplo, clientscontroller recomendado invés clientcontroller, siteadminscontroller recomendado invés siteadmincontroller sitesadminscontroller, assim diante. seguindo essa convenção será possível utilizar gerador rotas padrão (ex: resources, etc) precisar configurar cada :path :controller, ainda manter consistente auxiliares rotas todo projeto. veja layouts guia renderização mais detalhes. controller classe ruby herda applicationcontroller métodos como qualquer outra classe. quando aplicação recebe requisição, roteamento determinar qual controller qual action serão executados, então rails criar instância desse controller executará método possui mesmo nome action. como exemplo, usuário acessar /clients/new aplicação adicionar novo cliente, rails criar instância clientscontroller chamar método dele. repare método vazio exemplo acima funcionaria normalmente porque rails padrão renderizar view new.html.erb menos action indique outro caminho. criar novo client método pode tornar variável instância @client acessível view. guia layouts renderização explica essa etapa mais detalhadamente. applicationcontroller herda actioncontroller::base, define quantidade métodos úteis. este guia cobrir alguns destes métodos, você estiver curiosidade neles, você pode todos eles documentação próprio código fonte. apenas métodos públicos executáveis como actions. prática diminuir visibilidade métodos (utilizando private protected) foram designados serem actions, como métodos auxiliares filtros. você provavelmente querer acessar dados enviados pelo usuário outros parâmetros actions controller. existem dois tipos parâmetros possíveis numa aplicação web. primeiro parâmetros enviados como parte url, chamados parâmetros query string. query string tudo após url. segundo tipo parâmetro geralmente referido como dados post. essa informação geralmente formulário html preenchido pelo usuário. chamam dados post porque estes dados somente podem enviados como parte requisição http usando verbo post. rails distinção sobre parâmetros query string parâmetros post, ambos acessíveis meio hash params controller:"},{"id":426,"title":"Action Controller Overview","heading":"4 Parâmetros","subheading":"4.1 Hash e Parâmetros de Array","content":"hash params limitado vetor unidimensional chaves valores. pode conter arrays hashes aninhados. enviar array valores, concatene colchetes vazio \"[]\" nome chave: valor params[:ids] será neste caso [\"1\", \"2\", \"3\"]. note valores parâmetros sempre strings; rails tenta adivinhar converter tipo. enviar hash, você inclui nome chave dentro colchetes: quando esse formulário enviado valor params[:client] será \"name\" \"acme\", \"phone\" \"12345\", \"address\" \"postcode\" \"12345\", \"city\" \"carrot city\" repare hash aninhado params[:client][:address]. objeto params atua como hash, permite você symbols strings indistintamente como chaves."},{"id":427,"title":"Action Controller Overview","heading":"4 Parâmetros","subheading":"4.2 Parâmetros JSON","content":"você está construindo aplicação web, você pode achar mais confortável receber parâmetros formato json. header \"content-type\" requisição estiver definido como \"application/json\" rails automaticamente carregar seus parâmetros hash params, você pode acessar como acessaria normalmente. então exemplo, você estiver enviando este conteúdo json: controller receber params[:company] formato \"name\" \"acme\", \"address\" \"123 carrot street\" além disso, você tiver ativado config.wrap_parameters inicializador chamado wrap_parameters controller, você pode omitir elemento raiz parâmetro json. neste caso, parâmetros serão clonados enpacotados chave baseada nome controller. então requisição json acima pode escrita como: assumindo você está enviando dados companiescontroller, eles serão então encapsulados chave :company desta maneira: você pode customizar nome chave parâmetros específicos você quer envelopar consultando documentação"},{"id":428,"title":"Action Controller Overview","heading":"4 Parâmetros","subheading":"4.3 Parâmetros de Rota","content":"hash params sempre conter chaves :controller :action, você deve usar métodos nome_do_controller nome_da_action acessar estes valores. quaisquer outros parâmetros definidos pela rota, como :id, também estarão disponíveis. exemplo, considere listagem clientes onde lista pode mostrar clientes ativos inativos. podemos adicionar rota captura parâmetro :status numa \"normalizada\": neste caso, quando usuário abrir /clients/active, params[:status] estará definido como \"active\". quando esta rota usada, params[:foo] também será definido como \"bar\", como tivesse sido enviado meio query string. controller também receber params[:action] valor \"index\" params[:controller] valor \"clients\"."},{"id":429,"title":"Action Controller Overview","heading":"4 Parâmetros","subheading":"4.4 default_url_options","content":"você pode determinar parâmetros padrão globais geração urls definindo método chamado default_url_options controller. este método deve retornar hash dados padrão desejados, cujas chaves devem símbolos: estas opções serão usadas como ponto partida geração urls, então possível elas sejam sobrescritas pelas opções passadas chamadas url_for. você definir default_url_options applicationcontroller, como exemplo acima, estes padrões irão usados todas gerações url. método pode também definido controller específico, neste caso afetando somente urls geradas partir desse escopo. numa requisição método fato chamado toda gerada; questões performance hash retornado cacheado. máximo invocação requisição."},{"id":430,"title":"Action Controller Overview","heading":"4 Parâmetros","subheading":"4.5 Parâmetros Fortes","content":"parâmetros fortes (strong parameters), parâmetros action controller proibidos serem usados atribuições massa active model sejam deliberadamente permitidos. isso significa você tomar decisão consciente sobre quais atributos podem permitidos update massa. esta prática mais segura ajudar prevenir acidentalmente usuários atualizem atributos sensíveis model. além disso, parâmetros podem marcados como obrigatórios irão seguir fluxo erro tratamento predefinido resultar código request sendo retornado caso todos parâmetros obrigatórios forem informados. dado seguinte código: chave será permitida inclusão aparecer params tiver valor escalar permitido associado ela. caso contrário chave será filtrada, então arrays, hashes, quaisquer outros objetos poderão adicionados. tipos escalares permitidos string, symbol, nilclass, numeric, trueclass, falseclass, date, time, datetime, stringio, actiondispatch::http::uploadedfile, rack::test::uploadedfile. declarar valor params deve array valores escalares permitidos, mapeie chave array vazio. vezes possível conveniente declarar chaves válidas parâmetro hash estrutura interna. apenas mapeie hash vazio: entretanto fique atento porque isso abre porta input arbitrário. neste caso, permit garante valores estrutura retornada valores escalares permitidos filtragem tudo houver além deles. permitir hash completo parâmetros, método permit! pode usado: este código marca hash parâmetros :log_entry qualquer sub-hash dele como valores permitidos verifica escalares permitidos, sendo qualquer coisa partir dele aceita. extremo cuidado deve considerado usar método permit!, visto permitir todos atuais futuros atributos model sejam preenchidos massa. você também pode usar permit parâmetros aninhados, seguinte forma: esta declaração permite preenchimento atributos name, emails, friends. esperado emails seja array valores permitidos escalares, friends seja array recursos atributos específicos: deve possuir atributo name (com quaisquer valores escalares permitidos), atributo hobbies como array valores permitidos escalares, atributo family restrito name (com qualquer valor escalar permitido também). você pode também querer usar atributos permitidos action new. isso traz problema você pode chamar require chave raiz porque normalmente existe momento chamada método classe model accepts_nested_attributes_for permite atualizar destruir outros models associados. isso baseado parâmetros _destroy: hashes chaves valor tipo inteiro tratados maneira diferente, você pode declarar atributos como eles fossem atributos filhos imediatos. você obtém estes tipos parâmetros quando você accepts_nested_attributes_for combinado associação has_many: imagine cenário onde você parâmetros representando nome produto hash dados arbitrários associado esse produto, você queira permitir preenchimento atributo nome produto também hash dados: parâmetros fortes desenhada casos mais comuns mente. houve intenção torná-la bala prateada lidar todos seus problemas filtragem parâmetros. entretanto, você pode facilmente misturar próprio código adaptar situação. aplicação possui sessão cada usuário, qual pode-se armazenar quantidades pequenas dados serão persistidos entre requisições. sessão fica disponível apenas controller view pode utilizar dentre vários mecanismos diferentes armazenamento: todos armazenamentos sessão utilizam cookie armazenar único cada sessão (você deve utilizar cookie, rails permitirá você passe sessão url, pois isso menos seguro). maioria armazenamentos, esse utilizado procurar dados sessão servidor, exemplo, tabela banco dados. apenas exceção, armazenamento sessão recomendado padrão cookiestore armazena todos dados sessão próprio cookie ainda estará disponível você, você precisar). vantagem muito leve requer zero configuração nova aplicação utilizar sessão. dados cookie assinados criptograficamente torná-los invioláveis, também criptografado qualquer pessoa acesso leia conteúdo. rails aceitará estiver sido editado). cookiestore pode armazenar cerca dados muito menos demais geralmente suficiente. armazenamento grandes quantidades dados sessão recomendado, independentemente qual armazenamento sessão aplicação utiliza. você deve evitar armazenar objetos complexos (qualquer coisa sejam objetos ruby básicos, exemplo mais comum instâncias model) sessão, pois servidor pode capaz remontá-los entre requisições, resultará erro. suas sessões usuário armazenam dados críticos precisam durar longos períodos (por exemplo, você apenas utiliza flash mensagens), considere actiondispatch::session::cachestore. isso armazenará sessões utilizando implementação cache você configurou aplicação. vantagem você pode utilizar infraestrutura cache existente armazenar sessões precisar nenhuma configuração administração adicional. desvantagem sessões serão temporárias poderão desaparecer qualquer momento. leia mais sobre armazenamento sessão guia segurança. você precisar mecanismo diferente sessão armazenamento, você poderá alterá-lo initializer: rails configura chave sessão nome cookie) assinar dados sessão. estes também podem alterados initializer: você também pode passar chave :domain especificar nome domínio cookie: rails configura (para cookiestore) chave secreta utilizada assinar dados sessão config/credentials.yml.enc. isso pode alterado comando rails credentials:edit."},{"id":431,"title":"Action Controller Overview","heading":"5 Sessão","subheading":"5.1 Acessando a Sessão","content":"controller, você pode acessar sessão através método instância session. valores sessão armazenados utilizando pares chave/valor como hash: armazenar algo sessão, basta atribuí-lo chave como hash: remover algo sessão, exclua chave/valor: redefinir sessão inteira, utilize reset_session."},{"id":432,"title":"Action Controller Overview","heading":"5 Sessão","subheading":"5.2 The Flash","content":"flash special part session which cleared with each request. this means that values stored there will only available next request, which useful passing error messages etc. accessed much same session, hash (it's flashhash instance). let's logging example. controller send message which will displayed user next request: note that also possible assign flash message part redirection. assign :notice, :alert general purpose :flash: destroy action redirects application's root_url, where message will displayed. note that it's entirely next action decide what, anything, will with what previous action flash. it's conventional display error alerts notices from flash application's layout: this way, action sets notice alert message, layout will display automatically. pass anything that session store; you're limited notices alerts: want flash value carried over another request, keep method: default, adding values flash will make them available next request, sometimes want access those values same request. example, create action fails save resource render template directly, that's going result request, still want display message using flash. this, flash.now same normal flash: aplicação pode armazemar pequenas quantidades dados cliente chamados cookies serão mantidas entre requisições sessões. rails fornece fácil acesso cookies através método cookies, assim como session funciona como hash: perceba enquanto valores sessão você define chave como nil, deletar valor cookie você deve usar cookies.delete(:key). rails também fornece cookie assinado cookie criptografado amazenar dados sensíveis. cookie assinado anexa assinaura criptográfica valores cookie proteger integridade. cookie criptografado, criptografa valores além assiná-los, eles possam lidos pelo usuário final. consulte documentação inglês) mais detalhes. esses cookie jars especiais usam serializer serializar valores atribuídos strings desserializa-os objetos ruby leitura. você pode especificar qual serializer usar: serializer padrão novas aplicações :json. compatibilidade aplicações antigas usam cookies, :marshal usado quando opção serializer está especificada. você também pode definir esta opção como :hybrid, nesse caso rails desserializaria forma transparente cookies (serializados formato marshal) existentes reescrevê-los formaro json. isso útil migrar aplicações existentes serializer :json. também possível passar serializer personalizado responda load dump: usar serializer :json :hybrid, lembre-se todos objetos ruby podem serializados como json. exemplo, objetos date etime serão serializados como strings, hashes terão suas chaves transformadas string também. aconselhável você armazene apenas dados simples (strings números) cookies. você precisar armazenar objetos complexos, precisará lidar conversão manualmente valores requisições subsequentes. você usar cookie armazenamento sessão, isso também aplicaria hashes session flash. actioncontroller renderizar dados json seja extremamente fácil. você gerou controller usando scaffold, será algo mais menos assim: você pode observar código acima estamos usando render xml: @users, render xml: @users.to_xml. objeto string, então rails automaticamente chama to_xml nós. filtros métodos rodam \"before\" (antes de), \"after\" (depois \"around\" torno ação controller. filtros herdados, então você configurou filtro applicationcontroller, mesmo rodar cada controller aplicação. filtros \"before\" podem interromper ciclo requisição. filtro comum \"before\" requer usuário está logado ação seja executada. você pode definir método filtro dessa forma: esse método simplesmente armazena mensagem erro flash redireciona formulário login usuário estiver logado. filtro \"before\" renderiza redireciona, ação será executada. filtros adicionais estão programados executar após esse filtro, eles cancelados também. nesse exemplo filtro adicionado applicationcontroller dessa forma todos controllers aplicação irão herdar ele. isso fará tudo aplicação requeira usuário esteja logado possa usar. razões óbvias usuário conseguiria fazer começo conversa!), todos controllers devem requerer isso. você pode evitar esse filtro executado antes ações particular skip_before_action: agora, ações create loginscontroller irão funcionar como antes requerer usuário esteja logado. opção :only usada pular esse filtro somente essas ações, existe também opção :except funciona maneira contrária. essas opções podem utilizadas quando adicionamos filtros também, você possa adicionar filtro somente executa ações selecionadas."},{"id":433,"title":"Action Controller Overview","heading":"8 Filtros","subheading":"8.1 Filtros after e around","content":"além filtros \"before\", você pode também executar filtros depois ação tenha sido executada, antes depois conjunto. filtros \"after\" similares filtros \"before\", porque ação executada eles acesso dados resposta serão enviados cliente. obviamente, filtros \"after\" podem impedir ação executada. note também filtros \"after\" executados somente após ação sucedida, quando exceção gerada durante ciclo requisição. filtros \"around\" responsáveis executar ações associadas yield, simular como middlewares rack funcionam. exemplo, website aonde alterações possuem fluxo aprovação, administrador pode pré-visualizar mesmas facilmente, aplicando-as dentro transação. note filtro \"around\" também envolvem renderização. particular, exemplo acima, view efetuar leitura banco dados usando scope), mesma efetuada dentro transação então apresenta informação visualização. você pode escolher efetuar yield montar resposta você mesmo, faria ação fosse executada."},{"id":434,"title":"Action Controller Overview","heading":"8 Filtros","subheading":"8.2 Outras formas de usar","content":"enquanto forma mais comum utilizar filtros criando métodos privados usando *_action adicioná-los, existem duas outras formas fazer mesma coisa. primeira utilizar bloco diretamente método _action. bloco recebe *controller como argumento. filtro require_login acima pode reescrito utilizar bloco: note nesse caso filtro utiliza send porque método logged_in? privado filtro executado escopo controller. essa forma recomendada implementar esse filtro particular, pode útil casos mais simples. especificamente around_action, bloco também acessa action: segunda forma utilizar classe verdade, qualquer objeto responda métodos corretos serve) gerenciar filtragem. isto útil casos mais complexos possíveis serem implementados forma fácil leitura reutilizados usando outras duas abordagens. exemplo, você pode reescrever filtro login novamente utilizando classe: novamente, esse exemplo ideal esse filtro, pois executado dentro escopo controller recebe mesmo como argumento. classe filtro deve implementar método mesmo nome filtro, então filtro before_action classe deve implementar método before, assim diante. método around deve efetuar yield executar ação. falsificação requisições cross-site tipo ataque qual site engana usuário faça requisições outro site, possivelmente adicionando, alterando deletando informações naquela site conhecimento permissão usuário. primeiro passo evitar isso certeza todas ações \"destrutivas\" (criar, atualizar, destruir) possam acessadas somente requisições sejam get. você está seguindo convenções restful você está fazendo isso. contudo, sites maliciosos continuam podendo enviar requisições site facilmente, proteção falsificação requisição entra. como nome diz, protege requisições falsas. forma como isso feito adicionando token adivinhável conhecido apenas pelo servidor cada requisição. desta forma, requisição chega token conhecido, acesso será negado. você gera form como este: você perceberá como token adicionado como campo invisível. rails adiciona esse token cada form gerado usando form helpers, então maior parte vezes você precisa preocupar isso. você está escrevendo form manualmente precisa adicionar token outra sessão, está disponível meio método form_authenticity_token. form_authenticity_token gera token autenticação válido. isso útil lugar aonde rails adiciona mesmo automaticamente, como chamadas ajax personalizadas. guia segurança possui mais informações sobre isso muitos outros problemas relacionados segurança você deve estar ciente quando desenvolve aplicação web. todo controller existem dois métodos acesso apontando objetos requisição resposta associados ciclo requisição estiver execução momento. método request contém instância actiondispatch::request método response retorna objeto resposta representando será enviado volta cliente."},{"id":435,"title":"Action Controller Overview","heading":"10 Os Objetos de Requisição e Resposta","subheading":"10.1 O Objeto request","content":"objeto requisição contém muitas informações úteis sobre requisição proveniente cliente. obter lista completa métodos disponíveis verifique documentação rails documentação rack. entre propriedades você pode acessar estão: rails armazena todos parâmetros enviados requisição hash params, importando eles foram enviados como parte query string corpo requisição. objeto requisição três métodos acesso fornecem acesso estes parâmetros dependendo onde eles vieram. hash query_parameters contem parâmetros foram enviados meio query_string enquanto hash request_parameters contem parâmetros enviados através corpo requisição. hash path_parameters contém parâmetros foram reconhecidos pelo roteamento como parte caminho leva controller action sendo executados."},{"id":436,"title":"Action Controller Overview","heading":"10 Os Objetos de Requisição e Resposta","subheading":"10.2 O Objeto response","content":"objeto resposta geralmente usado diretamente, construído durante execução action renderização dados serão enviados volta usuário, porém vezes como filtro posterior pode útil acessar resposta diretamente. alguns destes métodos acesso também possuem setters, permitindo mudar seus valores. obter lista completa métodos disponíveis verifique documentação rails documentação rack; você quer definir headers customizados resposta então response.headers local indicado ajustar isto. atributo headers hash mapeia nomes headers seus respectivos valores, rails definir alguns deles automaticamente. você quiser adicionar modificar header, basta sinalizá-lo response.headers seguinte maneira: rails dois mecanismos autenticação http embutidos:"},{"id":437,"title":"Action Controller Overview","heading":"11 Autenticações HTTP","subheading":"11.1 Autenticação HTTP Basic","content":"autenticação http basic esquema autenticação suportado pela maioria navegadores outros clientes http. como exemplo, considere página administração será acessável apenas informando nome usuário senha janela autenticação http basic navegador. usar autenticação embutida fácil apenas requer você método, http_basic_authenticate_with. isso, você pode criar controllers namespaces herdam adminscontroller. filtro vai, assim, executado todas ações controllers, protegendo-os autenticação http basic."},{"id":438,"title":"Action Controller Overview","heading":"11 Autenticações HTTP","subheading":"11.2 Autenticação HTTP Digest","content":"autenticação http digest superior autenticação basic porque requer cliente envie senha criptografia pela rede (embora autenticação http basic seja segura https). usar autenticação digest rails fácil requer apenas método, authenticate_or_request_with_http_digest. como visto exemplo acima, bloco authenticate_or_request_with_http_digest recebe apenas argumento nome usuário. bloco retorna senha. retornar false authenticate_or_request_with_http_digest causará falha autenticação. vezes você pode querer enviar arquivo usuário invés página html. todos controllers rails possuem métodos send_data send_file, transmitem dados navegador. método send_file permite você proveja nome arquivo disco conteúdo será transmitido. transmitir dados navegador, send_data: action download_pdf exemplo acima está chamando método privado verdade cria documento retorna como string. essa string será então transmitida navegador como arquivo download nome arquivo será sugerido usuário. vezes, quando arquivos transmitidos usuários, você pode querer façam download arquivo. imagens, exemplo, podem embutidas páginas html. comunicar navegador deve feito download arquivo, você pode utilizar propriedade inline opção :disposition. propriedade oposta padrão essa opção \"attachment\"."},{"id":439,"title":"Action Controller Overview","heading":"12 Streaming e Downloads de Arquivos","subheading":"12.1 Enviando Arquivos","content":"você deseja enviar arquivo existe disco, utilize método send_file. esse método transmitir arquivo vez, evitando carregar arquivo inteiro memória vez. você pode desativar transmissão opção :stream ajustar tamanho bloco opção :buffer_size. opção :type especificada, será presumido acordo extensão especificada :filename. tipo conteúdo (content_type) estiver registrado extensão, será usado application/octet-stream."},{"id":440,"title":"Action Controller Overview","heading":"12 Streaming e Downloads de Arquivos","subheading":"12.2 RESTful Downloads","content":"apesar método send_data funcionar tranquilamente, você está criando aplicação restful, geralmente necessário actions separadas download arquivos. terminologia rest, arquivo exemplo acima pode considerado apenas outra representação recurso navegador. rails provê jeito fácil prático fazer \"downloads restful\". veja como você pode re-escrever exemplo download seja parte action show, qualquer transmissão: este exemplo funcione, você deve adicionar mime type rails. isso pode feito adicionando seguinte linha arquivo config/initializers/mime_types.rb: agora usuários podem requerer arquivo adicionando \".pdf\" final url:"},{"id":441,"title":"Action Controller Overview","heading":"12 Streaming e Downloads de Arquivos","subheading":"12.3 Transmissão Ao Vivo de Dado Arbitrários","content":"rails permite você transmita mais apenas arquivos. verdade, você pode transmitir você desejar como objeto resposta. modulo actioncontroller::live permite você criar conexão persistente navegador. utilizando esse módulo, você capaz enviar dados arbitrários navegador depender requisição http. incluindo actioncontroller::live dentro classe controller prover todas actions controller habilidade transmitir dados. você pode mesclar modulo seguinte forma: código acima manterá conexão constante navegador mandará mensagens \"hello world\\n\", cada segundo diferença. existem algumas coisas serem notadas exemplo acima. precisamos certeza resposta transmissão terminada. esquecer encerrar transmissão deixará socket aberto sempre. também precisamos estabelecer tipo conteúdo (content_type) text/event-stream antes responder transmissão. isso necessário, pois headers podem escritos depois resposta enviada (quando response.committed? retorna valor truthy ocorre quando você escreve envia (commit) resposta transmissão. vamos supor você estivesse criando máquina karaokê usuário quer achar letra música particular. cada música (song) número específico linhas cada linha tempo (num_beats) terminar cantada. quiséssemos retornar letras estilo karaokê (mandar linha quando linha anterior terminada cantar), então poderíamos usar actioncontroller::live seguinte forma: código acima envia próxima linha apenas depois pessoa cantando completou linha anterior. transmitir dados arbitrários ferramenta extremamente poderosa. como mostrado exemplos anteriores, você pode escolher quando enviar resposta transmissão. entretanto, você deveria atentar seguintes pontos: rails mantém arquivo cada ambiente pasta log. eles bastante úteis quando estamos depurando está fato acontecendo aplicação, porém você pode querer sejam salvos todas informações sejam armazenadas arquivo aplicação ativa."},{"id":442,"title":"Action Controller Overview","heading":"13 Filtragem de Log","subheading":"13.1 Filtrando Parâmetros","content":"você pode evitar parâmetros sensíveis requisição sejam salvos arquivo adicionando-os config.filter_parameters configuração aplicação. esses parâmetros aparecerão como [filtered] arquivo log."},{"id":443,"title":"Action Controller Overview","heading":"13 Filtragem de Log","subheading":"13.2 Filtrando Redirecionamentos","content":"vezes desejável sejam filtrados arquivos alguns locais sensíveis quais aplicação está redirecionando. você pode fazer isso utilizando opção configuração config.filter_redirect: você pode utilizar string, expressão regular array ambos. urls correspondentes expressão regular serão marcadas como '[filtered]'. muito provavelmente aplicação conter bugs enviar exceções precisam tratadas. exemplo, usuário acessar link possui fonte banco dados, active record enviará activerecord::recordnotfound como exceção. exceção padrão rails apresenta mensagem \"500 server error\" todas exceções. requisição feita localmente, belo traceback outras informações serão mostradas assim você pode verificar errado tratar problema. requisição remota rails apenas apresentará mensagem \"500 server error\" usuário, \"404 found\" houver erro rota registro puder encontrado. vezes você pode querer customizar como esses erros encontrados como apresentados usuário. diversos níveis tratamento excessões disponiveis aplicação rails:"},{"id":444,"title":"Action Controller Overview","heading":"14 Rescue","subheading":"14.1 Os Templates 404 e 500 Padrão","content":"padrão aplicação produção renderizar mensagem template erro 500, ambiente produção todas mensagens erro disparadas. essas mensagens armazenadas templates estáticos html pasta public, 404.html 500.html respectivamente. você pode customizar essas páginas adicionar algumas estilizações, lembre-se elas html estático; i.e. você pode usar erb, scss, coffeescript, layouts elas."},{"id":445,"title":"Action Controller Overview","heading":"14 Rescue","subheading":"14.2 rescue_from","content":"você quiser fazer algo mais elaborado quando estiver lidando erros, você pode usar rescue_from, trata exceções certo tipo vários tipos) controller inteiro subclasses. quando exceção acontece pega diretiva rescue_from, objeto exceção passado handler. handler pode método objeto proc passado opção :with. você também pode usar bloco diretamente invés objeto proc. aqui está exemplo como você pode usar rescue_from interceptar todos erros activerecord::recordnotfound fazer algo eles. claro, este exemplo nada elaborado melhora muito forma original lidar erros, você capture todas essas exceções você livre fazer quiser elas. exemplo, você pode criar exceção personalizada quando usuário acesso parte aplicação: você quiser garantir comunicação controller seja possível apenas https, você deve fazer isso ativando middleware actiondispatch::ssl config.force_ssl configuração ambiente. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":446,"title":"Action Mailbox Basics","heading":"1 Introduction","subheading":"1 Introduction","content":"action mailbox routes incoming emails controller-like mailboxes processing rails. ships with ingresses mailgun, mandrill, postmark, sendgrid. also handle inbound mails directly built-in exim, postfix, qmail ingresses. inbound emails turned into inboundemail records using active record feature lifecycle tracking, storage original email cloud storage active storage, responsible data handling with on-by-default incineration. these inbound emails routed asynchronously using active several dedicated mailboxes, which capable interacting directly with rest your domain model. install migrations needed inboundemail ensure active storage"},{"id":447,"title":"Action Mailbox Basics","heading":"3 Configuration","subheading":"3.1 Exim","content":"tell action mailbox accept emails from smtp relay: generate strong password that action mailbox authenticate requests relay ingress. rails credentials:edit password your application's encrypted credentials under action_mailbox.ingress_password, where action mailbox will automatically find alternatively, provide password rails_inbound_email_password environment variable. configure exim pipe inbound emails bin/rails action_mailbox:ingress:exim, providing relay ingress ingress_password previously generated. your application lived https://example.com, full command would look like this:"},{"id":448,"title":"Action Mailbox Basics","heading":"3 Configuration","subheading":"3.2 Mailgun","content":"give action mailbox your mailgun authenticate requests mailgun ingress. rails credentials:edit your your application's encrypted credentials under action_mailbox.mailgun_api_key, where action mailbox will automatically find alternatively, provide your mailgun_ingress_api_key environment variable. tell action mailbox accept emails from mailgun: configure mailgun forward inbound emails /rails/action_mailbox/mailgun/inbound_emails/mime. your application lived https://example.com, would specify fully-qualified https://example.com/rails/action_mailbox/mailgun/inbound_emails/mime."},{"id":449,"title":"Action Mailbox Basics","heading":"3 Configuration","subheading":"3.3 Mandrill","content":"give action mailbox your mandrill authenticate requests mandrill ingress. rails credentials:edit your your application's encrypted credentials under action_mailbox.mandrill_api_key, where action mailbox will automatically find alternatively, provide your mandrill_ingress_api_key environment variable. tell action mailbox accept emails from mandrill: configure mandrill route inbound emails /rails/action_mailbox/mandrill/inbound_emails. your application lived https://example.com, would specify fully-qualified https://example.com/rails/action_mailbox/mandrill/inbound_emails."},{"id":450,"title":"Action Mailbox Basics","heading":"3 Configuration","subheading":"3.4 Postfix","content":"tell action mailbox accept emails from smtp relay: generate strong password that action mailbox authenticate requests relay ingress. rails credentials:edit password your application's encrypted credentials under action_mailbox.ingress_password, where action mailbox will automatically find alternatively, provide password rails_inbound_email_password environment variable. configure postfix pipe inbound emails bin/rails action_mailbox:ingress:postfix, providing postfix ingress ingress_password previously generated. your application lived https://example.com, full command would look like this:"},{"id":451,"title":"Action Mailbox Basics","heading":"3 Configuration","subheading":"3.5 Postmark","content":"tell action mailbox accept emails from postmark: generate strong password that action mailbox authenticate requests postmark ingress. rails credentials:edit password your application's encrypted credentials under action_mailbox.ingress_password, where action mailbox will automatically find alternatively, provide password rails_inbound_email_password environment variable. configure postmark inbound webhook forward inbound emails /rails/action_mailbox/postmark/inbound_emails with username actionmailbox password previously generated. your application lived https://example.com, would configure postmark with following fully-qualified url:"},{"id":452,"title":"Action Mailbox Basics","heading":"3 Configuration","subheading":"3.6 Qmail","content":"tell action mailbox accept emails from smtp relay: generate strong password that action mailbox authenticate requests relay ingress. rails credentials:edit password your application's encrypted credentials under action_mailbox.ingress_password, where action mailbox will automatically find alternatively, provide password rails_inbound_email_password environment variable. configure qmail pipe inbound emails bin/rails action_mailbox:ingress:qmail, providing relay ingress ingress_password previously generated. your application lived https://example.com, full command would look like this:"},{"id":453,"title":"Action Mailbox Basics","heading":"3 Configuration","subheading":"3.7 SendGrid","content":"tell action mailbox accept emails from sendgrid: generate strong password that action mailbox authenticate requests sendgrid ingress. rails credentials:edit password your application's encrypted credentials under action_mailbox.ingress_password, where action mailbox will automatically find alternatively, provide password rails_inbound_email_password environment variable. configure sendgrid inbound parse forward inbound emails /rails/action_mailbox/sendgrid/inbound_emails with username actionmailbox password previously generated. your application lived https://example.com, would configure sendgrid with following url: configure basic routing: then mailbox: default, inboundemail that been successfully processed will incinerated after days. this ensures you're holding people's data willy-nilly after they have canceled their accounts deleted their content. intention that after you've processed email, should have extracted data needed turned into domain models content your side application. inboundemail simply stays system extra time provide debugging forensics options. actual incineration done incinerationjob that's scheduled after config.action_mailbox.incinerate_after time. this value default 30.days, change your production.rb configuration. (note that this far-future incineration scheduling relies your queue being able hold jobs that long.) it's helpful able test incoming emails development without actually sending receiving real emails. accomplish this, there's conductor controller mounted /rails/conductor/action_mailbox/inbound_emails, which gives index inboundemails system, their state processing, form create inboundemail well. example: você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":454,"title":"Active Support Instrumentation","heading":"1 Introduction to instrumentation","subheading":"1 Introduction to instrumentation","content":"instrumentation provided active support allows developers provide hooks which other developers hook into. there several these within rails framework. with this api, developers choose notified when certain events occur inside their application another piece ruby code. example, there hook provided within active record that called every time active record uses query database. this hook could subscribed used track number queries during certain action. there's another hook around processing action controller. this could used, instance, track long specific action taken. even able create your events inside your application which later subscribe within ruby rails framework, there number hooks provided common events. these detailed below."},{"id":455,"title":"Active Support Instrumentation","heading":"3 Action Controller","subheading":"3.1 write_fragment.action_controller","content":""},{"id":456,"title":"Active Support Instrumentation","heading":"3 Action Controller","subheading":"3.2 read_fragment.action_controller","content":""},{"id":457,"title":"Active Support Instrumentation","heading":"3 Action Controller","subheading":"3.3 expire_fragment.action_controller","content":""},{"id":458,"title":"Active Support Instrumentation","heading":"3 Action Controller","subheading":"3.4 exist_fragment?.action_controller","content":""},{"id":459,"title":"Active Support Instrumentation","heading":"3 Action Controller","subheading":"3.5 write_page.action_controller","content":""},{"id":460,"title":"Active Support Instrumentation","heading":"3 Action Controller","subheading":"3.6 expire_page.action_controller","content":""},{"id":461,"title":"Active Support Instrumentation","heading":"3 Action Controller","subheading":"3.7 start_processing.action_controller","content":""},{"id":462,"title":"Active Support Instrumentation","heading":"3 Action Controller","subheading":"3.8 process_action.action_controller","content":""},{"id":463,"title":"Active Support Instrumentation","heading":"3 Action Controller","subheading":"3.9 send_file.action_controller","content":""},{"id":464,"title":"Active Support Instrumentation","heading":"3 Action Controller","subheading":"3.10 send_data.action_controller","content":"actioncontroller does specific information payload. options passed through payload."},{"id":465,"title":"Active Support Instrumentation","heading":"3 Action Controller","subheading":"3.11 redirect_to.action_controller","content":""},{"id":466,"title":"Active Support Instrumentation","heading":"3 Action Controller","subheading":"3.12 halted_callback.action_controller","content":""},{"id":467,"title":"Active Support Instrumentation","heading":"3 Action Controller","subheading":"3.13 unpermitted_parameters.action_controller","content":""},{"id":468,"title":"Active Support Instrumentation","heading":"4 Action Dispatch","subheading":"4.1 process_middleware.action_dispatch","content":""},{"id":469,"title":"Active Support Instrumentation","heading":"5 Action View","subheading":"5.1 render_template.action_view","content":""},{"id":470,"title":"Active Support Instrumentation","heading":"5 Action View","subheading":"5.2 render_partial.action_view","content":""},{"id":471,"title":"Active Support Instrumentation","heading":"5 Action View","subheading":"5.3 render_collection.action_view","content":":cache_hits only included collection rendered with cached: true."},{"id":472,"title":"Active Support Instrumentation","heading":"6 Active Record","subheading":"6.1 sql.active_record","content":""},{"id":473,"title":"Active Support Instrumentation","heading":"6 Active Record","subheading":"6.2 instantiation.active_record","content":""},{"id":474,"title":"Active Support Instrumentation","heading":"7 Action Mailer","subheading":"7.1 deliver.action_mailer","content":""},{"id":475,"title":"Active Support Instrumentation","heading":"7 Action Mailer","subheading":"7.2 process.action_mailer","content":""},{"id":476,"title":"Active Support Instrumentation","heading":"8 Active Support","subheading":"8.1 cache_read.active_support","content":""},{"id":477,"title":"Active Support Instrumentation","heading":"8 Active Support","subheading":"8.2 cache_generate.active_support","content":"this event only used when #fetch called with block."},{"id":478,"title":"Active Support Instrumentation","heading":"8 Active Support","subheading":"8.3 cache_fetch_hit.active_support","content":"this event only used when #fetch called with block."},{"id":479,"title":"Active Support Instrumentation","heading":"8 Active Support","subheading":"8.4 cache_write.active_support","content":""},{"id":480,"title":"Active Support Instrumentation","heading":"8 Active Support","subheading":"8.5 cache_delete.active_support","content":""},{"id":481,"title":"Active Support Instrumentation","heading":"8 Active Support","subheading":"8.6 cache_exist?.active_support","content":""},{"id":482,"title":"Active Support Instrumentation","heading":"9 Active Job","subheading":"9.1 enqueue_at.active_job","content":""},{"id":483,"title":"Active Support Instrumentation","heading":"9 Active Job","subheading":"9.2 enqueue.active_job","content":""},{"id":484,"title":"Active Support Instrumentation","heading":"9 Active Job","subheading":"9.3 enqueue_retry.active_job","content":""},{"id":485,"title":"Active Support Instrumentation","heading":"9 Active Job","subheading":"9.4 perform_start.active_job","content":""},{"id":486,"title":"Active Support Instrumentation","heading":"9 Active Job","subheading":"9.5 perform.active_job","content":""},{"id":487,"title":"Active Support Instrumentation","heading":"9 Active Job","subheading":"9.6 retry_stopped.active_job","content":""},{"id":488,"title":"Active Support Instrumentation","heading":"9 Active Job","subheading":"9.7 discard.active_job","content":""},{"id":489,"title":"Active Support Instrumentation","heading":"10 Action Cable","subheading":"10.1 perform_action.action_cable","content":""},{"id":490,"title":"Active Support Instrumentation","heading":"10 Action Cable","subheading":"10.2 transmit.action_cable","content":""},{"id":491,"title":"Active Support Instrumentation","heading":"10 Action Cable","subheading":"10.3 transmit_subscription_confirmation.action_cable","content":""},{"id":492,"title":"Active Support Instrumentation","heading":"10 Action Cable","subheading":"10.4 transmit_subscription_rejection.action_cable","content":""},{"id":493,"title":"Active Support Instrumentation","heading":"10 Action Cable","subheading":"10.5 broadcast.action_cable","content":""},{"id":494,"title":"Active Support Instrumentation","heading":"11 Active Storage","subheading":"11.1 service_upload.active_storage","content":""},{"id":495,"title":"Active Support Instrumentation","heading":"11 Active Storage","subheading":"11.2 service_streaming_download.active_storage","content":""},{"id":496,"title":"Active Support Instrumentation","heading":"11 Active Storage","subheading":"11.3 service_download_chunk.active_storage","content":""},{"id":497,"title":"Active Support Instrumentation","heading":"11 Active Storage","subheading":"11.4 service_download.active_storage","content":""},{"id":498,"title":"Active Support Instrumentation","heading":"11 Active Storage","subheading":"11.5 service_delete.active_storage","content":""},{"id":499,"title":"Active Support Instrumentation","heading":"11 Active Storage","subheading":"11.6 service_delete_prefixed.active_storage","content":""},{"id":500,"title":"Active Support Instrumentation","heading":"11 Active Storage","subheading":"11.7 service_exist.active_storage","content":""},{"id":501,"title":"Active Support Instrumentation","heading":"11 Active Storage","subheading":"11.8 service_url.active_storage","content":""},{"id":502,"title":"Active Support Instrumentation","heading":"11 Active Storage","subheading":"11.9 service_update_metadata.active_storage","content":""},{"id":503,"title":"Active Support Instrumentation","heading":"11 Active Storage","subheading":"11.10 preview.active_storage","content":""},{"id":504,"title":"Active Support Instrumentation","heading":"12 Railties","subheading":"12.1 load_config_initializer.railties","content":""},{"id":505,"title":"Active Support Instrumentation","heading":"13 Rails","subheading":"13.1 deprecation.rails","content":"subscribing event easy. activesupport::notifications.subscribe with block listen notification. block receives following arguments: defining those block arguments each time tedious. easily create activesupport::notifications::event from block arguments like this: also pass block with only argument, will yield event object block: most times only care about data itself. here shortcut just data. also subscribe events matching regular expression. this enables subscribe multiple events once. here's could subscribe everything from actioncontroller. adding your events easy well. activesupport::notifications will take care heavy lifting you. simply call instrument with name, payload block. notification will sent after block returns. activesupport will generate start times instrumenter's unique data passed into instrument call will make into payload. here's example: listen this event with: also have option call instrument without passing block. this lets leverage instrumentation infrastructure other messaging uses. should follow rails conventions when defining your events. format event.library. your application sending tweets, should create event named tweet.twitter. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":506,"title":"Ruby on Rails 3.2 Release Notes","heading":"1 Upgrading to Rails 3.2","subheading":"1 Upgrading to Rails 3.2","content":"you're upgrading existing application, it's great idea have good test coverage before going should also first upgrade rails case haven't make sure your application still runs expected before attempting update rails 3.2. then take heed following changes:"},{"id":507,"title":"Ruby on Rails 3.2 Release Notes","heading":"1 Upgrading to Rails 3.2","subheading":"1.1 Rails 3.2 requires at least Ruby 1.8.7","content":"rails requires ruby 1.8.7 higher. support previous ruby versions been dropped officially should upgrade early possible. rails also compatible with ruby 1.9.2."},{"id":508,"title":"Ruby on Rails 3.2 Release Notes","heading":"1 Upgrading to Rails 3.2","subheading":"1.2 What to update in your apps","content":""},{"id":509,"title":"Ruby on Rails 3.2 Release Notes","heading":"1 Upgrading to Rails 3.2","subheading":"1.3 What to update in your engines","content":"replace code beneath comment script/rails with following content:"},{"id":510,"title":"Ruby on Rails 3.2 Release Notes","heading":"2 Creating a Rails 3.2 application","subheading":"2.1 Vendoring Gems","content":"rails uses gemfile application root determine gems require your application start. this gemfile processed bundler gem, which then installs your dependencies. even install dependencies locally your application that doesn't depend system gems. more information: bundler homepage"},{"id":511,"title":"Ruby on Rails 3.2 Release Notes","heading":"2 Creating a Rails 3.2 application","subheading":"2.2 Living on the Edge","content":"bundler gemfile makes freezing your rails application easy with dedicated bundle command. want bundle straight from repository, pass --edge flag: have local checkout rails repository want generate application using that, pass --dev flag:"},{"id":512,"title":"Ruby on Rails 3.2 Release Notes","heading":"3 Major Features","subheading":"3.1 Faster Development Mode & Routing","content":"rails comes with development mode that's noticeably faster. inspired active reload, rails reloads classes only when files actually change. performance gains dramatic larger application. route recognition also bunch faster thanks journey engine."},{"id":513,"title":"Ruby on Rails 3.2 Release Notes","heading":"3 Major Features","subheading":"3.2 Automatic Query Explains","content":"rails comes with nice feature that explains queries generated arel defining explain method activerecord::relation. example, something like puts person.active.limit(5).explain query arel produces explained. this allows check proper indexes further optimizations. queries that take more than half second automatically explained development mode. this threshold, course, changed."},{"id":514,"title":"Ruby on Rails 3.2 Release Notes","heading":"3 Major Features","subheading":"3.3 Tagged Logging","content":"when running multi-user, multi-account application, it's great help able filter what. taggedlogging active support helps doing exactly that stamping lines with subdomains, request ids, anything else debugging such applications. from rails 3.2, rails guides available kindle free kindle reading apps ipad, iphone, mac, android, etc."},{"id":515,"title":"Ruby on Rails 3.2 Release Notes","heading":"7 Action Pack","subheading":"7.1 Action Controller","content":""},{"id":516,"title":"Ruby on Rails 3.2 Release Notes","heading":"7 Action Pack","subheading":"7.2 Action Dispatch","content":""},{"id":517,"title":"Ruby on Rails 3.2 Release Notes","heading":"7 Action Pack","subheading":"7.3 Action View","content":""},{"id":518,"title":"Ruby on Rails 3.2 Release Notes","heading":"7 Action Pack","subheading":"7.4 Sprockets","content":""},{"id":519,"title":"Ruby on Rails 3.2 Release Notes","heading":"8 Active Record","subheading":"8.1 Deprecations","content":""},{"id":520,"title":"Ruby on Rails 3.2 Release Notes","heading":"9 Active Model","subheading":"9.1 Deprecations","content":""},{"id":521,"title":"Ruby on Rails 3.2 Release Notes","heading":"11 Active Support","subheading":"11.1 Deprecations","content":"full list contributors rails many people spent many hours making rails, stable robust framework kudos them. rails release notes were compiled vijay dev. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":522,"title":"Active Record Callbacks","heading":"1 O Ciclo de Vida do Objeto","subheading":"1 O Ciclo de Vida do Objeto","content":"durante operação normal aplicação rails, objetos podem criados, atualizados destruídos. active record fornece hooks este ciclo vida objeto você possa controlar aplicação seus dados. callbacks permitem você desencadear lógica antes depois alteração estado objeto. callbacks métodos chamados certos momentos ciclo vida objeto. callbacks possível escrever código rodará sempre objeto active record criado, salvo, atualizado, deletado, validado carregado banco dados."},{"id":523,"title":"Active Record Callbacks","heading":"2 Visão geral de Callbacks","subheading":"2.1 Registro de Callback","content":"usar callbacks disponíveis, você precisa registrá-los. você pode implementar callbacks como métodos comuns usar método macro-style classe registrá-los como callbacks: métodos macro-style classe podem também receber bloco. considere usar esse estilo código dentro bloco curto cabe linha: callbacks também podem registrados rodar apenas certos eventos ciclo vida: considerado prática declarar métodos callback como privados. deixados como públicos, podem chamados fora model violar princípio encapsulamento objeto. aqui está lista todos active record callbacks, listados mesma ordem qual eles serão chamados durante respectivas operações:"},{"id":524,"title":"Active Record Callbacks","heading":"3 Callbacks Disponíveis","subheading":"3.1 Criando um Objeto","content":""},{"id":525,"title":"Active Record Callbacks","heading":"3 Callbacks Disponíveis","subheading":"3.2 Atualizando um Objeto","content":""},{"id":526,"title":"Active Record Callbacks","heading":"3 Callbacks Disponíveis","subheading":"3.3 Destruindo um Objeto","content":""},{"id":527,"title":"Active Record Callbacks","heading":"3 Callbacks Disponíveis","subheading":"3.4 after_initialize e after_find","content":"callback after_initialize será chamado sempre objeto active record instanciado, usando diretamente quando registro carregado banco dados. isto pode útil evitar necessidade substituir diretamente método initialize active record. callback after_find será chamado sempre active record carregar registro banco dados. after_find chamado antes after_initialize ambos estiverem definidos. callbacks after_initialize after_find possuem complementos before_*, podem registrados como outros callbacks active record."},{"id":528,"title":"Active Record Callbacks","heading":"3 Callbacks Disponíveis","subheading":"3.5 after_touch","content":"callback after_touch será chamado sempre objeto active record alcançado. pode usado junto belongs_to: métodos seguir acionam callbacks: adicionalmente, callback after_find acionado pelos seguintes métodos localização: callback after_initialize acionado toda novo objeto classe inicializado. assim como validações, também possível ignorar callbacks usando seguintes métodos: contudo, esses métodos devem usados cautela, porque regras negócio importantes lógica aplicação podem mantidos callbacks. contorná-los entender potenciais implicações pode levar dados inválidos. quando você começar registrar novos callbacks seus models, eles serão enfileirados execução. esta fila incluirá todas validações model, callbacks registrados operação banco dados executada. toda cadeia callback empacotada transação. algum callback lança exceção, cadeia execução interrompida rollback emitido. interromper intencionalmente cadeia, use: callbacks trabalham através relacionamentos models podem definidos eles. suponha exemplo onde usuário tenha muitos artigos. artigo usuário deve apagado usuario apagado. vamos adicionar callback after_destroy model user meio relacionamento model article: with validations, also make calling callback method conditional satisfaction given predicate. this using :unless options, which take symbol, proc array. option when want specify under which conditions callback should called. want specify conditions under which callback should called, then :unless option."},{"id":529,"title":"Active Record Callbacks","heading":"8 Conditional Callbacks","subheading":"8.1 Using :if and :unless with a Symbol","content":"associate :unless options with symbol corresponding name predicate method that will called right before callback. when using option, callback won't executed predicate method returns false; when using :unless option, callback won't executed predicate method returns true. this most common option. using this form registration also possible register several different predicates that should called check callback should executed."},{"id":530,"title":"Active Record Callbacks","heading":"8 Conditional Callbacks","subheading":"8.2 Using :if and :unless with a Proc","content":"possible associate :unless with proc object. this option best suited when writing short validation methods, usually one-liners: proc evaluated context object, also possible write this"},{"id":531,"title":"Active Record Callbacks","heading":"8 Conditional Callbacks","subheading":"8.3 Multiple Conditions for Callbacks","content":"when writing conditional callbacks, possible both :unless same callback declaration:"},{"id":532,"title":"Active Record Callbacks","heading":"8 Conditional Callbacks","subheading":"8.4 Combining Callback Conditions","content":"when multiple conditions define whether callback should happen, array used. moreover, apply both :unless same callback. callback only runs when conditions none :unless conditions evaluated true. algumas situações, métodos callback iremos escrever serão úteis serem reutilizados outros models. active record possibilita criação classes encapsulam métodos callback isso, tornam muito fáceis reusá-los. aqui está exemplo onde criamos classe callback after_destroy model picturefile: quando declaramos dentro classe, como feito acima, métodos callback irão receber model como parâmetro. agora poderemos usar classe callback model: perceba precisamos instanciar novo objeto chamado picturefilecallbacks, declaramos nosso callback como método instância. particularmente, isso útil callbacks fazem estado objeto instanciado. porém fará mais sentido declarar callbacks como métodos classe mais frequência: método callback declarado dessa forma, será necessário instanciar objeto picturefilecallbacks você pode declarar dentro suas classes callback quantos callback achar necessário. existem dois callbacks adicionais disparados quando completa transação banco dados: after_commit after_rollback. estes callbacks muito parecidos callback after_save, exceto eles executados mudanças banco dados sejam confirmadas desfeitas. eles mais úteis quando seus active record models precisam interagir sistemas externos fazem parte transação banco dados. considere, exemplo, exemplo anterior onde model picturefile precisa apagar arquivo depois registro correspondente destruído. algo lançar exceção depois callback after_destroy chamado transação desfeita, arquivo terá sido deletado model será deixado estado inconsistente. exemplo, suponha picture_file_2 código abaixo valido método save! lança erro. usando callback after_commit podemos responder esse caso. usar callback after_commit criar, atualizar deletar comum, existem aliases operações: existe também alias usar callback after_commit, juntamente, tanto criar quanto atualizar: você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":533,"title":"Básico de Active Jobs","heading":"1 Introdução ","subheading":"1 Introdução ","content":"active framework declarar jobs fazê-los executar variedade backends fila. estes jobs podem qualquer coisa, limpezas programadas regularmente, cobranças despesas, envio emails. qualquer coisa possa cortada pequenas unidades trabalho executadas paralelamente, sério. ponto principal garantir todas aplicações rails terão infraestrutura jobs lugar. podemos então features frameworks outras gems construídas cima dela, preocupar diferenças entre vários executadores como delayed resque. dessa forma, escolher backend enfileiramento torna mais preocupação operacional. você poderá alternar entre eles reescrever seus jobs. esta seção fornecerá guia passo passo criar enfileirá-lo."},{"id":534,"title":"Básico de Active Jobs","heading":"3 Criando um Job","subheading":"3.1 Crie o Job","content":"active fornece gerador rails criar jobs. seguinte criará app/jobs (com teste anexado test/jobs): você também pode criar será executado fila específica: você quiser usar gerador, você pode criar próprio arquivo dentro app/jobs, apenas certifique-se herda applicationjob. aqui está aparência job: observe você pode definir perform quantos argumentos quiser."},{"id":535,"title":"Básico de Active Jobs","heading":"3 Criando um Job","subheading":"3.2 Enfileirar o Job","content":"enfileirar assim: isso enfileirar executar jobs produção você precisa configurar backend filas, seja, você precisa decidir enfileiramento terceiros rails deve usar, rails fornece apenas sistema filas processo, mantém jobs memória(ram). processo quebra máquina reiniciada, todos jobs pendentes serão perdidos backend assíncrono padrão. isso pode aplicações menores jobs críticos, maioria aplicações produção precisará escolher backend persistência."},{"id":536,"title":"Básico de Active Jobs","heading":"4 Execução de Job","subheading":"4.1 Backends","content":"active adaptadores built-in múltiplos backends fila (sidekiq resque, delayed outros). obter lista atualizada adaptadores, consulte documentação activejob::queueadapters."},{"id":537,"title":"Básico de Active Jobs","heading":"4 Execução de Job","subheading":"4.2 Configurando o Backend","content":"você pode definir facilmente backend fila: você também pode configurar backend base."},{"id":538,"title":"Básico de Active Jobs","heading":"4 Execução de Job","subheading":"4.3 Iniciando o Backend","content":"jobs executados paralelo aplicação rails, maioria bibliotecas filas exigem você inicie serviço enfileiramento específico (além iniciar aplicação rails) processamento funcione. consulte documentação biblioteca obter instruções sobre como iniciar backend fila. aqui está lista abrangente documentação: maioria adapters suportam múltiplas filas. active você pode agendar executar fila específica: você pode prefixar nome fila todos jobs usando config.active_job.queue_name_prefix application.rb: prefixo delimitador padrão nome fila '_'. isso pode alterado configurando config.active_job.queue_name_delimiter application.rb: você quiser mais controle qual fila será executado, você pode passar opção :queue #set: controlar fila partir nível job, você pode passar bloco #queue_as. bloco será executado contexto permite acessar self.arguments) você deve retornar nome fila: active fornece hooks disparar lógica durante ciclo vida job. assim como outros callbacks rails, você pode implementar callbacks como métodos comuns usar método macro classe registrá-los como callbacks: métodos macro classe podem também receber bloco. considere usar esse estilo, código dentro bloco pequeno cabe numa única linha. exemplo, você pode enviar métricas cada enfileirado:"},{"id":539,"title":"Básico de Active Jobs","heading":"6 Callbacks","subheading":"6.1 Callbacks disponíveis","content":"jobs mais comuns aplicação moderna enviar e-mails fora ciclo request-response, usuário tenha esperar ele. active está integrado action mailer, permite enviar e-mails assincronamente: cada i18n.locale configurado quando criado. isso útil você enviar e-mails assincronamente: activejob suporta seguintes tipos argumentos padrão:"},{"id":540,"title":"Básico de Active Jobs","heading":"9 Tipos suportados por argumentos","subheading":"9.1 GlobalID","content":"active suporta globalid como parâmetros. isso possibilita passar objetos ativos active record invés classe/id, você deve desserializar manualmente. anteriormente, jobs eram feitos dessa forma: agora feitos dessa forma: isso funciona qualquer classe está mesclada globalid::identification que, padrão, está mesclada dentro classes active record."},{"id":541,"title":"Básico de Active Jobs","heading":"9 Tipos suportados por argumentos","subheading":"9.2 Serializers","content":"você pode ampliar lista tipos argumentos suportados. preciso definir próprio serializer: adicionar serializer lista: active jobs fornecem maneira capturar exceções criadas durante execução job."},{"id":542,"title":"Básico de Active Jobs","heading":"10 Exceções","subheading":"10.1 Reexecução ou Descarte de jobs falhos","content":"possível também reexecutar descartar exceção gerada durante execução. exemplo: mais detalhes veja documentação activejob::exceções."},{"id":543,"title":"Básico de Active Jobs","heading":"10 Exceções","subheading":"10.2 Desserialização","content":"globalid permite serializar todos objetos active record passado #perform. registro deletado após enfileirado antes método #perform chamado, active lançar exceção activejob::deserializationerror. você pode encontrar instruções mais detalhadas sobre como testar seus jobs guia teste. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":544,"title":"Development Dependencies Install","heading":"1 The Easy Way","subheading":"1 The Easy Way","content":"easiest recommended development environment ready hack rails development box. case can't rails development box, steps below manually build development ruby rails core development."},{"id":545,"title":"Development Dependencies Install","heading":"2 The Hard Way","subheading":"2.1 Install Git","content":"ruby rails uses source code control. homepage installation instructions. there variety resources that will help familiar with git:"},{"id":546,"title":"Development Dependencies Install","heading":"2 The Hard Way","subheading":"2.2 Clone the Ruby on Rails Repository","content":"navigate folder where want ruby rails source code will create rails subdirectory) run:"},{"id":547,"title":"Development Dependencies Install","heading":"2 The Hard Way","subheading":"2.3 Install Additional Tools and Services","content":"some rails tests depend additional tools that need install before running those specific tests. here's list each gems' additional dependencies: install services need properly test full you'll making changes below find instructions install additional tools different oses. macos homebrew install additional tools. install run: you'll also need start each installed services. list available services run: then start each services like this: replace mysql with name service want start. install run: install run: install run: install run: install everything through ports (these packages located under databases folder)."},{"id":548,"title":"Development Dependencies Install","heading":"2 The Hard Way","subheading":"2.4 Database Configuration","content":"there couple additional steps required configure database engines required running active record tests. order able test suite against mysql need create user named rails with privileges test databases: postgresql's authentication works differently. setup development environment with your development account, linux bsd, just have run: macos: then, need create test databases both mysql postgresql with: also create test databases each database engine separately: drop databases using: you're using another database, check file activerecord/test/config.yml activerecord/test/config.example.yml default connection information. edit activerecord/test/config.yml provide different credentials your machine must, obviously should push such changes back rails."},{"id":549,"title":"Development Dependencies Install","heading":"2 The Hard Way","subheading":"2.5 Install JavaScript dependencies","content":"installed yarn, will need install javascript dependencies:"},{"id":550,"title":"Development Dependencies Install","heading":"2 The Hard Way","subheading":"2.6 Install Bundler gem","content":"recent version bundler run:  don't need active record tests."},{"id":551,"title":"Development Dependencies Install","heading":"2 The Hard Way","subheading":"2.7 Contribute to Rails","content":"after you've setup everything, read start contributing. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":552,"title":"Linhas de Comando do Rails","heading":"1 Noções Básicas de Linha de Comando","subheading":"1 Noções Básicas de Linha de Comando","content":"existem alguns comandos essenciais cotidiano rails. ordem quanto você provavelmente utilizá-los são: você pode obter lista comandos rails disponíveis, geralmente depende diretório atual, escrevendo rails --help. cada comando possui descrição, deverá ajudá-lo encontrar precisa. vamos criar aplicação rails simples passando cada destes comandos."},{"id":553,"title":"Linhas de Comando do Rails","heading":"1 Noções Básicas de Linha de Comando","subheading":"1.1 rails new","content":"first thing we'll want create rails application running rails command after installing rails. rails will with what seems like huge amount stuff such tiny command! you've entire rails directory structure with code need simple application right box."},{"id":554,"title":"Linhas de Comando do Rails","heading":"1 Noções Básicas de Linha de Comando","subheading":"1.2 rails server","content":"rails server command launches server named puma which comes bundled with rails. you'll this time want access your application through browser. with further work, rails server will shiny rails app: with just three commands whipped rails server listening port your browser open http://localhost:3000, will basic rails running. server different port using option. default development environment changed using option binds rails specified default localhost. server daemon passing option."},{"id":555,"title":"Linhas de Comando do Rails","heading":"1 Noções Básicas de Linha de Comando","subheading":"1.3 rails generate","content":"rails generate command uses templates create whole things. running rails generate itself gives list available generators: using generators will save large amount time writing boilerplate code, code that necessary work. let's make controller with controller generator. what command should use? let's generator: controller generator expecting parameters form generate controller controllername action1 action2. let's make greetings controller with action hello, which will something nice what this generate? made sure bunch directories were application, created controller file, view file, functional test file, helper view, javascript file, stylesheet file. check controller modify little app/controllers/greetings_controller.rb): then view, display message app/views/greetings/hello.html.erb): fire your server using rails server. will http://localhost:3000/greetings/hello. rails comes with generator data models too. instead generating model directly (which we'll doing later), let's scaffold. scaffold rails full model, database migration that model, controller manipulate views view manipulate data, test suite each above. will simple resource called \"highscore\" that will keep track highest score video games play. generator checks that there exist directories models, controllers, helpers, layouts, functional unit tests, stylesheets, creates views, controller, model database migration highscore (creating high_scores table fields), takes care route resource, tests everything. migration requires that migrate, that some ruby code (living that 20130717151933_create_high_scores.rb) modify schema database. which database? sqlite3 database that rails will create when rails db:migrate command. we'll talk more about that command below. let's interface rails created your browser open http://localhost:3000/high_scores, create high scores (55,160 space invaders!)"},{"id":556,"title":"Linhas de Comando do Rails","heading":"1 Noções Básicas de Linha de Comando","subheading":"1.4 rails console","content":"console command lets interact with your rails application from command line. underside, rails console uses irb, you've ever used you'll right home. this useful testing quick ideas with code changing data server-side without touching website. specify environment which console command should operate. wish test some code without changing data, that invoking rails console --sandbox. inside rails console have access helper instances. with method access named route helpers, well requests. with helper method possible access rails your application's helpers."},{"id":557,"title":"Linhas de Comando do Rails","heading":"1 Noções Básicas de Linha de Comando","subheading":"1.5 rails dbconsole","content":"rails dbconsole figures which database you're using drops into whichever command line interface would with (and figures command line parameters give too!). supports mysql (including mariadb), postgresql, sqlite3."},{"id":558,"title":"Linhas de Comando do Rails","heading":"1 Noções Básicas de Linha de Comando","subheading":"1.6 rails runner","content":"runner runs ruby code context rails non-interactively. instance: specify environment which runner command should operate using switch. even execute ruby code written file with runner."},{"id":559,"title":"Linhas de Comando do Rails","heading":"1 Noções Básicas de Linha de Comando","subheading":"1.7 rails destroy","content":"think destroy opposite generate. it'll figure what generate did, undo"},{"id":560,"title":"Linhas de Comando do Rails","heading":"1 Noções Básicas de Linha de Comando","subheading":"1.8 rails about","content":"rails about gives information about version numbers ruby, rubygems, rails, rails subcomponents, your application's folder, current rails environment name, your app's database adapter, schema version. useful when need help, check security patch might affect you, when need some stats existing rails installation."},{"id":561,"title":"Linhas de Comando do Rails","heading":"1 Noções Básicas de Linha de Comando","subheading":"1.9 rails assets:","content":"precompile assets app/assets using rails assets:precompile, remove older compiled assets using rails assets:clean. assets:clean command allows rolling deploys that still linking asset while assets being built. want clear public/assets completely, rails assets:clobber."},{"id":562,"title":"Linhas de Comando do Rails","heading":"1 Noções Básicas de Linha de Comando","subheading":"1.10 rails db:","content":"most common commands rails namespace migrate create, will migration rails commands (up, down, redo, reset). rails db:version useful when troubleshooting, telling current version database. more information about migrations found migrations guide."},{"id":563,"title":"Linhas de Comando do Rails","heading":"1 Noções Básicas de Linha de Comando","subheading":"1.11 rails notes","content":"rails notes searches through your code comments beginning with specific keyword. refer rails notes --help information about usage. default, will search app, config, lib, test directories fixme, optimize, todo annotations files with extension .builder, .rb, .rake, .yml, .yaml, .ruby, .css, .js, .erb. pass specific annotations using --annotations argument. default, will search fixme, optimize, todo. note that annotations case sensitive. more default tags search using config.annotations.register_tags. receives list tags. more default directories search from using config.annotations.register_directories. receives list directory names. more default file extensions search from using config.annotations.register_extensions. receives list extensions with corresponding regex match"},{"id":564,"title":"Linhas de Comando do Rails","heading":"1 Noções Básicas de Linha de Comando","subheading":"1.12 rails routes","content":"rails routes will list your defined routes, which useful tracking down routing problems your app, giving good overview urls you're trying familiar with."},{"id":565,"title":"Linhas de Comando do Rails","heading":"1 Noções Básicas de Linha de Comando","subheading":"1.13 rails test","content":"rails comes with test framework called minitest. rails owes stability tests. commands available test: namespace helps running different tests will hopefully write."},{"id":566,"title":"Linhas de Comando do Rails","heading":"1 Noções Básicas de Linha de Comando","subheading":"1.14 rails tmp:","content":"rails.root/tmp directory like *nix /tmp directory, holding place temporary files like process files cached actions. tmp: namespaced commands will help clear create rails.root/tmp directory:"},{"id":567,"title":"Linhas de Comando do Rails","heading":"1 Noções Básicas de Linha de Comando","subheading":"1.15 Miscellaneous","content":""},{"id":568,"title":"Linhas de Comando do Rails","heading":"1 Noções Básicas de Linha de Comando","subheading":"1.16 Custom Rake Tasks","content":"custom rake tasks have .rake extension placed rails.root/lib/tasks. create these custom rake tasks with rails generate task command. pass arguments your custom rake task: group tasks placing them namespaces: invocation tasks will look like: more advanced command line focused around finding useful (even surprising times) options utilities, fitting those your needs specific work flow. listed here some tricks rails' sleeve."},{"id":569,"title":"Linhas de Comando do Rails","heading":"2 The Rails Advanced Command Line","subheading":"2.1 Rails with Databases and SCM","content":"when creating rails application, have option specify what kind database what kind source code management system your application going use. this will save minutes, certainly many keystrokes. let's what --git option --database=postgresql option will create gitapp directory initialize empty repository before rails would files created repository. let's what database configuration: also generated some lines database.yml configuration corresponding choice postgresql database. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":570,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"1 Introduction","subheading":"1 Introduction","content":"ruby rails allows applications written their code preloaded. normal ruby program classes need load their dependencies: rubyist instinct quickly sees some redundancy there: classes were defined files matching their name, couldn't their loading automated somehow? could save scanning file dependencies, which brittle. moreover, kernel#require loads files once, development much more smooth code gets refreshed when changes without restarting server. would nice able kernel#load development, kernel#require production. indeed, those features provided ruby rails, where just write this guide documents that works. while constants trivial most programming languages, they rich topic ruby. beyond scope this guide document ruby constants, nevertheless going highlight topics. truly grasping following sections instrumental understanding constant autoloading reloading."},{"id":571,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"2 Constants Refresher","subheading":"2.1 Nesting","content":"class module definitions nested create namespaces: nesting given place collection enclosing nested class module objects outwards. nesting given place inspected with module.nesting. example, previous example, nesting important understand that nesting composed class module objects, nothing with constants used access them, also unrelated their names. instance, while this definition similar previous one: nesting different: does belong this example that name class module that belongs certain nesting does necessarily correlate with namespaces spot. even more, they totally independent, take instance nesting consists module objects: only doesn't which does even belong nesting, also contains x::y, which independent from a::b. nesting internal stack maintained interpreter, gets modified according these rules: interesting observe that blocks modify stack. particular blocks that passed class.new module.new class module being defined pushed their nesting. that's differences between defining classes modules another."},{"id":572,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"2 Constants Refresher","subheading":"2.2 Class and Module Definitions are Constant Assignments","content":"let's suppose following snippet creates class (rather than reopening it): ruby creates constant object stores that constant class object. name class instance \"c\", string, named after constant. that performs constant assignment equivalent including setting name class side-effect: constant assignment special rule make that happen: object being assigned anonymous class module, ruby sets object's name name constant. similarly, module creation using module keyword performs constant assignment equivalent including setting name side-effect: thus, informal expression like \"the string class\" technically means class object stored constant called \"string\". that constant, turn, belongs class object stored constant called \"object\". string ordinary constant, everything related them such resolution algorithms applies likewise, controller post syntax class. rather, post regular ruby constant. good, constant evaluated object that responds all. that talk about constant autoloading, rails ability load constants fly."},{"id":573,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"2 Constants Refresher","subheading":"2.3 Constants are Stored in Modules","content":"constants belong modules very literal sense. classes modules have constant table; think hash table. let's analyze example really understand what that means. while common abuses language like \"the string class\" convenient, exposition going precise here didactic purposes. let's consider following module definition: first, when module keyword processed, interpreter creates entry constant table class object stored object constant. said entry associates name \"colors\" newly created module object. furthermore, interpreter sets name module object string \"colors\". later, when body module definition interpreted, entry created constant table module object stored colors constant. that entry maps name \"red\" string \"0xff0000\". particular, colors::red totally unrelated other constant that live other class module object. there were any, they would have separate entries their respective constant tables. special attention previous paragraphs distinction between class module objects, constant names, value objects associated them constant tables."},{"id":574,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"2 Constants Refresher","subheading":"2.4 Resolution Algorithms","content":"given place code, let's define cref first element nesting empty, object otherwise. without getting much into details, resolution algorithm relative constant references goes like this: rails autoloading does emulate this algorithm, starting point name constant autoloaded, cref. more relative references. qualified constants look like this: billing::invoice composed constants: billing relative resolved using algorithm previous section. invoice other hand qualified billing going resolution next. let's define parent that qualifying class module object, that billing example above. algorithm qualified constants goes like this: see, this algorithm simpler than relative constants. particular, nesting plays role here, modules special-cased, neither they their ancestors have constants, object checked. rails autoloading does emulate this algorithm, starting point name constant autoloaded, parent. more qualified references."},{"id":575,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"3 Vocabulary","subheading":"3.1 Parent Namespaces","content":"given string with constant path define parent namespace string that results from removing rightmost segment. example, parent namespace string \"a::b::c\" string \"a::b\", parent namespace \"a::b\" \"a\", parent namespace interpretation parent namespace when thinking about classes modules tricky though. let's consider module named \"a::b\": idea parent namespace core autoloading algorithms helps explain understand their motivation intuitively, that metaphor leaks easily. given edge case reason about, take always into account that \"parent namespace\" guide means exactly that specific string derivation."},{"id":576,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"3 Vocabulary","subheading":"3.2 Loading Mechanism","content":"rails autoloads files with kernel#load when config.cache_classes false, default development mode, with kernel#require otherwise, default production mode. kernel#load allows rails execute files more than once constant reloading enabled. this guide uses word \"load\" freely mean given file interpreted, actual mechanism kernel#load kernel#require depending that flag. rails always able autoload provided environment place. example runner command autoloads: console autoloads, test suite autoloads, course application autoloads. default, rails eager loads application files when boots production mode, most autoloading going development does happen. autoloading still triggered during eager loading. example, given house still unknown when app/models/beach_house.rb being eager loaded, rails autoloads probably know, when require gets relative file name: ruby looks file directories listed $load_path. that ruby iterates over directories each them checks whether they have file called \"erb.rb\", \"erb.so\", \"erb.o\", \"erb.dll\". finds them, interpreter loads ends search. otherwise, tries again next directory list. list gets exhausted, loaderror raised. going cover constant autoloading works more detail later, idea that when constant like post missing, there's post.rb file example app/models rails going find evaluate have post defined side-effect. right, rails collection directories similar $load_path which look post.rb. that collection called autoload_paths default contains: eager_load_paths initially paths above files autoloaded depends eager_load cache_classes config settings which typically vary development, production, test modes: what described above defaults with newly generated rails app. there multiple ways this configured differently (see configuring rails applications. using autoload_paths past (before rails developers might configure autoload_paths extra locations (e.g. which used autoload path list years ago, longer is). however this discouraged most purposes, likely lead production-only errors. possible locations both config.eager_load_paths config.autoload_paths your risk. also autoloading test environment. config.autoload_paths changeable from environment-specific configuration files. value autoload_paths inspected. just-generated application (edited):"},{"id":577,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"6 Autoloading Algorithms","subheading":"6.1 Relative References","content":"relative constant reference appear several places, example, three constant references relative. ruby performs lookup constant that follows class module keyword because needs know class module going created reopened. constant defined that point considered missing constant, autoloading triggered. previous example, postscontroller defined when file interpreted rails autoloading going triggered, ruby will just define controller. contrary, applicationcontroller unknown, constant considered missing autoload going attempted rails. order load applicationcontroller, rails iterates over autoload_paths. first checks app/assets/application_controller.rb exists. does not, which normally case, continues finds app/controllers/application_controller.rb. file defines constant applicationcontroller fine, otherwise loaderror raised: autoloading applicationcontroller looks directly under directories autoload_paths because nesting that spot empty. situation post different, nesting that line [postscontroller] support namespaces comes into play. basic idea that given autoload role going check defined current parent namespaces, time. conceptually want autoload that order. that's idea. rails looks autoload_paths respectively file names like these: modulus some additional directory lookups going cover soon. let's rails autoloads post constant postscontroller above assuming application post model defined app/models/post.rb. first checks posts_controller/post.rb autoload_paths: since lookup exhausted without success, similar search directory performed, going next section: those attempts fail, then rails starts lookup again parent namespace. this case only top-level remains: matching file found app/models/post.rb. lookup stops there file loaded. file actually defines post fine, otherwise loaderror raised."},{"id":578,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"6 Autoloading Algorithms","subheading":"6.2 Qualified References","content":"when qualified constant missing rails does look parent namespaces. there caveat: when constant missing, rails unable tell trigger relative reference qualified one. example, consider  user missing, either case rails knows that constant called \"user\" missing module called \"admin\". there top-level user ruby would resolve former example, wouldn't latter. general, rails does emulate ruby constant resolution algorithms, this case tries using following heuristic: example, this code triggers autoloading user constant already present object, possible that situation because otherwise ruby would have resolved user autoloading would have been triggered first place. thus, rails assumes qualified reference considers file admin/user.rb directory admin/user only valid options. practice, this works quite well long nesting matches parent namespaces respectively constants that make rule apply known that time. however, autoloading happens demand. chance top-level user loaded, then rails assumes relative reference contract. naming conflicts this kind rare practice, occurs, require_dependency provides solution ensuring that constant needed trigger heuristic defined conflicting place."},{"id":579,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"6 Autoloading Algorithms","subheading":"6.3 Automatic Modules","content":"when module acts namespace, rails does require application define file directory matching namespace enough. suppose application back office whose controllers stored app/controllers/admin. admin module loaded when admin::userscontroller hit, rails needs first autoload constant admin. autoload_paths file called admin.rb rails going load that one, there's such file directory called admin found, rails creates empty module assigns admin constant fly."},{"id":580,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"6 Autoloading Algorithms","subheading":"6.4 Generic Procedure","content":"relative references reported missing cref where they were hit, qualified references reported missing their parent (see resolution algorithm relative constants beginning this guide definition cref, resolution algorithm qualified constants definition parent). procedure autoload constant arbitrary situation follows: constant autoloading triggered demand therefore code that uses certain constant have already defined trigger autoload. that depends execution path vary between runs. there times, however, which want make sure certain constant known when execution reaches some code. require_dependency provides load file using current loading mechanism, keeping track constants defined that file they were autoloaded have them reloaded needed. require_dependency rarely needed, couple cases autoloading when constants aren't triggered. when config.cache_classes false rails able reload autoloaded constants. example, you're console session edit some file behind scenes, code reloaded with reload! command: when application runs, code reloaded when something relevant this logic changes. order that, rails monitors number things: anything there changes, there middleware that detects reloads code. autoloading keeps track autoloaded constants. reloading implemented removing them from their respective classes modules using module#remove_const. that way, when code goes those constants going unknown again, files reloaded demand."},{"id":581,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"9 Common Gotchas","subheading":"9.1 Nesting and Qualified Constants","content":"let's consider  resolve user ruby checks admin former case, does latter because does belong nesting (see nesting resolution algorithms). unfortunately rails autoloading does know nesting spot where constant missing able ruby would. particular, admin::user will autoloaded either case. albeit qualified constants with class module keywords technically work with autoloading some cases, preferable relative constants instead:"},{"id":582,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"9 Common Gotchas","subheading":"9.2 Defining vs Reopening Namespaces","content":"let's consider: table name blog::post should blog_posts existence method blog.table_name_prefix. however, app/models/blog/post.rb executed before app/models/blog.rb active record aware existence such method, assumes table posts. resolve situation like this, helps thinking clearly about which file defines blog module (app/models/blog.rb), which reopens (app/models/blog/post.rb). then, ensure that definition executed first using require_dependency:"},{"id":583,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"9 Common Gotchas","subheading":"9.3 Autoloading and STI","content":"single table inheritance (sti) feature active record that enables storing hierarchy models single table. such models aware hierarchy encapsulates some common needs. example, given these classes: triangle.create creates that represents triangle, rectangle.create creates that represents rectangle. existing record, polygon.find(id) returns object correct type. methods that operate collections also aware hierarchy. example, polygon.all returns records table, because rectangles triangles polygons. active record takes care returning instances their corresponding class result set. types autoloaded needed. example, polygon.first rectangle rectangle been loaded, active record autoloads record correctly instantiated. good, instead performing queries based root class need work some subclass, things interesting. while working with polygon need aware descendants, because anything table definition polygon, when working with subclasses active record needs able enumerate types looking for. let's example. rectangle.all only loads rectangles adding type constraint query: let's introduce subclass rectangle: rectangle.all should return rectangles squares: there's caveat here: does active record know that class square exists all? even file app/models/square.rb exists defines square class, code used that class, rectangle.all issues query that bug, query includes known descendants rectangle. ensure this works correctly regardless order execution manually load direct subclasses bottom file that defines each intermediate class: this needs happen every intermediate (non-root non-leaf) class. root class does scope query type, therefore does necessarily have know descendants."},{"id":584,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"9 Common Gotchas","subheading":"9.4 Autoloading and require","content":"files defining constants autoloaded should never required: there possible gotchas here development mode: just follow flow constant autoloading always, never autoloading require. last resort, some file absolutely needs load certain file require_dependency play nice with constant autoloading. this option rarely needed practice, though. course, using require autoloaded files load ordinary party libraries fine, rails able distinguish their constants, they marked autoloaded."},{"id":585,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"9 Common Gotchas","subheading":"9.5 Autoloading and Initializers","content":"consider this assignment config/initializers/set_auth_service.rb: purpose this setup would that application uses class that corresponds environment auth_service. development mode mockedauthservice gets autoloaded when initializer runs. let's suppose some requests, change implementation, application again. surprise changes reflected. why? earlier, rails removes autoloaded constants, auth_service stores original class object. stale, non-reachable using original constant, perfectly functional. following code summarizes situation: because that, good idea autoload constants application initialization. case above could implement dynamic access point: have application authservice.instance instead. authservice would loaded demand autoload-friendly."},{"id":586,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"9 Common Gotchas","subheading":"9.6 require_dependency and Initializers","content":"before, require_dependency loads files autoloading-friendly way. normally, though, such call does make sense initializer. could think about doing some require_dependency calls initializer make sure certain constants loaded upfront, example attempt address gotcha with stis. problem development mode autoloaded constants wiped there relevant change file system. that happens then very same situation initializer wanted avoid! calls require_dependency have strategically written autoloaded spots."},{"id":587,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"9 Common Gotchas","subheading":"9.7 When Constants aren't Missed","content":"let's consider flight simulator. application default flight model that overridden each airplane, instance initializer wants create bellx1::flightmodel nesting bellx1, that looks good. default flight model loaded bell-x1 not, interpreter able resolve top-level flightmodel autoloading thus triggered bellx1::flightmodel. that code depends execution path. these kind ambiguities often resolved using qualified constants: also, require_dependency solution: given expression hotel::image ambiguous because depends execution path. before, ruby looks constant hotel ancestors. app/models/image.rb been loaded app/models/hotel/image.rb hasn't, ruby does find image hotel, does object: code evaluating hotel::image needs make sure app/models/hotel/image.rb been loaded, possibly with require_dependency. these cases interpreter issues warning though: this surprising constant resolution observed with qualifying class:"},{"id":588,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"9 Common Gotchas","subheading":"9.8 Autoloading within Singleton Classes","content":"let's suppose have these class definitions: hotel::services known time app/models/hotel/geo_location.rb being loaded, services resolved ruby because hotel belongs nesting when singleton class hotel::geolocation opened. hotel::services known, rails able autoload application raises nameerror. reason that autoloading triggered singleton class, which anonymous, before, rails only checks top-level namespace that edge case. easy solution this caveat qualify constant:"},{"id":589,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"9 Common Gotchas","subheading":"9.9 Autoloading in BasicObject","content":"direct descendants basicobject have object among their ancestors cannot resolve top-level constants: when autoloading involved that plot twist. let's consider: since rails checks top-level namespace user gets autoloaded just fine first time user method invoked. only exception user constant known that point, particular second call user: because detects that parent namespace already constant (see qualified references). with pure ruby, within body direct descendant basicobject always absolute constant paths:"},{"id":590,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"9 Common Gotchas","subheading":"9.10 Autoloading in the Test Environment","content":"when configuring test environment autoloading might consider multiple factors. example might worth running your tests with identical setup production (config.eager_load true, config.cache_classes true) order catch problems before they production (this compensation lack dev-prod parity). however this will slow down boot time individual tests machine (and immediately compatible with spring below). possibility this machine only (which should without spring). development machine then have your tests running with whatever fastest (ideally config.eager_load false). with spring pre-loader (included with rails apps), ideally keep config.eager_load false development. sometimes with hybrid configuration (config.eager_load true, config.cache_classes true config.enable_dependency_loading true), spring issue. however might simpler keep same configuration development, work whatever that causing autoloading fail (perhaps results your test results). occasionally need explicitly eager_load using rails .application.eager_load! setup your tests this might occur your tests involve multithreading."},{"id":591,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"10 Troubleshooting","subheading":"10.1 Tracing Autoloads","content":"active support able report constants they autoloaded. enable these traces rails application, following lines some initializer:"},{"id":592,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"10 Troubleshooting","subheading":"10.2 Where is a Given Autoload Triggered?","content":"constant being autoloaded, you'd like know where that autoload coming from, just throw foo.rb inspect printed stack trace."},{"id":593,"title":"Autoloading and Reloading Constants (Classic Mode)","heading":"10 Troubleshooting","subheading":"10.3 Which Constants Have Been Autoloaded?","content":"given time, collection constants that have been autoloaded far. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":594,"title":"Ruby on Rails 3.0 Release Notes","heading":null,"subheading":null,"content":"install rails you're upgrading existing application, it's great idea have good test coverage before going should also first upgrade rails 2.3.5 make sure your application still runs expected before attempting update rails then take heed following changes:"},{"id":595,"title":"Ruby on Rails 3.0 Release Notes","heading":"1 Upgrading to Rails 3","subheading":"1.1 Rails 3 requires at least Ruby 1.8.7","content":"rails requires ruby 1.8.7 higher. support previous ruby versions been dropped officially should upgrade early possible. rails also compatible with ruby 1.9.2."},{"id":596,"title":"Ruby on Rails 3.0 Release Notes","heading":"1 Upgrading to Rails 3","subheading":"1.2 Rails Application object","content":"part groundwork supporting running multiple rails applications same process, rails introduces concept application object. application object holds application specific configurations very similar nature config/environment.rb from previous versions rails. each rails application must have corresponding application object. application object defined config/application.rb. you're upgrading existing application rails must this file move appropriate configurations from config/environment.rb config/application.rb."},{"id":597,"title":"Ruby on Rails 3.0 Release Notes","heading":"1 Upgrading to Rails 3","subheading":"1.3 script/* replaced by script/rails","content":"script/rails replaces scripts that used script directory. script/rails directly though, rails command detects being invoked root rails application runs script you. intended usage rails --help list options."},{"id":598,"title":"Ruby on Rails 3.0 Release Notes","heading":"1 Upgrading to Rails 3","subheading":"1.4 Dependencies and config.gem","content":"config.gem method gone been replaced using bundler gemfile, vendoring gems below."},{"id":599,"title":"Ruby on Rails 3.0 Release Notes","heading":"1 Upgrading to Rails 3","subheading":"1.5 Upgrade Process","content":"help with upgrade process, plugin named rails upgrade been created automate part simply install plugin, then rake rails:upgrade:check check your pieces that need updated (with links information update them). also offers task generate gemfile based your current config.gem calls task generate routes file from your current one. plugin, simply following: example that works rails upgrade official plugin aside from rails upgrade tool, need more help, there people rubyonrails-talk that probably doing same thing, possibly hitting same issues. sure blog your experiences when upgrading others benefit from your knowledge!"},{"id":600,"title":"Ruby on Rails 3.0 Release Notes","heading":"2 Creating a Rails 3.0 application","subheading":"2.1 Vendoring Gems","content":"rails uses gemfile application root determine gems require your application start. this gemfile processed bundler which then installs your dependencies. even install dependencies locally your application that doesn't depend system gems. more information: bundler homepage"},{"id":601,"title":"Ruby on Rails 3.0 Release Notes","heading":"2 Creating a Rails 3.0 application","subheading":"2.2 Living on the Edge","content":"bundler gemfile makes freezing your rails application easy with dedicated bundle command, rake freeze longer relevant been dropped. want bundle straight from repository, pass --edge flag: have local checkout rails repository want generate application using that, pass --dev flag: there major changes architecture rails."},{"id":602,"title":"Ruby on Rails 3.0 Release Notes","heading":"3 Rails Architectural Changes","subheading":"3.1 Railties Restrung","content":"railties updated provide consistent plugin entire rails framework well total rewrite generators rails bindings, result that developers hook into significant stage generators application framework consistent, defined manner."},{"id":603,"title":"Ruby on Rails 3.0 Release Notes","heading":"3 Rails Architectural Changes","subheading":"3.2 All Rails core components are decoupled","content":"with merge merb rails, jobs remove tight coupling between rails core components. this been achieved, rails core components using same that developing plugins. this means plugin make, core component replacement (like datamapper sequel) access functionality that rails core components have access extend enhance will. more information: great decoupling"},{"id":604,"title":"Ruby on Rails 3.0 Release Notes","heading":"3 Rails Architectural Changes","subheading":"3.3 Active Model Abstraction","content":"part decoupling core components extracting ties active record from action pack. this been completed. plugins just need implement active model interfaces work seamlessly with action pack. more information: make ruby object feel like activerecord"},{"id":605,"title":"Ruby on Rails 3.0 Release Notes","heading":"3 Rails Architectural Changes","subheading":"3.4 Controller Abstraction","content":"another part decoupling core components creating base superclass that separated from notions http order handle rendering views etc. this creation abstractcontroller allowed actioncontroller actionmailer greatly simplified with common code removed from these libraries into abstract controller. more information: rails edge architecture"},{"id":606,"title":"Ruby on Rails 3.0 Release Notes","heading":"3 Rails Architectural Changes","subheading":"3.5 Arel Integration","content":"arel active relation) been taken underpinnings active record required rails. arel provides abstraction that simplifies active record provides underpinnings relation functionality active record. more information: wrote arel"},{"id":607,"title":"Ruby on Rails 3.0 Release Notes","heading":"3 Rails Architectural Changes","subheading":"3.6 Mail Extraction","content":"action mailer ever since beginnings monkey patches, parsers even delivery receiver agents, addition having tmail vendored source tree. version changes that with email message related functionality abstracted mail gem. this again reduces code duplication helps create definable boundaries between action mailer email parser. more information: action mailer rails documentation rails tree being updated with changes, additionally, rails edge guides being updated reflect changes rails 3.0. guides guides.rubyonrails.org however will continue contain only stable version rails this point, version 2.3.5, until released). more information: rails documentation projects large amount work been done with i18n support rails including latest i18n supplying many speed improvements. more information: rails i18n changes with decoupling main rails frameworks, railties huge overhaul make linking frameworks, engines, plugins painless extensible possible: railties generators huge amount attention rails 3.0, basically: also, views generated railties generators some overhaul: finally couple enhancements were added rake tasks: railties deprecates: plugin/rails/tasks, plugin/tasks longer loaded tasks must plugin/lib/tasks. more information: there have been significant internal external changes action pack."},{"id":608,"title":"Ruby on Rails 3.0 Release Notes","heading":"7 Action Pack","subheading":"7.1 Abstract Controller","content":"abstract controller pulls generic parts action controller into reusable module that library render templates, render partials, helpers, translations, logging, part request response cycle. this abstraction allowed actionmailer::base just inherit from abstractcontroller just wrap rails onto mail gem. also provided opportunity clean action controller, abstracting what could simplify code. note however that abstract controller user facing api, will into your rails. more information: rails edge architecture"},{"id":609,"title":"Ruby on Rails 3.0 Release Notes","heading":"7 Action Pack","subheading":"7.2 Action Controller","content":"deprecations: more information:"},{"id":610,"title":"Ruby on Rails 3.0 Release Notes","heading":"7 Action Pack","subheading":"7.3 Action Dispatch","content":"action dispatch rails provides new, cleaner implementation routing. deprecations more information: rails router: rack revamped routes rails generic actions rails"},{"id":611,"title":"Ruby on Rails 3.0 Release Notes","heading":"7 Action Pack","subheading":"7.4 Action View","content":"major re-write done action view helpers, implementing unobtrusive javascript (ujs) hooks removing inline ajax commands. this enables rails compliant driver implement hooks helpers. what this means that previous remote_<method> helpers have been removed from rails core into prototype legacy helper. hooks into your html, pass :remote true instead. example: produces: helpers like form_for div_for that insert content from block now: your helpers that kind expected return string, rather than appending output buffer hand. helpers that something else, like cache content_for, affected this change, they need &lt;% before. active model rails 3.0. provides abstraction layer libraries interact with rails implementing active model interface."},{"id":612,"title":"Ruby on Rails 3.0 Release Notes","heading":"8 Active Model","subheading":"8.1 ORM Abstraction and Action Pack Interface","content":"part decoupling core components extracting ties active record from action pack. this been completed. plugins just need implement active model interfaces work seamlessly with action pack. more information: make ruby object feel like activerecord"},{"id":613,"title":"Ruby on Rails 3.0 Release Notes","heading":"8 Active Model","subheading":"8.2 Validations","content":"validations have been moved from active record into active model, providing interface validations that works across libraries rails also pass validator object, which then reuse between objects that active model: there's also support introspection: more information: active record received attention rails 3.0, including abstraction into active model, full update query interface using arel, validation updates, many enhancements fixes. rails will usable through compatibility layer that will supported until version 3.1."},{"id":614,"title":"Ruby on Rails 3.0 Release Notes","heading":"9 Active Record","subheading":"9.1 Query Interface","content":"active record, through arel, returns relations core methods. existing rails 2.3.x still supported will deprecated until rails removed until rails 3.2, however, provides following methods that return relations allowing them chained together: more information:"},{"id":615,"title":"Ruby on Rails 3.0 Release Notes","heading":"9 Active Record","subheading":"9.2 Enhancements","content":""},{"id":616,"title":"Ruby on Rails 3.0 Release Notes","heading":"9 Active Record","subheading":"9.3 Patches and Deprecations","content":"additionally, many fixes active record branch: well following deprecations: active resource also extracted active model allowing active resource objects with action pack seamlessly. deprecations: large effort made active support make cherry pickable, that longer have require entire active support library pieces this allows various core components rails slimmer. these main changes active support: following methods have been removed because they available ruby 1.8.7 1.9. security patch rexml remains active support because early patch-levels ruby 1.8.7 still need active support knows whether apply not. following methods have been removed because they longer used framework: action mailer been given with tmail being replaced with mail email library. action mailer itself been given almost complete re-write with pretty much every line code touched. result that action mailer simply inherits from abstract controller wraps mail rails dsl. this reduces amount code duplication other libraries action mailer considerably. deprecations: more information: full list contributors rails many people spent many hours making rails kudos them. rails release notes were compiled mikel lindsaar. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":617,"title":"Debug de Aplicações Rails","heading":"1 View Helpers para Debugging","subheading":"1 View Helpers para Debugging","content":"tarefa comum inspecionar conteúdo variável. rails fornece três diferentes formas fazer isso:"},{"id":618,"title":"Debug de Aplicações Rails","heading":"1 View Helpers para Debugging","subheading":"1.1 debug","content":"helper debug retornar <pre> renderiza objeto usando formato yaml. isso gerar dado legível humanos partir qualquer objeto. exemplo, você esse código view: você verá algo parecido isso:"},{"id":619,"title":"Debug de Aplicações Rails","heading":"1 View Helpers para Debugging","subheading":"1.2 to_yaml","content":"como alternativa, chamar to_yaml qualquer objeto converte yaml. você pode passar esse objeto convertido método helper simple_format formatar output. assim debug mágica. código acima renderizar algo como isso:"},{"id":620,"title":"Debug de Aplicações Rails","heading":"1 View Helpers para Debugging","subheading":"1.3 inspect","content":"outro método útil mostrar valores objeto inspect, especialmente quando estamos trabalhando arrays hashes. isso imprimirá valor objeto como string. exemplo: renderizar: pode útil salvar informações arquivo tempo execução. rails mantém arquivo separado cada ambiente execução."},{"id":621,"title":"Debug de Aplicações Rails","heading":"2 O Logger","subheading":"2.1 O que é o Logger?","content":"rails utiliza classe activesupport::logger guardar informações log. outros tipos loggers, como log4r, também podem utilizados. você pode especificar logger alternativo config/application.rb qualquer outro arquivo ambiente, exemplo: seção initializer, adicione qualquer seguintes:"},{"id":622,"title":"Debug de Aplicações Rails","heading":"2 O Logger","subheading":"2.2 Níveis de Log","content":"quando algo registrado, informação armazenada local registro correspondente nível igual maior configurado. você quiser saber nível atual registro, você pode método rails.logger.level. níveis disponiveis são: :debug, :info, :warn, :error, :fatal, :unknown, correspondendo níveis respectivamente. mudar nível padrão, utilize: isso útil quando você quer criar logs ambientes diferentes desenvolvimento homologação sobrecarregar registros aplicativo informação desnecessária."},{"id":623,"title":"Debug de Aplicações Rails","heading":"2 O Logger","subheading":"2.3 Enviando Mensagens","content":"enviar mensagem ativo, método logger.(debug|info|warn|error|fatal|unknown) dentro controller, model mailer: segue exemplo método instrumentado extra: segue exemplo gerado quando ação deste controller executada: adição deste tipo facilita busca comportamentos esperados usuais. você adicionar logs extras, tenha certeza utilizar níveis maneira adequada, evitar encher seus logs ambiente produção trivialidades inúteis."},{"id":624,"title":"Debug de Aplicações Rails","heading":"2 O Logger","subheading":"2.4 Verbose Query Logs","content":"when looking database query output logs, immediately clear multiple database queries triggered when single method called: after running activerecord::base.verbose_query_logs true rails console session enable verbose query logs running method again, becomes obvious what single line code generating these discrete database calls: below each database statement arrows pointing specific source filename (and line number) method that resulted database call. this help identify address performance problems caused queries: single database queries that generates multiple additional queries. verbose query logs enabled default development environment logs after rails 5.2."},{"id":625,"title":"Debug de Aplicações Rails","heading":"2 O Logger","subheading":"2.5 Tagged Logging","content":"when running multi-user, multi-account applications, it's often useful able filter logs using some custom rules. taggedlogging active support helps exactly that stamping lines with subdomains, request ids, anything else debugging such applications."},{"id":626,"title":"Debug de Aplicações Rails","heading":"2 O Logger","subheading":"2.6 Impact of Logs on Performance","content":"logging will always have small impact performance your rails app, particularly when logging disk. additionally, there subtleties: using :debug level will have greater performance penalty than :fatal, greater number strings being evaluated written output (e.g. disk). another potential pitfall many calls logger your code: above example, there will performance impact even allowed output level doesn't include debug. reason that ruby evaluate these strings, which includes instantiating somewhat heavy string object interpolating variables. therefore, it's recommended pass blocks logger methods, these only evaluated output level same included allowed level (i.e. lazy loading). same code rewritten would contents block, therefore string interpolation, only evaluated debug enabled. this performance savings only really noticeable with large amounts logging, it's good practice employ. quando código está comportando maneiras inesperadas, você pode tentar imprimir logs console diagnosticar problema. infelizmente, momentos esse tipo rastreamento erros eficaz encontrar raiz problema. quando você realmente precisa acessar código-fonte execução, debugger melhor companheiro. debugger também pode ajudá-lo você quiser aprender sobre código-fonte rails, sabe onde começar. basta fazer debugging qualquer requisição aplicação usar este guia aprender como passar código você escreveu código rails subjacente."},{"id":627,"title":"Debug de Aplicações Rails","heading":"3 Debug com a gem byebug","subheading":"3.1 Instalação","content":"você pode usar byebug definir breakpoints percorrer código execução rails. instalá-lo, basta executar: dentro qualquer aplicação rails, você pode invocar debugger chamando método byebug. aqui está exemplo:"},{"id":628,"title":"Debug de Aplicações Rails","heading":"3 Debug com a gem byebug","subheading":"3.2 O Shell","content":"assim aplicação chamar método byebug, debugger será iniciado debugger shell terminal onde você iniciou servidor aplicação, você será colocado prompt debugger (byebug). antes prompt, código redor linha está prestes executada será exibido linha atual será marcada '=>', assim: você chegou requisição navegador, navegador contém requisição ficará suspensa debugger termine rastreio tenha terminado processamento requisição inteira. exemplo: agora hora explorar aplicação. lugar começar pedindo ajuda debugger. digite: help linhas anteriores, você deve digitar list- l-). dessa forma, você pode mover-se dentro arquivo código acima linha adicionou chamada byebug. finalmente, onde você está código novamente, você pode digitar list="},{"id":629,"title":"Debug de Aplicações Rails","heading":"3 Debug com a gem byebug","subheading":"3.3 O Contexto","content":"quando você inicia debugging aplicação, você será colocado diferentes contextos conforme você percorre diferentes partes stack. debugger cria contexto quando ponto parada evento alcançado. contexto contém informações sobre programa suspenso, habilita debugger inspecionar frames stack, avaliar variáveis perspectiva programa depurado saiba local programa depurado está parado. qualquer momento, você pode chamar comando backtrace alias where) exibir backtrace aplicação. isso pode muito útil saber como você chegou aonde está. você perguntou como chegou algum lugar código, backtrace fornecerá resposta. frame atual marcado -->. você pode mover qualquer lugar desejar nesse trace (mudando assim contexto) usando comando frame número frame especificado. você fizer isso, byebug exibirá novo contexto. variáveis disponíveis mesmas você estivesse executando código linha linha. afinal, isso debugging. você também pode usar comandos down alterar contexto frames acima abaixo stack, respectivamente. assume como padrão número acima, nesse caso, stack frames números mais altos, abaixo stack frames números mais baixos."},{"id":630,"title":"Debug de Aplicações Rails","heading":"3 Debug com a gem byebug","subheading":"3.4 Threads","content":"debugger pode listar, parar, continuar alternar entre threads execução usando comando thread abreviado th). esse comando possui várias opções: esse comando muito útil quando você está fazendo debugging verificar condições código continuar rodando."},{"id":631,"title":"Debug de Aplicações Rails","heading":"3 Debug com a gem byebug","subheading":"3.5 Inspecionando Variáveis","content":"qualquer expressão pode avaliada contexto atual. avaliar expressão, apenas digite-a! este exemplo mostra como você pode imprimir variáveis instância definidas contexto atual: como você deve percebido, todas variáveis você pode acessar pelo controller exibidas. esta lista atualizada dinamicamente medida você executa código. exemplo, execute próxima linha usando next (você aprenderá mais sobre este comando posteriormente neste guia). seguida, chame novamente instance_variables: agora @articles está incluído variáveis instância, porque linha definiu executada. método maneira mais conveniente mostrar variáveis seus valores. vamos pedir byebug ajude isso. essa ótima maneira inspecionar valores variáveis contexto atual. exemplo, verificar temos variáveis locais definidas atualmente: você também pode inspecionar método objeto desta maneira: você também pode usar display começar observar variáveis. esta maneira rastrear valores variável enquanto execução continua. variáveis dentro lista exibida serão impressas seus valores depois você mover stack. parar exibir variável, undisplay onde número variável último exemplo)."},{"id":632,"title":"Debug de Aplicações Rails","heading":"3 Debug com a gem byebug","subheading":"3.6 Passo-a-passo","content":"agora você deve saber onde está trace execução poder imprimir variáveis disponíveis. vamos continuar seguir frente execução aplicação. step (abreviados) continuar executando programa próximo ponto parada lógica retornar controle debugger. next semelhante step, enquanto step pára próxima linha código executada, executando apenas único passo, next move próxima linha descer métodos. exemplo, considere seguinte situação: usarmos next, entraremos detalhes chamadas método. disso, byebug próxima linha dentro mesmo contexto. nesse caso, última linha método atual, então byebug retornará próxima linha método chamador. usarmos step mesma situação, obyebug literalmente próxima instrução ruby executada neste caso, método week active support. essa melhores maneiras encontrar erros código."},{"id":633,"title":"Debug de Aplicações Rails","heading":"3 Debug com a gem byebug","subheading":"3.7 Breakpoints","content":"breakpoint interrompe aplicação sempre determinado ponto programa atingido. shell debugger chamado nessa linha. você pode adicionar breakpoints dinamicamente comando break apenas existem três maneiras possíveis adicionar breakpoints manualmente: exemplo, situação anterior info breakpoints listar breakpoints. você fornecer número, listará esse breakpoint correspondente. caso contrário, listará todos breakpoints. deletar breakpoints: comando delete remover breakpoint número nenhum número especificado, excluirá todos breakpoints estão ativos momento. você também pode ativar desativar breakpoints:"},{"id":634,"title":"Debug de Aplicações Rails","heading":"3 Debug com a gem byebug","subheading":"3.8 Captura de Exceções","content":"comando catch exception-name apenas exception-name) pode usado interceptar exceção tipo exception-name quando, outra forma, haveria handler isso. listar todos pontos captura ativos, catch."},{"id":635,"title":"Debug de Aplicações Rails","heading":"3 Debug com a gem byebug","subheading":"3.9 Continuando a execução","content":"existem duas maneiras retomar execução aplicação está parada debugger:"},{"id":636,"title":"Debug de Aplicações Rails","heading":"3 Debug com a gem byebug","subheading":"3.10 Edição","content":"dois comandos permitem abrir código debugger editor:"},{"id":637,"title":"Debug de Aplicações Rails","heading":"3 Debug com a gem byebug","subheading":"3.11 Sair","content":"sair debugger, comando quit (abreviado digite ignorar mensagem really quit? (y/n) incondicionalmente. saída simples tenta finalizar todos threads vigor. portanto, servidor será parado você precisará iniciá-lo novamente."},{"id":638,"title":"Debug de Aplicações Rails","heading":"3 Debug com a gem byebug","subheading":"3.12 Configurações","content":"byebug possui algumas opções disponíveis ajustar comportamento: console like byebug, runs browser. page developing, request console context view controller. console would rendered next your html content."},{"id":639,"title":"Debug de Aplicações Rails","heading":"4 Debugging with the web-console gem","subheading":"4.1 Console","content":"inside controller action view, invoke console calling console method. example, controller: view: this will render console inside your view. don't need care about location console call; won't rendered spot invocation next your html content. console executes pure ruby code: define instantiate custom classes, create models, inspect variables."},{"id":640,"title":"Debug de Aplicações Rails","heading":"4 Debugging with the web-console gem","subheading":"4.2 Inspecting Variables","content":"invoke instance_variables list instance variables available your context. want list local variables, that with local_variables."},{"id":641,"title":"Debug de Aplicações Rails","heading":"4 Debugging with the web-console gem","subheading":"4.3 Settings","content":"since web-console evaluates plain ruby code remotely server, don't production. ruby application rails not), leak memory either ruby code code level. this section, will learn find such leaks using tool such valgrind."},{"id":642,"title":"Debug de Aplicações Rails","heading":"5 Debugging Memory Leaks","subheading":"5.1 Valgrind","content":"valgrind application detecting c-based memory leaks race conditions. there valgrind tools that automatically detect many memory management threading bugs, profile your programs detail. example, extension interpreter calls malloc() doesn't properly call free(), this memory won't available until terminates. further information install valgrind with ruby, refer valgrind ruby evan weaver. there some rails plugins help find errors debug your application. here list useful plugins debugging: você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":643,"title":"Multiple Databases with Active Record","heading":null,"subheading":null,"content":"application grows popularity usage you'll need scale application support your users their data. which your application need scale database level. rails support multiple databases don't have store your data place. this time following features supported: following features (yet) supported: while rails tries most work there still some steps you'll need your application ready multiple databases. let's have application with single primary database need database some tables we're adding. name database will \"animals\". database.yml looks like this: let's replica primary, writer called animals replica that well. this need change database.yml from 2-tier 3-tier config. when using multiple databases there important settings. first, database name primary replica should same because they contain same data. second, username primary replica should different, replica user's permissions should read write. when using replica database need replica: true entry replica database.yml. this because rails otherwise knowing which replica which primary. lastly, primary databases need migrations_paths directory where will store migrations that database. we'll look more migrations_paths later this guide. that have database, let's model. order database need create abstract class connect animals databases. then need update applicationrecord aware replica. default rails expects database roles writing reading primary replica respectively. have legacy system already have roles that don't want change. that case role name your application config. it's important connect your database single model then inherit from that model tables rather than connect multiple individual models same database. database clients have limit number open connections there this will multiply number connections have since rails uses model class name connection specification name. that have database.yml model it's time create databases. rails ships with rails tasks need multiple databases rails. rails commands you're able run. should following: running command like rails db:create will create both primary animals databases. note that there command creating users you'll need that manually support readonly users your replicas. want create just animals database rails db:create:animals. migrations multiple databases should live their folders prefixed with name database configuration. also need migrations_paths database configurations tell rails where find migrations. example animals database would look db/animals_migrate directory primary would look db/migrate. rails generators take --database option that file generated correct directory. command like finally, order read-only replica your application you'll need activate middleware automatic switching. automatic switching allows application switch from primary replica replica primary based http verb whether there recent write. application receiving post, put, delete, patch request application will automatically write primary. specified time after write application will read from primary. head request application will read from replica unless there recent write. activate automatic connection switching middleware, uncomment following lines your application config. rails guarantees \"read your write\" will send your head request primary it's within delay window. default delay seconds. should change this based your database infrastructure. rails doesn't guarantee \"read recent write\" other users within delay window will send head requests replicas unless they wrote recently. automatic connection switching rails relatively primitive deliberately doesn't whole lot. goal system that demonstrated automatic connection switching that flexible enough customizable developers. setup rails allows easily change switching done what parameters it's based let's want cookie instead session decide when swap connections. write your class: then pass middleware: there some cases where want your application connect primary replica automatic connection switching isn't adequate. example, know that particular request always want send request replica, even when post request path. this rails provides connected_to method that will switch connection need. \"role\" connected_to call looks connections that connected that connection handler role). reading connection handler will hold connections that were connected connects_to with role name reading. note that connected_to with role will look existing connection switch using connection specification name. this means that pass unknown role like connected_to(role: :nonexistent) will error that says activerecord::connectionnotestablished connection pool with 'animalsbase' found 'nonexistent' role.)"},{"id":644,"title":"Multiple Databases with Active Record","heading":"5 Caveats","subheading":"5.1 Sharding","content":"noted top, rails doesn't (yet) support sharding. work support multiple databases rails 6.0. lack support sharding isn't oversight, does require additional work that didn't make 6.0. need sharding advisable continue using many gems that supports this."},{"id":645,"title":"Multiple Databases with Active Record","heading":"5 Caveats","subheading":"5.2 Load Balancing Replicas","content":"rails also doesn't support automatic load balancing replicas. this very dependent your infrastructure. implement basic, primitive load balancing future, application scale this should something your application handles outside rails."},{"id":646,"title":"Multiple Databases with Active Record","heading":"5 Caveats","subheading":"5.3 Joining Across Databases","content":"applications cannot join across databases. rails will support using has_many relationships creating queries instead joining, rails will require split joins into selects manually."},{"id":647,"title":"Multiple Databases with Active Record","heading":"5 Caveats","subheading":"5.4 Schema Cache","content":"schema cache multiple databases you'll need write initializer that loads schema cache from your app. this wasn't issue could resolve time rails hope have future version soon. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":648,"title":"Action Text Overview","heading":"1 Introduction","subheading":"1 Introduction","content":"action text brings rich text content editing rails. includes trix editor that handles everything from formatting links quotes lists embedded images galleries. rich text content generated trix editor saved richtext model that's associated with existing active record model application. embedded images other attachments) automatically stored using active storage associated with included richtext model. most wysiwyg editors wrappers around html’s contenteditable execcommand apis, designed microsoft support live editing pages internet explorer 5.5, eventually reverse-engineered copied other browsers. because these apis were never fully specified documented, because wysiwyg html editors enormous scope, each browser's implementation bugs quirks, javascript developers left resolve inconsistencies. trix sidesteps these inconsistencies treating contenteditable device: when input makes editor, trix converts that input into editing operation internal document model, then re-renders that document back into editor. this gives trix complete control over what happens after every keystroke, avoids need execcommand all. rails action_text:install yarn package copy over necessary migration. adding rich text field existing model: then refer this field form model: finally display sanitized rich text page: accept rich text content, have permit referenced attribute: default, action text editor content styled trix defaults. want change these defaults, you'll want remove app/assets/stylesheets/actiontext.scss linker base your stylings contents that file. also style html used embedded images other attachments (known blobs). installation, action text will copy over partial app/views/active_storage/blobs/_blob.html.erb, which specialize. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":649,"title":"Threading and Code Execution in Rails","heading":"1 Automatic Concurrency","subheading":"1 Automatic Concurrency","content":"rails automatically allows various operations performed same time. when using threaded server, such default puma, multiple http requests will served simultaneously, with each request provided controller instance. threaded active adapters, including built-in async, will likewise execute several jobs same time. action cable channels managed this too. these mechanisms involve multiple threads, each managing work unique instance some object (controller, job, channel), while sharing global process space (such classes their configurations, global variables). long your code doesn't modify those shared things, mostly ignore that other threads exist. rest this guide describes mechanisms rails uses make \"mostly ignorable\", extensions applications with special needs them. rails executor separates application code from framework code: time framework invokes code you've written your application, will wrapped executor. executor consists callbacks: to_run to_complete. callback called before application code, complete callback called after."},{"id":650,"title":"Threading and Code Execution in Rails","heading":"2 Executor","subheading":"2.1 Default callbacks","content":"default rails application, executor callbacks used prior rails 5.0, some these were handled separate rack middleware classes (such activerecord::connectionadapters::connectionmanagement), directly wrapping code with methods like activerecord::base.connection_pool.with_connection. executor replaces these with single more abstract interface."},{"id":651,"title":"Threading and Code Execution in Rails","heading":"2 Executor","subheading":"2.2 Wrapping application code","content":"you're writing library component that will invoke application code, should wrap with call executor: each thread should wrapped before runs application code, your application manually delegates work other threads, such thread.new concurrent ruby features that thread pools, should immediately wrap block: executor safely re-entrant; already active current thread, wrap no-op. it's impractical wrap application code block (for example, rack makes this problematic), also run! complete! pair:"},{"id":652,"title":"Threading and Code Execution in Rails","heading":"2 Executor","subheading":"2.3 Concurrency","content":"executor will current thread into running mode load interlock. this operation will block temporarily another thread currently either autoloading constant unloading/reloading application. like executor, reloader also wraps application code. executor already active current thread, reloader will invoke you, only need call one. this also guarantees that everything reloader does, including callback invocations, occurs wrapped inside executor. reloader only suitable where long-running framework-level process repeatedly calls into application code, such server queue. rails automatically wraps requests active workers, you'll rarely need invoke reloader yourself. always consider whether executor better your case."},{"id":653,"title":"Threading and Code Execution in Rails","heading":"3 Reloader","subheading":"3.1 Callbacks","content":"before entering wrapped block, reloader will check whether running application needs reloaded example, because model's source file been modified. determines reload required, will wait until it's safe, then before continuing. when application configured always reload regardless whether changes detected, reload instead performed block. reloader also provides to_run to_complete callbacks; they invoked same points those executor, only when current execution initiated application reload. when reload deemed necessary, reloader will invoke wrapped block with other callbacks."},{"id":654,"title":"Threading and Code Execution in Rails","heading":"3 Reloader","subheading":"3.2 Class Unload","content":"most significant part reloading process class unload, where autoloaded classes removed, ready loaded again. this will occur immediately before either complete callback, depending reload_classes_only_on_change setting. often, additional reloading actions need performed either just before just after class unload, reloader also provides before_class_unload after_class_unload callbacks."},{"id":655,"title":"Threading and Code Execution in Rails","heading":"3 Reloader","subheading":"3.3 Concurrency","content":"only long-running \"top level\" processes should invoke reloader, because determines reload needed, will block until other threads have completed executor invocations. this were occur \"child\" thread, with waiting parent inside executor, would cause unavoidable deadlock: reload must occur before child thread executed, cannot safely performed while parent thread mid-execution. child threads should executor instead. rails framework components these tools manage their concurrency needs too. actiondispatch::executor actiondispatch::reloader rack middlewares that wraps request with supplied executor reloader, respectively. they automatically included default application stack. reloader will ensure arriving http request served with freshly-loaded copy application code changes have occurred. active also wraps executions with reloader, loading latest code execute each comes queue. action cable uses executor instead: because cable connection linked specific instance class, it's possible reload every arriving websocket message. only message handler wrapped, though; long-running cable connection does prevent reload that's triggered incoming request job. instead, action cable uses reloader's before_class_unload callback disconnect connections. when client automatically reconnects, will speaking version code. above entry points framework, they responsible ensuring their respective threads protected, deciding whether reload necessary. other components only need executor when they spawn additional threads."},{"id":656,"title":"Threading and Code Execution in Rails","heading":"4 Framework Behavior","subheading":"4.1 Configuration","content":"reloader only checks file changes when cache_classes false reload_classes_only_on_change true (which default development environment). when cache_classes true production, default), reloader only pass-through executor. executor always important work like database connection management. when cache_classes eager_load both true (production), autoloading class reloading will occur, does need load interlock. either those false (development), then executor will load interlock ensure constants only loaded when safe. load interlock allows autoloading reloading enabled multi-threaded runtime environment. when thread performing autoload evaluating class definition from appropriate file, important other thread encounters reference partially-defined constant. similarly, only safe perform unload/reload when application code mid-execution: after reload, user constant, example, point different class. without this rule, poorly-timed reload would mean user.new.class user, even user user, could false. both these constraints addressed load interlock. keeps track which threads currently running application code, loading class, unloading autoloaded constants. only thread load unload time, either, must wait until other threads running application code. thread waiting perform load, doesn't prevent other threads from loading fact, they'll cooperate, each perform their queued load turn, before resuming running together)."},{"id":657,"title":"Threading and Code Execution in Rails","heading":"5 Load Interlock","subheading":"5.1 permit_concurrent_loads","content":"executor automatically acquires running lock duration block, autoload knows when upgrade load lock, switch back running again afterwards. other blocking operations performed inside executor block (which includes application code), however, needlessly retain running lock. another thread encounters constant must autoload, this cause deadlock. example, assuming user loaded, following will deadlock: prevent this deadlock, outer thread permit_concurrent_loads. calling this method, thread guarantees will dereference possibly-autoloaded constant inside supplied block. safest meet that promise close possible blocking call: another example, using concurrent ruby:"},{"id":658,"title":"Threading and Code Execution in Rails","heading":"5 Load Interlock","subheading":"5.2 ActionDispatch::DebugLocks","content":"your application deadlocking think load interlock involved, temporarily actiondispatch::debuglocks middleware config/application.rb: then restart application re-trigger deadlock condition, /rails/locks will show summary threads currently known interlock, which lock level they holding awaiting, their current backtrace. generally deadlock will caused interlock conflicting with some other external lock blocking call. once find wrap with permit_concurrent_loads. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":659,"title":"Active Record Migrations","heading":"1 Visão Geral de Migration","subheading":"1 Visão Geral de Migration","content":"migrations forma conveniente alterar nosso esquema banco dados tempo forma fácil consistente. elas usam ruby você precise escrever puro, permitindo esquema alterações sejam independentes banco dados utilizado. você pode pensar cada migration como sendo nova 'versão' banco dados. esquema vazio início, após cada migration modificado adicionar remover tabelas, colunas, entradas dados. active record sabe como atualizar esquema nessa linha tempo, trazendo-o qualquer ponto esteja histórico, última versão. active record também atualizará arquivo db/schema.rb igualar estrutura mais atualizada banco dados. aqui temos exemplo migration: essa migration adiciona tabela chamada products coluna tipo string chamada name coluna tipo text chamada description. coluna tipo chave primária chamada também será adicionada implicitamente, pois chave primária padrão todos models active record. macro timestamps adiciona duas colunas, created_at updated_at. essas colunas especiais automaticamente gerenciadas pelo active record, existirem. note definimos mudanças queremos aconteçam futuro. antes desta migration executada, sequer tabela. depois, tabela será criada. active record também sabe como reverter essa migration: desfizermos, removerá tabela. bancos dados suportem transações declarações alterem esquema, migrations incluídas transação. banco dados suportar esses tipos declarações, então, quando migration falhar, partes dela tiveram sucesso serão desfeitas. você terá desfazer mudanças manualmente. você quiser migration faça algo active record sabe como reverter, pode usar reversible: alternativamente, você pode usar down invés change:"},{"id":660,"title":"Active Record Migrations","heading":"2 Criando uma Migration","subheading":"2.1 Criando uma Migration Independente","content":"migrations armazenadas arquivos diretório db/migrate, cada classe migration. nome arquivo seguinte formato yyyymmddhhmmss_create_products.rb, isto timestamp (marcação data/hora) identificando migration seguida underline seguido pelo nome migration. nome classe migration camelcase) deve corresponder última parte nome arquivo. exemplo 20080906120000_create_products.rb deve definir classe createproducts 20080906120001_add_details_to_products.rb deve definir adddetailstoproducts. rails esse registro data hora determinar qual migration deve executada ordem, portanto, você estiver copiando migration outra aplicação gerar arquivo você mesmo, esteja ciente posição ordem. obviamente, calcular timestamps divertido, portanto, active record fornece gerador fazer isso você: isso criará migration vazia nomeada devidamente: esse gerador pode fazer muito mais acrescentar timestamp nome arquivo. base convenções nomenclatura argumentos (opcionais) adicionais, pode também começar concretizar migration. nome migração estiver formato \"addcolumntotable\" \"removecolumnfromtable\" seguido lista nomes colunas tipos dados, então migration contendo intruções add_column remove_column serão criadas apropriadamente. gerar você deseja adicionar índice nova coluna, você também pode fazer isso: gerar mesma forma, você pode gerar migration remover coluna linha comando: gera você limitação apenas coluna gerada magicamente. exemplo: gera nome migração estiver formato \"createxxx\" seguido lista nomes tipos colunas, seguida, migration criando tabela colunas listadas será gerado. exemplo: gera como sempre, gerado você apenas ponto partida. você pode adicionar remover conteúdo como achar melhor, editando arquivo db/migrate/yyyymmddhhmmss_add_details_to_products.rb. além disso, gerador aceita tipo coluna references (também disponível como belongs_to). exemplo: gera essa migração criará coluna user_id índice apropriado. mais opções add_reference, visite documentação api. também existe gerador produzirá join tables jointable fizer parte nome: produzirá seguinte migração:"},{"id":661,"title":"Active Record Migrations","heading":"2 Criando uma Migration","subheading":"2.2 Model Generators","content":"geradores model scaffold criarão migrações apropriadas adicionar novo model. essa migração conter instruções criar tabela. você disser rails quais colunas você deseja, instruções adicionar essas colunas também serão criadas. exemplo, executando: criará migração parece isso você pode utilizar quantos pares nome/tipo coluna desejar."},{"id":662,"title":"Active Record Migrations","heading":"2 Criando uma Migration","subheading":"2.3 Usando Modificadores","content":"alguns modificadores tipo podem utilizados diretamente linha comando. eles delimitados chaves após tipo campo: exemplo, executando: produzirá migração parece isso depois criar migration usando geradores, hora começar trabalhos!"},{"id":663,"title":"Active Record Migrations","heading":"3 Escrevendo uma Migration","subheading":"3.1 Criando uma Tabela","content":"método create_table mais fundamentais, maioria vezes, será criado você usando gerador scaffold model. típico seria: cria tabela products coluna chamada name como discutido abaixo, coluna implícita padrão, create_table criará chave primária chamada você pode mudar nome chave primária opção :primary_key (não esqueça atualizar model correspondente) você quer chave primária, você pode passar opção false. você precisa passar opções específicas banco dados você pode colocar fragmento opção :option. exemplo: acrescentará engine=blackhole instrução usada criar tabela. você também pode passar opção :comment qualquer descrição tabela serão armazenados próprio bando dados poderão visualizados ferramentas administração banco dados, como mysql workbench pgadmin iii. altamente recomendável especificar comentários migrations aplicações grandes bancos dados, pois ajudam pessoas entender modelo dados gerar documentação. atualmente, apenas adaptadores mysql postgresql suportam comentários."},{"id":664,"title":"Active Record Migrations","heading":"3 Escrevendo uma Migration","subheading":"3.2 Criando uma Tabela de Junção (Join Table)","content":"método migration create_join_table cria tabela join habtm (tem pertence muitos). comum seria: cria tabela categories_products duas colunas chamadas category_id product_id. essas colunas opção :null definida como false padrão. isso pode substituído, especificando opção :column_options: padrão, nome tabela join união dois primeiros argumentos fornecidos create_join_table ordem alfabética. customizar nome tabela, forneça opção :table_name: cria tabela categorization. create_join_table também aceita bloco, você pode usar adicionar índices (que criados padrão) colunas adicionais:"},{"id":665,"title":"Active Record Migrations","heading":"3 Escrevendo uma Migration","subheading":"3.3 Mudando Tabelas","content":"primo próximo create_table change_table, usado mudar tabelas existentes. usado maneira semelhante create_table objeto produzido bloco conhece mais truques. exemplo: remove colunas description name, cria coluna string part_number adiciona índice nela. finalmente renomeia coluna upccode."},{"id":666,"title":"Active Record Migrations","heading":"3 Escrevendo uma Migration","subheading":"3.4 Mudando Colunas","content":"assim como remove_column add_column, rails fornece método migration change_column. isso muda coluna part_number tabela produtos campo :text. note comando change_column irreversível. além change_column, métodos change_column_null change_column_default usados especificamente alterar restrição nulo valores padrão coluna. isso define campo :name produtos coluna null valor padrão campo :approved true false."},{"id":667,"title":"Active Record Migrations","heading":"3 Escrevendo uma Migration","subheading":"3.5 Modificadores de Coluna","content":"modificadores coluna podem aplicados criar alterar coluna: alguns adaptadores podem suportar opções adicionais; consulte documentação adaptador específico maiores informações."},{"id":668,"title":"Active Record Migrations","heading":"3 Escrevendo uma Migration","subheading":"3.6 Foreign Keys (Chaves Estrangeiras)","content":"embora seja necessário, você pode adicionar restrições foreign (chave estrangeira) garantir integridade referencial. isso adiciona nova foreign (chave estrangeira) coluna author_id tabela articles. chave referencia coluna tabela authors. nomes coluna puderem derivados nomes tabelas, você poderá usar opções :column :primary_key. rails gerar nome cada foreign (chave estrangeira) começando fk_rails_ seguido caracteres gerados especificamente partir from_table column. existe opção :name especificar nome diferente necessário. remoção foreign (chave estrangeira) também possível:"},{"id":669,"title":"Active Record Migrations","heading":"3 Escrevendo uma Migration","subheading":"3.7 Quando os Helpers não são Suficientes","content":"helpers fornecidos pelo active record forem suficientes, você poderá usar método execute executar arbitrário: mais detalhes exemplos métodos individuais, consulte documentação api. particular, documentação activerecord::connectionadapters::schemastatements (que fornece métodos disponíveis métodos change, down), activerecord::connectionadapters::tabledefinition (que fornece métodos disponíveis objeto gerado create_table) activerecord::connectionadapters::table (que fornece métodos disponíveis objeto gerado change_table)."},{"id":670,"title":"Active Record Migrations","heading":"3 Escrevendo uma Migration","subheading":"3.8 Usando o Método change","content":"método change principal maneira escrever migrations. funciona maioria casos, onde active record sabe como reverter migration automaticamente. atualmente, método change suporta apenas estas definições migrations: change_table também reversível, desde bloco chame change, change_default remove. remove_column reversível você fornecer tipo coluna como terceiro argumento. forneça também opções coluna original, caso contrário, rails poderá recriar coluna exatamente reverter: você precisar usar outros métodos, você deve usar reversible escrever métodos down usar médoto change."},{"id":671,"title":"Active Record Migrations","heading":"3 Escrevendo uma Migration","subheading":"3.9 Usando reversible","content":"migrations complexas podem exigir processamento active record sabe como reverter. você pode usar reversible especificar fazer executar migration mais fazer revertê-la. exemplo: reversible garantirá instruções também sejam executadas ordem certa. exemplo anterior migration revertido, bloco down será executado depois coluna home_page_url removida logo antes tabela distributors apagada. vezes migration fará algo simplesmente irreversível; exemplo, pode destruir alguns dados. alguns casos, você pode levantar activerecord::irreversiblemigration bloco down. alguém tentar reverter migration, mensagem erro será exibida dizendo isso pode feito."},{"id":672,"title":"Active Record Migrations","heading":"3 Escrevendo uma Migration","subheading":"3.10 Usando os métodos up/down","content":"você também pode usar estilo antigo migration usando métodos down método change. método deve descrever transformação você deseja fazer schema, método down migration deve reverter transformações feitas pelo método outras palavas, schema banco dados deve permanecer inalterado você fizer seguido down. exemplo, você criar tabela método você deve apagá-la método down. aconselhável realizar transformações precisamente ordem inversa foram feitas método exemplo seção reversible equivalente migration irreversível, você deve raise activerecord::irreversiblemigration método down. alguém tentar reveter migration, mensagem erro será exibida dizendo isso pode feito."},{"id":673,"title":"Active Record Migrations","heading":"3 Escrevendo uma Migration","subheading":"3.11 Revertendo Migrations Anteriores","content":"active record's ability rollback migrations using revert method: você pode usar capacidade active record reverter migrations usando método revert: método revert também aceita bloco instruções reverter. isso pode útil reverter partes selecionadas migrations anteriores. exemplo, vamos imaginar examplemigration seja executado mais tarde decidimos seria melhor usar validações active record, lugar constraint (restrição) check, verificar cep. mesma migration também poderia sido escrita revert isso envolveria mais algumas etapas: reverter ordem create_table reversible, substituindo create_table drop_table, finalmente mudando down vice-versa. tudo isso resolvido revert. rails fornece série comandos executar certos conjuntos migrations. primeiro comando rails relacionado migration (migração) você utilizará, provavelmente será rails db:migrate. basicamente, executa método change todas migrations ainda foram executadas momento. houver nenhuma dessas migrations, nada executado. comando executará migrations base ordem data migration. observe executar comando db:migrate também chamado comando db:schema:dump, atualizará arquivo db/schema.rb corresponder estrutura banco dados. você especificar versão alvo, active record executará migrations necessárias (change, down) atingir versão especificada. versão prefixo numérico nome arquivo migration. exemplo, migrar versão execute: versão maior versão atual seja, está migrando cima), será executado método change todas migrations (incluindo execução) será executada nenhuma migration posterior. estiver migrando baixo, será executado método down todas migrations 20080906120000, incluindo execução."},{"id":674,"title":"Active Record Migrations","heading":"4 Executando as Migrations","subheading":"4.1 Revertendo a Migration","content":"tarefa comum reverter última migration. exemplo, você cometeu erro deseja corrigí-lo. invés rastrear número versão associada migration anterior, você pode executar: isso reverterá migration mais recente, seja revertendo método change executando método down. precisar desfazer várias migrations, você pode passar parâmetro step: reverter últimas migrations. comando db:migrate:redo atalho fazer rollback então refazer migration volta. assim como comando db:rollback, você pode utilizar parâmetro step precisar voltar mais versão, exemplo: nenhum desses comandos rails fazem nada você pudesse fazer db:migrate. eles apenas mais convenientes, você precisa especificar explicitamente versão qual migrar."},{"id":675,"title":"Active Record Migrations","heading":"4 Executando as Migrations","subheading":"4.2 Setup do Banco de Dados","content":"comando rails db:setup criar banco dados, carregar schema inicializar dados iniciais."},{"id":676,"title":"Active Record Migrations","heading":"4 Executando as Migrations","subheading":"4.3 Reinicializando o Banco de Dados","content":"comando rails db:reset eliminar banco dados configurá-lo novamente. isso funcionalmente equivalente comando rails db:drop db:setup."},{"id":677,"title":"Active Record Migrations","heading":"4 Executando as Migrations","subheading":"4.4 Executando Migrations Específicas","content":"você precisar executar migration específica cima baixo, comandos db:migrate:up db:migration:down farão isso. basta especificar versão correta migration correspondente terá método change, down chamado, exemplo: executar migration executando método change método up). este comando verificará primeiro migration realizada fará nada active record entender executada."},{"id":678,"title":"Active Record Migrations","heading":"4 Executando as Migrations","subheading":"4.5 Executando Migrations em Ambientes Diferentes","content":"padrão, rodar rails db:migrate será executado ambiente development (desenvolvimento). executar migrations outro ambiente, você pode especificá-lo usando variável ambiente rails_env enquanto executa comando. exemplo, executar *migrations*no ambiente test (teste), você pode executar:"},{"id":679,"title":"Active Record Migrations","heading":"4 Executando as Migrations","subheading":"4.6 Alterando o Output (Saída) de Migrations em Execução","content":"padrão, migrations informam exatamente estão fazendo quanto tempo levou. migration criando tabela adicionando índice pode produzir output como esse: vários métodos fornecidos migrations permitem você controle tudo isso: exemplo, esta migration gera seguinte output você deseja active record produza nada, execute rails db:migrate verbose=false isso suprimir todos outputs ocasionalmente, você cometerá erro escrever migration. você executou migration, você pode editá-la rodá-la novamente: rails assume você rodou migration, então fazer nada quando você executar comando rails db:migrate. você deve reverter migration (por exemplo rails db:rollback), editar migration, então rodar comando rails db:migrate versão correta seja executada. geral, edição migrations existentes ideia. você criará trabalho extra mesmo seus colegas trabalho causará dores cabeça maiores versão existente migration tiver sido executada máquinas produção. como alternativa, você deveria escrever nova migration execute mudanças necessárias. editar migration recentemente gerada ainda feito commit source control (ou, forma geral, propagada além máquina desenvolvimento) relativamente inofensivo. método revert pode ajudar escrever nova migration desfazer migrations anteriores todo partes (veja revertendo migrations anteriores acima)."},{"id":680,"title":"Active Record Migrations","heading":"6 Schema Dumping e Você","subheading":"6.1 Para que servem arquivos de Schema?","content":"migrations, poderosas como podem ser, fonte oficial schema banco dados. banco dados permanece sendo fonte oficial. padrão, rails gera arquivo db/schema.rb schema dump), tenta capturar estado atual schema banco dados. costuma mais rápido menos suscetível erros criar nova instância banco dados aplicação caregando arquivo schema meio comando rails db:schema:load invés reexecutar todo histórico migrations. migrations antigas podem falhar execução estas migrations usam dependências externas estejam constante mudança dependem código aplicação evolui separadamente suas migrations. arquivos schema também úteis você deseja verificar rapidamente quais atributos objeto tipo active record possui. essa informação está código model frequentemente espalhada diversas migrations, informação facilmente acessível arquivo schema."},{"id":681,"title":"Active Record Migrations","heading":"6 Schema Dumping e Você","subheading":"6.2 Tipos de Schema Dumps","content":"formato arquivos schema gerados pelo rails controlado pela configuração config.active_record.schema_format config/application.rb. padrão, formato :ruby, pode também alterado :sql. :ruby está selecionado, então arquivo schema salvo db/schema.rb. você analisar este arquivo perceberá parece muito migration gigante. muitas maneiras exatamente isso. este arquivo criado inspecionar banco dados, expressando estrutura através comandos create_table, add_index, vai. arquivo db/schema.rb consegue expressar tudo banco dados suporta como triggers, sequences, stored procedures, check constraints, etc. enquanto outras migrations podem utilizar comando execute criar estruturas banco dados suportadas pela migrations ruby, estas estruturas podem possíveis serem reconstituídas gerar novo schema padrão. você estiver utilizando estes tipos funcionalidades, você deve então alterar formato schema :sql conseguir obter arquivo schema mais preciso possa utilizado criar novas instâncias banco dados. quando formato schema definido como :sql, estrutura banco dados será reproduzida utilizando ferramenta específica banco dados sendo usado arquivo db/structure.sql. exemplo, postgresql, ferramenta pg_dump utilizada. mysql mariadb, este arquivo conter saída show create table tabelas banco. carregar schema db/structure.sql, execute rails db:structure:load. carregamento deste arquivo realizado executando comandos contém. definição, isso criar cópia perfeita estrutura banco dados."},{"id":682,"title":"Active Record Migrations","heading":"6 Schema Dumping e Você","subheading":"6.3 Schema Dumps e o Controle de Versão","content":"como arquivos schema comumente utilizados criar novos bancos dados, fortemente recomendado você adicione arquivo schema controle versão. conflitos merge podem acontecer arquivo schema quando duas branches modificam. resolver estes conflitos execute rails db:migrate gerar novamente arquivo schema. maneira active record trabalhar presume inteligência pertence seus models, banco dados. desta forma, funcionalidades como triggers constraints, enviam pouco desta inteligência volta banco dados, usadas frequência. validações como validates :foreign_key, uniqueness: true maneira pela qual models podem impor integridade dados. opção :dependent associações permite models destruir automaticamente objetos filhos quando objeto destruído. como qualquer coisa opera nível aplicação, estas validações podem garantir integridade referencial assim algumas pessoas aprimoram vínculos chaves estrangeiras banco dados. embora active record forneça todas ferramentas trabalhar diretamente estas funcionalidades, método execute pode usado executar arbitrário. propósito principal funcionalidade migração rails enviar comandos modificam schema usando processo consistente. migrações também podem usadas inserir modificar dados. isto útil banco dados existente pode destruído criado novo, como exemplo banco dados produção. inserir dados depois banco dados criado, rails funcionalidade padrão seeds torna processo rápido fácil. isto especialmente útil recarregar banco dados frequência ambientes teste desenvolvimento. fácil começar usar esta funcionalidade: simplesmente preencha arquivo db/seeds.rb código ruby, execute rails db:seed: isto geralmente, maneira mais limpa preparar banco dados aplicação branco. arquivos db/schema.rb db/structure.sql refletem estado atual banco dados fonte oficial reconstruí-lo. isto torna possível excluir arquivos antigos migration. quando você exclui arquivos migration diretório db/migrate, qualquer ambiente qual rails db:migrate executado quando estes arquivos ainda existiam manter referência suas timestamps específicas dentro tabela interna rails chamada schema_migrations. esta tabela usada manter acompanhamento quais migrations foram executadas ambiente específico. você executar comando rails db:migrate:status, mostra estado down) cada migration, você verá texto ********** file ********** próximo cada arquivo migration excluído anteriormente executado ambiente específico encontra mais diretório db/migrate/. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":683,"title":"Básico do Active Record","heading":"1 O que é Active Record?","subheading":"1 O que é Active Record?","content":"active record model camada sistema responsável pela representação lógica dados negócio. active record facilita criação objetos negócio cujos dados precisam persistidos banco. essa implementação padrão active record descrição sistema mapeamento objeto-relacional (object relational mapping)."},{"id":684,"title":"Básico do Active Record","heading":"1 O que é Active Record?","subheading":"1.1 O Padrão Active Record","content":"active record descrito martin fowler livro patterns enterprise application architecture. active record, objetos possuem ambos dados persistentes comportamento opera nesse dado. filosofia active record consiste assegurar lógica acesso dados seja parte objeto, deste objeto permitir deduzir como escrever banco dados."},{"id":685,"title":"Básico do Active Record","heading":"1 O que é Active Record?","subheading":"1.2 Mapeamento Objeto-Relacional (Object Relational Mapping)","content":"mapeamento objeto-relacional, comumente referido abreviação orm, técnica conecta objetos aplicação tabelas tabela banco dados relacional sistema gerenciamento. usando orm, propriedades relações entre objetos aplicação podem facilmente armazenadas recuperadas banco dados necessidade escrever comandos diretamente menos código acesso banco maneira geral."},{"id":686,"title":"Básico do Active Record","heading":"1 O que é Active Record?","subheading":"1.3 Active Record como um Framework ORM","content":"active record fornece diversos mecanismos, sendo mais importante habilidade quando escrevemos aplicações usando outras linguagens programação frameworks, pode necessário escrever muito código configuração. isto particularmente verdadeiro frameworks geral. entretanto, você seguir convenções adotadas pelo rails, será necessário escrever pouco código configuração alguns casos, nenhum) quando criar models active record. idéia trás disso você configura aplicação mesma forma maior parte vezes, deveria forma padrão. então, configuração explícita faz-se necessária somente casos você pode seguir convenção padrão."},{"id":687,"title":"Básico do Active Record","heading":"2 Convenção sobre configuração no Active Record","subheading":"2.1 Convenções para nomeação","content":"padrão, active record algumas definições nomeação descobrir como mapeamento entre models tabelas banco dados será criado. rails pluralizar nome classe encontrar respectiva tabela banco dados. sendo assim, classe book (livro), você deverá tabela banco dados chamada books (livros). mecanismos pluralização rails muito poderosos, sendo capazes pluralizar singularizar) palavras regulares irregulares. quando usamos nomes classes compostas duas mais palavras, nome model deve seguir convenção ruby, utilizando camelcase, enquanto tabela deve separar palavras utilizando caracter sublinhado. exemplos:"},{"id":688,"title":"Básico do Active Record","heading":"2 Convenção sobre configuração no Active Record","subheading":"2.2 Convenções de schema (esquema)","content":"active record utiliza convenções nomeação colunas tabelas banco dados, dependendo propósito. existem outros nomes colunas opcionais adicionar alguns comportamentos adicionais instâncias active record. muito fácil criar models active record. tudo você precisa fazer subclassificar classe applicationrecord estará tudo pronto: isso criará model product, mapeado tabela products base dados. fazendo isso, você também possuirá habilidade mapear colunas cada linha tabela atributos instâncias model. suponha tabela products criada usando declaração suas extensões) como: esquema acima declara tabela duas colunas: name. cada linhas dessa tabela representa certo produto dois parâmetros. portanto, você será capaz escrever códigos como seguinte: você precisar seguir convenções diferentes usar aplicação rails banco dados legado? problemas, você pode facilmente sobrepor convenções padrão. applicationrecord herda activerecord::base, define vários métodos úteis. você pode usar método activerecord::base.table_name= especificar nome tabela deve usada: assim fizer, você definir manualmente nome classe hospeda fixtures (my_products.yml) usando método set_fixture_class definição teste: possível sobrepor coluna deve usada como chave primária tabela usando método activerecord::base.primary_key= method: crud acrônimo quatro verbos utilizamos operação dados: **create (criar), **read (ler, consultar), **update (atualizar) **delete (deletar, destruir). active record criará, automaticamente, métodos permitem aplicação manipular dados armazenados suas tabelas."},{"id":689,"title":"Básico do Active Record","heading":"5 CRUD: Lendo e Escrevendo Dados","subheading":"5.1 Create","content":"objetos active record podem criados partir hash, bloco seus atributos definidos manualmente após criação. método retornará novo objeto, enquanto create retornará objeto salvará banco dados. exemplo, dado model user atributos name occupation, chamando método create criará salvará novo registro banco dados: usando método new, objeto pode instanciado salvo: chamada user.save salvará registro banco dados. finalmente, bloco fornecido, ambos create passarão novo objeto aquele bloco executar inicialização:"},{"id":690,"title":"Básico do Active Record","heading":"5 CRUD: Lendo e Escrevendo Dados","subheading":"5.2 Read","content":"active record fornece rica acessar dados banco dados. abaixo temos alguns exemplos diferentes métodos acessar dados fornecidos pelo active record. você pode aprender mais sobre como consultar model active record guia active record query interface."},{"id":691,"title":"Básico do Active Record","heading":"5 CRUD: Lendo e Escrevendo Dados","subheading":"5.3 Update","content":"objeto active record recuperado, seus atributos podem modificados salvos banco dados. atalho isso seria usar hash mapeando nome atributos valor desejado, como seguir: isto mais útil quando atualizamos diversos atributos vez. outro lado, você gostaria atualizar diversos registros massa, você pode achar método classe update_all útil:"},{"id":692,"title":"Básico do Active Record","heading":"5 CRUD: Lendo e Escrevendo Dados","subheading":"5.4 Delete","content":"mesma forma, recuperado objeto active record, mesmo pode destruído, remove banco dados. você deseja excluir diversos registros massa, você pode utilizar métodos destroy_by destroy_all: active record permite você valide estado model antes seja gravado banco dados. existem diversos métodos você pode usar verificar seus models validar valor atributo vazio, único existe banco dados, segue formato específico, muito mais. validação questão muito importante considerar quando está persistindo banco dados, então métodos save update levam isso conta quando executados: eles retornam false quando validação falha eles fato performam nenhuma operação banco dados. eles versão bang (exclamação) (que save! update!), mais rigorosos retornam exceção activerecord::recordinvalid validação falha. rápido exemplo ilustrar: você pode aprender mais sobre validações guia validaçes active record inglês). callbacks active record permitem você vincule códigos alguns eventos ciclo vida seus modelos. isso permite você adicione comportamentos seus modelos executando códigos forma transparente quando estes eventos acontecem, como quando você cria novo registro, atualiza, destrói, outros. você pode aprender mais sobre callbacks guia callbacks active record. rails fornece linguagem domínio específico (dsl) gerenciar schema banco dados, chamada migrations. migrations armazenadas arquivos executados diante qualquer banco dados active record suporta utilizando rake. aqui está migration cria tabela: rails mantém controle quais arquivos foram enviados banco dados fornece ferramentas reversão. realmente criar tabela, você deverá executar rails db:migrate reverter, rails db:rollback observe código acima agnóstico relação banco dados: rodar mysql, postgresql, oracle, entre outros. você pode aprender mais sobre migrations guia migrations active record. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":693,"title":"Rails Application Templates","heading":"1 Usage","subheading":"1 Usage","content":"apply template, need provide rails generator with location template wish apply using option. this either path file url. app:template rails command apply templates existing rails application. location template needs passed location environment variable. again, this either path file url. rails templates easy understand. here's example typical rails template: following sections outline primary methods provided api:"},{"id":694,"title":"Rails Application Templates","heading":"2 Template API","subheading":"2.1 gem(*args)","content":"adds entry supplied generated application's gemfile. example, your application depends gems nokogiri: please note that this will install gems will have bundle install that."},{"id":695,"title":"Rails Application Templates","heading":"2 Template API","subheading":"2.2 gem_group(*names, &block)","content":"wraps entries inside group. example, want load rspec-rails only development test groups:"},{"id":696,"title":"Rails Application Templates","heading":"2 Template API","subheading":"2.3 add_source(source, options={}, &block)","content":"adds given source generated application's gemfile. example, need source from \"http://gems.github.com\": block given, entries block wrapped into source group."},{"id":697,"title":"Rails Application Templates","heading":"2 Template API","subheading":"2.4 environment/application(data=nil, options={}, &block)","content":"adds line inside application class config/application.rb. options[:env] specified, line appended corresponding file config/environments. block used place data argument."},{"id":698,"title":"Rails Application Templates","heading":"2 Template API","subheading":"2.5 vendor/lib/file/initializer(filename, data = nil, &block)","content":"adds initializer generated application's config/initializers directory. let's like using object#not_nil? object#not_blank?: similarly, lib() creates file lib/ directory vendor() creates file vendor/ directory. there even file(), which accepts relative path from rails.root creates directories/files needed: that'll create app/components directory foo.rb there."},{"id":699,"title":"Rails Application Templates","heading":"2 Template API","subheading":"2.6 rakefile(filename, data = nil, &block)","content":"creates rake file under lib/tasks with supplied tasks: above creates lib/tasks/bootstrap.rake with boot:strap rake task."},{"id":700,"title":"Rails Application Templates","heading":"2 Template API","subheading":"2.7 generate(what, *args)","content":"runs supplied rails generator with given arguments."},{"id":701,"title":"Rails Application Templates","heading":"2 Template API","subheading":"2.8 run(command)","content":"executes arbitrary command. just like backticks. let's want remove readme.rdoc file:"},{"id":702,"title":"Rails Application Templates","heading":"2 Template API","subheading":"2.9 rails_command(command, options = {})","content":"runs supplied command rails application. let's want migrate database: also commands with different rails environment: also commands super-user: also commands that should abort application generation they fail:"},{"id":703,"title":"Rails Application Templates","heading":"2 Template API","subheading":"2.10 route(routing_code)","content":"adds routing entry config/routes.rb file. steps above, generated person scaffold also removed readme.rdoc. now, make peoplecontroller#index default page application:"},{"id":704,"title":"Rails Application Templates","heading":"2 Template API","subheading":"2.11 inside(dir)","content":"enables command from given directory. example, have copy edge rails that wish symlink from your apps, this:"},{"id":705,"title":"Rails Application Templates","heading":"2 Template API","subheading":"2.12 ask(question)","content":"ask() gives chance some feedback from user your templates. let's want your user name shiny library you're adding:"},{"id":706,"title":"Rails Application Templates","heading":"2 Template API","subheading":"2.13 yes?(question) or no?(question)","content":"these methods questions from templates decide flow based user's answer. let's want freeze rails only user wants"},{"id":707,"title":"Rails Application Templates","heading":"2 Template API","subheading":"2.14 git(:command)","content":"rails templates command:"},{"id":708,"title":"Rails Application Templates","heading":"2 Template API","subheading":"2.15 after_bundle(&block)","content":"registers callback executed after gems bundled binstubs generated. useful generated files version control: callbacks gets executed even --skip-bundle and/or --skip-spring been passed. application template evaluated context rails::generators::appgenerator instance. uses apply action provided thor. this means extend change instance match your needs. example overwriting source_paths method contain location your template. methods like copy_file will accept relative paths your template's location. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":709,"title":"Rotas do Rails de Fora pra Dentro","heading":"1 O Propósito do Roteador do Rails","subheading":"1 O Propósito do Roteador do Rails","content":"roteador rails organiza urls direcionam ação controller aplicativo rack. também pode gerar caminhos urls, evitando necessidade codificar sequências caracteres suas visualizações."},{"id":710,"title":"Rotas do Rails de Fora pra Dentro","heading":"1 O Propósito do Roteador do Rails","subheading":"1.1 Conectando URLs ao código","content":"quando aplicação rails recebe requisição para: solicita roteador corresponda ação controller. primeira rota correspondente for: requisição direcionada controller patients ação show '17' params."},{"id":711,"title":"Rotas do Rails de Fora pra Dentro","heading":"1 O Propósito do Roteador do Rails","subheading":"1.2 Gerando Caminhos e URLs a partir do código","content":"você também pode gerar caminhos urls. rota acima modificada ser: aplicação contém esse código controller: isso view correspondente: então roteador gerar caminho /patients/17. isso reduz fragilidade view código mais simples entender. observe precisa especificado helper rota."},{"id":712,"title":"Rotas do Rails de Fora pra Dentro","heading":"1 O Propósito do Roteador do Rails","subheading":"1.3 Configurando o Roteador do Rails","content":"rotas aplicação engine estão dentro arquivo config/routes.rb tipicamente parecem isso: como isso arquivo padrão ruby você pode utilizar todos seus recursos ajudar definir suas rotas, porém tenha cautela nomes variáveis pode conflitar métodos roteador. roteamento resources permite você rapidamente declare todas rotas comuns controller. contrapartida declarar cada rotas actions index, show, new, edit, create, update destroy, rota resources declara todas elas única linha código."},{"id":713,"title":"Rotas do Rails de Fora pra Dentro","heading":"2 Roteando Resources (Recursos): O padrão do Rails","subheading":"2.1 Resources na Web","content":"navegadores solicitam páginas rails através usando método http específico, como get,post, patch,put delete. cada método solicitação executar operação resource. rota resource mapeia série solicitações relacionadas actions único controller. quando aplicação rails recebe requisição para: pede roteador enviar esta requisição action respectivo controller. primeira rota encontrada for: rails enviará esta requisição action destroy controller photos params"},{"id":714,"title":"Rotas do Rails de Fora pra Dentro","heading":"2 Roteando Resources (Recursos): O padrão do Rails","subheading":"2.2 CRUD, Verbos, e Actions","content":"rails, rota resources fornece mapeamento entre verbos http urls actions controller. convenção, cada ação também mapeada operação específica crud banco dados. única entrada arquivo roteamento, como: cria sete rotas diferentes rotas aplicação, todas mapeando controller photos:"},{"id":715,"title":"Rotas do Rails de Fora pra Dentro","heading":"2 Roteando Resources (Recursos): O padrão do Rails","subheading":"2.3 Helpers Path e URL","content":"criando rota resource expor número helpers controllers aplicação. caso resources :photos: cada desses helpers helper _url (assim como photos_url) retorna mesmo path prefixado host atual, porta prefixo path."},{"id":716,"title":"Rotas do Rails de Fora pra Dentro","heading":"2 Roteando Resources (Recursos): O padrão do Rails","subheading":"2.4 Definindo Múltiplos Resources ao Mesmo tempo","content":"você precisa criar rotas mais resource, você pode salvar pouco digitação definindo todos eles única chamada resources: isto funciona exatamente igual"},{"id":717,"title":"Rotas do Rails de Fora pra Dentro","heading":"2 Roteando Resources (Recursos): O padrão do Rails","subheading":"2.5 Resources no Singular","content":"algumas vezes você resource clientes sempre veem referenciar exemplo, você gostaria /profile sempre mostre perfil usuário esta autenticado. neste caso, você pode usar resource singular mapear /profile /profile/:id) action show: passando string esperar formato controller#action. quando usamos symbol, opção deveria trocada action:. quando usamos string opção deveria trocada controller:: esta rota resourceful: cria seis rotas diferentes aplicação, todas mapeando controller geocoders: rota resourceful singular gera estes helpers: assim como resources plural, mesmos helpers terminam _url tambem incluir host, porta, prefixo path."},{"id":718,"title":"Rotas do Rails de Fora pra Dentro","heading":"2 Roteando Resources (Recursos): O padrão do Rails","subheading":"2.6 Controller Namespaces e Routing","content":"você pode querer organizar grupos controllers namespace. mais comumente, você pode querer agrupar controllers administrativos namespace admin::. você deverá esses controllers diretório app/controllers/admin, você pode agrupá-los router: isto criará número rotas cada controller articles comments. admin::articlescontroller, rails criar: você quiser rotear /articles (sem prefixo /admin) admin::articlescontroller, você poderia usar: único caso: você quiser rotear /admin/articles articlescontroller (sem prefixo modulo admin::), você poderia usar: único caso: cada desses casos, rota nomeada continua mesma, como você tivesse usado scope. último exemplo, paths seguintes mapeiam articlescontroller:"},{"id":719,"title":"Rotas do Rails de Fora pra Dentro","heading":"2 Roteando Resources (Recursos): O padrão do Rails","subheading":"2.7 Nested Resources (Recursos Aninhados)","content":"comum encontrarmos resources \"filhos\" outros. exemplo, supondo aplicação esses models: nested routes (rotas aninhadas) permitem você capture este relacionamento roteamento. neste caso, você poderia incluir esta declaração rota: adição rotas magazines, esta declaração também adicionará rotas adscontriller. urls precisar magazine: isto também criar routing helpers como magazine_ads_url edit_magazine_ad_path. esses helpers pegam instância magazine como primeiro parâmetro (magazine_ads_url(@magazine)). você pode aninhar resources entre outros resources aninhados você desejar. exemplo: resources profundamente aninhados ficam confusos. neste caso, exemplo, aplicação iria reconhecer paths como: helper correspondente essa rota seria publisher_magazine_photo_url, sendo necessário especificar objetos todos três níveis. fato, esta situação confusa bastante artigo escrito jamis buck propõe regra ouro design rails: maneira evitar aninhamento profundo (como recomendado acima) gerar coleção actions scoped abaixo pai, assim sensação hierarquia, aninhar actions membro. outras palavras. apenas construir routes mínimo informação identificar unicamente recurso, como isto: essa ideia encontra equilíbrio entre rotas descritivas aninhamento profundo. existe sintaxe abreviada conseguir exatamente isso, opção :shallow: isso gerar mesmas rotas primeiro exemplo, você pode também especificar opção :shallow resource pai, cada caso todos resources aninhados serão rasos: método shallow cria scope todos aninhamentos rasos. isso gera mesmas rotas exemplo anterior: existem duas opções scope customizar shallow routes. :shallow_path prefixa seus paths membros parâmetro especificado: resource comments aqui terá gerado seguintes rotas opção :shallow_prefix adiciona parâmetro especificado helpers rota nomeada: resource comments aqui terá gerado seguintes rotas"},{"id":720,"title":"Rotas do Rails de Fora pra Dentro","heading":"2 Roteando Resources (Recursos): O padrão do Rails","subheading":"2.8 Roteamento com método concerns","content":"roteamento método concerns permitem você declarar rotas comuns podem reutilizadas dentro outros resources rotas. definir concern: estes concerns podem usados resources evitar duplicação códigos compartilhar mesmo comportamento entre rotas: exemplo acima equivalente além disso você pode usá-los qualquer lugar você quiser dentro rotas, exemplo, chamada scope namespace:"},{"id":721,"title":"Rotas do Rails de Fora pra Dentro","heading":"2 Roteando Resources (Recursos): O padrão do Rails","subheading":"2.9 Criando Paths e URLs de Objetos","content":"além usarmos helpers roteamento, rails pode também criar paths urls array parâmetros. exemplo, imagine você este grupo rotas: enquanto estiver usando magazine_ad_path, você pode passar instâncias magazine contrapartida numéricos: você pode também usar url_for grupo objetos, rails automaticamente determinar qual rota você quer: neste caso, rails verá @magazine magazine portanto usar helper magazine_ad_path. helpers como link_to, você pode especificar apenas objeto lugar chamada url_for inteira: você queria apenas link magazine: outras actions, você apenas precisa inserir nome desta action como primeiro elemento deste array: isto permite você tratar instâncias seus models como urls, vantagem chave usar estilo resourceful."},{"id":722,"title":"Rotas do Rails de Fora pra Dentro","heading":"2 Roteando Resources (Recursos): O padrão do Rails","subheading":"2.10 Adicionando mais RESTful Actions","content":"você esta limitado sete rotas restful routing cria padrão. você quiser, pode criar rotas adicionais aplicam coleção membros individuais coleção. adicionar rota membro, apenas adicione bloco member bloco resource: isso reconhecer /photos/1/preview get, rotear action preview photoscontroller, valor resource passado params[:id]. isso tambem criar helpers preview_photo_url preview_photo_path. dentro bloco rotas membros, cada nome rota especifica verbo http reconhecido. você pode usar get, patch, put, post delete aqui. você tiver múltiplas rotas membros, você pode também passar rota, eliminando bloco: você pode deixar fora opção :on, isso criar mesmo member route exceto valor resource estará disponível params[:photo_id] invés params[:id]. helpers rota tambem serão renomeados preview_photo_url photo_preview_url photo_preview_path. adicionar rota coleção: isto permitir rails reconheça paths como /photos/search get, rota action search photoscontroller. isto também criará helpers search_photos_url search_photos_path. assim como member routes, você pode passar rota: adicionar action alternativa nova usando atalho :on: isto permitir rails reconheça paths como /comments/new/preview get, rotear action preview commentescontroller. isto também criar helpers preview_new_comment_url preview_new_comment_path. além roteamento resources, rails possui suporte poderoso rotear urls arbitrárias actions. aqui, você obtém grupos rotas gerados automaticamente pelo roteamento resources. disso, você configura cada rota separadamente aplicação. embora você geralmente deva usar roteamento resources, ainda existem muitos lugares roteamento mais simples mais apropriado. necessário tentar encaixar todas partes aplicativo estrutura resources isso ajuste. particular, roteamento simples facilita mapeamento urls herdados novas actions rails."},{"id":723,"title":"Rotas do Rails de Fora pra Dentro","heading":"3 Rotas sem uso de Resources","subheading":"3.1 Parâmetros Vinculados","content":"configurar rota regular, você fornece série symbols rails mapeia partes requisição http chegando aplicação. exemplo, considere esta rota: requisição /photos/1 processada esta rota (porque corresponde nenhuma rota anterior arquivo), resultado será invocar action display photoscontroller, tornar parâmetro final disponível como params[:id]. esta rota também encaminhará requisição recebida /photos photoscontroller#display, pois parâmetro opcional, indicado parênteses."},{"id":724,"title":"Rotas do Rails de Fora pra Dentro","heading":"3 Rotas sem uso de Resources","subheading":"3.2 Segmentos Dinâmicos","content":"você pode configurar quantos segmentos dinâmicos rota regular desejar. qualquer segmento estará disponível action como parte params. você configurar esta rota: requisição endereço /photos/1/2 será enviada action show photoscontroller. params[:id] será params[:user_id] será \"2\"."},{"id":725,"title":"Rotas do Rails de Fora pra Dentro","heading":"3 Rotas sem uso de Resources","subheading":"3.3 Segmentos Estáticos","content":"você pode especificar segmentos estáticos criar rota somente acrescentando dois pontos fragmento: esta rota responderia caminhos como /photos/1/with_user/2. nesse caso, params seria controller: 'photos', action: 'show', '1', user_id:"},{"id":726,"title":"Rotas do Rails de Fora pra Dentro","heading":"3 Rotas sem uso de Resources","subheading":"3.4 Usando Query String","content":"params também incluirão quaisquer parâmetros query string. exemplo, esta rota: requisição caminho /photos/1?user_id=2 será enviada action show controller photos. params será controller: 'photos', action: 'show', '1', user_id:"},{"id":727,"title":"Rotas do Rails de Fora pra Dentro","heading":"3 Rotas sem uso de Resources","subheading":"3.5 Definindo Padrões","content":"você pode definir padrões rota fornecendo hash opção :defaults. isso também aplica parâmetros você especifica como segmentos dinâmicos. exemplo: rails corresponderia photos/12 action show photoscontroller definiria params[:format] como \"jpg\". você também pode usar defaults formato bloco definir padrões múltiplos itens:"},{"id":728,"title":"Rotas do Rails de Fora pra Dentro","heading":"3 Rotas sem uso de Resources","subheading":"3.6 Nomeando Rotas","content":"você pode especificar nome qualquer rota usando opção :as: isso criará logout_path logout_url como helpers rota aplicação. chamar logout_path retornará /exit. você também pode usar isso substituir métodos roteamento definidos pelos resources, como este: isso definirá método user_path estará disponível controllers, helpers views irão rota como /bob. dentro action show userscontroller, params[:username] conterá nome usuário. altere :username definição rota você quiser nome parâmetro seja :username."},{"id":729,"title":"Rotas do Rails de Fora pra Dentro","heading":"3 Rotas sem uso de Resources","subheading":"3.7 Restringindo Verbos HTTP","content":"geral, você deve usar métodos get, post, put, patch delete restringir rota verbo específico. você pode usar método match opção :via combinar vários verbos mesmo tempo: você pode combinar todos verbos rota específica usando via: :all:"},{"id":730,"title":"Rotas do Rails de Fora pra Dentro","heading":"3 Rotas sem uso de Resources","subheading":"3.8 Restrições de Segmento","content":"você pode usar opção :constraints impor formato segmento dinâmico: essa rota corresponderia caminhos como /photos/a12345, /photos/893. você pode expressar forma mais sucinta mesma rota desta maneira: constraints usam expressões regulares restrição âncoras regexp podem usadas. exemplo, seguinte rota funcionará: entanto, note você precisa usar âncoras porque todas rotas estão ancoradas início. exemplo, rotas seguir permitiriam articles valores to_param como 1-hello-world sempre começam número users valores to_param como david nunca começam número compartilhem mesmo namespace raiz:"},{"id":731,"title":"Rotas do Rails de Fora pra Dentro","heading":"3 Rotas sem uso de Resources","subheading":"3.9 Restrições Baseadas em Requisições","content":"você também pode restringir rota base qualquer método objeto request retorna string. você especifica restrição baseada requisições mesma maneira especifica restrição segmento: você também pode especificar restrições usando blocos:"},{"id":732,"title":"Rotas do Rails de Fora pra Dentro","heading":"3 Rotas sem uso de Resources","subheading":"3.10 Restrições Avançadas","content":"você tiver restrição mais avançada, poderá fornecer objeto responda matches? rails deve usar. digamos você queira rotear todos usuários lista restrita restrictedlistcontroller. você poderia fazer: você também pode especificar restrições como lambda: tanto método matches? quanto lambda usam objeto request como argumento."},{"id":733,"title":"Rotas do Rails de Fora pra Dentro","heading":"3 Rotas sem uso de Resources","subheading":"3.11 Rotas Englobadas (Glob) e Segmentos Curinga","content":"englobamento rota maneira especificar parâmetro particular deve corresponder todas partes restantes rota. exemplo: esta rota corresponder photos/12 /photos/long/path/to/12, definindo params[:other] como \"12\" \"long/path/to/12\". fragmentos prefixados asterisco chamados \"segmentos curinga\". segmentos curinga podem ocorrer qualquer lugar rota. exemplo: corresponderia books/some/section/last-words-a-memoir params[:section] igual 'some/section' params[:title] igual 'last-words-a-memoir'. tecnicamente, rota pode ainda mais segmento curinga. matcher rotas atribui segmentos parâmetros maneira intuitiva. exemplo: corresponderia zoo/woo/foo/bar/baz params[:a] igual 'zoo/woo', params[:b] igual 'bar/baz'."},{"id":734,"title":"Rotas do Rails de Fora pra Dentro","heading":"3 Rotas sem uso de Resources","subheading":"3.12 Redirecionamento","content":"você pode redirecionar qualquer rota outra usando auxiliar redirect roteador: você também pode reutilizar segmentos dinâmicos corresponder rotas redirecionar para: você também pode fornecer bloco redirecionar, recebe parâmetros caminho simbolizado objeto request: observe redirecionamento padrão redirecionamento \"moved permanently\". lembre-se alguns navegadores servidores proxy armazenam cache esse tipo redirecionamento, tornando página antiga inacessível. você pode usar opção :status alterar status resposta: todos esses casos, você fornecer host principal (http://www.example.com), rails obterá esses detalhes requisição atual."},{"id":735,"title":"Rotas do Rails de Fora pra Dentro","heading":"3 Rotas sem uso de Resources","subheading":"3.13 Roteamento para Aplicações Rack","content":"string como 'articles#index', corresponde action index articlescontroller, você pode especificar qualquer aplicação rack como endpoint: desde myrackapp responda método call retorne [status, headers, body], roteador saberá diferença entre aplicação rack action. este apropriado via: :all, pois você deseja permitir aplicação rack manipule todos verbos conforme considerar apropriado. você especificar aplicação rack como endpoint, lembre-se rota será alterada aplicação recebimento. seguinte rota aplicação rack deve esperar rota seja /admin: você preferir aplicação rack receba requisições root path disso, mount:"},{"id":736,"title":"Rotas do Rails de Fora pra Dentro","heading":"3 Rotas sem uso de Resources","subheading":"3.14 Usando root","content":"você pode especificar onde rails deve rotear método root: você deve colocar rota root topo arquivo, porque rota mais popular deve correspondida primeiro. você também pode usar root dentro namespaces scopes. exemplo:"},{"id":737,"title":"Rotas do Rails de Fora pra Dentro","heading":"3 Rotas sem uso de Resources","subheading":"3.15 Rotas com Caracteres Unicode","content":"você pode especificar rotas caracteres unicode diretamente. exemplo:"},{"id":738,"title":"Rotas do Rails de Fora pra Dentro","heading":"3 Rotas sem uso de Resources","subheading":"3.16 Rotas diretas","content":"você pode criar helpers personalizados diretamente. exemplo: valor retorno bloco deve argumento válido método url_for. portanto, você pode transmitir como string válida, hash, array, instância active model classe active model."},{"id":739,"title":"Rotas do Rails de Fora pra Dentro","heading":"3 Rotas sem uso de Resources","subheading":"3.17 Usando resolve","content":"método resolve permite personalizar mapeamento polimórfico models. exemplo: isso gerar singular /basket ​​em habitual /baskets/:id. enquanto rotas padrão helpers gerados resources :articles normalmente atendem maior parte casos uso, você pode querer customizá-los alguma forma. rails permite customizar virtualmente qualquer parte genérica helpers recursos."},{"id":740,"title":"Rotas do Rails de Fora pra Dentro","heading":"4 Customizando Rotas com Recursos","subheading":"4.1 Especificando um Controller para Usar","content":"opção :controller permite você especifique controller forma explícita usar recurso. exemplo: reconhecer caminhos requisitados iniciando /photos rotear controller images: você pode usar notação diretório controllers namespaces associados. exemplo: isso direcionar chamada rota controller admin::userpermissions."},{"id":741,"title":"Rotas do Rails de Fora pra Dentro","heading":"4 Customizando Rotas com Recursos","subheading":"4.2 Especificando Restrições","content":"você pode usar opção :constraints especificar formato exigido implícito. exemplo: essa declaração restringe parâmetro forma seja igual especificação expressão regular. então, nesse caso, roteador iria mais aceitar /photos/1 essa rota. outro lado, requisição /photos/rr27 seria aceita. você pode especificar única restrição aplicar mais rota usando forma bloco:"},{"id":742,"title":"Rotas do Rails de Fora pra Dentro","heading":"4 Customizando Rotas com Recursos","subheading":"4.3 Sobrescrevendo Helpers de Nome de Rota","content":"opção permite você sobrescreva convenção nomes helpers nome rota. exemplo: reconhecer chamadas chegarem iniciando /photos direcionar requisições photoscontroller, usar valor especificado opção nomear helpers."},{"id":743,"title":"Rotas do Rails de Fora pra Dentro","heading":"4 Customizando Rotas com Recursos","subheading":"4.4 Sobrescrevendo os Segmentos new e edit","content":"opção :path_names permite você sobrescreva segmentos edit gerados automaticamente caminhos: isso roteamento reconhecer caminhos como:"},{"id":744,"title":"Rotas do Rails de Fora pra Dentro","heading":"4 Customizando Rotas com Recursos","subheading":"4.5 Prefixando os Helpers de Nome de Rota","content":"você pode usar opção prefixar helpers nome rota rails gera. esta opção evitar colisões nomes entre rotas usando escopo caminho. exemplo: isto fornecerá helpers rota como admin_photos_path, new_admin_photo_path, etc. prefixar grupo helpers rota, utilize scope: isto gerar rotas como admin_photos_path admin_accounts_path mapeadas /admin/photos /admin/accounts respectivamente. você pode prefixar rotas named parameter também: isto deixar urls como /bob/articles/-1 também permitirá referir parte username caminho como params[:username] controllers, helpers, views."},{"id":745,"title":"Rotas do Rails de Fora pra Dentro","heading":"4 Customizando Rotas com Recursos","subheading":"4.6 Restringindo as Rotas Criadas","content":"rails cria rotas sete ações diferentes (index, show, new, create, edit, update, destroy) padrão cada rota restful aplicação. opção :only rails criar apenas rotas especificadas: agora, requisição /photos daria certo, requisição post /photos (que padrão iria ação create) falhará. opção :except específica rota lista rotas rails deve criar: nesse caso, rails criar todas rotas normais exceto rota destroy (uma requisição delete /photos/:id)."},{"id":746,"title":"Rotas do Rails de Fora pra Dentro","heading":"4 Customizando Rotas com Recursos","subheading":"4.7 Traduzindo Caminhos","content":"podemos alterar nomes caminho gerados resources usando scope: rails agora cria rotas categoriescontroller."},{"id":747,"title":"Rotas do Rails de Fora pra Dentro","heading":"4 Customizando Rotas com Recursos","subheading":"4.8 Sobrescrevendo a Forma Singular","content":"você quer definir forma singular recurso, você deve colocar regras adicionais inflector:"},{"id":748,"title":"Rotas do Rails de Fora pra Dentro","heading":"4 Customizando Rotas com Recursos","subheading":"4.9 Usando :as em Recursos Aninhados","content":"opção sobrescreve nome gerado automaticamente recurso helpers rota aninhados. exemplo: isto criará helpers rota como magazine_periodical_ads_url edit_magazine_periodical_ad_path."},{"id":749,"title":"Rotas do Rails de Fora pra Dentro","heading":"4 Customizando Rotas com Recursos","subheading":"4.10 Sobrescrevendo Parâmetros de Nome de Rota","content":"opção :param sobrescreve identificador padrão recurso (nome segmento dinâmico usado gerar rotas). você pode acessar segmento controller usando params[<:param>]. você pode sobrescrever activerecord::base#to_param model relacionado construir url: rails oferece recursos inspecionar testar suas rotas."},{"id":750,"title":"Rotas do Rails de Fora pra Dentro","heading":"5 Inspecionando e Testando Rotas","subheading":"5.1 Listando Rotas Existentes","content":"obter lista completa rotas disponíveis aplicação, visite http://localhost:3000/rails/info/routes browser quando servidor estiver rodando ambiente desenvolvimento. você pode também executar comando rails routes terminal reproduzir mesmo resultado. ambos métodos irão listas todas suas rotas, mesma ordem aparece config/routes.rb. cada rota, você ver: exemplo, segue pequena parte resposta rails routes rota restful: você pode também utilizar opção --expanded ativar modo formatação tabela expandida. você pode procurar rotas utilizando opção grep: isso resulta qualquer rota corresponda parcialmente nome método url, verbo http, url. você quiser somente rotas mapeiam controller especifico, existe opção"},{"id":751,"title":"Rotas do Rails de Fora pra Dentro","heading":"5 Inspecionando e Testando Rotas","subheading":"5.2 Testando Rotas","content":"rotas deveriam incluidas estratégia testes (assim como resto aplicação). rails oferece três validações nativas desenvolvidas fazer testes rotas mais simples: assert_generates valida conjunto opções particular gera caminho equivalente pode usar rota padrão rota customizada. exemplo: assert_recognizes inverso assert_generates. valida dado caminho reconhecido roteia-o lugar determinado aplicação. exemplo: você pode passar argumento :method especificar verbo http: validação assert_routing testa rota dois jeitos: testa caminho gera opções, opções gera caminho. logo, combina validações assert_generates assert_recognizes: você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":752,"title":"Action View Overview","heading":"1 What is Action View?","subheading":"1 What is Action View?","content":"rails, requests handled action controller action view. typically, action controller concerned with communicating with database performing crud actions where necessary. action view then responsible compiling response. action view templates written using embedded ruby tags mingled with html. avoid cluttering templates with boilerplate code, number helper classes provide common behavior forms, dates, strings. it's also easy helpers your application evolves. each controller there associated directory app/views directory which holds template files that make views associated with that controller. these files used display view that results from each controller action. let's take look what rails does default when creating resource using scaffold generator: there naming convention views rails. typically, views share their name with associated controller action, above. example, index controller action articles_controller.rb will index.html.erb view file app/views/articles directory. complete html returned client composed combination this file, layout template that wraps partials that view reference. within this guide will find more detailed documentation about each these three components. mentioned, final html output composition three rails elements: templates, partials layouts. below brief overview each them."},{"id":753,"title":"Action View Overview","heading":"3 Templates, Partials, and Layouts","subheading":"3.1 Templates","content":"action view templates written several ways. template file .erb extension then uses mixture (embedded ruby) html. template file .builder extension then builder::xmlmarkup library used. rails supports multiple template systems uses file extension distinguish amongst them. example, html file using template system will have .html.erb file extension. within template, ruby code included using both tags. tags used execute ruby code that does return anything, such conditions, loops, blocks, tags used when want output. consider following loop names: loop using regular embedding tags name inserted using output embedding tags (<%= %>). note that this just usage suggestion: regular output functions such print puts won't rendered view with templates. this would wrong: suppress leading trailing whitespaces, interchangeably with builder templates more programmatic alternative erb. they especially useful generating content. xmlmarkup object named automatically made available templates with .builder extension. here some basic examples: which would produce: method with block will treated markup with nested markup block. example, following: would produce something like: below full-length example actually used basecamp: jbuilder that's maintained rails team included default rails gemfile. it's similar builder, used generate json, instead xml. don't have following your gemfile: jbuilder object named json automatically made available templates with .jbuilder extension. here basic example: would produce: jbuilder documentation more examples information. default, rails will compile each template method order render when alter template, rails will check file's modification time recompile development mode."},{"id":754,"title":"Action View Overview","heading":"3 Templates, Partials, and Layouts","subheading":"3.2 Partials","content":"partial templates usually just called \"partials\" another device breaking rendering process into more manageable chunks. with partials, extract pieces code from your templates separate files also reuse them throughout your templates. render partial part view, render method within view: this will render file named _menu.html.erb that point within view that being rendered. note leading underscore character: partials named with leading underscore distinguish them from regular views, even though they referred without underscore. this holds true even when you're pulling partial from another folder: that code will pull partial from app/views/shared/_menu.html.erb. partials treat them equivalent subroutines; move details view that grasp what's going more easily. example, might have view that looks like this: here, _ad_banner.html.erb _footer.html.erb partials could contain content that shared among many pages your application. don't need details these sections when you're concentrating particular page. above example, render takes options: partial locals. these only options want pass, skip using these options. example, instead also default actionview::partials::partialrenderer object local variable with same name template. given: within _product partial we'll @product local variable product, written: object option used directly specify which object rendered into partial; useful when template's object elsewhere (e.g. different instance variable local variable). example, instead would with option specify different name said local variable. example, wanted item instead product would this equivalent very common that template will need iterate over collection render sub-template each elements. this pattern been implemented single method that accepts array renders partial each elements array. this example rendering products: rewritten single line: when partial called with collection, individual instances partial have access member collection being rendered variable named after partial. this case, partial _product, within refer product collection member that being rendered. shorthand syntax rendering collections. assuming @products collection product instances, simply write following produce same result: rails determines name partial looking model name collection, product this case. fact, even render collection made instances different models using this shorthand, rails will choose proper partial each member collection. also specify second partial rendered between instances main partial using :spacer_template option: rails will render _product_ruler partial (with data passed between each pair _product partials."},{"id":755,"title":"Action View Overview","heading":"3 Templates, Partials, and Layouts","subheading":"3.3 Layouts","content":"layouts used render common view template around results rails controller actions. typically, rails application will have couple layouts that pages will rendered within. example, site might have layout logged user another marketing sales side site. logged user layout might include top-level navigation that should present across many controller actions. sales layout saas might include top-level navigation things like \"pricing\" \"contact pages. would expect each layout have different look feel. read about layouts more detail layouts rendering rails guide. partials have their layouts applied them. these layouts different from those applied controller action, they work similar fashion. let's we're displaying article page which should wrapped display purposes. firstly, we'll create article: show template, we'll render _article partial wrapped layout: articles/show.html.erb layout simply wraps _article partial div: articles/_box.html.erb note that partial layout access local article variable that passed into render call. however, unlike application-wide layouts, partial layouts still have underscore prefix. also render block code within partial layout instead calling yield. example, didn't have _article partial, could this instead: articles/show.html.erb supposing same _box partial from above, this would produce same output previous example. when rendering response, controller needs resolve where different views located. default only looks inside app/views directory. other locations give them certain precedence when resolving paths using prepend_view_path append_view_path methods."},{"id":756,"title":"Action View Overview","heading":"5 View Paths","subheading":"5.1 Prepend view path","content":"this helpful example, when want views inside different directory subdomains. this using: then action view will look first this directory when resolving views."},{"id":757,"title":"Action View Overview","heading":"5 View Paths","subheading":"5.2 Append view path","content":"similarly, append paths: this will app/views/direct lookup paths. wip: helpers listed here. full list documentation following only brief overview summary helpers available action view. it's recommended that review documentation, which covers helpers more detail, this should serve good starting point."},{"id":758,"title":"Action View Overview","heading":"6 Overview of helpers provided by Action View","subheading":"6.1 AssetTagHelper","content":"this module provides methods generating html that links views assets such images, javascript files, stylesheets, feeds. default, rails links these assets current host public folder, direct rails link assets from dedicated assets server setting config.action_controller.asset_host application configuration, typically config/environments/production.rb. example, let's your asset host assets.example.com: returns link that browsers feed readers auto-detect rss, atom, json feed. computes path image asset app/assets/images directory. full paths from document root will passed through. used internally image_tag build image path. fingerprint will added filename config.assets.digest true. computes image asset app/assets/images directory. this will call image_path internally merge with your current host your asset host. returns html image source. source full path file that exists your app/assets/images directory. returns html script each sources provided. pass filename (.js extension optional) javascript files that exist your app/assets/javascripts directory inclusion into current page pass full path relative your document root. computes path javascript asset app/assets/javascripts directory. source filename extension, will appended. full paths from document root will passed through. used internally javascript_include_tag build script path. computes javascript asset app/assets/javascripts directory. this will call javascript_path internally merge with your current host your asset host. returns stylesheet link sources specified arguments. don't specify extension, .css will appended automatically. computes path stylesheet asset app/assets/stylesheets directory. source filename extension, .css will appended. full paths from document root will passed through. used internally stylesheet_link_tag build stylesheet path. computes stylesheet asset app/assets/stylesheets directory. this will call stylesheet_path internally merge with your current host your asset host."},{"id":759,"title":"Action View Overview","heading":"6 Overview of helpers provided by Action View","subheading":"6.2 AtomFeedHelper","content":"this helper makes building atom feed easy. here's full usage example: config/routes.rb app/controllers/articles_controller.rb app/views/articles/index.atom.builder"},{"id":760,"title":"Action View Overview","heading":"6 Overview of helpers provided by Action View","subheading":"6.3 BenchmarkHelper","content":"allows measure execution time block template records result log. wrap this block around expensive operations possible bottlenecks time reading operation. this would something like \"process data files (0.34523)\" log, which then compare timings when optimizing your code."},{"id":761,"title":"Action View Overview","heading":"6 Overview of helpers provided by Action View","subheading":"6.4 CacheHelper","content":"method caching fragments view rather than entire action page. this technique useful caching pieces like menus, lists news topics, static html fragments, this method takes block that contains content wish cache. abstractcontroller::caching::fragments more information."},{"id":762,"title":"Action View Overview","heading":"6 Overview of helpers provided by Action View","subheading":"6.5 CaptureHelper","content":"capture method allows extract part template into variable. then this variable anywhere your templates layout. captured variable then used anywhere else. calling content_for stores block markup identifier later use. make subsequent calls stored content other templates layout passing identifier argument yield. example, let's have standard application layout, also special page that requires certain javascript that rest site doesn't need. content_for include this javascript special page without fattening rest site. app/views/layouts/application.html.erb app/views/articles/special.html.erb"},{"id":763,"title":"Action View Overview","heading":"6 Overview of helpers provided by Action View","subheading":"6.6 DateHelper","content":"returns select tags (one year, month, day) pre-selected accessing specified date-based attribute. returns select tags (one year, month, day, hour, minute) pre-selected accessing specified datetime-based attribute. reports approximate distance time between time date objects integers seconds. include_seconds true want more detailed approximations. returns html select-tags (one year, month, day) pre-selected with date provided. returns html select-tags (one year, month, day, hour, minute) pre-selected with datetime provided. returns select with options each days through with current selected. returns select with options each hours through with current hour selected. returns select with options each minutes through with current minute selected. returns select with options each months january through december with current month selected. returns select with options each seconds through with current second selected. returns html select-tags (one hour minute). returns select with options each five years each side current, which selected. five year radius changed using :start_year :end_year keys options. like distance_of_time_in_words, where to_time fixed time.now. returns select tags (one hour, minute, optionally second) pre-selected accessing specified time-based attribute. selects prepared multi-parameter assignment active record object."},{"id":764,"title":"Action View Overview","heading":"6 Overview of helpers provided by Action View","subheading":"6.7 DebugHelper","content":"returns that object dumped yaml. this creates very readable inspect object."},{"id":765,"title":"Action View Overview","heading":"6 Overview of helpers provided by Action View","subheading":"6.8 FormHelper","content":"form helpers designed make working with models much easier compared using just standard html elements providing methods creating forms based your models. this helper generates html forms, providing method each sort input (e.g., text, password, select, on). when form submitted (i.e., when user hits submit button form.submit called javascript), form inputs will bundled into params object passed back controller. there types form helpers: those that specifically work with model attributes those that don't. this helper deals with those that work with model attributes; example form helpers that don't work with model attributes, check actionview::helpers::formtaghelper documentation. core method this helper, form_for, gives ability create form model instance; example, let's that have model person want create instance html generated this would params object created when this form submitted would look like: params hash nested person value, which therefore accessed with params[:person] controller. returns checkbox tailored accessing specified attribute. creates scope around specific model object like form_for, doesn't create form tags themselves. this makes fields_for suitable specifying additional model objects same form: returns file upload input tailored accessing specified attribute. creates form scope around specific model object that used base questioning about values fields. returns hidden input tailored accessing specified attribute. returns label tailored labelling input field specified attribute. returns input \"password\" type tailored accessing specified attribute. returns radio button accessing specified attribute. returns textarea opening closing tailored accessing specified attribute. returns input \"text\" type tailored accessing specified attribute. returns input \"email\" type tailored accessing specified attribute. returns input \"url\" type tailored accessing specified attribute."},{"id":766,"title":"Action View Overview","heading":"6 Overview of helpers provided by Action View","subheading":"6.9 FormOptionsHelper","content":"provides number methods turning different kinds containers into option tags. returns select option tags collection existing return values method object's class. example object structure with this method: sample usage (selecting associated author instance article, @article): @article.author_id this would return: returns radio_button tags collection existing return values method object's class. example object structure with this method: sample usage (selecting associated author instance article, @article): @article.author_id this would return: returns check_box tags collection existing return values method object's class. example object structure with this method: sample usage (selecting associated authors instance article, @article): @article.author_ids [1], this would return: returns string option tags, like options_from_collection_for_select, groups them optgroup tags based object relationships arguments. example object structure with this method: sample usage: possible output: accepts container (hash, array, enumerable, your type) returns string option tags. returns string option tags that have been compiled iterating over collection assigning result call value_method option value text_method option text. example, imagine loop iterating over each person @project.people generate input tag: create select series contained option tags provided object method. example: @article.person_id this would become: returns string option tags pretty much time zone world. returns select option tags given object method, using time_zone_options_for_select generate list option tags. returns input \"date\" type tailored accessing specified attribute."},{"id":767,"title":"Action View Overview","heading":"6 Overview of helpers provided by Action View","subheading":"6.10 FormTagHelper","content":"provides number methods creating form tags that don't rely active record object assigned template like formhelper does. instead, provide names values manually. creates check form input tag. creates field grouping html form elements. creates file upload field. example output: starts form that points action configured with url_for_options just like actioncontroller::base#url_for. creates hidden form input field used transmit data that would lost http's statelessness data that should hidden from user. displays image which when clicked will submit form. creates label field. creates password field, masked text field that will hide users input behind mask character. creates radio button; groups radio buttons named same allow users select from group options. creates dropdown selection box. creates submit button with text provided caption. creates text input area; textarea longer text inputs such blog posts descriptions. creates standard text field; these text fields input smaller chunks text like username search query. creates standard input field email type. creates standard input field type. creates standard input field date type."},{"id":768,"title":"Action View Overview","heading":"6 Overview of helpers provided by Action View","subheading":"6.11 JavaScriptHelper","content":"provides functionality working with javascript your views. escape carrier returns single double quotes javascript segments. returns javascript wrapping provided code."},{"id":769,"title":"Action View Overview","heading":"6 Overview of helpers provided by Action View","subheading":"6.12 NumberHelper","content":"provides methods converting numbers into formatted strings. methods provided phone numbers, currency, percentage, precision, positional notation, file size. formats number into currency string (e.g., $13.65). formats bytes size into more understandable representation; useful reporting file sizes users. formats number percentage string. formats number into phone number default). formats number with grouped thousands using delimiter. formats number with specified level precision, which defaults"},{"id":770,"title":"Action View Overview","heading":"6 Overview of helpers provided by Action View","subheading":"6.13 SanitizeHelper","content":"sanitizehelper module provides methods scrubbing text undesired html elements. this sanitize helper will html encode tags strip attributes that aren't specifically allowed. either :attributes :tags options passed, only mentioned attributes tags allowed nothing else. change defaults multiple uses, example adding table tags default: sanitizes block code. strips link tags from text leaving just link text. strips html tags from html, including comments. this functionality powered rails-html-sanitizer gem. output still contain unescaped '<', '>', characters confuse browsers."},{"id":771,"title":"Action View Overview","heading":"6 Overview of helpers provided by Action View","subheading":"6.14 CsrfHelper","content":"returns meta tags \"csrf-param\" \"csrf-token\" with name cross-site request forgery protection parameter token, respectively. action view ability render different templates depending current locale. example, suppose have articlescontroller with show action. default, calling this action will render app/views/articles/show.html.erb. i18n.locale :de, then app/views/articles/show.de.html.erb will rendered instead. localized template isn't present, undecorated version will used. this means you're required provide localized views cases, they will preferred used available. same technique localize rescue files your public directory. example, setting i18n.locale creating public/500.de.html public/404.de.html would allow have localized rescue pages. since rails doesn't restrict symbols that i18n.locale, leverage this system display different content depending anything like. example, suppose have some \"expert\" users that should different pages from \"normal\" users. could following app/controllers/application.rb: then could create special views like app/views/articles/show.expert.html.erb that would only displayed expert users. read more about rails internationalization (i18n) here. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":772,"title":"Active Storage Overview","heading":"1 O que é Active Storage?","subheading":"1 O que é Active Storage?","content":"active storage facilita upload arquivos serviço armazenamento como amazon google cloud storage, microsoft azure storage anexa esses arquivos objetos active record. serviço local baseado disco desenvolvimento teste oferece suporte espelhamento arquivos serviços destinados backups migrations. usando active storage, aplicação pode transformar uploads imagens imagemagick, gerar representações imagens uploads imagens como pdfs vídeos, extrai metadados arquivos arbitrários. active storage duas tabelas banco dados aplicação chamadas active_storage_blobs active_storage_attachments. depois criar nova aplicação atualizar aplicação rails 5.2), execute rails active_storage:install gerar migration cria essas tabelas. rails db:migrate executar migration. declare serviços active storage config/storage.yml. cada serviço aplicação usa, forneça nome configuração necessária. exemplo abaixo declara três serviços chamados local, test amazon: tell active storage which service setting rails.application.config.active_storage.service. because each environment will likely different service, recommended this per-environment basis. disk service from previous example development environment, would following config/environments/development.rb: usar serviço amazon produção, você adiciona seguinte config/environments/production.rb: usar serviço test durante teste, você adiciona seguinte config/environments/test.rb: continue lendo obter mais informações sobre adaptadores serviço integrados (por exemplo, disk configurações exigem."},{"id":773,"title":"Active Storage Overview","heading":"2 Configuração","subheading":"2.1 Serviço Disk","content":"declare serviço disk config/storage.yml:"},{"id":774,"title":"Active Storage Overview","heading":"2 Configuração","subheading":"2.2 Serviço Amazon S3","content":"declare serviço config/storage.yml: adicione aws-sdk-s3 gemfile:"},{"id":775,"title":"Active Storage Overview","heading":"2 Configuração","subheading":"2.3 Serviço Armazenamento da Microsoft Azure","content":"declare serviço azure storage config/storage.yml: adicione azure-storage gemfile:"},{"id":776,"title":"Active Storage Overview","heading":"2 Configuração","subheading":"2.4 Serviço Google Cloud Storage","content":"declare serviço google cloud storage service config/storage.yml: opcionalmente forneça hash credenciais caminho arquivo chave: adicione google-cloud-storage gemfile:"},{"id":777,"title":"Active Storage Overview","heading":"2 Configuração","subheading":"2.5 Serviço Espelho","content":"você pode manter múltiplos serviços sincronizados definindo serviço espelho. quando arquivo carregado deletado, isso feito todos serviços espelhados. serviços espelhados podem usados facilitar migração entre serviços produção. você pode começar espelhar novo serviço, copiar arquivos existentes antigo serviço novo, então muda novo serviço. defina cada serviços você gostaria usar conforme descrito acima faça referência serviço espelhado."},{"id":778,"title":"Active Storage Overview","heading":"3 Anexar Arquivos a Registros","subheading":"3.1 has_one_attached","content":"macro has_one_attached configura mapeamento um-para-um entre registros arquivos. cada registro pode arquivo anexado ele. exemplo, imagine aplicação tenha model user. você quiser cada usuário tenha avatar, defina model user assim: você pode criar usuário avatar: chamar avatar.attach anexar avatar usuário existente: chamar avatar.attached? determinar usuário particular avatar:"},{"id":779,"title":"Active Storage Overview","heading":"3 Anexar Arquivos a Registros","subheading":"3.2 has_many_attached","content":"macro has_many_attached configura relacionamento um-para-muitos entre registros arquivos. cada registro pode muitos arquivos anexados ele. exemplo, imagine aplicação model message. você quiser cada mensagem tenha muitas imagens, defina model message assim: você pode criar mensagem images: chamar images.attach adicionar novas imagens mensagem existente: chamar images.attached? determinar mensagem particular alguma imagem:"},{"id":780,"title":"Active Storage Overview","heading":"3 Anexar Arquivos a Registros","subheading":"3.3 Anexando Objetos File/IO","content":"vezes você precisa anexar arquivo chega meio requisição http. exemplo, você pode querer anexar arquivo você gerou disco baixou enviada pelo usuário. você também pode querer anexar arquivo fixação model test. fazer isso, forneça hash contendo pelo menos objeto open filename: quando possível, forneça tipo conteúdo também. active storage tenta determinar tipo conteúdo arquivo partir seus dados. depende tipo conteúdo você fornece possível. você pode ignorar inferência tipo conteúdo partir dados passando identify: false junto content_type. você fornecer tipo conteúdo active storage puder determinar tipo conteúdo arquivo automaticamente, padrão application/octet-stream. remover arquivo anexado model, método purge anexo. remoção pode feita maneira assíncrona aplicação estiver configurada usar active job. purge remove blob arquivo versão binaria salvo banco dados) arquivo serviço armazenamento. cria permanente aplicação blob. quando acessado, cliente redirecionado rota (endpoint) correta. está indireção desacopla pública atual, permite, exemplo, espelhar anexos diferentes serviços grande disponibilidade. redirecionamento tempo expiração minutos. criar link baixar arquivo seguinte helper: rails_blob_{path|url}. usando esse helper permite você configure disposição (disposition) como deseja apresentar: você precisar criar link fora escopo controller view serviço execute tarefas assíncronas, cronjob etc), você pode acessar helper rails_blob_path desta maneira: algumas vezes você precisar processar blob depois dele sido uploaded (transferir arquivo maquina cliente servidor aplicação) para, exemplo, converte-lo formato diferente. activestorage::blob#download carregar conteúdo binário blob memória: caso deseje baixar blob arquivo disco programa externo antivírus, exemplo) possa operar nele activestorage::blob#open baixar blob arquivo temporário disco: active storage analisa arquivos assim eles enviados através enfileiramento active job. arquivos analisados armazenarão informações adicionais hash metadados, incluindo analyzed: true. você pode verificar blob analisado chamando analyzed? nele. análise imagens fornece atributos width height. análise vídeos fornece ambos citados anteriormente, assim como duration, angle display_aspect_ratio. análise necessita mini_magick. análise vídeos também necessita biblioteca ffmpeg, você deve incluir separadamente. enable variants, image_processing your gemfile: create variation image, call variant blob. pass transformation method supported processor. default processor active storage minimagick, also vips. when browser hits variant url, active storage will lazily transform original blob into specified format redirect service location. switch vips processor, would following config/application.rb: alguns arquivos imagens podem pré-visualizados: isto eles podem apresentados como imagens. exemplo, arquivo vídeo pode pré-visualizado através extração primeiro frame. active storage padrão oferece suporte pré-visualização vídeos documentos pdf. active storage, with included javascript library, supports uploading directly from client cloud."},{"id":781,"title":"Active Storage Overview","heading":"10 Direct Uploads","subheading":"10.1 Usage","content":""},{"id":782,"title":"Active Storage Overview","heading":"10 Direct Uploads","subheading":"10.2 Cross-Origin Resource Sharing (CORS) configuration","content":"make direct uploads third-party service work, you’ll need configure service allow cross-origin requests from your app. consult cors documentation your service: take care allow: cors configuration required disk service since shares your app’s origin."},{"id":783,"title":"Active Storage Overview","heading":"10 Direct Uploads","subheading":"10.3 Direct upload JavaScript events","content":""},{"id":784,"title":"Active Storage Overview","heading":"10 Direct Uploads","subheading":"10.4 Example","content":"these events show progress upload.  show uploaded files form: styles:"},{"id":785,"title":"Active Storage Overview","heading":"10 Direct Uploads","subheading":"10.5 Integrating with Libraries or Frameworks","content":"want direct upload feature from javascript framework, want integrate custom drag drop solutions, directupload class this purpose. upon receiving file from your library choice, instantiate directupload call create method. create takes callback invoke when upload completes. need track progress file upload, pass third parameter directupload constructor. during upload, directupload will call object's directuploadwillstorefilewithxhr method. then bind your progress handler xhr. system tests clean test data rolling back transaction. because destroy never called object, attached files never cleaned want clear files, after_teardown callback. doing here ensures that connections created during test complete won't receive error from active storage saying can't find file. your system tests verify deletion model with attachments you're using active job, your test environment inline queue adapter purge executed immediately rather unknown time future. also want separate service definition test environment your tests don't delete files create during development. similarly system tests, files uploaded during integration tests will automatically cleaned want clear files, after_teardown callback. doing here ensures that connections created during test complete won't receive error from active storage saying can't find file. need support cloud service other than these, will need implement service. each service extends activestorage::service implementing methods necessary upload download files cloud. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":786,"title":"Atualizando o Ruby on Rails","heading":"1 Conselho Geral","subheading":"1 Conselho Geral","content":"antes tentar atualizar aplicação existente, você deve certeza possui razão fazê-lo. então tenha mente alguns fatores: necessidade novas funcionalidades, crescente dificuldade encontrar suporte código mais antigo, tempo disponível habilidades, entre outros."},{"id":787,"title":"Atualizando o Ruby on Rails","heading":"1 Conselho Geral","subheading":"1.1 Cobertura de Testes","content":"melhor maneira garantir aplicação ainda funciona após atualização possuir cobertura testes antes começar processo. você tiver testes automatizados maior parte aplicação, será necessário gastar algum tempo realizando testes manuais todas partes alteradas. caso atualização rails, isso significa cada umas funcionalidades dentro aplicação. faça mesmo favor tenha certeza cobertura teste antes iniciar atualização."},{"id":788,"title":"Atualizando o Ruby on Rails","heading":"1 Conselho Geral","subheading":"1.2 O Processo de Atualização","content":"quando estiver atualizando versão rails, melhor devagar, versão minor vez, fazer avisos depreciação. versões rails numeradas maneira major.minor.patch. versões major minor permissão alterar pública, isso pode causar erros aplicação. versões patch incluem apenas correções bug, alteram nenhuma pública. processo deve correr seguinte maneira: repita este processo chegar versão desejada rails. cada você mudar entre versões, você precisará alterar versão rails gemfile (possivelmente também versões outras gems) executar bundle update. após, execute tarefa atualização mencionada abaixo atualizar arquivos configuração, então execute testes. você pode encontrar lista todas versões liberadas rails aqui"},{"id":789,"title":"Atualizando o Ruby on Rails","heading":"1 Conselho Geral","subheading":"1.3 Versões do Ruby","content":"rails geralmente mantém próximo versão mais recente ruby quando liberado: dica: ruby 1.8.7 p248 p249 possuem bugs travam rails. ruby enterprise edition possui correções esses erros desde versão 1.8.7-2010.02. versão 1.9, ruby 1.9.1 utilizável pois falha logo início devido problemas memória, então você quiser utilizar versão 1.9.x, pule diretamente 1.9.3 evitar problemas."},{"id":790,"title":"Atualizando o Ruby on Rails","heading":"1 Conselho Geral","subheading":"1.4 A Tarefa de Atualização","content":"rails fornece comando app:update (rake rails:update versão anteriores). execute este comando após atualizar versão rails gemfile. isto ajudará criação novos arquivos alteração arquivos antigos sessão interativa. esqueça revisar diferença, verificar houveram mudanças inesperadas."},{"id":791,"title":"Atualizando o Ruby on Rails","heading":"1 Conselho Geral","subheading":"1.5 Configurar Padrões de Framework","content":"nova versão rails pode configurações padrão diferentes versão anterior. entanto, após seguir passos descritos acima, aplicação ainda estaria rodando configurações padrão versão anterior rails. isso porque valor config.load_defaults config/application.rb ainda alterado. permitir você atualize novos padrões tarefa atualização cria arquivo config/initializers/new_framework_defaults.rb. aplicação esteja pronta rodar novas configurações padrão, você pode remover este arquivo trocar valor config.load_defaults. more information changes made rails please release notes."},{"id":792,"title":"Atualizando o Ruby on Rails","heading":"2 Upgrading from Rails 5.2 to Rails 6.0","subheading":"2.1 Using Webpacker","content":"webpacker default javascript compiler rails upgrading app, activated default. want webpacker, then include your gemfile install"},{"id":793,"title":"Atualizando o Ruby on Rails","heading":"2 Upgrading from Rails 5.2 to Rails 6.0","subheading":"2.2 Force SSL","content":"force_ssl method controllers been deprecated will removed rails 6.1. encouraged enable config.force_ssl enforce https connections throughout your application. need exempt certain endpoints from redirection, config.ssl_options configure that behavior."},{"id":794,"title":"Atualizando o Ruby on Rails","heading":"2 Upgrading from Rails 5.2 to Rails 6.0","subheading":"2.3 Purpose in signed or encrypted cookie is now embedded within cookies","content":"improve security, rails embeds purpose information encrypted signed cookies value. rails then thwart attacks that attempt copy signed/encrypted value cookie value another cookie. this embed information make those cookies incompatible with versions rails older than 6.0. require your cookies read rails older, still validating your deploy want able rollback rails.application.config.action_dispatch.use_cookies_with_metadata false."},{"id":795,"title":"Atualizando o Ruby on Rails","heading":"2 Upgrading from Rails 5.2 to Rails 6.0","subheading":"2.4 All npm packages have been moved to the @rails scope","content":"were previously loading actioncable, activestorage, rails-ujs packages through npm/yarn, must update names these dependencies before upgrade them 6.0.0:"},{"id":796,"title":"Atualizando o Ruby on Rails","heading":"2 Upgrading from Rails 5.2 to Rails 6.0","subheading":"2.5 Action Cable JavaScript API Changes","content":"action cable javascript package been converted from coffeescript es2015, publish source code distribution. this release includes some breaking changes optional parts action cable javascript api:"},{"id":797,"title":"Atualizando o Ruby on Rails","heading":"2 Upgrading from Rails 5.2 to Rails 6.0","subheading":"2.6 ActionDispatch::Response#content_type now returned Content-Type header as it is.","content":"previously, actiondispatch::response#content_type returned value does contain charset part. this behavior changed returned content-type header containing charset part want just mime type, please actiondispatch::response#media_type instead. before: after:"},{"id":798,"title":"Atualizando o Ruby on Rails","heading":"2 Upgrading from Rails 5.2 to Rails 6.0","subheading":"2.7 Autoloading","content":"default configuration rails enables zeitwerk autoloading mode cruby. that mode, autoloading, reloading, eager loading managed zeitwerk. general, applications need zeitwerk directly. rails sets things according existing contract: config.autoload_paths, config.cache_classes, etc. while applications should stick that interface, actual zeitwerk loader object accessed that handy need preload stis configure custom inflector, example. application being upgraded autoloads correctly, project structure should already mostly compatible. however, classic mode infers file names from missing constant names (underscore), whereas zeitwerk mode infers constant names from file names (camelize). these helpers always inverse each other, particular acronyms involved. instance, \"foo\".underscore \"foo\", \"foo\".camelize \"foo\", \"foo\". compatibility checked with zeitwerk:check task: known cases require_dependency have been eliminated, should grep project delete them. your application stis, please check their section guide autoloading reloading constants (zeitwerk mode). robustly constant paths class module definitions: gotcha aware that, depending order execution, classic autoloader could sometimes able autoload foo::wadus that does match ruby semantics because nesting, won't work zeitwerk mode. find such corner case qualified name foo::wadus: nesting: autoload eager load from standard structure like that case, app/models/concerns assumed root directory (because belongs autoload paths), ignored namespace. app/models/concerns/foo.rb should define foo, concerns::foo. concerns:: namespace worked with classic autoloader side-effect implementation, really intended behavior. application using concerns:: needs rename those classes modules able zeitwerk mode. some projects want something like app/api/base.rb define api::base, autoload paths accomplish that classic mode. since rails adds subdirectories autoload paths automatically, have another situation which there nested root directories, that setup longer works. similar principle explained above with concerns. want keep that structure, you'll need delete subdirectory from autoload paths initializer: namespace defined file, hotel here: hotel constant using class module keywords. example: good. alternatives like  won't work, child objects like hotel::pricing won't found. this restriction only applies explicit namespaces. classes modules defining namespace defined using those idioms. classic mode could technically define several constants same top-level have them reloaded. example, given while could autoloaded, autoloading would mark autoloaded too. this case zeitwerk mode, need move file bar.rb. file, constant. this affects only constants same top-level example above. inner classes modules fine. example, consider application reloads foo, will reload foo::innerclass too. spring reloads application code something changes. test environment need enable reloading that work: otherwise you'll this error: bootsnap should least version 1.4.2. addition that, bootsnap needs disable iseq cache interpreter running ruby 2.5. please make sure depend least bootsnap 1.4.4 that case. configuration point true default backwards compatibility, allows opt-out from adding autoload paths $load_path. this makes sense most applications, since never should require file app/models, example, zeitwerk only uses absolute file names internally. opting-out optimize $load_path lookups (less directories check), save bootsnap work memory consumption, since does need build index these directories. classic mode, constant autoloading thread-safe, though rails locks place example make requests thread-safe when autoloading enabled, common development mode. constant autoloading thread-safe zeitwerk mode. example, autoload multi-threaded scripts executed runner command. beware configurations like every element config.autoload_paths should represent top-level namespace (object) they cannot nested consequence (with exception concerns directories explained above). this, just remove wildcards: classic mode, app/models/foo.rb defines bar, won't able autoload that file, eager loading will work because loads files recursively blindly. this source errors test things first eager loading, execution fail later autoloading. zeitwerk mode both loading modes consistent, they fail same files. applications load rails defaults still classic autoloader setting config.autoloader this way: when using classic autoloader rails application recommended concurrency level development environment, servers background processors, thread-safety concerns."},{"id":799,"title":"Atualizando o Ruby on Rails","heading":"2 Upgrading from Rails 5.2 to Rails 6.0","subheading":"2.8 Active Storage assignment behavior change","content":"rails 5.2, assigning collection attachments declared with has_many_attached appended files: with default configuration rails 6.0, assigning collection attachments replaces existing files instead appending them. this matches active record behavior when assigning collection association: #attach used attachments without removing existing ones: default behavior setting config.active_storage.replace_on_assign_to_many true. behavior will deprecated rails removed subsequent release. more information changes made rails please release notes."},{"id":800,"title":"Atualizando o Ruby on Rails","heading":"3 Upgrading from Rails 5.1 to Rails 5.2","subheading":"3.1 Bootsnap","content":"rails adds bootsnap newly generated app's gemfile. app:update command sets boot.rb. want then gemfile, otherwise change boot.rb bootsnap."},{"id":801,"title":"Atualizando o Ruby on Rails","heading":"3 Upgrading from Rails 5.1 to Rails 5.2","subheading":"3.2 Expiry in signed or encrypted cookie is now embedded in the cookies values","content":"improve security, rails embeds expiry information also encrypted signed cookies value. this embed information make those cookies incompatible with versions rails older than 5.2. require your cookies read older, still validating your deploy want allow rollback rails.application.config.action_dispatch.use_authenticated_cookie_encryption false. more information changes made rails please release notes."},{"id":802,"title":"Atualizando o Ruby on Rails","heading":"4 Upgrading from Rails 5.0 to Rails 5.1","subheading":"4.1 Top-level HashWithIndifferentAccess is soft-deprecated","content":"your application uses top-level hashwithindifferentaccess class, should slowly move your code instead activesupport::hashwithindifferentaccess. only soft-deprecated, which means that your code will break moment deprecation warning will displayed, this constant will removed future. also, have pretty yaml documents containing dumps such objects, need load dump them again make sure that they reference right constant, that loading them won't break future."},{"id":803,"title":"Atualizando o Ruby on Rails","heading":"4 Upgrading from Rails 5.0 to Rails 5.1","subheading":"4.2 application.secrets now loaded with all keys as symbols","content":"your application stores nested configuration config/secrets.yml, keys loaded symbols, access using strings should changed. from: "},{"id":804,"title":"Atualizando o Ruby on Rails","heading":"4 Upgrading from Rails 5.0 to Rails 5.1","subheading":"4.3 Removed deprecated support to :text and :nothing in render","content":"your views using render :text, they will longer work. method rendering text with mime type text/plain render :plain. similarly, render :nothing also removed should head method send responses that contain only headers. example, head sends response with body render. more information changes made rails please release notes."},{"id":805,"title":"Atualizando o Ruby on Rails","heading":"5 Upgrading from Rails 4.2 to Rails 5.0","subheading":"5.1 Ruby 2.2.2+ required","content":"from ruby rails onwards, ruby 2.2.2+ only supported ruby version. make sure ruby 2.2.2 version greater, before proceed."},{"id":806,"title":"Atualizando o Ruby on Rails","heading":"5 Upgrading from Rails 4.2 to Rails 5.0","subheading":"5.2 Active Record Models Now Inherit from ApplicationRecord by Default","content":"rails 4.2, active record model inherits from activerecord::base. rails 5.0, models inherit from applicationrecord. applicationrecord superclass models, analogous controllers subclassing applicationcontroller instead actioncontroller::base. this gives apps single spot configure app-wide model behavior. when upgrading from rails rails 5.0, need create application_record.rb file app/models/ following content: then make sure that your models inherit from"},{"id":807,"title":"Atualizando o Ruby on Rails","heading":"5 Upgrading from Rails 4.2 to Rails 5.0","subheading":"5.3 Halting Callback Chains via throw(:abort)","content":"rails 4.2, when 'before' callback returns false active record active model, then entire callback chain halted. other words, successive 'before' callbacks executed, neither action wrapped callbacks. rails 5.0, returning false active record active model callback will have this side effect halting callback chain. instead, callback chains must explicitly halted calling throw(:abort). when upgrade from rails rails 5.0, returning false those kind callbacks will still halt callback chain, will receive deprecation warning about this upcoming change. when ready, into behavior remove deprecation warning adding following configuration your config/application.rb: note that this option will affect active support callbacks since they never halted chain when value returned. #17227 more details."},{"id":808,"title":"Atualizando o Ruby on Rails","heading":"5 Upgrading from Rails 4.2 to Rails 5.0","subheading":"5.4 ActiveJob Now Inherits from ApplicationJob by Default","content":"rails 4.2, active inherits from activejob::base. rails 5.0, this behavior changed inherit from applicationjob. when upgrading from rails rails 5.0, need create application_job.rb file app/jobs/ following content: then make sure that your classes inherit from #19034 more details."},{"id":809,"title":"Atualizando o Ruby on Rails","heading":"5 Upgrading from Rails 4.2 to Rails 5.0","subheading":"5.5 Rails Controller Testing","content":"assigns assert_template have been extracted rails-controller-testing gem. continue using these methods your controller tests, 'rails-controller-testing' your gemfile. using rspec testing, please extra configuration required gem's documentation. using actiondispatch::http::uploadedfile your tests upload files, will need change similar rack::test::uploadedfile class instead. #26404 more details."},{"id":810,"title":"Atualizando o Ruby on Rails","heading":"5 Upgrading from Rails 4.2 to Rails 5.0","subheading":"5.6 Autoloading is Disabled After Booting in the Production Environment","content":"autoloading disabled after booting production environment default. eager loading application part boot process, top-level constants fine still autoloaded, need require their files. constants deeper places only executed runtime, like regular method bodies, also fine because file defining them will have been eager loaded while booting. vast majority applications this change needs action. very rare event that your application needs autoloading while running production mode, rails.application.config.enable_dependency_loading true."},{"id":811,"title":"Atualizando o Ruby on Rails","heading":"5 Upgrading from Rails 4.2 to Rails 5.0","subheading":"5.7 XML Serialization","content":"activemodel::serializers::xml been extracted from rails activemodel-serializers-xml gem. continue using serialization your application, 'activemodel-serializers-xml' your gemfile."},{"id":812,"title":"Atualizando o Ruby on Rails","heading":"5 Upgrading from Rails 4.2 to Rails 5.0","subheading":"5.8 Removed Support for Legacy mysql Database Adapter","content":"rails removes support legacy mysql database adapter. most users should able mysql2 instead. will converted separate when find someone maintain"},{"id":813,"title":"Atualizando o Ruby on Rails","heading":"5 Upgrading from Rails 4.2 to Rails 5.0","subheading":"5.9 Removed Support for Debugger","content":"debugger supported ruby which required rails byebug instead."},{"id":814,"title":"Atualizando o Ruby on Rails","heading":"5 Upgrading from Rails 4.2 to Rails 5.0","subheading":"5.10 Use rails for running tasks and tests","content":"rails adds ability tasks tests through bin/rails instead rake. generally these changes parallel with rake, some were ported over altogether. rails command already looks runs bin/rails, recommend shorter rails over `bin/rails. test runner simply type rails test. rake dev:cache rails dev:cache. rails inside your application's directory list commands available."},{"id":815,"title":"Atualizando o Ruby on Rails","heading":"5 Upgrading from Rails 4.2 to Rails 5.0","subheading":"5.11 ActionController::Parameters No Longer Inherits from HashWithIndifferentAccess","content":"calling params your application will return object instead hash. your parameters already permitted, then will need make changes. using other methods that depend being able read hash regardless permitted? will need upgrade your application first permit then convert hash."},{"id":816,"title":"Atualizando o Ruby on Rails","heading":"5 Upgrading from Rails 4.2 to Rails 5.0","subheading":"5.12 protect_from_forgery Now Defaults to prepend: false","content":"protect_from_forgery defaults prepend: false which means that will inserted into callback chain point which call your application. want protect_from_forgery always first, then should change your application protect_from_forgery prepend: true."},{"id":817,"title":"Atualizando o Ruby on Rails","heading":"5 Upgrading from Rails 4.2 to Rails 5.0","subheading":"5.13 Default Template Handler is Now RAW","content":"files without template handler their extension will rendered using handler. previously rails would render files using template handler. want your file handled handler, should extension your file that parsed appropriate template handler."},{"id":818,"title":"Atualizando o Ruby on Rails","heading":"5 Upgrading from Rails 4.2 to Rails 5.0","subheading":"5.14 Added Wildcard Matching for Template Dependencies","content":"wildcard matching your template dependencies. example, were defining your templates such: just call dependency once with wildcard."},{"id":819,"title":"Atualizando o Ruby on Rails","heading":"5 Upgrading from Rails 4.2 to Rails 5.0","subheading":"5.15 ActionView::Helpers::RecordTagHelper moved to external gem (record_tag_helper)","content":"content_tag_for div_for have been removed favor just using content_tag. continue using older methods, record_tag_helper your gemfile: #18411 more details."},{"id":820,"title":"Atualizando o Ruby on Rails","heading":"5 Upgrading from Rails 4.2 to Rails 5.0","subheading":"5.16 Removed Support for protected_attributes Gem","content":"protected_attributes longer supported rails"},{"id":821,"title":"Atualizando o Ruby on Rails","heading":"5 Upgrading from Rails 4.2 to Rails 5.0","subheading":"5.17 Removed support for activerecord-deprecated_finders gem","content":"activerecord-deprecated_finders longer supported rails"},{"id":822,"title":"Atualizando o Ruby on Rails","heading":"5 Upgrading from Rails 4.2 to Rails 5.0","subheading":"5.18 ActiveSupport::TestCase Default Test Order is Now Random","content":"when tests your application, default order :random instead :sorted. following config option back :sorted."},{"id":823,"title":"Atualizando o Ruby on Rails","heading":"5 Upgrading from Rails 4.2 to Rails 5.0","subheading":"5.19 ActionController::Live became a Concern","content":"include actioncontroller::live another module that included your controller, then should also extend module with activesupport::concern. alternatively, self.included hook include actioncontroller::live directly controller once streamingsupport included. this means that your application used have streaming module, following code would break production mode:"},{"id":824,"title":"Atualizando o Ruby on Rails","heading":"5 Upgrading from Rails 4.2 to Rails 5.0","subheading":"5.20 New Framework Defaults","content":"belongs_to will trigger validation error default association present. this turned per-association with optional: true. this default will automatically configured applications. existing application want this feature will need turned initializer. rails supports per-form csrf tokens mitigate against code-injection attacks with forms created javascript. with this option turned forms your application will each have their csrf token that specific action method that form. configure your application check http origin header should checked against site's origin additional csrf defense. following your config true: default mailer queue name mailers. this configuration option allows globally change queue name. following your config: config.action_mailer.perform_caching your config determine whether your action mailer views should support caching. you're using schema_search_path other postgresql extensions, control schema dumped. :all generate dumps, :schema_search_path generate from schema search path. following your config enable hsts when using subdomains: when using ruby 2.4, preserve timezone receiver when calling to_time."},{"id":825,"title":"Atualizando o Ruby on Rails","heading":"5 Upgrading from Rails 4.2 to Rails 5.0","subheading":"5.21 Changes with JSON/JSONB serialization","content":"rails 5.0, json/jsonb attributes serialized deserialized changed. now, column equal string, active record will longer turn that string into hash, will instead only return string. this limited code interacting with models, also affects :default column settings db/schema.rb. recommended that columns equal string, pass hash instead, which will converted from json string automatically."},{"id":826,"title":"Atualizando o Ruby on Rails","heading":"6 Upgrading from Rails 4.1 to Rails 4.2","subheading":"6.1 Web Console","content":"first, 'web-console', 2.0' :development group your gemfile bundle install won't have been included when upgraded rails). once it's been installed, simply drop reference console helper (i.e., console into view want enable for. console will also provided error page view your development environment."},{"id":827,"title":"Atualizando o Ruby on Rails","heading":"6 Upgrading from Rails 4.1 to Rails 4.2","subheading":"6.2 Responders","content":"respond_with class-level respond_to methods have been extracted responders gem. them, simply 'responders', 2.0' your gemfile. calls respond_with respond_to (again, class level) will longer work without having included responders your dependencies: instance-level respond_to unaffected does require additional gem: #16526 more details."},{"id":828,"title":"Atualizando o Ruby on Rails","heading":"6 Upgrading from Rails 4.1 to Rails 4.2","subheading":"6.3 Error handling in transaction callbacks","content":"currently, active record suppresses errors raised within after_rollback after_commit callbacks only prints them logs. next version, these errors will longer suppressed. instead, errors will propagate normally just like other active record callbacks. when define after_rollback after_commit callback, will receive deprecation warning about this upcoming change. when ready, into behavior remove deprecation warning adding following configuration your config/application.rb: #14488 #16537 more details."},{"id":829,"title":"Atualizando o Ruby on Rails","heading":"6 Upgrading from Rails 4.1 to Rails 4.2","subheading":"6.4 Ordering of test cases","content":"rails 5.0, test cases will executed random order default. anticipation this change, rails introduced configuration option active_support.test_order explicitly specifying test ordering. this allows either lock down current behavior setting option :sorted, into future behavior setting option :random. specify value this option, deprecation warning will emitted. avoid this, following line your test environment:"},{"id":830,"title":"Atualizando o Ruby on Rails","heading":"6 Upgrading from Rails 4.1 to Rails 4.2","subheading":"6.5 Serialized attributes","content":"when using custom coder (e.g. serialize :metadata, json), assigning serialized attribute will save database null instead passing value through coder (e.g. \"null\" when using json coder)."},{"id":831,"title":"Atualizando o Ruby on Rails","heading":"6 Upgrading from Rails 4.1 to Rails 4.2","subheading":"6.6 Production log level","content":"rails default level production environment will changed :debug (from :info). preserve current default, following line your production.rb:"},{"id":832,"title":"Atualizando o Ruby on Rails","heading":"6 Upgrading from Rails 4.1 to Rails 4.2","subheading":"6.7 after_bundle in Rails templates","content":"have rails template that adds files version control, fails generated binstubs because gets executed before bundler: wrap calls after_bundle block. will after binstubs have been generated."},{"id":833,"title":"Atualizando o Ruby on Rails","heading":"6 Upgrading from Rails 4.1 to Rails 4.2","subheading":"6.8 Rails HTML Sanitizer","content":"there's choice sanitizing html fragments your applications. venerable html-scanner approach officially being deprecated favor rails html sanitizer. this means methods sanitize, sanitize_css, strip_tags strip_links backed implementation. this sanitizer uses loofah internally. loofah turn uses nokogiri, which wraps parsers written both java, sanitization should faster matter which ruby version run. version updates sanitize, take loofah::scrubber powerful scrubbing. some examples scrubbers here. scrubbers have also been added: permitscrubber targetscrubber. read gem's readme more information. documentation permitscrubber targetscrubber explains gain complete control over when elements should stripped. your application needs sanitizer implementation, include rails-deprecated_sanitizer your gemfile:"},{"id":834,"title":"Atualizando o Ruby on Rails","heading":"6 Upgrading from Rails 4.1 to Rails 4.2","subheading":"6.9 Rails DOM Testing","content":"tagassertions module (containing methods such assert_tag), been deprecated favor assert_select methods from selectorassertions module, which been extracted into rails-dom-testing gem."},{"id":835,"title":"Atualizando o Ruby on Rails","heading":"6 Upgrading from Rails 4.1 to Rails 4.2","subheading":"6.10 Masked Authenticity Tokens","content":"order mitigate attacks, form_authenticity_token masked that varies with each request. thus, tokens validated unmasking then decrypting. result, strategies verifying requests from non-rails forms that relied static session csrf token have take this into account."},{"id":836,"title":"Atualizando o Ruby on Rails","heading":"6 Upgrading from Rails 4.1 to Rails 4.2","subheading":"6.11 Action Mailer","content":"previously, calling mailer method mailer class will result corresponding instance method being executed directly. with introduction active #deliver_later, this longer true. rails 4.2, invocation instance methods deferred until either deliver_now deliver_later called. example: this should result noticeable differences most applications. however, need some non-mailer methods executed synchronously, were previously relying synchronous proxying behavior, should define them class methods mailer class directly:"},{"id":837,"title":"Atualizando o Ruby on Rails","heading":"6 Upgrading from Rails 4.1 to Rails 4.2","subheading":"6.12 Foreign Key Support","content":"migration been expanded support foreign definitions. you've been using foreigner gem, might want consider removing note that foreign support rails subset foreigner. this means that every foreigner definition fully replaced rails migration counterpart. migration procedure follows:"},{"id":838,"title":"Atualizando o Ruby on Rails","heading":"7 Upgrading from Rails 4.0 to Rails 4.1","subheading":"7.1 CSRF protection from remote <script> tags","content":"\"whaaat tests failing!!!?\" <script> widget busted!!\" cross-site request forgery (csrf) protection covers requests with javascript responses, too. this prevents third-party site from remotely referencing your javascript with <script> extract sensitive data. this means that your functional integration tests that will trigger csrf protection. switch explicitly test xmlhttprequest."},{"id":839,"title":"Atualizando o Ruby on Rails","heading":"7 Upgrading from Rails 4.0 to Rails 4.1","subheading":"7.2 Spring","content":"want spring your application preloader need"},{"id":840,"title":"Atualizando o Ruby on Rails","heading":"7 Upgrading from Rails 4.0 to Rails 4.1","subheading":"7.3 config/secrets.yml","content":"want secrets.yml convention store your application's secrets, need"},{"id":841,"title":"Atualizando o Ruby on Rails","heading":"7 Upgrading from Rails 4.0 to Rails 4.1","subheading":"7.4 Changes to test helper","content":"your test helper contains call activerecord::migration.check_pending! this removed. check done automatically when require 'rails/test_help', although leaving this line your helper harmful way."},{"id":842,"title":"Atualizando o Ruby on Rails","heading":"7 Upgrading from Rails 4.0 to Rails 4.1","subheading":"7.5 Cookies serializer","content":"applications created before rails uses marshal serialize cookie values into signed encrypted cookie jars. want json-based format your application, initializer file with following content: this would transparently migrate your existing marshal-serialized cookies into json-based format. when using :json :hybrid serializer, should beware that ruby objects serialized json. example, date time objects will serialized strings, hashes will have their keys stringified. it's advisable that only store simple data (strings numbers) cookies. have store complex objects, would need handle conversion manually when reading values subsequent requests. cookie session store, this would apply session flash hash well."},{"id":843,"title":"Atualizando o Ruby on Rails","heading":"7 Upgrading from Rails 4.0 to Rails 4.1","subheading":"7.6 Flash structure changes","content":"flash message keys normalized strings. they still accessed using either symbols strings. looping through flash will always yield string keys: make sure comparing flash message keys against strings."},{"id":844,"title":"Atualizando o Ruby on Rails","heading":"7 Upgrading from Rails 4.0 to Rails 4.1","subheading":"7.7 Changes in JSON handling","content":"there major changes related json handling rails 4.1. multijson reached end-of-life been removed from rails. your application currently depends multijson directly, have options: historically, rails some compatibility issues with json gem. using json.generate json.dump inside rails application could produce unexpected errors. rails fixed these issues isolating encoder from json gem. json apis will function normal, they will have access rails-specific features. example: json encoder rails been rewritten take advantage json gem. most applications, this should transparent change. however, part rewrite, following features have been removed from encoder: your application depends these features, them back adding activesupport-json_encoder your gemfile. #as_json objects with time component (time, datetime, activesupport::timewithzone) returns millisecond precision default. need keep behavior with millisecond precision, following initializer:"},{"id":845,"title":"Atualizando o Ruby on Rails","heading":"7 Upgrading from Rails 4.0 to Rails 4.1","subheading":"7.8 Usage of return within inline callback blocks","content":"previously, rails allowed inline callback blocks return this way: this behavior never intentionally supported. change internals activesupport::callbacks, this longer allowed rails 4.1. using return statement inline callback block causes localjumperror raised when callback executed. inline callback blocks using return refactored evaluate returned value: alternatively, return preferred recommended explicitly define method: this change applies most places rails where callbacks used, including active record active model callbacks, well filters action controller (e.g. before_action). this pull request more details."},{"id":846,"title":"Atualizando o Ruby on Rails","heading":"7 Upgrading from Rails 4.0 to Rails 4.1","subheading":"7.9 Methods defined in Active Record fixtures","content":"rails evaluates each fixture's separate context, helper methods defined fixture will available other fixtures. helper methods that used multiple fixtures should defined modules included newly introduced activerecord::fixtureset.context_class, test_helper.rb."},{"id":847,"title":"Atualizando o Ruby on Rails","heading":"7 Upgrading from Rails 4.0 to Rails 4.1","subheading":"7.10 I18n enforcing available locales","content":"rails defaults i18n option enforce_available_locales true. this means that will make sure that locales passed must declared available_locales list. disable (and allow i18n accept locale option) following configuration your application: note that this option added security measure, ensure user input cannot used locale information unless previously known. therefore, it's recommended disable this option unless have strong reason doing"},{"id":848,"title":"Atualizando o Ruby on Rails","heading":"7 Upgrading from Rails 4.0 to Rails 4.1","subheading":"7.11 Mutator methods called on Relation","content":"relation longer mutator methods like #map! #delete_if. convert array calling #to_a before using these methods. intends prevent bugs confusion code that call mutator methods directly relation."},{"id":849,"title":"Atualizando o Ruby on Rails","heading":"7 Upgrading from Rails 4.0 to Rails 4.1","subheading":"7.12 Changes on Default Scopes","content":"default scopes longer overridden chained conditions. previous versions when defined default_scope model overridden chained conditions same field. merged like other scope. before: after: previous behavior needed explicitly remove default_scope condition using unscoped, unscope, rewhere except."},{"id":850,"title":"Atualizando o Ruby on Rails","heading":"7 Upgrading from Rails 4.0 to Rails 4.1","subheading":"7.13 Rendering content from string","content":"rails introduces :plain, :html, :body options render. those options preferred render string-based content, allows specify which content type want response sent from security standpoint, don't expect have markup your response body, should using render :plain most browsers will escape unsafe content response you. will deprecating render :text future version. please start using more precise :plain, :html, :body options instead. using render :text pose security risk, content sent text/html."},{"id":851,"title":"Atualizando o Ruby on Rails","heading":"7 Upgrading from Rails 4.0 to Rails 4.1","subheading":"7.14 PostgreSQL json and hstore datatypes","content":"rails will json hstore columns string-keyed ruby hash. earlier versions, hashwithindifferentaccess used. this means that symbol access longer supported. this also case store_accessors based json hstore columns. make sure string keys consistently."},{"id":852,"title":"Atualizando o Ruby on Rails","heading":"7 Upgrading from Rails 4.0 to Rails 4.1","subheading":"7.15 Explicit block use for ActiveSupport::Callbacks","content":"rails expects explicit block passed when calling activesupport::callbacks.set_callback. this change stems from activesupport::callbacks being largely rewritten release. your application currently version rails older than 3.2.x, should upgrade rails before attempting rails 4.0. following changes meant upgrading your application rails 4.0."},{"id":853,"title":"Atualizando o Ruby on Rails","heading":"8 Upgrading from Rails 3.2 to Rails 4.0","subheading":"8.1 HTTP PATCH","content":"rails uses patch primary http verb updates when restful resource declared config/routes.rb. update action still used, requests will continue routed update action well. you're using only standard restful routes, changes need made: however, will need make change using form_for update resource conjunction with custom route using http method: action being used public free change http method, update your route patch instead put: requests /users/:id rails routed update they today. have that gets real requests going work. router also routes patch requests /users/:id update action. action being used public can't change http method being used, update your form method instead: more patch this change made, this post rails blog. errata patch verb specifies that 'diff' media type should used with patch. such format json patch. while rails does support json patch natively, it's easy enough support: json patch only recently made into rfc, there aren't great ruby libraries yet. aaron patterson's hana such gem, doesn't have full support last changes specification."},{"id":854,"title":"Atualizando o Ruby on Rails","heading":"8 Upgrading from Rails 3.2 to Rails 4.0","subheading":"8.2 Gemfile","content":"rails removed assets group from gemfile. you'd need remove that line from your gemfile when upgrading. should also update your application file config/application.rb):"},{"id":855,"title":"Atualizando o Ruby on Rails","heading":"8 Upgrading from Rails 3.2 to Rails 4.0","subheading":"8.3 vendor/plugins","content":"rails longer supports loading plugins from vendor/plugins. must replace plugins extracting them gems adding them your gemfile. choose make them gems, move them into, say, lib/my_plugin/* appropriate initializer config/initializers/my_plugin.rb."},{"id":856,"title":"Atualizando o Ruby on Rails","heading":"8 Upgrading from Rails 3.2 to Rails 4.0","subheading":"8.4 Active Record","content":""},{"id":857,"title":"Atualizando o Ruby on Rails","heading":"8 Upgrading from Rails 3.2 to Rails 4.0","subheading":"8.5 Active Resource","content":"rails extracted active resource gem. still need feature active resource your gemfile."},{"id":858,"title":"Atualizando o Ruby on Rails","heading":"8 Upgrading from Rails 3.2 to Rails 4.0","subheading":"8.6 Active Model","content":""},{"id":859,"title":"Atualizando o Ruby on Rails","heading":"8 Upgrading from Rails 3.2 to Rails 4.0","subheading":"8.7 Action Pack","content":"please note that should wait secret_key_base until have 100% your userbase rails reasonably sure will need rollback rails 3.x. this because cookies signed based secret_key_base rails backwards compatible with rails 3.x. free leave your existing secret_token place, secret_key_base, ignore deprecation warnings until reasonably sure that your upgrade otherwise complete. relying ability external applications javascript able read your rails app's signed session cookies signed cookies general) should secret_key_base until have decoupled these concerns. please read pull request #9978 details move encrypted session cookies. first case, simply avoid using same name multiple routes. second, only except options provided resources method restrict routes created detailed routing guide. becomes remember must also remove references middleware from your application code, example: also check your environment settings config.action_dispatch.best_standards_support remove present. please note that your application dependent loading certain pages <frame> <iframe>, then need explicitly x-frame-options allow-from allowall."},{"id":860,"title":"Atualizando o Ruby on Rails","heading":"8 Upgrading from Rails 3.2 to Rails 4.0","subheading":"8.8 Active Support","content":"rails removes alias erb::util#json_escape since already used actionview::helpers::javascripthelper#escape_javascript. caching method changed between rails 4.0. should change cache namespace roll with cold cache."},{"id":861,"title":"Atualizando o Ruby on Rails","heading":"8 Upgrading from Rails 3.2 to Rails 4.0","subheading":"8.9 Helpers Loading Order","content":"order which helpers from more than directory loaded changed rails 4.0. previously, they were gathered then sorted alphabetically. after upgrading rails 4.0, helpers will preserve order loaded directories will sorted alphabetically only within each directory. unless explicitly helpers_path parameter, this change will only impact loading helpers from engines. rely ordering, should check correct methods available after upgrade. would like change order which engines loaded, config.railties_order= method."},{"id":862,"title":"Atualizando o Ruby on Rails","heading":"8 Upgrading from Rails 3.2 to Rails 4.0","subheading":"8.10 Active Record Observer and Action Controller Sweeper","content":"activerecord::observer actioncontroller::caching::sweeper have been extracted rails-observers gem. will need rails-observers require these features."},{"id":863,"title":"Atualizando o Ruby on Rails","heading":"8 Upgrading from Rails 3.2 to Rails 4.0","subheading":"8.11 sprockets-rails","content":""},{"id":864,"title":"Atualizando o Ruby on Rails","heading":"8 Upgrading from Rails 3.2 to Rails 4.0","subheading":"8.12 sass-rails","content":"your application currently version rails older than 3.1.x, should upgrade rails before attempting update rails 3.2. following changes meant upgrading your application latest 3.2.x version rails."},{"id":865,"title":"Atualizando o Ruby on Rails","heading":"9 Upgrading from Rails 3.1 to Rails 3.2","subheading":"9.1 Gemfile","content":"make following changes your gemfile."},{"id":866,"title":"Atualizando o Ruby on Rails","heading":"9 Upgrading from Rails 3.1 to Rails 3.2","subheading":"9.2 config/environments/development.rb","content":"there couple configuration settings that should your development environment:"},{"id":867,"title":"Atualizando o Ruby on Rails","heading":"9 Upgrading from Rails 3.1 to Rails 3.2","subheading":"9.3 config/environments/test.rb","content":"mass_assignment_sanitizer configuration setting should also added config/environments/test.rb:"},{"id":868,"title":"Atualizando o Ruby on Rails","heading":"9 Upgrading from Rails 3.1 to Rails 3.2","subheading":"9.4 vendor/plugins","content":"rails deprecates vendor/plugins rails will remove them completely. while it's strictly necessary part rails upgrade, start replacing plugins extracting them gems adding them your gemfile. choose make them gems, move them into, say, lib/my_plugin/* appropriate initializer config/initializers/my_plugin.rb."},{"id":869,"title":"Atualizando o Ruby on Rails","heading":"9 Upgrading from Rails 3.1 to Rails 3.2","subheading":"9.5 Active Record","content":"option :dependent :restrict been removed from belongs_to. want prevent deleting object there associated objects, :dependent :destroy return false after checking existence association from associated object's destroy callbacks. your application currently version rails older than 3.0.x, should upgrade rails before attempting update rails 3.1. following changes meant upgrading your application rails 3.1.12, last 3.1.x version rails."},{"id":870,"title":"Atualizando o Ruby on Rails","heading":"10 Upgrading from Rails 3.0 to Rails 3.1","subheading":"10.1 Gemfile","content":"make following changes your gemfile."},{"id":871,"title":"Atualizando o Ruby on Rails","heading":"10 Upgrading from Rails 3.0 to Rails 3.1","subheading":"10.2 config/application.rb","content":"asset pipeline requires following additions: your application using \"/assets\" route resource want change prefix used assets avoid conflicts:"},{"id":872,"title":"Atualizando o Ruby on Rails","heading":"10 Upgrading from Rails 3.0 to Rails 3.1","subheading":"10.3 config/environments/development.rb","content":"remove setting config.action_view.debug_rjs true. these settings enable asset pipeline:"},{"id":873,"title":"Atualizando o Ruby on Rails","heading":"10 Upgrading from Rails 3.0 to Rails 3.1","subheading":"10.4 config/environments/production.rb","content":"again, most changes below asset pipeline. read more about these asset pipeline guide."},{"id":874,"title":"Atualizando o Ruby on Rails","heading":"10 Upgrading from Rails 3.0 to Rails 3.1","subheading":"10.5 config/environments/test.rb","content":"help test performance with these additions your test environment:"},{"id":875,"title":"Atualizando o Ruby on Rails","heading":"10 Upgrading from Rails 3.0 to Rails 3.1","subheading":"10.6 config/initializers/wrap_parameters.rb","content":"this file with following contents, wish wrap parameters into nested hash. this default applications."},{"id":876,"title":"Atualizando o Ruby on Rails","heading":"10 Upgrading from Rails 3.0 to Rails 3.1","subheading":"10.7 config/initializers/session_store.rb","content":"need change your session something new, remove sessions: "},{"id":877,"title":"Atualizando o Ruby on Rails","heading":"10 Upgrading from Rails 3.0 to Rails 3.1","subheading":"10.8 Remove :cache and :concat options in asset helpers references in views","content":"você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":878,"title":"Using Rails for API-only Applications","heading":"1 O que é uma Aplicação API?","subheading":"1 O que é uma Aplicação API?","content":"tradicionalmente, quando pessoas dizem usam rails como \"api\", elas querem dizer fornecem acessível junto suas aplicações web. exemplo, github fornece você pode usar suas próprias aplicações personalizadas. advento frameworks client-side, mais desenvolvedores estão usando rails construir back-end compartilhado entre suas aplicações outros aplicativos nativos. exemplo, twitter pública aplicação web, site estático consome recursos json. usar rails gerar html comunica servidor através formulários links, muitos desenvolvedores estão tratando suas aplicações apenas como api, separadamente html javascript apenas consome json. esse guia aborda construção aplicativo rails fornece dados json cliente, incluindo frameworks client-side. primeira questão muitas pessoas quando estão pensando construir json utilizando rails \"utilizar rails retornar alguns json exagero? deveríamos usar algo como sinatra?\" apis muito simples, isso pode verdade. porém, mesmo aplicações muito html, parte lógica aplicação está fora camada visualização. razão maioria pessoas usar rails fornece conjunto padrões permitem desenvolvedores criarem rodarem rápido, fazer muitas decisões triviais. vamos olhada algumas coisas rails fornece \"direto caixa\" aplicáveis aplicações api. manipulado camada middleware: enquanto você poderia obviamente construir isto termos existir middleware rack, esta lista demonstra padrão pilha middleware rails fornece muito valor, mesmo quando você está \"gerando json\". controlado camada action pack: claro, processo boot rails também junta todos componentes registrados. exemplo, processo boot rails arquivo config/database.yml quando está configurando active record. versão resumida você pode pensado quais partes rails continuam aplicáveis mesmo você remover camada view, resposta maioria delas continua. você estiver construindo aplicação rails será api, você pode começar subconjunto mais limitado rails adicionar recursos, conforme necessário."},{"id":879,"title":"Using Rails for API-only Applications","heading":"3 Configuração básica","subheading":"3.1 Criando uma nova aplicação","content":"você pode gerar nova rails: esse comando fará três coisas principais você:"},{"id":880,"title":"Using Rails for API-only Applications","heading":"3 Configuração básica","subheading":"3.2 Alterando uma aplicação existente","content":"você deseja usar aplicação existe transformá-la api, siga passos seguir. config/application.rb adicione seguinte linha começo classe application: config/environments/development.rb, defina config.debug_exception_response_format configurar formato usado respostas quando ocorrer erro modo desenvolvimento. renderizar página html informações debugging, valor :default. renderizar informações debugging preservando formato resposta, valor :api. padrão, config.debug_exception_response_format está definido :api, quando config.api_only está valor true. finalmente, arquivo app/controllers/application_controller.rb, invés troque por: aplicação seguintes middlewares padrão: olhe sessão middleware interno guia rack mais informações. outros plugins, incluindo active record, podem adicionar middlewares adicionais. geral, esses middlewares agnósticos tipo aplicação você está construindo, isso sentido aplicação rails. você pode recuperar lista todos middlewares aplicação via:"},{"id":881,"title":"Using Rails for API-only Applications","heading":"4 Escolhendo o Middleware","subheading":"4.1 Usando o Middleware de Cache","content":"padrão, rails adicionar middleware fornece armazenamento cache baseado configuração aplicação (memcache padrão). isso significa cache embutido http pode confiar nisso. exemplo, usando metodo stale?: chamada stale? comparar cabeçalho if-modified-since requisição @post.updated_at. cabeçalho mais novo ultima modificação, esta ação retornar resposta \"304 modified\". contrário, renderizar resposta incluir cabeçalho last-modified nele. normalmente, este mecanismo usado base cliente. cache middleware permite compartilhar este mecanismo cache através clientes. podemos ativar cache cross-client chamada stale?: isto significa cache middleware guardar valor last-modified cache rails, adiciona cabeçalho if-modified-since qualquer requisição entrada mesma url. pense nisso como cache página usando semântica http."},{"id":882,"title":"Using Rails for API-only Applications","heading":"4 Escolhendo o Middleware","subheading":"4.2 Usando Rack::Sendfile","content":"quando você método send_file dentro controller rails, define cabeçalho x-sendfile. rack::sendfile responsável efetivamente enviar arquivo. servidor front-end suportar envio arquivos acelerado, rack::sendfile descarregar arquivo real enviando trabalho servidor front-end. você pode configurar nome cabeçalho servidor front-end este propósito usando config.action_dispatch.x_sendfile_header arquivo configuração ambiente apropriado. você pode aprender mais sobre como usar rack::sendfile front-ends populares documentação rack::sendfile. aqui estão alguns valores este cabeçalho alguns servidores populares, quando estes servidores configurados suportar envio arquivo acelerado. certifique configurar servidor suportar estas opções seguindo instruções documentação rack::sendfile."},{"id":883,"title":"Using Rails for API-only Applications","heading":"4 Escolhendo o Middleware","subheading":"4.3 Usando ActionDispatch::Request","content":"actiondispatch::request#params pegar parâmetros cliente formato json deixa-los disponiveis controller dentro params. usar isto, cliente precisar fazer requisição parâmetros json-encoded especificar content-type como application/json. aqui exemplo jquery: actiondispatch::request verá content-type seus parâmetros serão:"},{"id":884,"title":"Using Rails for API-only Applications","heading":"4 Escolhendo o Middleware","subheading":"4.4 Outros Middleware","content":"rails vários outros middlewares você pode querer usar aplicação api, especialmente seus clientes navegador: qualquer desses middlewares pode adicionado via:"},{"id":885,"title":"Using Rails for API-only Applications","heading":"4 Escolhendo o Middleware","subheading":"4.5 Removendo Middleware","content":"você quer usar middleware está incluído padrão conjunto middlewares api-only, você pode remove-lo com: tenha mente removendo estes middlewares remover suporte alguns recursos action controller. aplicação (utilizando actioncontroller::api) seguintes módulos controller padrão: outros plugins podem adicionar mais módulos. você pode obter lista todos módulos incluídos actioncontroller::api console rails:"},{"id":886,"title":"Using Rails for API-only Applications","heading":"5 Escolhendo os módulos do controller","subheading":"5.1 Adicionando Outros Módulos","content":"todos módulos action controller conhecem seus módulos dependentes. assim, você pode incluir qualquer módulo seus controllers, todas dependências serão incluídas configuradas também. alguns módulos comuns você pode querer adicionar: melhor lugar adicionar módulo applicationcontroller, você também pode adicionar módulos controllers individuais. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":887,"title":"Introdução às Engines","heading":"1 What are engines?","subheading":"1 What are engines?","content":"engines considered miniature applications that provide functionality their host applications. rails application actually just \"supercharged\" engine, with rails::application class inheriting behavior from rails::engine. therefore, engines applications thought almost same thing, just with subtle differences, you'll throughout this guide. engines applications also share common structure. engines also closely related plugins. share common directory structure, both generated using rails plugin generator. difference that engine considered \"full plugin\" rails indicated --full option that's passed generator command). we'll actually using --mountable option here, which includes features --full, then some. this guide will refer these \"full plugins\" simply \"engines\" throughout. engine plugin, plugin engine. engine that will created this guide will called \"blorgh\". this engine will provide blogging functionality host applications, allowing articles comments created. beginning this guide, will working solely within engine itself, later sections you'll hook into application. engines also isolated from their host applications. this means that application able have path provided routing helper such articles_path engine that also provides path also called articles_path, would clash. along with this, controllers, models table names also namespaced. you'll this later this guide. it's important keep mind times that application should always take precedence over engines. application object that final what goes environment. engine should only enhancing rather than changing drastically. demonstrations other engines, check devise, engine that provides authentication parent applications, thredded, engine that provides forum functionality. there's also spree which provides e-commerce platform, refinery cms, engine. finally, engines would have been possible without work james adam, piotr sarnacki, rails core team, number other people. ever meet them, don't forget thanks! generate engine, will need plugin generator pass options appropriate need. \"blorgh\" example, will need create \"mountable\" engine, running this command terminal: full list options plugin generator seen typing: --mountable option tells generator that want create \"mountable\" namespace-isolated engine. this generator will provide same skeleton structure would --full option. --full option tells generator that want create engine, including skeleton structure that provides following: --mountable option will --full option: additionally, --mountable option tells generator mount engine inside dummy testing application located test/dummy adding following dummy application's routes file test/dummy/config/routes.rb:"},{"id":888,"title":"Introdução às Engines","heading":"2 Generating an engine","subheading":"2.1 Inside an Engine","content":"root this brand engine's directory lives blorgh.gemspec file. when include engine into application later will with this line rails application's gemfile: don't forget bundle install usual. specifying within gemfile, bundler will load such, parsing this blorgh.gemspec file requiring file within directory called lib/blorgh.rb. this file requires blorgh/engine.rb file (located lib/blorgh/engine.rb) defines base module called blorgh. within lib/blorgh/engine.rb base class engine: inheriting from rails::engine class, this notifies rails that there's engine specified path, will correctly mount engine inside application, performing tasks such adding directory engine load path models, mailers, controllers, views. isolate_namespace method here deserves special notice. this call responsible isolating controllers, models, routes, other things into their namespace, away from similar components inside application. without this, there possibility that engine's components could \"leak\" into application, causing unwanted disruption, that important engine components could overridden similarly named things within application. examples such conflicts helpers. without calling isolate_namespace, engine's helpers would included application's controllers. what this isolation namespace means that model generated call rails model, such rails model article, won't called article, instead namespaced called blorgh::article. addition, table model namespaced, becoming blorgh_articles, rather than simply articles. similar model namespacing, controller called articlescontroller becomes blorgh::articlescontroller views that controller will app/views/articles, app/views/blorgh/articles instead. mailers namespaced well. finally, routes will also isolated within engine. this most important parts about namespacing, discussed later routes section this guide. inside directory standard assets, controllers, helpers, jobs, mailers, models, views directories that should familiar with from application. we'll look more into models future section, when we're writing engine. within app/assets directory, there images, javascripts stylesheets directories which, again, should familiar with their similarity application. difference here, however, that each directory contains sub-directory with engine name. because this engine going namespaced, assets should too. within app/controllers directory there blorgh directory that contains file called application_controller.rb. this file will provide common functionality controllers engine. blorgh directory where other controllers engine will placing them within this namespaced directory, prevent them from possibly clashing with identically-named controllers within other engines even within application. within app/helpers directory there blorgh directory that contains file called application_helper.rb. this file will provide common functionality helpers engine. blorgh directory where other helpers engine will placing them within this namespaced directory, prevent them from possibly clashing with identically-named route helpers within other engines even within application. within app/jobs directory there blorgh directory that contains file called application_job.rb. this file will provide common functionality jobs engine. blorgh directory where other jobs engine will placing them within this namespaced directory, prevent them from possibly clashing with identically-named jobs within other engines even within application. within app/mailers directory there blorgh directory that contains file called application_mailer.rb. this file will provide common functionality mailers engine. blorgh directory where other mailers engine will placing them within this namespaced directory, prevent them from possibly clashing with identically-named mailers within other engines even within application. lastly, app/views directory contains layouts folder, which contains file blorgh/application.html.erb. this file allows specify layout engine. this engine used stand-alone engine, then would customization layout this file, rather than application's app/views/layouts/application.html.erb file. don't want force layout users engine, then delete this file reference different layout controllers your engine. this directory contains file, bin/rails, which enables rails sub-commands generators just like would within application. this means that will able generate controllers models this engine very easily running commands like this: keep mind, course, that anything generated with these commands inside engine that isolate_namespace engine class will namespaced. test directory where tests engine will test engine, there cut-down version rails application embedded within test/dummy. this application will mount engine test/dummy/config/routes.rb file: this line mounts engine path /blorgh, which will make accessible through application only that path. inside test directory there test/integration directory, where integration tests engine should placed. other directories created test directory well. example, wish create test/models directory your model tests. engine that this guide covers provides submitting articles commenting functionality follows similar thread getting started guide, with some twists."},{"id":889,"title":"Introdução às Engines","heading":"3 Providing engine functionality","subheading":"3.1 Generating an Article Resource","content":"first thing generate blog engine article model related controller. quickly generate this, rails scaffold generator. this command will output this information: first thing that scaffold generator does invoke active_record generator, which generates migration model resource. note here, however, that migration called create_blorgh_articles rather than usual create_articles. this isolate_namespace method called blorgh::engine class's definition. model here also namespaced, being placed app/models/blorgh/article.rb rather than app/models/article.rb isolate_namespace call within engine class. next, test_unit generator invoked this model, generating model test test/models/blorgh/article_test.rb (rather than test/models/article_test.rb) fixture test/fixtures/blorgh/articles.yml (rather than test/fixtures/articles.yml). after that, line resource inserted into config/routes.rb file engine. this line simply resources :articles, turning config/routes.rb file engine into this: note here that routes drawn upon blorgh::engine object rather than yourapp::application class. this that engine routes confined engine itself mounted specific point shown test directory section. also causes engine's routes isolated from those routes that within application. routes section this guide describes detail. next, scaffold_controller generator invoked, generating controller called blorgh::articlescontroller app/controllers/blorgh/articles_controller.rb) related views app/views/blorgh/articles. this generator also generates tests controller (test/controllers/blorgh/articles_controller_test.rb test/system/blorgh/articles_test.rb) helper (app/helpers/blorgh/articles_helper.rb). everything this generator created neatly namespaced. controller's class defined within blorgh module: helper inside app/helpers/blorgh/articles_helper.rb also namespaced: this helps prevent conflicts with other engine application that have article resource well. finally, assets this resource generated file: app/assets/stylesheets/blorgh/articles.css. you'll these little later. what engine running rails db:migrate root engine migration generated scaffold generator, then running rails server test/dummy. when open http://localhost:3000/blorgh/articles will default scaffold that been generated. click around! you've just generated your first engine's first functions. you'd rather play around console, rails console will also work just like rails application. remember: article model namespaced, reference must call blorgh::article. final thing that articles resource this engine should root engine. whenever someone goes root path where engine mounted, they should shown list articles. this made happen this line inserted into config/routes.rb file inside engine: people will only need root engine articles, rather than visiting /articles. this means that instead http://localhost:3000/blorgh/articles, only need http://localhost:3000/blorgh now."},{"id":890,"title":"Introdução às Engines","heading":"3 Providing engine functionality","subheading":"3.2 Generating a Comments Resource","content":"that engine create articles, only makes sense commenting functionality well. this, you'll need generate comment model, comment controller, then modify articles scaffold display comments allow people create ones. from application root, model generator. tell generate comment model, with related table having columns: article_id integer text text column. this will output following: this generator call will generate just necessary model files needs, namespacing files under blorgh directory creating model class called blorgh::comment. migration create blorgh_comments table: show comments article, edit app/views/blorgh/articles/show.html.erb this line before \"edit\" link: this line will require there has_many association comments defined blorgh::article model, which there isn't right now. define one, open app/models/blorgh/article.rb this line into model: turning model into this: next, there needs form that comments created article. this, this line underneath call render @article.comments app/views/blorgh/articles/show.html.erb: next, partial that this line will render needs exist. create directory app/views/blorgh/comments file called _form.html.erb which this content create required partial: when this form submitted, going attempt perform post request route /articles/:article_id/comments within engine. this route doesn't exist moment, created changing resources :articles line inside config/routes.rb into these lines: this creates nested route comments, which what form requires. route exists, controller that this route goes does not. create this command from application root: this will generate following things: form will making post request /articles/:article_id/comments, which will correspond with create action blorgh::commentscontroller. this action needs created, which done putting following lines inside class definition app/controllers/blorgh/comments_controller.rb: this final step required comment form working. displaying comments, however, quite right yet. were create comment right now, would this error: engine unable find partial required rendering comments. rails looks first application's (test/dummy) app/views directory then engine's app/views directory. when can't find will throw this error. engine knows look blorgh/comments/_comment because model object receiving from blorgh::comment class. this partial will responsible rendering just comment text, now. create file app/views/blorgh/comments/_comment.html.erb this line inside comment_counter local variable given render @article.comments call, which will define automatically increment counter iterates through each comment. it's used this example display small number next each comment when it's created. that completes comment function blogging engine. it's time within application. using engine within application very easy. this section covers mount engine into application initial setup required, well linking engine user class provided application provide ownership articles comments within engine."},{"id":891,"title":"Introdução às Engines","heading":"4 Hooking Into an Application","subheading":"4.1 Mounting the Engine","content":"first, engine needs specified inside application's gemfile. there isn't application handy test this generate using rails command outside engine directory like this: usually, specifying engine inside gemfile would done specifying normal, everyday gem. however, because developing blorgh engine your local machine, will need specify :path option your gemfile: then bundle install gem. described earlier, placing gemfile will loaded when rails loaded. will first require lib/blorgh.rb from engine, then lib/blorgh/engine.rb, which file that defines major pieces functionality engine. make engine's functionality accessible from within application, needs mounted that application's config/routes.rb file: this line will mount engine /blog application. making accessible http://localhost:3000/blog when application runs with rails server."},{"id":892,"title":"Introdução às Engines","heading":"4 Hooking Into an Application","subheading":"4.2 Engine setup","content":"engine contains migrations blorgh_articles blorgh_comments table which need created application's database that engine's models query them correctly. copy these migrations into application following command from application's root: have multiple engines that need migrations copied over, railties:install:migrations instead: this command, when first time, will copy over migrations from engine. when next time, will only copy over migrations that haven't been copied over already. first this command will output something such this: first timestamp ([timestamp_1]) will current time, second timestamp ([timestamp_2]) will current time plus second. reason this that migrations engine after existing migrations application. these migrations within context application, simply rails db:migrate. when accessing engine through http://localhost:3000/blog, articles will empty. this because table created inside application different from created within engine. ahead, play around with newly mounted engine. you'll find that it's same when only engine. would like migrations only from engine, specifying scope: this useful want revert engine's migrations before removing revert migrations from blorgh engine code such"},{"id":893,"title":"Introdução às Engines","heading":"4 Hooking Into an Application","subheading":"4.3 Using a Class Provided by the Application","content":"when engine created, want specific classes from application provide links between pieces engine pieces application. case blorgh engine, making articles comments have authors would make sense. typical application might have user class that would used represent authors article comment. there could case where application calls this class something different, such person. this reason, engine should hardcode associations specifically user class. keep simple this case, application will have class called user that represents users application (we'll into making this configurable further on). generated using this command inside application: rails db:migrate command needs here ensure that application users table future use. also, keep simple, articles form will have text field called author_name, where users elect their name. engine will then take this name either create user object from find that already that name. engine will then associate article with found created user object. first, author_name text field needs added app/views/blorgh/articles/_form.html.erb partial inside engine. this added above title field with this code: next, need update blorgh::articlecontroller#article_params method permit form parameter: blorgh::article model should then have some code convert author_name field into actual user object associate that article's author before article saved. will also need have attr_accessor this field, that setter getter methods defined this, you'll need attr_accessor author_name, association author before_validation call into app/models/blorgh/article.rb. author association will hard-coded user class time being. representing author association's object with user class, link established between engine application. there needs associating records blorgh_articles table with records users table. because association called author, there should author_id column added blorgh_articles table. generate this column, this command within engine: this migration will need application. that, must first copied using this command: notice that only migration copied over here. this because first migrations were copied over first time this command run. migration using: with pieces place, action will take place that will associate author represented record users table with article, represented blorgh_articles table from engine. finally, author's name should displayed article's page. this code above \"title\" output inside app/views/blorgh/articles/show.html.erb: because rails controllers generally share code things like authentication accessing session variables, they inherit from applicationcontroller default. rails engines, however scoped independently from main application, each engine gets scoped applicationcontroller. this namespace prevents code collisions, often engine controllers need access methods main application's applicationcontroller. easy provide this access change engine's scoped applicationcontroller inherit from main application's applicationcontroller. blorgh engine this would done changing app/controllers/blorgh/application_controller.rb look like: default, engine's controllers inherit from blorgh::applicationcontroller. after making this change they will have access main application's applicationcontroller, though they were part main application. this change does require that engine from rails application that applicationcontroller."},{"id":894,"title":"Introdução às Engines","heading":"4 Hooking Into an Application","subheading":"4.4 Configuring an Engine","content":"this section covers make user class configurable, followed general configuration tips engine. next step make class that represents user application customizable engine. this because that class always user, previously explained. make this setting customizable, engine will have configuration setting called author_class that will used specify which class represents users inside application. define this configuration setting, should mattr_accessor inside blorgh module engine. this line lib/blorgh.rb inside engine: this method works like siblings, attr_accessor cattr_accessor, provides setter getter method module with specified name. must referenced using blorgh.author_class. next step switch blorgh::article model over this setting. change belongs_to association inside this model (app/models/blorgh/article.rb) this: set_author method blorgh::article model should also this class: save having call constantize author_class result time, could instead just override author_class getter method inside blorgh module lib/blorgh.rb file always call constantize saved value before returning result: this would then turn above code set_author into this: resulting something little shorter, more implicit behavior. author_class method should always return class object. since changed author_class method return class instead string, must also modify belongs_to definition blorgh::article model: this configuration setting within application, initializer should used. using initializer, configuration will before application starts calls engine's models, which depend this configuration setting existing. create initializer config/initializers/blorgh.rb inside application where blorgh engine installed this content ahead create article. will that works exactly same before, except this time engine using configuration setting config/initializers/blorgh.rb learn what class there strict dependencies what class only what class must engine simply requires this class define find_or_create_by method which returns object that class, associated with article when it's created. this object, course, should have some sort identifier which referenced. within engine, there come time where wish things such initializers, internationalization, other configuration options. great news that these things entirely possible, because rails engine shares much same functionality rails application. fact, rails application's functionality actually superset what provided engines! wish initializer code that should before engine loaded place config/initializers folder. this directory's functionality explained initializers section configuring guide, works precisely same config/initializers directory inside application. same thing goes want standard initializer. locales, simply place locale files config/locales directory, just like would application. when engine generated, there smaller dummy application created inside test/dummy. this application used mounting point engine, make testing engine extremely simple. extend this application generating controllers, models, views from within directory, then those test your engine. test directory should treated like typical rails testing environment, allowing unit, functional, integration tests."},{"id":895,"title":"Introdução às Engines","heading":"5 Testing an engine","subheading":"5.1 Functional Tests","content":"matter worth taking into consideration when writing functional tests that tests going running application test/dummy application rather than your engine. this setup testing environment; engine needs application host testing main functionality, especially controllers. this means that were make typical controller controller's functional test like this: function correctly. this because application doesn't know route these requests engine unless explicitly tell how. this, must @routes instance variable engine's route your setup code: this tells application that still want perform request index action this controller, want engine's route there, rather than application's one. this also ensures that engine's helpers will work expected your tests. this section explains and/or override engine functionality main rails application."},{"id":896,"title":"Introdução às Engines","heading":"6 Improving engine functionality","subheading":"6.1 Overriding Models and Controllers","content":"engine model controller classes extended open classing them main rails application (since model controller classes just ruby classes that inherit rails specific functionality). open classing engine class redefines main application. simple class modifications, class#class_eval. complex class modifications, consider using activesupport::concern. because these overrides referenced your rails application itself, rails' autoloading system will kick load your overrides. this means that need require them yourself. here some sample code this: this doesn't apply just overrides, anything that engine that isn't referenced your main application. adding article#time_since_created: overriding article#summary: using class#class_eval great simple adjustments, more complex class modifications, might want consider using activesupport::concern. activesupport::concern manages load order interlinked dependent modules classes time allowing significantly modularize your code. adding article#time_since_created overriding article#summary:"},{"id":897,"title":"Introdução às Engines","heading":"6 Improving engine functionality","subheading":"6.2 Overriding Views","content":"when rails looks view render, will first look app/views directory application. cannot find view there, will check app/views directories engines that have this directory. when application asked render view blorgh::articlescontroller's index action, will first look path app/views/blorgh/articles/index.html.erb within application. cannot find will look inside engine. override this view application simply creating file app/views/blorgh/articles/index.html.erb. then completely change what this view would normally output. this creating file app/views/blorgh/articles/index.html.erb this content"},{"id":898,"title":"Introdução às Engines","heading":"6 Improving engine functionality","subheading":"6.3 Routes","content":"routes inside engine isolated from application default. this done isolate_namespace call inside engine class. this essentially means that application engines have identically named routes they will clash. routes inside engine drawn engine class within config/routes.rb, like this: having isolated routes such this, wish link area engine from within application, will need engine's routing proxy method. calls normal routing methods such articles_path going undesired locations both application engine have such helper defined. instance, following example would application's articles_path that template rendered from application, engine's articles_path rendered from engine: make this route always engine's articles_path routing helper method, must call method routing proxy method that shares same name engine. wish reference application inside engine similar way, main_app helper: were this inside engine, would always application's root. were leave main_app \"routing proxy\" method call, could potentially engine's application's root, depending where called from. template rendered from within engine attempts application's routing helper methods, result undefined method call. encounter such issue, ensure that you're attempting call application's routing methods without main_app prefix from within engine."},{"id":899,"title":"Introdução às Engines","heading":"6 Improving engine functionality","subheading":"6.4 Assets","content":"assets within engine work identical full application. because engine class inherits from rails::engine, application will know look assets engine's app/assets lib/assets directories. like other components engine, assets should namespaced. this means that have asset called style.css, should placed app/assets/stylesheets/[engine name]/style.css, rather than app/assets/stylesheets/style.css. this asset isn't namespaced, there possibility that host application could have asset named identically, which case application's asset would take precedence engine's would ignored. imagine that have asset located app/assets/stylesheets/blorgh/style.css include this asset inside application, just stylesheet_link_tag reference asset were inside engine: also specify these assets dependencies other assets using asset pipeline require statements processed files:"},{"id":900,"title":"Introdução às Engines","heading":"6 Improving engine functionality","subheading":"6.5 Separate Assets & Precompiling","content":"there some situations where your engine's assets required host application. example, that you've created admin functionality that only exists your engine. this case, host application doesn't need require admin.css admin.js. only gem's admin layout needs these assets. doesn't make sense host include \"blorgh/admin.css\" stylesheets. this situation, should explicitly define these assets precompilation. this tells sprockets your engine assets when rails assets:precompile triggered. define assets precompilation engine.rb: more information, read asset pipeline guide."},{"id":901,"title":"Introdução às Engines","heading":"6 Improving engine functionality","subheading":"6.6 Other Gem Dependencies","content":"dependencies inside engine should specified inside .gemspec file root engine. reason that engine installed gem. dependencies were specified inside gemfile, these would recognized traditional install they would installed, causing engine malfunction. specify dependency that should installed with engine during traditional install, specify inside gem::specification block inside .gemspec file engine: specify dependency that should only installed development dependency application, specify like this: both kinds dependencies will installed when bundle install inside application. development dependencies will only used when development tests engine running. note that want immediately require dependencies when engine required, should require them before engine's initialization. example: active support ruby rails component responsible providing ruby language extensions, utilities, other transversal utilities. rails code often referenced load application. rails responsible load order these frameworks, when load frameworks, such activerecord::base, prematurely violating implicit contract your application with rails. moreover, loading code such activerecord::base boot your application loading entire frameworks which slow down your boot time could cause conflicts with load order boot your application. load hooks that allow hook into this initialization process without violating load contract with rails. this will also mitigate boot performance degradation avoid conflicts. since ruby dynamic language, some code will cause different rails frameworks load. take this snippet instance: this snippet means that when this file loaded, will encounter activerecord::base. this encounter causes ruby look definition that constant will require this causes entire active record framework loaded boot. activesupport.on_load mechanism that used defer loading code until actually needed. snippet above changed this snippet will only include myactiverecordhelper when activerecord::base loaded. rails framework these hooks called when specific library loaded. example, when actioncontroller::base loaded, :action_controller_base hook called. this means that activesupport.on_load calls with :action_controller_base hooks will called context actioncontroller::base (that means self will actioncontroller::base). modifying code generally straightforward. have line code that refers rails framework such activerecord::base wrap that code on_load hook."},{"id":902,"title":"Introdução às Engines","heading":"10 Modifying code to use on_load hooks","subheading":"10.1 Example 1","content":"becomes"},{"id":903,"title":"Introdução às Engines","heading":"10 Modifying code to use on_load hooks","subheading":"10.2 Example 2","content":"becomes"},{"id":904,"title":"Introdução às Engines","heading":"10 Modifying code to use on_load hooks","subheading":"10.3 Example 3","content":"becomes these hooks your code. hook into initialization process following classes available hook. these available configuration hooks. they hook into particular framework, instead they context entire application."},{"id":905,"title":"Introdução às Engines","heading":"12 Configuration hooks","subheading":"12.1 Example","content":"você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":906,"title":"Criando e Personalizando Geradores Rails e Templates","heading":"1 First Contact","subheading":"1 First Contact","content":"when create application using rails command, fact using rails generator. after that, list available generators just invoking rails generate: will list generators that comes with rails. need detailed description helper generator, example, simply since rails 3.0, generators built thor. thor provides powerful options parsing great manipulating files. instance, let's build generator that creates initializer file named initializer.rb inside config/initializers. first step create file lib/generators/initializer_generator.rb with following content: generator quite simple: inherits from rails::generators::base method definition. when generator invoked, each public method generator executed sequentially order that defined. finally, invoke create_file method that will create file given destination with given content. familiar with rails application templates api, you'll feel right home with generators api. invoke generator, just need before let's brand generator description: rails usually able generate good descriptions generator namespaced, activerecord::generators::modelgenerator, this particular case. solve this problem ways. first calling desc inside generator: description invoking --help generator. second description creating file named usage same directory generator. going that next step. generators themselves have generator: this generator just created: first, notice that inheriting from rails::generators::namedbase instead rails::generators::base. this means that generator expects least argument, which will name initializer, will available code variable name. that invoking description this generator (don't forget delete generator file): also that generator class method called source_root. this method points where generator templates will placed, any, default points created directory lib/generators/initializer/templates. order understand what generator template means, let's create file lib/generators/initializer/templates/initializer.rb with following content: let's change generator copy this template when invoked: let's execute generator: that initializer named core_extensions created config/initializers/core_extensions.rb with contents template. that means that copy_file copied file source root destination path gave. method file_name automatically created when inherit from rails::generators::namedbase. methods that available generators covered final section this guide. when rails generate initializer core_extensions rails requires these files turn until found: none found error message. rails generators flexible enough customize scaffolding. they configured config/application.rb, these some defaults: before customize workflow, let's first what scaffold looks like: looking this output, it's easy understand generators work rails above. scaffold generator doesn't actually generate anything, just invokes others work. this allows add/replace/remove those invocations. instance, scaffold generator invokes scaffold_controller generator, which invokes erb, test_unit helper generators. since each generator single responsibility, they easy reuse, avoiding code duplication. want avoid generating default app/assets/stylesheets/scaffolds.scss file when scaffolding resource disable scaffold_stylesheet: next customization workflow will stop generating stylesheet test fixture files scaffolds altogether. achieve that changing configuration following: generate another resource with scaffold generator, that stylesheet, javascript, fixture files created anymore. want customize further, example datamapper rspec instead active record testunit, it's just matter adding their gems your application configuring your generators. demonstrate this, going create helper generator that simply adds some instance variable readers. first, create generator within rails namespace, this where rails searches generators used hooks: after that, delete both templates directory source_root class method call from generator, because going need them. method below, generator looks like following: generator creating helper products: will generate following helper file app/helpers: which what expected. tell scaffold helper generator editing config/application.rb once again: action when invoking generator: notice output that helper invoked instead rails default. however thing missing, which tests generator that, going reuse helpers test generators. since rails 3.0, this easy hooks concept. helper does need focused specific test framework, simply provide hook test framework just needs implement this hook order compatible. that, change generator this way: now, when helper generator invoked testunit configured test framework, will invoke both rails::testunitgenerator testunit::myhelpergenerator. since none those defined, tell generator invoke testunit::generators::helpergenerator instead, which defined since it's rails generator. that, just need add: re-run scaffold another resource generating tests well! step above simply wanted line generated helper, without adding extra functionality. there simpler that, it's replacing templates already existing generators, that case rails::generators::helpergenerator. rails above, generators don't just look source root templates, they also search templates other paths. them lib/templates. since want customize rails::generators::helpergenerator, that simply making template copy inside lib/templates/rails/helper with name helper.rb. let's create that file with following content: revert last change config/application.rb: generate another resource, that exactly same result! this useful want customize your scaffold templates and/or layout just creating edit.html.erb, index.html.erb inside lib/templates/erb/scaffold. scaffold templates rails frequently tags; these tags need escaped that generated output valid code. example, following escaped would needed template (note extra %)... ...to generate following output: last feature about generators which quite useful plugin generators fallbacks. example, imagine that want feature testunit like shoulda does. since testunit already implements generators required rails shoulda just wants overwrite part there need shoulda reimplement some generators again, simply tell rails testunit generator none found under shoulda namespace. easily simulate this behavior changing config/application.rb once again: now, create comment scaffold, will that shoulda generators being invoked, end, they just falling back testunit generators: fallbacks allow your generators have single responsibility, increasing code reuse reducing amount duplication. that you've seen generators used inside application, know they also used generate applications too? this kind generator referred \"template\". this brief overview templates api. detailed documentation rails application templates guide. above template specify that application relies rspec-rails cucumber-rails these will added test group gemfile. then pose question user about whether they would like install devise. user replies \"yes\" this question, then template will devise gemfile outside group then runs devise:install generator. this template then takes users input runs devise generator, with user's answer from last question being passed this generator. imagine that this template file called template.rb. modify outcome rails command using option passing filename: this command will generate thud application, then apply template generated output. templates don't have stored local system, option also supports online templates: whilst final section this guide doesn't cover generate most awesome template known man, will take through methods available your disposal that develop yourself. these same methods also available generators. rails generators easily modified accept custom command line arguments. this functionality comes from thor: generator invoked follows: command line arguments accessed through options method inside generator class. e.g: following methods available both generators templates rails."},{"id":907,"title":"Criando e Personalizando Geradores Rails e Templates","heading":"10 Generator methods","subheading":"10.1 gem","content":"specifies dependency application. available options are: additional options passed this method line: above code will following line into gemfile:"},{"id":908,"title":"Criando e Personalizando Geradores Rails e Templates","heading":"10 Generator methods","subheading":"10.2 gem_group","content":"wraps entries inside group:"},{"id":909,"title":"Criando e Personalizando Geradores Rails e Templates","heading":"10 Generator methods","subheading":"10.3 add_source","content":"adds specified source gemfile: this method also takes block:"},{"id":910,"title":"Criando e Personalizando Geradores Rails e Templates","heading":"10 Generator methods","subheading":"10.4 inject_into_file","content":"injects block code into defined position your file."},{"id":911,"title":"Criando e Personalizando Geradores Rails e Templates","heading":"10 Generator methods","subheading":"10.5 gsub_file","content":"replaces text inside file. regular expressions used make this method more precise. also append_file prepend_file same place code beginning file respectively."},{"id":912,"title":"Criando e Personalizando Geradores Rails e Templates","heading":"10 Generator methods","subheading":"10.6 application","content":"adds line config/application.rb directly after application class definition. this method also take block: available options are:"},{"id":913,"title":"Criando e Personalizando Geradores Rails e Templates","heading":"10 Generator methods","subheading":"10.7 git","content":"runs specified command: values hash here being arguments options passed specific command. final example shown here, multiple commands specified time, order their running guaranteed same order that they were specified"},{"id":914,"title":"Criando e Personalizando Geradores Rails e Templates","heading":"10 Generator methods","subheading":"10.8 vendor","content":"places file into vendor which contains specified code. this method also takes block:"},{"id":915,"title":"Criando e Personalizando Geradores Rails e Templates","heading":"10 Generator methods","subheading":"10.9 lib","content":"places file into which contains specified code. this method also takes block:"},{"id":916,"title":"Criando e Personalizando Geradores Rails e Templates","heading":"10 Generator methods","subheading":"10.10 rakefile","content":"creates rake file lib/tasks directory application. this method also takes block:"},{"id":917,"title":"Criando e Personalizando Geradores Rails e Templates","heading":"10 Generator methods","subheading":"10.11 initializer","content":"creates initializer config/initializers directory application: this method also takes block, expected return string:"},{"id":918,"title":"Criando e Personalizando Geradores Rails e Templates","heading":"10 Generator methods","subheading":"10.12 generate","content":"runs specified generator where first argument generator name remaining arguments passed directly generator."},{"id":919,"title":"Criando e Personalizando Geradores Rails e Templates","heading":"10 Generator methods","subheading":"10.13 rake","content":"runs specified rake task. available options are:"},{"id":920,"title":"Criando e Personalizando Geradores Rails e Templates","heading":"10 Generator methods","subheading":"10.14 route","content":"adds text config/routes.rb file:"},{"id":921,"title":"Criando e Personalizando Geradores Rails e Templates","heading":"10 Generator methods","subheading":"10.15 readme","content":"output contents file template's source_path, usually readme. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":922,"title":"The Rails Initialization Process","heading":null,"subheading":null,"content":"this guide goes through every method call that required boot ruby rails stack default rails application, explaining each part detail along way. this guide, will focusing what happens when execute rails server boot your app. let's start boot initialize app. rails application usually started running rails console rails server."},{"id":923,"title":"The Rails Initialization Process","heading":"1 Launch!","subheading":"1.1 railties/exe/rails","content":"rails command rails server ruby executable your load path. this executable contains following lines: this command rails console, would that this loads railties/exe/rails. part file railties/exe/rails following code: file railties/lib/rails/cli turn calls rails::apploader.exec_app."},{"id":924,"title":"The Rails Initialization Process","heading":"1 Launch!","subheading":"1.2 railties/lib/rails/app_loader.rb","content":"primary goal function exec_app execute your app's bin/rails. current directory does have bin/rails, will navigate upwards until finds bin/rails executable. thus invoke rails command from anywhere inside rails application. rails server equivalent following command executed:"},{"id":925,"title":"The Rails Initialization Process","heading":"1 Launch!","subheading":"1.3 bin/rails","content":"this file follows: app_path constant will used later rails/commands. config/boot file referenced here config/boot.rb file application which responsible loading bundler setting"},{"id":926,"title":"The Rails Initialization Process","heading":"1 Launch!","subheading":"1.4 config/boot.rb","content":"config/boot.rb contains: standard rails application, there's gemfile which declares dependencies application. config/boot.rb sets env['bundle_gemfile'] location this file. gemfile exists, then bundler/setup required. require used bundler configure load path your gemfile's dependencies. standard rails application depends several gems, specifically:"},{"id":927,"title":"The Rails Initialization Process","heading":"1 Launch!","subheading":"1.5 rails/commands.rb","content":"once config/boot.rb finished, next file that required rails/commands, which helps expanding aliases. current case, argv array simply contains server which will passed over: used rather than server, rails would have used aliases defined here find matching command."},{"id":928,"title":"The Rails Initialization Process","heading":"1 Launch!","subheading":"1.6 rails/command.rb","content":"when types rails command, invoke tries lookup command given namespace executes command found. rails doesn't recognize command, hands reins over rake task same name. shown, rails::command displays help output automatically args empty. with server command, rails will further following code: this file will change into rails root directory path directories from app_path which points config/application.rb), only config.ru file isn't found. this then starts rails::server class."},{"id":929,"title":"The Rails Initialization Process","heading":"1 Launch!","subheading":"1.7 actionpack/lib/action_dispatch.rb","content":"action dispatch routing component rails framework. adds functionality like routing, session, common middlewares."},{"id":930,"title":"The Rails Initialization Process","heading":"1 Launch!","subheading":"1.8 rails/commands/server/server_command.rb","content":"rails::server class defined this file inheriting from rack::server. when rails::server.new called, this calls initialize method rails/commands/server/server_command.rb: firstly, super called which calls initialize method rack::server."},{"id":931,"title":"The Rails Initialization Process","heading":"1 Launch!","subheading":"1.9 Rack: lib/rack/server.rb","content":"rack::server responsible providing common server interface rack-based applications, which rails part initialize method rack::server simply sets couple variables: this case, options will nothing happens this method. after super finished rack::server, jump back rails/commands/server/server_command.rb. this point, set_environment called within context rails::server object this method doesn't appear much first glance: fact, options method here does quite lot. this method defined rack::server like this: then parse_options defined like this: with default_options this: there request_method skip over that line. next line merges options from opt_parser which defined plainly rack::server: class defined rack::server, overwritten rails::server take different arguments. parse! method looks like this: this method will keys options which rails will then able determine server should run. after initialize finished, jump back into server command where app_path (which earlier) required."},{"id":932,"title":"The Rails Initialization Process","heading":"1 Launch!","subheading":"1.10 config/application","content":"when require app_path executed, config/application.rb loaded (recall that app_path defined bin/rails). this file exists your application it's free change based your needs."},{"id":933,"title":"The Rails Initialization Process","heading":"1 Launch!","subheading":"1.11 Rails::Server#start","content":"after config/application loaded, server.start called. this method defined like this: this where first output rails initialization happens. this method creates trap signals, ctrl-c server, will exit process. from code here, will create tmp/cache, tmp/pids, tmp/sockets directories. then enables caching development rails server called with --dev-caching. finally, calls wrapped_app which responsible creating rack app, before creating assigning instance activesupport::logger. super method will call rack::server.start which begins definition like this: interesting part rails last line, server.run. here encounter wrapped_app method again, which this time we're going explore more (even though executed before, thus memoized now). method here defined like options[:config] value defaults config.ru which contains this: rack::builder.parse_file method here takes content from this config.ru file parses using this code: initialize method rack::builder will take block here execute within instance rack::builder. this where majority initialization process rails happens. require line config/environment.rb config.ru first run:"},{"id":934,"title":"The Rails Initialization Process","heading":"1 Launch!","subheading":"1.12 config/environment.rb","content":"this file common file required config.ru (rails server) passenger. this where these ways server meet; everything before this point been rack rails setup. this file begins with requiring config/application.rb:"},{"id":935,"title":"The Rails Initialization Process","heading":"1 Launch!","subheading":"1.13 config/application.rb","content":"this file requires config/boot.rb: only hasn't been required before, which would case rails server wouldn't case with passenger. then begins! next line config/application.rb"},{"id":936,"title":"The Rails Initialization Process","heading":"2 Loading Rails","subheading":"2.1 railties/lib/rails/all.rb","content":"this file responsible requiring individual frameworks rails: this where rails frameworks loaded thus made available application. won't into detail what happens inside each those frameworks, you're encouraged explore them your own. now, just keep mind that common functionality like rails engines, i18n rails configuration being defined here."},{"id":937,"title":"The Rails Initialization Process","heading":"2 Loading Rails","subheading":"2.2 Back to config/environment.rb","content":"rest config/application.rb defines configuration rails::application which will used once application fully initialized. when config/application.rb finished loading rails defined application namespace, back config/environment.rb. here, application initialized with rails.application.initialize!, which defined rails/application.rb."},{"id":938,"title":"The Rails Initialization Process","heading":"2 Loading Rails","subheading":"2.3 railties/lib/rails/application.rb","content":"initialize! method looks like this: see, only initialize once. initializers through run_initializers method which defined railties/lib/rails/initializable.rb: run_initializers code itself tricky. what rails doing here traversing class ancestors looking those that respond initializers method. then sorts ancestors name, runs them. example, engine class will make engines available providing initializers method them. rails::application class, defined railties/lib/rails/application.rb defines bootstrap, railtie, finisher initializers. bootstrap initializers prepare application (like initializing logger) while finisher initializers (like building middleware stack) last. railtie initializers initializers which have been defined rails::application itself between bootstrap finishers. after this done back rack::server."},{"id":939,"title":"The Rails Initialization Process","heading":"2 Loading Rails","subheading":"2.4 Rack: lib/rack/server.rb","content":"last time left when method being defined: this point rails itself middleware), what happens next rack will call provided middlewares: remember, build_app called wrapped_app) last line server#start. here's looked like when left: this point, implementation server.run will depend server you're using. example, were using puma, here's what method would look like: won't into server configuration itself, this last piece journey rails initialization process. this high level overview will help understand when your code executed how, overall become better rails developer. still want know more, rails source code itself probably best place next. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":940,"title":"Orientações para Documentação de API","heading":"1 RDoc","subheading":"1 RDoc","content":"documentação rails gerada rdoc. gerá-la, certifique-se você está diretório raiz rails, execute bundle install seguida: arquivos html gerados podem encontrados diretório ./doc/rdoc. favor consulte documentação rdoc ajuda marcação, leve consideração esses direcionamentos adicionais. write simple, declarative sentences. brevity plus: point. write present tense: \"returns hash that...\", rather than \"returned hash that...\" \"will return hash that...\". start comments upper case. follow regular punctuation rules: communicate reader current doing things, both explicitly implicitly. idioms recommended edge. reorder sections emphasize favored approaches needed, etc. documentation should model best practices canonical, modern rails usage. documentation concise comprehensive. explore document edge cases. what happens module anonymous? what collection empty? what argument nil? proper names rails components have space between words, like \"active support\". activerecord ruby module, whereas active record orm. rails documentation should consistently refer rails components their proper name, your next blog post presentation remember this tidbit take into account that'd phenomenal. spell names correctly: arel, minitest, rspec, html, mysql, javascript, erb. when doubt, please have look some authoritative source like their official documentation. article \"an\" \"sql\", statement\". also sqlite database\". prefer wordings that avoid \"you\"s \"your\"s. example, instead this style: that said, when using pronouns reference hypothetical person, such user with session cookie\", gender neutral pronouns (they/their/them) should used. instead please american english (color, center, modularize, etc). list american british english spelling differences here. please oxford comma (\"red, white, blue\", instead \"red, white blue\"). choose meaningful examples that depict cover basics well interesting points gotchas. spaces indent chunks code--that markup purposes, spaces with respect left margin. examples themselves should rails coding conventions. short docs need explicit \"examples\" label introduce snippets; they just follow paragraphs: other hand, chunks structured documentation have separate \"examples\" section: results expressions follow them introduced vertically aligned: line long, comment placed next line: avoid using printing methods like puts that purpose. other hand, regular comments arrow: predicates flags prefer documenting boolean semantics over exact values. when \"true\" \"false\" used defined ruby regular font. singletons true false need fixed-width font. please avoid terms like \"truthy\", ruby defines what true false language, thus those words have technical meaning need substitutes. rule thumb, document singletons unless absolutely necessary. that prevents artificial constructs like ternaries, allows refactors, code does need rely exact values returned methods being called implementation. example: user does need know which actual default value flag, only document boolean semantics. example with predicate: careful commit particular value, method predicate semantics, that's enough. rule thumb, filenames relative application root:"},{"id":941,"title":"Orientações para Documentação de API","heading":"8 Fonts","subheading":"8.1 Fixed-width Font","content":"fixed-width fonts for: quickly test rdoc output with following command:"},{"id":942,"title":"Orientações para Documentação de API","heading":"8 Fonts","subheading":"8.2 Regular Font","content":"when \"true\" \"false\" english words rather than ruby keywords regular font: lists options, parameters, etc. hyphen between item description (reads better than colon because normally options symbols): description starts upper case ends with full stop-it's standard english. methods created with (module|class)_eval(string) have comment their side with instance generated code. that comment spaces away from template: resulting lines wide, columns more, comment above call: when writing documentation rails, it's important understand difference between public user-facing internal api. rails, like most libraries, uses private keyword from ruby defining internal api. however, public follows slightly different convention. instead assuming public methods designed user consumption, rails uses :nodoc: directive annotate these kinds methods internal api. this means that there methods rails with public visibility that aren't meant user consumption. example this activerecord::core::classmethods#arel_table: thought, \"this method looks like public class method activerecord::core\", were right. actually rails team doesn't want users rely this method. they mark :nodoc: it's removed from public documentation. reasoning behind this allow team change these methods according their internal needs across releases they fit. name this method could change, return value, this entire class disappear; there's guarantee shouldn't depend this your plugins applications. otherwise, risk your breaking when upgrade newer release rails. contributor, it's important think about whether this meant end-user consumption. rails team committed making breaking changes public across releases without going through full deprecation cycle. it's recommended that :nodoc: your internal methods/classes unless they're already private (meaning visibility), which case it's internal default. once stabilizes visibility change, changing public much harder backwards compatibility. class module marked with :nodoc: indicate that methods internal should never used directly. summarize, rails team uses :nodoc: mark publicly visible methods classes internal use; changes visibility should considered carefully discussed over pull request first. when documenting parts rails api, it's important remember pieces that into rails stack. this means that behavior change depending scope context method class you're trying document. various places there different behavior when take entire stack into account, such example actionview::helpers::assettaghelper#image_tag: although default behavior #image_tag always return /images/icon.png, take into account full rails stack (including asset pipeline) result seen above. we're only concerned with behavior experienced when using full default rails stack. this case, want document behavior framework, just this specific method. have question rails team handles certain api, don't hesitate open ticket send patch issue tracker. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":943,"title":"Ruby on Rails 5.1 Release Notes","heading":"1 Upgrading to Rails 5.1","subheading":"1 Upgrading to Rails 5.1","content":"you're upgrading existing application, it's great idea have good test coverage before going should also first upgrade rails case haven't make sure your application still runs expected before attempting update rails 5.1. list things watch when upgrading available upgrading ruby rails guide."},{"id":944,"title":"Ruby on Rails 5.1 Release Notes","heading":"2 Major Features","subheading":"2.1 Yarn Support","content":"pull request rails allows managing javascript dependencies from yarn. this will make easy libraries like react, vuejs other library from world. yarn support integrated with asset pipeline that dependencies will work seamlessly with rails app."},{"id":945,"title":"Ruby on Rails 5.1 Release Notes","heading":"2 Major Features","subheading":"2.2 Optional Webpack support","content":"pull request rails apps integrate with webpack, javascript asset bundler, more easily using webpacker gem. --webpack flag when generating applications enable webpack integration. this fully compatible with asset pipeline, which continue images, fonts, sounds, other assets. even have some javascript code managed asset pipeline, other code processed webpack. this managed yarn, which enabled default."},{"id":946,"title":"Ruby on Rails 5.1 Release Notes","heading":"2 Major Features","subheading":"2.3 jQuery no longer a default dependency","content":"pull request jquery required default earlier versions rails provide features like data-remote, data-confirm other parts rails' unobtrusive javascript offerings. longer required, been rewritten plain, vanilla javascript. this code ships inside action view rails-ujs. still jquery needed, longer required default."},{"id":947,"title":"Ruby on Rails 5.1 Release Notes","heading":"2 Major Features","subheading":"2.4 System tests","content":"pull request rails baked-in support writing capybara tests, form system tests. longer need worry about configuring capybara database cleaning strategies such tests. rails provides wrapper running tests chrome with additional features such failure screenshots."},{"id":948,"title":"Ruby on Rails 5.1 Release Notes","heading":"2 Major Features","subheading":"2.5 Encrypted secrets","content":"pull request rails allows management application secrets secure way, inspired sekrets gem. bin/rails secrets:setup setup encrypted secrets file. this will also generate master key, which must stored outside repository. secrets themselves then safely checked into revision control system, encrypted form. secrets will decrypted production, using stored either rails_master_key environment variable, file."},{"id":949,"title":"Ruby on Rails 5.1 Release Notes","heading":"2 Major Features","subheading":"2.6 Parameterized mailers","content":"pull request allows specifying common parameters used methods mailer class order share instance variables, headers, other common setup."},{"id":950,"title":"Ruby on Rails 5.1 Release Notes","heading":"2 Major Features","subheading":"2.7 Direct & resolved routes","content":"pull request rails adds methods, resolve direct, routing dsl. resolve method allows customizing polymorphic mapping models. this will generate singular /basket instead usual /baskets/:id. direct method allows creation custom helpers. return value block must valid argument url_for method. pass valid string url, hash, array, active model instance, active model class."},{"id":951,"title":"Ruby on Rails 5.1 Release Notes","heading":"2 Major Features","subheading":"2.8 Unification of form_for and form_tag into form_with","content":"pull request before rails 5.1, there were interfaces handling html forms: form_for model instances form_tag custom urls. rails combines both these interfaces with form_with, generate form tags based urls, scopes, models. using just url: adding scope prefixes input field names: using model infers both scope: existing model makes update form fills field values: following changes require immediate action upon upgrade."},{"id":952,"title":"Ruby on Rails 5.1 Release Notes","heading":"3 Incompatibilities","subheading":"3.1 Transactional tests with multiple connections","content":"transactional tests wrap active record connections database transactions. when test spawns additional threads, those threads obtain database connections, those connections handled specially: threads will share single connection, which inside managed transaction. this ensures threads database same state, ignoring outermost transaction. previously, such additional connections were unable fixture rows, example. when thread enters nested transaction, will temporarily obtain exclusive connection, maintain isolation. your tests currently rely obtaining separate, outside-of-transaction, connection spawned thread, you'll need switch more explicit connection management. your tests spawn threads those threads interact while also using explicit database transactions, this change introduce deadlock. easy this behavior disable transactional tests test cases affects. please refer changelog detailed changes."},{"id":953,"title":"Ruby on Rails 5.1 Release Notes","heading":"4 Railties","subheading":"4.1 Removals","content":""},{"id":954,"title":"Ruby on Rails 5.1 Release Notes","heading":"4 Railties","subheading":"4.2 Notable changes","content":"please refer changelog detailed changes."},{"id":955,"title":"Ruby on Rails 5.1 Release Notes","heading":"5 Action Cable","subheading":"5.1 Notable changes","content":"please refer changelog detailed changes."},{"id":956,"title":"Ruby on Rails 5.1 Release Notes","heading":"6 Action Pack","subheading":"6.1 Removals","content":""},{"id":957,"title":"Ruby on Rails 5.1 Release Notes","heading":"6 Action Pack","subheading":"6.2 Deprecations","content":""},{"id":958,"title":"Ruby on Rails 5.1 Release Notes","heading":"6 Action Pack","subheading":"6.3 Notable changes","content":"please refer changelog detailed changes."},{"id":959,"title":"Ruby on Rails 5.1 Release Notes","heading":"7 Action View","subheading":"7.1 Removals","content":""},{"id":960,"title":"Ruby on Rails 5.1 Release Notes","heading":"7 Action View","subheading":"7.2 Deprecations","content":""},{"id":961,"title":"Ruby on Rails 5.1 Release Notes","heading":"7 Action View","subheading":"7.3 Notable changes","content":"please refer changelog detailed changes."},{"id":962,"title":"Ruby on Rails 5.1 Release Notes","heading":"8 Action Mailer","subheading":"8.1 Notable changes","content":"please refer changelog detailed changes."},{"id":963,"title":"Ruby on Rails 5.1 Release Notes","heading":"9 Active Record","subheading":"9.1 Removals","content":""},{"id":964,"title":"Ruby on Rails 5.1 Release Notes","heading":"9 Active Record","subheading":"9.2 Deprecations","content":""},{"id":965,"title":"Ruby on Rails 5.1 Release Notes","heading":"9 Active Record","subheading":"9.3 Notable changes","content":"please refer changelog detailed changes."},{"id":966,"title":"Ruby on Rails 5.1 Release Notes","heading":"10 Active Model","subheading":"10.1 Removals","content":""},{"id":967,"title":"Ruby on Rails 5.1 Release Notes","heading":"10 Active Model","subheading":"10.2 Notable changes","content":"please refer changelog detailed changes."},{"id":968,"title":"Ruby on Rails 5.1 Release Notes","heading":"11 Active Job","subheading":"11.1 Removals","content":""},{"id":969,"title":"Ruby on Rails 5.1 Release Notes","heading":"11 Active Job","subheading":"11.2 Notable changes","content":"please refer changelog detailed changes."},{"id":970,"title":"Ruby on Rails 5.1 Release Notes","heading":"12 Active Support","subheading":"12.1 Removals","content":""},{"id":971,"title":"Ruby on Rails 5.1 Release Notes","heading":"12 Active Support","subheading":"12.2 Deprecations","content":""},{"id":972,"title":"Ruby on Rails 5.1 Release Notes","heading":"12 Active Support","subheading":"12.3 Notable changes","content":"full list contributors rails many people spent many hours making rails, stable robust framework kudos them. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":973,"title":"Começando com Rails","heading":"1 Premissas do Guia","subheading":"1 Premissas do Guia","content":"este guia projetado iniciantes desejam começar aplicação rails zero. assume você tenha nenhuma experiência anterior rails. rails framework aplicações executado cima linguagem programação ruby. você nenhuma experiência ruby, você achar curva aprendizado bastante íngrime começando direto rails. existem diversas listas organizadas materiais online aprender ruby: fique atento alguns materiais, apesar excelentes, envolvem versões antigas ruby chegando 1.6, frequentemente 1.8, incluem parte sintaxe você dia-a-dia desenvolvendo rails. rails framework desenvolvimento aplicações escrito linguagem programação ruby. projetado facilitar desenvolvimento aplicações web, criando premissas sobre tudo pessoa desenvolvedora precisa começar. permite você escreva menos código, enquanto realiza mais muitas outras linguagens frameworks. pessoas desenvolvedoras experientes rails, também dizem desenvolver aplicações ficou mais divertido. rails software opinativo. assumindo \"melhor\" maneira fazer coisas, projetado encorajar essa maneira alguns casos desencorajar alternativas. você aprender \"rails way\", provavelmente terá grande aumento produtividade. você insistir velhos hábitos outras linguagens, tentando usar padrões você aprendeu outro lugar, você pode experiência menos feliz. filosofia rails possui dois princípios fundamentais: melhor forma esse guia seguir passo passo. todos passos essenciais rodar aplicação exemplo nenhum código passos adicionais serão necessários. seguindo este guia, você criar projeto rails chamado blog, weblog (muito) simples. antes você começar construir aplicação, você precisa certeza rails instalado."},{"id":974,"title":"Começando com Rails","heading":"3 Criando um Novo Projeto em Rails","subheading":"3.1 Instalando o Rails","content":"antes você instalar rails, você deve validar certeza sistema requisitos necessários instalados. esses incluem: abra prompt linha comando. macos abra terminal.app, windows escolha executar menu inicial digite 'cmd.exe'. qualquer comando antecede sinal dólar deverá rodado linha comando. verifique você versão atual ruby instalado: rails necessita versão ruby 2.5.0 mais atual. número versão retornada menor este número, você precisará instalar versão ruby mais atual. você está utilizando windowns, você deve também instalar ruby installer development kit. você também precisará instalar banco dados sqlite3. muitos sistemas operacionais populares semelhantes unix fornecidos versão compatível sqlite3. windows, você instalou rails pelo instalador rails, você possui sqlite instalado. você também podem achar mais instruções instalação sqlite3 website. verifique está corretamente instalado path programa deverá reportar versão. fim, você precisará node.js yarn instalados gerenciar javascript aplicação. encontre instruções instalação site node.js verifique está instalado corretamente seguinte comando: versão node.js deve impressa. certifique-se maior 8.16.0. instalar yarn, siga instruções instalação instruções site yarn. execução deste comando deve imprimir versão yarn: aparecer algo como \"1.22.0\", yarn instalado corretamente. instalar rails, comando install fornecido pelo rubygems: verificar você tudo instalado corretamente, você deve rodar comando seguir: esse comando retornar algo como \"rails 6.0.0\", você está pronto continuar."},{"id":975,"title":"Começando com Rails","heading":"3 Criando um Novo Projeto em Rails","subheading":"3.2 Criando a Aplicação Blog","content":"rails vários scripts chamados generators projetados tornar vida desenvolvedor fácil, criando tudo necessário começar trabalhar tarefa particular. desses generator nova aplicação, fornecer base nova aplicação rails você precise escrever tudo sozinho. utilizar esse generator, abra terminal, navegue diretório onde você tenha permissão criar arquivos, digite: este comando criar aplicação rails chamada blog diretório blog instalar dependências gems foram mencionadas gemfile usando bundle install. depois criar aplicação blog, entre pasta: pasta blog vários arquivos auto-gerados pastas compõem estrutura aplicação rails. maior parte execução deste tutorial será feito pasta app, seguir teremos resumo básico funções cada arquivos pastas rails gerou padrão: começar vamos colocar texto tela rapidamente. fazer isso, você precisa servidor aplicação rails esteja execução."},{"id":976,"title":"Começando com Rails","heading":"4 Olá, Rails!","subheading":"4.1 Inicializando o Servidor Web","content":"você aplicação rails funcional. vê-la você deve iniciar servidor máquina desenvolvimento. você pode fazer isso executando seguinte comando diretório blog: execução comando iniciar puma, servidor distribuído rails padrão. aplicação execução, abra navegador navegue http://localhost:3000. você deve página padrão informações rails:  página \"yay! você está rails! (yay! you're rails!)\" smoke test (teste sanidade) nova aplicação rails: garante software esteja configurado corretamente, suficiente gerar página."},{"id":977,"title":"Começando com Rails","heading":"4 Olá, Rails!","subheading":"4.2 Diga \"Olá\", Rails","content":"rails diga \"olá\", você precisa criar mínimo controller view. objetivo controller receber requisições específicas aplicação. routing (roteamento) decide qual controller recebe quais requisições. muitas vezes, mais rota cada controller, diferentes rotas podem providas diferentes actions. objetivo cada action coletar informações fornecer view. objetivo view exibir essas informações formato legível humanos. diferença importante feita controller, view, onde informações coletadas. view deve apenas exibir essas informações. padrão, templates view escritos linguagem chamada eruby (embedded ruby) processada pelo ciclo requisição rail antes enviada usuário. criar novo controller, você precisará executar gerador controller informar você deseja controller chamado \"welcome\" action chamada \"index\", exatamente assim: rails criará vários arquivos rota você. mais importantes são, certamente, controller, localizado app/controllers/welcome_controller.rb view, localizada app/views/welcome/index.html.erb. abra arquivo app/views/welcome/index.html.erb editor texto. exclua todo código existente arquivo substitua pela linha código abaixo:"},{"id":978,"title":"Começando com Rails","heading":"4 Olá, Rails!","subheading":"4.3 Configuração da Página Inicial da Aplicação","content":"agora criamos controller view, precisamos informar rails quando queremos \"olá, rails\" seja exibido. nosso caso, queremos seja exibido quando navegarmos raiz nosso site, http://localhost:3000. momento, \"yay! você está rails!\" está preenchendo esse lugar. seguida, você deve informar rails onde está localizada página inicial. abra arquivo config/routes.rb editor texto. este arquivo routing (roteamento) aplicação contém entradas (domain-specific language) especial informa rails como conectar requisições entrada controllers actions. edite este arquivo adicionando linha código root 'welcome#index'. deve algo parecido seguinte: root 'welcome#index' informa rails mapear requisições raiz aplicação controller \"welcome\", action \"index\" 'welcome/index' informa rails mapear requisições http://localhost:3000/welcome/index controller \"welcome\", action \"index\". isso criado anteriormente quando você executou gerador controller (rails generate controller welcome index). inicie servidor novamente você interrompeu gerar controller (rails server) navegue http://localhost:3000 navegador. você verá mensagem \"olá, rails!\", mesma você colocou app/views/welcome/index.html.erb, indicando essa nova rota fato action index welcomecontroller está renderizando view corretamente. agora você como criar controller, action, view, vamos criar algo pouco mais relevante. aplicação blog você criar novo resource. resource termo utilizado coleção objetos similares, como artigos, pessoas animais. você pode criar, visualizar, editar deletar dados resource essas ações definidas como operações crud. rails fornece método resources pode usado declarar recurso padrão rest. você precisa adicionar article resource config/routes.rb arquivo ficará como seguir: você executar rails routes, você verá foram definidas rotas todas actions padrão restful. significado prefixo coluna outras colunas) será visto mais adiante, enquanto, observe rails entende article forma singular significativo distinção. próxima seção, você adicionará funcionalidade criar visualizar novos artigos (articles) aplicação. este crud: create (criação) read (leitura). formulário fazer isso ficará assim:  enquanto está pouco simples, tudo bem. iremos melhorar estilo mais adiante."},{"id":979,"title":"Começando com Rails","heading":"5 Iniciando e Executando","subheading":"5.1 Preparando a base","content":"primeiramente, você precisa lugar aplicação criar novo artigo. ótimo lugar seria /articles/new. rota definida, agora possível fazer requisições /articles/new aplicação. acesse http://localhost:3000/articles/new você verá erro rota:  este erro ocorre porque rota precisa controller definido atender requisição. solução esse problema específico simples: crie controller chamado articlescontroller. você pode fazer isso executando este comando: você abrir recém-criado app/controllers/articles_controller.rb verá controller vazio: controller classe definida herdar applicationcontroller. dentro dessa classe você define métodos tornarão ações desse controller. essas ações executarão operações crud artigos nosso sistema. você atualizar http://localhost:3000/articles/new agora, receberá novo erro:  este erro indica rails consegue encontrar ação dentro articlescontroller você acabou gerar. isso ocorre porque quando controllers gerados rails, eles estão vazios padrão, menos você diga ações deseja durante processo geração. definir manualmente ação dentro controller, tudo você precisa fazer definir novo método dentro controller. abra app/controllers/articles_controller.rb dentro classe articlescontroller, defina método agora controller fique assim: método definido articlescontroller, você atualizar http://localhost:3000/articles/new verá outro erro:  você está recebendo esse erro agora porque rails espera actions como esta tenham views associadas elas exibir suas informações. view disponível, rails gerará exceção. vamos mensagem erro completa novamente: mensagem identifica qual template está ausente. nesse caso, template articles/new. rails procurará primeiro esse template. encontrado, tentará carregar template chamado application/new, porque articlescontroller herda applicationcontroller. seguida, mensagem contém request.formats especifica formato template exibido resposta. está definido como text/html, conforme solicitamos esta página pelo navegador, portanto rails está procurando template html. template mais simples funcionaria nesse caso seria localizado app/views/articles/new.html.erb. extensão desse nome arquivo importante: primeira extensão formato template segunda extensão handler (tratadores) será usado renderizar template. rails está tentando encontrar template chamado articles/new app/views aplicação. formato este template pode apenas html handler padrão html erb. rails outros handlers outros formatos. handler builder usado criar templates handler coffee coffeescript criar templates javascript. como você deseja criar novo formulário html, você usará linguagem projetada incorporar ruby html. portanto, arquivo deve chamar articles/new.html.erb precisa estar localizado dentro diretório app/views aplicação. agora frente crie novo arquivo app/views/articles/new.html.erb escreva este conteúdo: atualizar http://localhost:3000/articles/new você verá página título. rota, controller, action view estão funcionando harmoniosamente! hora criar formulário novo artigo."},{"id":980,"title":"Começando com Rails","heading":"5 Iniciando e Executando","subheading":"5.2 O primeiro formulário","content":"criar formulário este template, você usar construtor formulário (form builder). construtor formulários rails disponibilizado método helper chamado form_with. utilizá-lo, adicione código abaixo arquivo app/views/articles/new.html.erb: você atualizar página, você mesmo formulário nosso exemplo acima. construir formulários rails simples assim! quando você chama form_with, você passa identificação escopo esse formulário. neste caso, symbol :article. isso mostra form_with qual escopo formulário questão. dentro bloco deste método, objeto formbuilder representado pelo form usado construir dois títulos dois campos textos, cada título (labels) texto (text fields) artigo. finalmente, chamada submit objeto form criará botão submissão formulário. porém, existe problema este formulário. você inspecionar html gerado, visualizando código-fonte página, você verá atributo action formulário está apontando /articles/new. isso problema porque esta rota exatamente mesma página você está momento, essa rota deveria usada apenas exibir formulário novo artigo. formulário precisa usar diferente consigar outro lugar. isso pode feito forma simples opção :url form_with. normalmente, rails, action usada novas submissões formulários chamada \"create\", então formulário precisa apontar esta ação. altere linha form_with dentro app/views/articles/new.html.erb ficar seguinte forma: neste exemplo, helper articles_path passado opção :url. saber rails fará isso, veja novamente resultado rails routes: helper articles_path rails apontar formulário padrão associado prefixo articles; formulário (por padrão) enviar requisição post esta rota. isto esta associado action create controller atual, caso articlescontroller. formulário rota definidos, você será capaz preencher formulário clicar botão submit iniciar processo criação novo artigo, então frente faça isso. quando você enviar, você verá erro familiar:  agora você precisa adicionar action create dentro articlescontroller isso funcione."},{"id":981,"title":"Começando com Rails","heading":"5 Iniciando e Executando","subheading":"5.3 Criando artigos","content":"fazer este \"unknown action\" desaparecer, você pode definir action create dentro classe articlescontroller app/controllers/articles_controller.rb, logo após action new, como vemos seguir: você re-enviar formulário agora, você ainda verá nenhuma mudança página. preocupe! isto porque, padrão, rails retorna resposta content action especificarmos qual resposta deve retornar. apenas adicionamos action create especificamos nada sobre como resposta deve ser. neste caso, action create deve salvar nosso novo artigo banco dados. quando formulário enviado, campos formulário enviados rails como parameters (parâmetros). estes parâmetros podem então referenciados dentro actions controller, normalmente executar tarefa específica. como estes parâmetros são, altere action create isto: método render está recebendo simples hash chave :plain valor params[:article].inspect. método params objeto representa parâmetros campos) enviados pelo formulário. método params retorna objeto actioncontroller::parameters, permite você acessar chaves hash usando strings symbols. neste caso, únicos parâmetros importam recebidos pelo formulário. você reenviar formulário novamente, você verá algo parecido isso: action agora está exibindo parâmetros artigo estão sendo enviados pelo formulário. porém, isto realmente útil. sim, você pode parâmetros nada particular está sendo feito eles."},{"id":982,"title":"Começando com Rails","heading":"5 Iniciando e Executando","subheading":"5.4 Criando um  model para o Article (artigo, inglês)","content":"model, rails, utiliza nome singular, tabela correspondente banco dados utiliza nome plural. rails fornece gerador criar models linha comando, utilizado pela maioria pessoas desenvolvedoras hora criar novos models. criar model, execute linha comando abaixo: esse comando dizemos rails queremos criar model chamado article, atributo chamado title tipo string, atributo text tipo text. esses atributos serão automaticamente adicionados tabela articles banco dados, mapeadas model article. rails criar monte arquivos. enquanto, estamos apenas interessados app/models/article.rb db/migrate/20140120191729_create_articles.rb nome pode ficar pouco diferente). último responsável criar estrutura banco dados, próxima coisa iremos olhar."},{"id":983,"title":"Começando com Rails","heading":"5 Iniciando e Executando","subheading":"5.5 Executando uma Migration","content":"como acabamos ver, rails generate model cria arquivo database migration diretório db/migrate. migrations classes ruby designadas simplificar criação modificação tabelas banco dados. rails comandos rake executar migration, possível desfazê-la depois aplicada banco dados. nomes arquivos migrations incluem timestamp (\"carimbo hora\" inglês) assegurar elas serão processadas ordem foram criadas. você olhar arquivo db/migrate/yyyymmddhhmmss_create_articles.rb (lembre-se, pode nome pouco diferente), você encontrará: migration acima cria método chamado change será chamado quando esta migration executada. ação definida neste método também reversível, significa rails sabe como reverter alteração, caso você queira. quando você executar esta migration, será criada tabela articles coluna tipo string coluna tipo text. também serão criados dois campos timestamp, permitir rails monitore quando article criado atualizado. agora, você pode usar comando rails executar migration: rails executar este comando migration dizer tabela articles criada."},{"id":984,"title":"Começando com Rails","heading":"5 Iniciando e Executando","subheading":"5.6 Salvando dados no Controller","content":"volta articlescontroller, precisamos alterar action create utilizar novo model article salvar dados banco dados. abra app/controllers/articles_controller.rb altere action create seguinte forma: está acontecendo: todo model rails pode inicializado seus respectivos atributos, quais automaticamente mapeados suas respectivas colunas banco dados. primeira linha fazemos apenas isso (lembre-se params[:article] contém atributos estamos interessados). então, @article.save responsável salvar model banco dados. finalmente, redirecionaremos usuário action show, definiremos mais tarde. você agora http://localhost:3000/articles/new você quase será capaz criar article. tente! você verá erro parecido esse:  rails diversas features segurança ajudam construir aplicação segura, você está lidando delas agora. esta chama strong parameters (parâmetros fortes), obrigam dizer rails exatamente quais parâmetros estão permitidos actions controller. necessário? habilidade salvar todos parâmetros controller model deixa trabalho quem está programando mais fácil, essa conveniência pode utilizada forma maliciosa. request servidor trabalhado fazer parecer novo formulário article, também incluir campos extras valores violam integridade aplicação? isso possibilitaria entrada/atribuição dados ruins model banco dados junto dados bons podendo, potencialmente, quebrar aplicação algo pior. definimos quais parâmetros permitidos prevenir atribuições dados indesejados. nesse caso, queremos permitir exigir parâmetros title text válido create. sintaxe isso utiliza require permit. alteração envolverá linha action create. frequentemente refatoramos código trazer esta alteração dentro próprio método, possa reutilizado diferentes actions mesmo controller, exemplo create update. além problema atribuição dados inconsistentes, método frequentemente colocado como privado, termos certeza será possível chamá-lo fora contexto. aqui está resultado:"},{"id":985,"title":"Começando com Rails","heading":"5 Iniciando e Executando","subheading":"5.7 Mostrando Artigos","content":"você enviar formulário novamente agora, rails reclamará encontrar action show. isso muito útil, então vamos adicionar action show antes proceder. como vimos exibição rails routes, rota actionshow seguinte modo: sintaxe especial rails esta rota espera parâmetro :id, nosso caso será (identificador) artigo. como fizemos antes, precisamos adicionar action show app/controllers/articles_controller.rb respectiva view. dado isso, vamos adicionar action show, seguinte maneira: algumas coisas serem observadas. usamos article.find encontrar artigo interessa, passando params[:id] obter parâmetro requisição. também usamos variável instância (prefixada conter referência objeto artigo. fazemos isso porque rails passará todas variáveis instância view. agora, crie novo arquivo app/views/articles/show.html.erb seguinte conteúdo: essa mudança, você deve finalmente conseguir criar novos artigos. visite http://localhost:3000/articles/new faça tentativa! "},{"id":986,"title":"Começando com Rails","heading":"5 Iniciando e Executando","subheading":"5.8 Listando todos os artigos","content":"ainda precisamos jeito listar todos nossos artigos, então vamos fazer isso. rota isso, conforme apresentado pela execução comando rails routes, adicione action index correspondente essa rota dentro articlescontroller arquivo app/controllers/articles_controller.rb. quando escrevemos action index, prática usual colocá-lo como primeiro método controller. vamos fazer isso: então, finalmente, adicione view essa action, localizada app/views/articles/index.html.erb: agora você acessar http://localhost:3000/articles você verá lista todos artigos você criou."},{"id":987,"title":"Começando com Rails","heading":"5 Iniciando e Executando","subheading":"5.9 Adicionando links","content":"você pode agora criar, mostrar listar artigos. agora vamos adicionar links navegação pelas páginas. abra arquivo app/views/welcome/index.html.erb modifique-o seguinte maneira: método link_to view helpers (auxiliares exibição) internos rails. isso cria hiperlink base texto exibido onde nesse caso, caminho artigos. vamos adicionar links outras views também, começando adição deste link \"novo artigo\" app/views/articles/index.html.erb, colocando-o acima <table>: este link permitirá abrir formulário criar novo artigo. agora, adicione outro link app/views/articles/new.html.erb, abaixo formulário retornar action index: fim, adicione link view app/views/articles/show.html.erb voltar também action `index assim pessoas estão visualizando único artigo podem voltar exibir lista inteira novamente:"},{"id":988,"title":"Começando com Rails","heading":"5 Iniciando e Executando","subheading":"5.10 Adicionando Algumas Validações","content":"arquivo model app/models/article.rb mais simples possível: muito nesse arquivo observe classe article herda applicationrecord. applicationrecord herda activerecord::base fornece grande funcionalidade seus models rails gratuitamente, incluindo operações básicas crud (create (criar), read (ler), update (atualizar), destroy (remover)) banco dados, validação dados, como suporte sofisticado pesquisa capacidade relacionar vários models entre rails inclui métodos ajudá-lo validar dados você envia models. abra arquivo app/models/article.rb edite-o: essas alterações garantirão todos artigos tenham título pelo menos cinco caracteres. rails pode validar variedade condições model, incluindo presença exclusividade colunas, formato existência objetos associados. validações abordadas detalhes active record validations](active_record_validations.html). validação agora atividade, quando você chama @article.save artigo inválido, expressão retornará false. você abrir arquivo app/controllers/articles_controller.rb novamente, você notará verificamos resultado chamada @article.save dentro action create. @article.save falhar nessa situação, precisamos mostrar formulário volta usuário. fazer isso, altere ações ecreate dentro app/controllers/articles_controller.rb estes: ação agora está criando nova variável instância chamada @article, você verá isso ocorre apenas alguns momentos. observe dentro ação create usamos render redirect_to quando save retorna false. método render usado objeto @article seja enviado volta view quando renderizada. esta renderização feita dentro mesma solicitação envio formulário, enquanto redirect_to dirá navegador realizar outra solicitação. você recarregar http://localhost:3000/articles/new tentar salvar artigo título, rails enviará volta formulário, isso muito útil. você precisa dizer usuário algo errado. fazer isso, você pode modificar arquivo app/views/articles/new.html.erb verificar mensagens erro: algumas coisas estão acontecendo. verificamos algum erro @article.errors.any? nesse caso, mostramos lista todos erros @article.errors.full_messages. pluralize auxiliar recebe número string como argumentos. número maior sequência será automaticamente pluralizada. razão pela qual adicionamos @article article.new articlescontroller que, caso contrário, @article seria nossa view, chamar @article.errors.any? geraria erro. agora você receberá mensagem erro tentar salvar artigo título nosso formulário criação artigo http://localhost:3000/articles/new: "},{"id":989,"title":"Começando com Rails","heading":"5 Iniciando e Executando","subheading":"5.11 Atualizando Artigos","content":"cobrimos parte \"cr\" crud. agora vamos concentrar parte \"u\", atualizando artigos. primeiro passo vamos adicionar ação edit articlescontroller, geralmente entre ações ecreate: view conterá formulário semelhante usamos criar novos artigos. crie arquivo chamado app/views/articles/edit.html.erb deixe-o como mostrado seguida: desta vez, apontamos formulário action update, ainda definida, breve será. passar objeto artigo método form_with definirá automaticamente enviar formulário artigo editado. esta opção informa rails formulário deve enviado pelo método http patch, método http espera utilizado update nossos resources acordo protocolo rest. além disso, passando model form_with, como model: @article view edit acima, fará helpers form preencham campos valores correspondentes objeto. passando symbol scope como scope: :article, como feito nova view, apenas exibirá campos formulário vazios. mais detalhes podem encontrados documentação form_with. agora, precisamos criar action update controller app/controllers/articles_controller.rb. adicione-a entre metodos create private: novo método, update, usado quando você deseja atualizar registro existe, aceita hash contendo atributos você deseja atualizar. como antes, houve erro atualizar artigo, queremos mostrar formulário volta usuário. podemos reutilizar método article_params definimos anteriormente action create finalmente, queremos mostrar link action edit lista artigos, então vamos adiciona-lo agora arquivo app/views/articles/index.html.erb aparecer logo após link \"show\": também iremos adicionar app/views/articles/show.html.erb, assim podemos link \"edit\" página artigo. adicione modelo: aqui como nossa aplicação está agora: "},{"id":990,"title":"Começando com Rails","heading":"5 Iniciando e Executando","subheading":"5.12 Usando partials para limpar duplicações em views","content":"nossa página edit parece muito página new; verdade, ambas compartilham mesmo código exibir formulário. vamos remover esta duplicação usando view partial. convenção, arquivos partials prefixados underline. crie novo arquivo app/views/articles/_form.html.erb conteudo seguir: tudo exceto declaração form_with permaneceu igual. razão pela qual podemos usar declaração form_with mais curta simples substituir qualquer outro formulário @article resource correspondente conjunto completo rotas restful, rails pode inferir qual método usado. obter mais informações sobre esse form_with, consulte estilo orientado recursos. agora, vamos atualizar view app/views/articles/new.html.erb usar nova partial, reescrevendo-a completamente: depois, faremos mesmo app/views/articles/edit.html.erb:"},{"id":991,"title":"Começando com Rails","heading":"5 Iniciando e Executando","subheading":"5.13 Deletando Artigos","content":"estamos prontos cobrir parte crud, remover artigos base dados. seguindo convenção rest, rota deletar artigos, acordo retorno comando rails routes método delete roteado deve usado rotas destroem recursos. esta ação deixada simples rota get, pode possível pessoas criem urls maliciosas como esta: utilizamos método delete destruir recursos, essa rota mapeada ação destroy dentro deapp/controllers/articles_controller.rb, ainda existe. método destroy geralmente última ação crud controller como outras ações públicas crud, deve colocado antes qualquer método private ouprotected. vamos adicioná-lo: articlescontroller completo app/controllers/articles_controller.rb parece isso: você pode chamar destroy objetos active record quando desejar excluí-los banco dados. observe precisamos adicionar visualização esta action, pois estamos redirecionando ação index. fim, adicione link \"destroy\" template action index (app/views/articles/index.html.erb) agrupar todos juntos. aqui estamos usando link_to maneira diferente. passamos rota nomeada como segundo argumento seguida, opções como outro argumento. opções method: :delete data: confirm: 'are sure?' usadas como atributos html5, portanto quando link clicado, rails primeiro mostra caixa diálogo confirmação usuário seguida, envia link método delete. isso feito através arquivo javascript rails-ujs, automaticamente incluído layout aplicação (app/views/layouts/application.html.erb) quando gerado. esse arquivo, caixa diálogo confirmação será exibida.  parabêns, agora você pode criar, mostrar, listar, atualizar destruir artigos. congratulations, create, show, list, update, destroy articles. hora adicionar segundo model aplicação. segundo model lidar comentários artigos."},{"id":992,"title":"Começando com Rails","heading":"6 Adicionando um Segundo Model","subheading":"6.1 Gerando um Model","content":"veremos mesmo generator usamos antes quando criamos model article (artigo, inglês). desta vamos criar model comment (comentário) contém referência artigo. rode esse comando terminal: este comando gerar quatro arquivos: primeiro, veja arquivo app/models/comment.rb: isso muito semelhante model article vimos antes. diferença está linha belongs_to article, configura associação active record. você aprender pouco sobre associações próxima seção deste guia. palavra-chave (:references) usada comando bash tipo especial dado models. cria nova coluna tabela banco dados nome fornecido model anexada contém valor tipo integer. compreender melhor, analise arquivo db/schema.rb depois rodar migration. além model, rails também gerou migration criar tabela correspondente banco dados: linha t.references cria coluna valores tipo integer chamada article_id, índice restrição chave estrangeira (foreign key) aponta coluna tabela articles. frente rode migration: rails inteligente suficiente executar somente migrações ainda foram rodadas banco dados atual, assim neste caso você verá:"},{"id":993,"title":"Começando com Rails","heading":"6 Adicionando um Segundo Model","subheading":"6.2 Associando Models","content":"associações active record permitem declarar facilmente relação entre dois models. caso comentários artigos, você poderia descrever relação seguinte maneira: fato, essa sintaxe muito similar utilizada pelo rails declarar essa associação. você linha código dentro model comment (app/models/comment.rb) cada comentário pertença artigo: você precisar editar arquivo app/models/article.rb adicionar outro lado associação: estas duas declarações habilitam parte comportamento automático. exemplo, você possui instância variável @article contém artigo, você pode recuperar todos comentários pertencentes àquele artigo forma array usando @article.comments."},{"id":994,"title":"Começando com Rails","heading":"6 Adicionando um Segundo Model","subheading":"6.3 Adicionando a Rota para Comentários","content":"mesma forma controller welcome, vamos precisar adicionar rota rails saiba onde queremos navegar encontrar comments. abra arquivo config/routes.rb novamente edite seguinte maneira: isso cria comments como recurso aninhado (nested resource) dentro article. essa outra parte processo recuperar relações hierárquicas existem entre artigos comentários."},{"id":995,"title":"Começando com Rails","heading":"6 Adicionando um Segundo Model","subheading":"6.4 Gerando um Controller","content":"model mãos, você pode voltar atenção criação controller correspondente. mais vez, você usar generator usado anteriormente: isso cria quatro arquivos diretório vazio: como qualquer blog, nossos leitores criar seus comentários diretamente depois lerem artigo adicionarem comentário, serão enviados volta página show artigo verem comentário agora listado. essa razão, nosso commentscontroller está aqui fornecer método cria comentários deleta comentários spam quando chegarem. então, primeiro vamos ligar show template artigos (app/views/articles/show.html.erb) possamos criar novo comentários: isso adiciona página show article formulário cria novo comentário chamando action create commentscontroller. form_with aqui array construir rota aninhada, como /articles/1/comments. vamos ligar action create app/controllers/comments_controller.rb: você verá pouco mais complexidade aqui controller artigos. esse efeito colateral aninhamento você configurou. cada requisição comentário deve lembrar artigo qual comentário está anexado, chamada inicial método find model article encontre artigo questão. além disso, código aproveita-se alguns métodos disponíveis associação. usamos método create @article.comments criar salvar comentário. isso automaticamente conectar comentário pertença àquele artigo particular. temos novo comentário, enviamos usuário volta artigo original usando helper article_path(@article). como vimos anteriormente, isso chama action show articlescontroller renderiza template show.html.erb. aqui queremos comentário apareça, então vamos adicionar isso arquivo app/views/articles/show.html.erb. agora podemos adicionar artigos comentários blog mostrá-los lugares certos.  agora nossos artigos comentários funcionam, olhada template app/views/articles/show.html.erb. está ficando longo esquisito. podemos usar partials (views parciais) melhorá-lo."},{"id":996,"title":"Começando com Rails","heading":"7 Refatorando","subheading":"7.1 Renderizando Coleções de Partials","content":"primeiramente, vamos criar partial extrair exibição todos comentários artigo. crie arquivo app/views/comments/_comment.html.erb insira código seguir: então você pode mudar app/views/articles/show.html.erb seguinte código: isso fará partial seja renderizada app/views/comments/_comment.html.erb cada comentário coleção @article.comments. como método render itera sobre coleção @article.comments, designa cada comentário variável local nomeada como partial, nesse caso comment, então fica disponível exibida partial."},{"id":997,"title":"Começando com Rails","heading":"7 Refatorando","subheading":"7.2 Renderizando um Formulário com Partial","content":"agora vamos mover aquela nova seção comentários própria partial. novamente, crie arquivo app/viewscomments/_form.html.erb contendo: então deixe arquivo app/views/articles/show.html.erb assim: segundo render apenas define template partial queremos renderizar, comments/form. rails inteligente suficiente entender barra nessa string perceber você quer renderizar arquivo _form.html.erb diretório app/views/comments. objeto @article está disponível todas partials renderizadas view porque definimos como variável instância. outra importante feature blog excluir comentários spam. fazer isto, precisamos implementar link alguma view action destroy commentscontroller. primeiro, vamos adicionar link delete partial app/views/comments/_comment.html.erb: clicar neste novo link \"destruir comentário\" será disparado delete /articles/:article_id/comments/:id nosso commentscontroller, pode usar isso encontrar comentário queremos excluir, então vamos adicionar ação destroy nosso controller (app/controllers/comments_controller.rb): action destroy encontrar artigo estamos vendo, localizar comentário collection @article.comments, removê-lo banco dados enviar volta action show artigo."},{"id":998,"title":"Começando com Rails","heading":"8 Deletando Comentários","subheading":"8.1 Excluindo objetos associados","content":"você excluir artigo, comentários (comments) associados também precisarão excluídos, caso contrário, eles simplesmente ocupariam espaço banco dados. rails permite você opção dependent associação conseguir isso. modifique modelo artigo (article), app/models/article.rb, seguinte forma:"},{"id":999,"title":"Começando com Rails","heading":"9 Segurança","subheading":"9.1 Autenticação Básica","content":"fosse fosse publicar blog online, qualquer poderia adicionar, editar deletar seus artigos comentários. rails disponibiliza sistema autenticação http simples funcionar tranquilamente nesta situação. articlescontroller precisamos tenha meio bloquear acesso várias ações pessoa estiver autenticada. aqui podemos usar método http_basic_authenticate_with, permite acesso ação requisitada método deixar. usar sistema autenticação, especificamos topo nosso articlescontroller app/controllers/articles_controller.rb. nosso caso, queremos usuário esteja autenticado todas ações, exceto index show, então colocamos isso: também queremos autorizar somente usuários autenticados deletar comentários, então commentscontroller (app/controllers/comments_controller.rb) colocamos: agora você tentar criar novo artigo, você deverá preencher formulário autenticação:  outros métodos autenticação estão disponíveis aplicações rails. dois add-ons autenticação populares rails devise authlogic entre outros."},{"id":1000,"title":"Começando com Rails","heading":"9 Segurança","subheading":"9.2 Outras Considerações de Segurança","content":"segurança, especialmente aplicações web, area ampla detalhada. tópico segurança aplicações rails coberto mais detalhes guia segurança ruby rails. agora você criou primeira aplicação rails, sinta-se vontade atualizar experimentar conta própria. lembre-se, você precisa fazer tudo ajuda. você precisa assistência começar desenvolver rails, sinta-se vontade consultar estes recursos: caminho mais fácil trabalhar rails armazenar todos dados externos como utf-8. fizer assim, bibliotecas ruby rails vão, maioria vezes, conseguir converter seus dados nativos utf-8, porém sempre isso funciona corretamente, então melhor você assegure todos seus dados externos estão utf-8. caso tenha cometido erro nessa parte, sintoma mais comum aparecimento diamante preto ponto interrogação dentro navegador. outro sintoma comum aparecimento caracteres como \"ã¼\" invés \"ü\". rails executa número passos internos mitigar causas comuns desses problemas possam detectadas corrigidas automaticamente. porém, caso você possua dados externos estão armazenados como utf-8, eles poderão ocasionalmente resultar problemas podem detectados resolvidos forma automática pelo rails. duas fontes muito comuns dados estão utf-8 são: você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":1001,"title":"Ruby on Rails 2.2 Release Notes","heading":"1 Infrastructure","subheading":"1 Infrastructure","content":"rails significant release infrastructure that keeps rails humming along connected rest world."},{"id":1002,"title":"Ruby on Rails 2.2 Release Notes","heading":"1 Infrastructure","subheading":"1.1 Internationalization","content":"rails supplies easy system internationalization i18n, those tired typing)."},{"id":1003,"title":"Ruby on Rails 2.2 Release Notes","heading":"1 Infrastructure","subheading":"1.2 Compatibility with Ruby 1.9 and JRuby","content":"along with thread safety, work been done make rails work well with jruby upcoming ruby 1.9. with ruby being moving target, running edge rails edge ruby still hit-or-miss proposition, rails ready make transition ruby when latter released. internal documentation rails, form code comments, been improved numerous places. addition, ruby rails guides project definitive source information major rails components. first official release, guides page includes: told, guides provide tens thousands words guidance beginning intermediate rails developers. want generate these guides locally, inside your application: this will guides inside rails.root/doc/guides start surfing straight away opening rails.root/doc/guides/index.html your favourite browser. supporting etag last modified timestamp http headers means that rails send back empty response gets request resource that hasn't been modified lately. this allows check whether response needs sent all. work done make rails thread-safe rolling rails 2.2. depending your server infrastructure, this means handle more requests with fewer copies rails memory, leading better server performance higher utilization multiple cores. enable multithreaded dispatching production mode your application, following line your config/environments/production.rb: there additions talk about here: transactional migrations pooled database transactions. there's also (and cleaner) syntax join table conditions, well number smaller improvements."},{"id":1004,"title":"Ruby on Rails 2.2 Release Notes","heading":"5 Active Record","subheading":"5.1 Transactional Migrations","content":"historically, multiple-step rails migrations have been source trouble. something went wrong during migration, everything before error changed database everything after error wasn't applied. also, migration version stored having been executed, which means that couldn't simply rerun rake db:migrate:redo after problem. transactional migrations change this wrapping migration steps transaction, that them fail, entire migration undone. rails 2.2, transactional migrations supported postgresql box. code extensible other database types future already extended support adapter."},{"id":1005,"title":"Ruby on Rails 2.2 Release Notes","heading":"5 Active Record","subheading":"5.2 Connection Pooling","content":"connection pooling lets rails distribute database requests across pool database connections that will grow maximum size default pool your database.yml adjust this). this helps remove bottlenecks applications that support many concurrent users. there's also wait_timeout that defaults seconds before giving activerecord::base.connection_pool gives direct access pool need"},{"id":1006,"title":"Ruby on Rails 2.2 Release Notes","heading":"5 Active Record","subheading":"5.3 Hashes for Join Table Conditions","content":"specify conditions join tables using hash. this help need query across complex joins."},{"id":1007,"title":"Ruby on Rails 2.2 Release Notes","heading":"5 Active Record","subheading":"5.4 New Dynamic Finders","content":"sets methods have been added active record's dynamic finders family. find_last_by_attribute method equivalent model.last(:conditions {:attribute value}) bang! version find_by_attribute! equivalent model.first(:conditions {:attribute value}) raise activerecord::recordnotfound instead returning can't find matching record, this method will raise exception cannot find match."},{"id":1008,"title":"Ruby on Rails 2.2 Release Notes","heading":"5 Active Record","subheading":"5.5 Associations Respect Private/Protected Scope","content":"active record association proxies respect scope methods proxied object. previously (given user has_one :account) @user.account.private_method would call private method associated account object. that fails rails 2.2; need this functionality, should @user.account.send(:private_method) make method public instead private protected). please note that you're overriding method_missing, should also override respond_to match behavior order associations function normally."},{"id":1009,"title":"Ruby on Rails 2.2 Release Notes","heading":"5 Active Record","subheading":"5.6 Other Active Record Changes","content":"controller side, there several changes that will help tidy your routes. there also some internal changes routing engine lower memory usage complex applications."},{"id":1010,"title":"Ruby on Rails 2.2 Release Notes","heading":"6 Action Controller","subheading":"6.1 Shallow Route Nesting","content":"shallow route nesting provides solution well-known difficulty using deeply-nested resources. with shallow nesting, need only supply enough information uniquely identify resource that want work with. this will enable recognition (among others) these routes:"},{"id":1011,"title":"Ruby on Rails 2.2 Release Notes","heading":"6 Action Controller","subheading":"6.2 Method Arrays for Member or Collection Routes","content":"supply array methods member collection routes. this removes annoyance having define route accepting verb soon need handle more than one. with rails 2.2, this legitimate route declaration:"},{"id":1012,"title":"Ruby on Rails 2.2 Release Notes","heading":"6 Action Controller","subheading":"6.3 Resources With Specific Actions","content":"default, when map.resources create route, rails generates routes seven default actions (index, show, create, new, edit, update, destroy). each these routes takes memory your application, causes rails generate additional routing logic. :only :except options fine-tune routes that rails will generate resources. supply single action, array actions, special :all :none options. these options inherited nested resources."},{"id":1013,"title":"Ruby on Rails 2.2 Release Notes","heading":"6 Action Controller","subheading":"6.4 Other Action Controller Changes","content":"action mailer supports mailer layouts. make your html emails pretty your in-browser views supplying appropriately-named layout example, customermailer class expects layouts/customer_mailer.html.erb. action mailer offers built-in support gmail's smtp servers, turning starttls automatically. this requires ruby 1.8.7 installed. active support offers built-in memoization rails applications, each_with_object method, prefix support delegates, various other utility methods."},{"id":1014,"title":"Ruby on Rails 2.2 Release Notes","heading":"9 Active Support","subheading":"9.1 Memoization","content":"memoization pattern initializing method once then stashing value away repeat use. you've probably used this pattern your applications: memoization lets handle this task declarative fashion: other features memoization include unmemoize, unmemoize_all, memoize_all turn memoization off."},{"id":1015,"title":"Ruby on Rails 2.2 Release Notes","heading":"9 Active Support","subheading":"9.2 each_with_object","content":"each_with_object method provides alternative inject, using method backported from ruby 1.9. iterates over collection, passing current element memo into block. lead contributor: adam keys"},{"id":1016,"title":"Ruby on Rails 2.2 Release Notes","heading":"9 Active Support","subheading":"9.3 Delegates With Prefixes","content":"delegate behavior from class another, specify prefix that will used identify delegated methods. example: this will produce delegated methods vendor#account_email vendor#account_password. also specify custom prefix: this will produce delegated methods vendor#owner_email vendor#owner_password. lead contributor: daniel schierbeck"},{"id":1017,"title":"Ruby on Rails 2.2 Release Notes","heading":"9 Active Support","subheading":"9.4 Other Active Support Changes","content":"railties (the core code rails itself) biggest changes config.gems mechanism."},{"id":1018,"title":"Ruby on Rails 2.2 Release Notes","heading":"10 Railties","subheading":"10.1 config.gems","content":"avoid deployment issues make rails applications more self-contained, it's possible place copies gems that your rails application requires /vendor/gems. this capability first appeared rails 2.1, it's much more flexible robust rails 2.2, handling complicated dependencies between gems. management rails includes these commands: unpack install single specifying gem=_gem_name_ command line."},{"id":1019,"title":"Ruby on Rails 2.2 Release Notes","heading":"10 Railties","subheading":"10.2 Other Railties Changes","content":"pieces older code deprecated this release: release notes compiled mike gunderloy você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":1020,"title":"Caching with Rails: An Overview","heading":"1 Basic Caching","subheading":"1 Basic Caching","content":"this introduction three types caching techniques: page, action fragment caching. default rails provides fragment caching. order page action caching will need actionpack-page_caching actionpack-action_caching your gemfile. default, caching only enabled your production environment. play around with caching locally you'll want enable caching your local environment setting config.action_controller.perform_caching true relevant config/environments/*.rb file:"},{"id":1021,"title":"Caching with Rails: An Overview","heading":"1 Basic Caching","subheading":"1.1 Page Caching","content":"page caching rails mechanism which allows request generated page fulfilled server (i.e. apache nginx) without having through entire rails stack. while this super fast can't applied every situation (such pages that need authentication). also, because server serving file directly from filesystem will need implement cache expiration."},{"id":1022,"title":"Caching with Rails: An Overview","heading":"1 Basic Caching","subheading":"1.2 Action Caching","content":"page caching cannot used actions that have before filters example, pages that require authentication. this where action caching comes action caching works like page caching except incoming request hits rails stack that before filters before cache served. this allows authentication other restrictions while still serving result output from cached copy."},{"id":1023,"title":"Caching with Rails: An Overview","heading":"1 Basic Caching","subheading":"1.3 Fragment Caching","content":"dynamic applications usually build pages with variety components which have same caching characteristics. when different parts page need cached expired separately fragment caching. fragment caching allows fragment view logic wrapped cache block served cache store when next request comes example, wanted cache each product page, could this code: when your application receives first request this page, rails will write cache entry with unique key. looks something like this: number middle product_id followed timestamp value updated_at attribute product record. rails uses timestamp value make sure serving stale data. value updated_at changed, will generated. then rails will write cache that key, cache written will never used again. this called key-based expiration. cache fragments will also expired when view fragment changes (e.g., html view changes). string characters template tree digest. hash digest computed based contents view fragment caching. change view fragment, digest will change, expiring existing file. want cache fragment under certain conditions, cache_if cache_unless: render helper also cache individual templates rendered collection. even previous example with each reading cache templates once instead one. this done passing cached: true when rendering collection: cached templates from previous renders will fetched once with much greater speed. additionally, templates that haven't been cached will written cache multi fetched next render."},{"id":1024,"title":"Caching with Rails: An Overview","heading":"1 Basic Caching","subheading":"1.4 Russian Doll Caching","content":"want nest cached fragments inside other cached fragments. this called russian doll caching. advantage russian doll caching that single product updated, other inner fragments reused when regenerating outer fragment. explained previous section, cached file will expire value updated_at changes record which cached file directly depends. however, this will expire cache fragment nested within. example, take following view: which turn renders this view: attribute game changed, updated_at value will current time, thereby expiring cache. however, because updated_at will changed product object, that cache will expired your will serve stale data. this, models together with touch method: with touch true, action which changes updated_at game record will also change associated product, thereby expiring cache."},{"id":1025,"title":"Caching with Rails: An Overview","heading":"1 Basic Caching","subheading":"1.5 Shared Partial Caching","content":"possible share partials associated caching between files with different mime types. example shared partial caching allows template writers share partial between html javascript files. when templates collected template resolver file paths they only include template language extension mime type. because this templates used multiple mime types. both html javascript requests will respond following code: will load file named hotels/hotel.erb. another option include full filename partial render. will load file named hotels/hotel.html.erb file mime type, example could include this partial javascript file."},{"id":1026,"title":"Caching with Rails: An Overview","heading":"1 Basic Caching","subheading":"1.6 Managing dependencies","content":"order correctly invalidate cache, need properly define caching dependencies. rails clever enough handle common cases don't have specify anything. however, sometimes, when you're dealing with custom helpers instance, need explicitly define them. most template dependencies derived from calls render template itself. here some examples render calls that actionview::digestor knows decode: other hand, some calls need changed make caching work properly. instance, you're passing custom collection, you'll need change:  sometimes you'll have template dependencies that can't derived all. this typically case when rendering happens helpers. here's example: you'll need special comment format call those out: some cases, like single table inheritance setup, might have bunch explicit dependencies. instead writing every template out, wildcard match template directory: collection caching, partial template doesn't start with clean cache call, still benefit from collection caching adding special comment format anywhere template, like: helper method, example, inside cached block then update that helper, you'll have bump cache well. doesn't really matter template file must change. recommendation simply explicit comment, like:"},{"id":1027,"title":"Caching with Rails: An Overview","heading":"1 Basic Caching","subheading":"1.7 Low-Level Caching","content":"sometimes need cache particular value query result instead caching view fragments. rails' caching mechanism works great storing kind information. most efficient implement low-level caching using rails.cache.fetch method. this method does both reading writing cache. when passed only single argument, fetched value from cache returned. block passed, that block will executed event cache miss. return value block will written cache under given cache key, that return value will returned. case cache hit, cached value will returned without executing block. consider following example. application product model with instance method that looks product's price competing website. data returned this method would perfect low-level caching:"},{"id":1028,"title":"Caching with Rails: An Overview","heading":"1 Basic Caching","subheading":"1.8 SQL Caching","content":"query caching rails feature that caches result returned each query. rails encounters same query again that request, will cached result opposed running query against database again. example: second time same query against database, it's actually going database. first time result returned from query stored query cache memory) second time it's pulled from memory. however, it's important note that query caches created start action destroyed that action thus persist only duration action. you'd like store query results more persistent fashion, with level caching. rails provides different stores cached data (apart from page caching)."},{"id":1029,"title":"Caching with Rails: An Overview","heading":"2 Cache Stores","subheading":"2.1 Configuration","content":"your application's default cache store setting config.cache_store configuration option. other parameters passed arguments cache store's constructor: access cache calling rails.cache."},{"id":1030,"title":"Caching with Rails: An Overview","heading":"2 Cache Stores","subheading":"2.2 ActiveSupport::Cache::Store","content":"this class provides foundation interacting with cache rails. this abstract class cannot own. rather must concrete implementation class tied storage engine. rails ships with several implementations documented below. main methods call read, write, delete, exist?, fetch. fetch method takes block will either return existing value from cache, evaluate block write result cache value exists. there some common options that used cache implementations. these passed constructor various methods interact with entries. create your custom cache store simply extending activesupport::cache::store implementing appropriate methods. this way, swap number caching technologies into your rails application. custom cache store, simply cache store instance your custom class."},{"id":1031,"title":"Caching with Rails: An Overview","heading":"2 Cache Stores","subheading":"2.3 ActiveSupport::Cache::MemoryStore","content":"this cache store keeps entries memory same ruby process. cache store bounded size specified sending :size option initializer (default 32mb). when cache exceeds allotted size, cleanup will occur least recently used entries will removed. you're running multiple ruby rails server processes (which case you're using phusion passenger puma clustered mode), then your rails server process instances won't able share cache data with each other. this cache store appropriate large application deployments. however, work well small, traffic sites with only couple server processes, well development test environments. rails projects configured this implementation development environment default."},{"id":1032,"title":"Caching with Rails: An Overview","heading":"2 Cache Stores","subheading":"2.4 ActiveSupport::Cache::FileStore","content":"this cache store uses file system store entries. path directory where store files will stored must specified when initializing cache. with this cache store, multiple server processes same host share cache. this cache store appropriate medium traffic sites that served hosts. server processes running different hosts could share cache using shared file system, that setup recommended. cache will grow until disk full, recommended periodically clear entries. this default cache store implementation \"#{root}/tmp/cache/\") explicit config.cache_store supplied."},{"id":1033,"title":"Caching with Rails: An Overview","heading":"2 Cache Stores","subheading":"2.5 ActiveSupport::Cache::MemCacheStore","content":"this cache store uses danga's memcached server provide centralized cache your application. rails uses bundled dalli default. this currently most popular cache store production websites. used provide single, shared cache cluster with very high performance redundancy. when initializing cache, need specify addresses memcached servers your cluster. none specified, will assume memcached running localhost default port, this ideal setup larger sites. write fetch methods this cache accept additional options that take advantage features specific memcached. specify :raw send value directly server with serialization. value must string number. memcached direct operations like increment decrement only values. also specify :unless_exist don't want memcached overwrite existing entry."},{"id":1034,"title":"Caching with Rails: An Overview","heading":"2 Cache Stores","subheading":"2.6 ActiveSupport::Cache::RedisCacheStore","content":"redis cache store takes advantage redis support automatic eviction when reaches memory, allowing behave much like memcached cache server. deployment note: redis doesn't expire keys default, take care dedicated redis cache server. don't fill your persistent-redis server with volatile cache data! read redis cache server setup guide detail. cache-only redis server, maxmemory-policy variants allkeys. redis supports least-frequently-used eviction (allkeys-lfu), excellent default choice. redis earlier should least-recently-used eviction (allkeys-lru). cache read write timeouts relatively low. regenerating cached value often faster than waiting more than second retrieve both read write timeouts default second, lower your network consistently low-latency. default, cache store will attempt reconnect redis connection fails during request. experience frequent disconnects wish enable reconnect attempts. cache reads writes never raise exceptions; they just return instead, behaving there nothing cache. gauge whether your cache hitting exceptions, provide error_handler report exception gathering service. must accept three keyword arguments: method, cache store method that originally called; returning, value that returned user, typically nil; exception, exception that rescued. started, redis your gemfile: enable support faster hiredis connection library additionally adding ruby wrapper your gemfile: redis cache store will automatically require hiredis available. further configuration needed. finally, configuration relevant config/environments/*.rb file: more complex, production redis cache store look something like this:"},{"id":1035,"title":"Caching with Rails: An Overview","heading":"2 Cache Stores","subheading":"2.7 ActiveSupport::Cache::NullStore","content":"this cache store implementation meant used only development test environments never stores anything. this very useful development when have code that interacts directly with rails.cache caching interfere with being able results code changes. with this cache store, fetch read operations will result miss. keys used cache object that responds either cache_key to_param. implement cache_key method your classes need generate custom keys. active record will generate keys based class name record hashes arrays values cache keys. keys rails.cache will same those actually used with storage engine. they modified with namespace altered technology backend constraints. this means, instance, that can't save values with rails.cache then pull them with dalli gem. however, also don't need worry about exceeding memcached size limit violating syntax rules. conditional gets feature http specification that provide servers tell browsers that response request hasn't changed since last request safely pulled from browser cache. they work using http_if_none_match http_if_modified_since headers pass back forth both unique content identifier timestamp when content last changed. browser makes request where content identifier (etag) last modified since timestamp matches server's version then server only needs send back empty response with modified status. server's (i.e. our) responsibility look last modified timestamp if-none-match header determine whether send back full response. with conditional-get support rails this pretty easy task: instead options hash, also simply pass model. rails will updated_at cache_key_with_version methods setting last_modified etag: don't have special response processing using default rendering mechanism (i.e. you're using respond_to calling render yourself) then you've easy helper fresh_when: sometimes want cache response, example static page, that never gets expired. achieve this, http_cache_forever helper doing browser proxies will cache indefinitely. default cached responses will private, cached only user's browser. allow proxies cache response, public: true indicate that they serve cached response users. using this helper, last_modified header time.new(2011, 1).utc expires header years."},{"id":1036,"title":"Caching with Rails: An Overview","heading":"4 Conditional GET support","subheading":"4.1 Strong v/s Weak ETags","content":"rails generates weak etags default. weak etags allow semantically equivalent responses have same etags, even their bodies match exactly. this useful when don't want page regenerated minor changes response body. weak etags have leading differentiate them from strong etags. unlike weak etag, strong etag implies that response should exactly same byte byte identical. useful when doing range requests within large video file. some cdns support only strong etags, like akamai. absolutely need generate strong etag, done follows. also strong etag directly response. it's common want test caching strategy your application development mode. rails provides rails command dev:cache easily toggle caching on/off. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":1037,"title":"Active Record and PostgreSQL","heading":null,"subheading":null,"content":"order postgresql adapter need have least version installed. older versions supported. started with postgresql have look configuring rails guide. describes properly setup active record postgresql. postgresql offers number specific datatypes. following list types, that supported postgresql adapter."},{"id":1038,"title":"Active Record and PostgreSQL","heading":"1 Datatypes","subheading":"1.1 Bytea","content":""},{"id":1039,"title":"Active Record and PostgreSQL","heading":"1 Datatypes","subheading":"1.2 Array","content":""},{"id":1040,"title":"Active Record and PostgreSQL","heading":"1 Datatypes","subheading":"1.3 Hstore","content":""},{"id":1041,"title":"Active Record and PostgreSQL","heading":"1 Datatypes","subheading":"1.4 JSON and JSONB","content":""},{"id":1042,"title":"Active Record and PostgreSQL","heading":"1 Datatypes","subheading":"1.5 Range Types","content":"this type mapped ruby range objects."},{"id":1043,"title":"Active Record and PostgreSQL","heading":"1 Datatypes","subheading":"1.6 Composite Types","content":"currently there special support composite types. they mapped normal text columns:"},{"id":1044,"title":"Active Record and PostgreSQL","heading":"1 Datatypes","subheading":"1.7 Enumerated Types","content":"currently there special support enumerated types. they mapped normal text columns: value before/after existing should alter type: hint: show values enums have, should call this query rails psql console:"},{"id":1045,"title":"Active Record and PostgreSQL","heading":"1 Datatypes","subheading":"1.8 UUID","content":"uuid type define references migrations: this section more details using uuids primary key."},{"id":1046,"title":"Active Record and PostgreSQL","heading":"1 Datatypes","subheading":"1.9 Bit String Types","content":""},{"id":1047,"title":"Active Record and PostgreSQL","heading":"1 Datatypes","subheading":"1.10 Network Address Types","content":"types inet cidr mapped ruby ipaddr objects. macaddr type mapped normal text."},{"id":1048,"title":"Active Record and PostgreSQL","heading":"1 Datatypes","subheading":"1.11 Geometric Types","content":"geometric types, with exception points mapped normal text. point casted array containing coordinates. imagine need work with legacy database containing following table: this table does follow rails conventions all. because simple postgresql views updateable default, wrap follows: você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":1049,"title":"O Asset Pipeline","heading":"1 O que é o Asset Pipeline?","subheading":"1 O que é o Asset Pipeline?","content":"asset pipeline fornece framework concatenar minificar comprimir assets javascript css. também habilidade escrever esses assets outras linguagens pré-processadores tais como coffeescript, sass erb. isso permite assets aplicação sejam automaticamente combinados assets outras gems. asset pipeline implementado pela sprockets-rails, habilitado padrão. você pode desabilitar enquanto está criando nova aplicação passando opção --skip-sprockets. rails automaticamente adiciona sass-rails gemfile, qual usado pelo sprockets comprimir asset: usando opção --skip-sprockets previnirá rails adicione gemfile, então mais tarde você quiser habilitar asset pipeline você terá adicionar essas gems gemfile. além disso, criando aplicação opção --skip-sprockets gerará arquivo config/application.rb levemente diferente, declaração requerimento sprockets está comentado. você terá remover operador comentário nessa linha depois habilitar asset pipeline: configurar métodos compactação asset, coloque opções configuração apropriadas production.rb config.assets.css_compressor config.assets.js_compressor javascript:"},{"id":1050,"title":"O Asset Pipeline","heading":"1 O que é o Asset Pipeline?","subheading":"1.1 Principais Características","content":"primeira característica pipeline concatenar assets, qual pode reduzir número requisições navegador renderizar página web. navegadores limitados número requisições eles podem fazer paralelo, portanto, menos solicitações podem significar carregamento mais rápido aplicação. sprockets concatena todos arquivos javascript arquivo principal todos arquivos arquivo principal .css. como você aprenderá mais tarde neste guia, você pode mudar esta estratégia agrupar arquivos maneira quiser. produção, rails insere impressão digital sha256 dentro cada nome arquivo arquivo seja armazenado cache navegador. você pode invalidar armazenamento cache alterando essa impressão digital, qual acontece automaticamente sempre você muda conteúdo arquivo. segunda característica asset pipeline minificação compactação asset. arquivos css, isso feito removendo espaços branco comentários. javascript, mais processos complexos aplicados. você pode escolher entre conjunto opções especificar própria. terceira característica asset pipeline permite codificação assets meio línguagem alto nível, pré-compilação atuais assets. línguagens suportadas incluem sass css, coffeescript javascript, ambos padrão."},{"id":1051,"title":"O Asset Pipeline","heading":"1 O que é o Asset Pipeline?","subheading":"1.2 O que é Impressão Digital e Por Que Eu Deveria Me Importar?","content":"impressão digital técnica nome arquivo dependente conteúdo arquivo. quando conteúdo arquivo muda, nome arquivo muda também. conteúdo estático muda pouca frequência, forma mais fácil dizer duas versões arquivo idênticas, mesmo através diferentes servidores datas desenvolvimento. quando nome arquivo único baseado conteúdo, headers http podem configurados encorajar armazenamento caches todo lugar (seja cdns, isps, equipamentos rede, navegadores web) manter suas próprias cópias conteúdo. quando conteúdo atualizado, impressão digital mudará. isso fará clientes remotos requisitem nova cópia conteúdo. isso geralmente conhecido como cache busting. técnica sprockets impressão digital inserir hash conteúdo nome, geralmente final. exemplo arquivo global.css essa estratégia adotada pelo asset pipeline rails. antiga estratégia rails anexar query string(string consulta) baseada data cada asset vinculado helper interno. resumo código gerado parecia isso: estratégia query string(string consulta) tinha várias desvantagens: impressão digital resolve esses problemas evitando query string(string consulta), garantindo nome arquivos sejam coerentes base conteúdo. impressão digital habilitada padrão ambos ambientes desenvolvimento produção. você pode habilitar desabilitar isso configuração através opção config.assets.digest. mais leitura: versões anteriores rails, todos assets estavam localizados subdiretórios abaixo public, como imagens, javascripts stylesheets. asset pipeline, localização recomendada esses assets agora diretório app/assets. arquivos nesse diretório serão servidos pelo sprockets middleware. assets podem ainda colocados hierarquia public. qualquer asset public ainda será servido como arquivo estático pela aplicação servidor quando config.public_file_server.enabled estiver configurado como true. você deve usar app/assets arquivos devem pré-processados antes serem servidos. produção, rails pré-compila esses arquivos public/assets padrão. cópias arquivos pré-compilados serão então servidas como assets estáticos pelo servidor web. arquivos app/assets nunca serão servidos diretamente produção."},{"id":1052,"title":"O Asset Pipeline","heading":"2 Como usar o Asset Pipeline","subheading":"2.1 Assets Específicos de Controllers","content":"quando você gera scaffold controller, rails também gera arquivo cascading style sheet scss sass-rails estiver gemfile) aquele controller. adicionalmente, quando você gera scaffold, rails também gera arquivo scaffolds.css scaffolds.scss sass-rails estiver gemfile.) exemplo, você gerar projectscontroller, rails também adicionará novo arquivo app/assets/stylesheets/projects.scss. padrão, arquivos estarão prontos serem usados pela aplicação imediatamente usando diretiva require_tree. veja arquivos manifesto diretivas mais detalhes sobre require_tree. você também pode optar incluir stylesheets específicas controller arquivos javascript apenas seus respectivos diretórios, usando seguinte: javascript_include_tag params[:controller] stylesheet_link_tag params[:controller] fazer isso, certifique-se você está usando diretiva require_tree, pois isso resultará seus assets serem incluídos mais vez. você também pode desabilitar geração arquivos assets específicos controllers adicionando seguinte configuração config/application.rb:"},{"id":1053,"title":"O Asset Pipeline","heading":"2 Como usar o Asset Pipeline","subheading":"2.2 Organização dos Assets","content":"pipeline assets podem colocados dentro aplicação três locais seguintes: app/assets, lib/assets vendor/assets. quando arquivo referenciado partir manifesto helper, sprockets procura três locais padrões assets. três locais padrões são: diretórios images, javascripts stylesheets abaixo pasta app/assets, esses subdiretórios especiais qualquer caminho assets/* será pesquisado. exemplo, esses arquivos: poderiam referenciados manifesto seguinte maneira: assets dentro subdiretórios também podem acessados. referenciado como: você pode visualizar caminho busca inspecionando rails.application.config.assets.paths console rails. adicionalmente, além caminho padrão assets/*, caminhos (completos) podem adicionados pipeline config/initializers/assets.rb. exemplo: caminhos percorridos ordem eles aparecem caminho busca. padrão, isso significa arquivos app/assets precedência, mascararão caminhos correspondentes vendor. importante notar arquivos você quiser referenciar fora manifesto devem adicionados array pré-compilação, caso contrário eles estarão disponíveis ambiente produção. sprockets arquivos nomeados como index (com extensão relevante) propósito especial. exemplo, você tiver biblioteca jquery muitos módulos, armazenada lib/assets/javascripts/library_name, arquivo lib/assets/javascripts/library_name/index.js serve como manifesto todos arquivos desta biblioteca. esse arquivo poderia incluir lista ordenada todos arquivos necessários simples diretiva require_tree. biblioteca como todo pode acessada manifesto aplicação como: isso simplifica manutenção mantém coisas limpas, permitindo código relacionado seja agrupado antes inclusão outro lugar."},{"id":1054,"title":"O Asset Pipeline","heading":"2 Como usar o Asset Pipeline","subheading":"2.3 Codificando Links para Assets","content":"sprockets adiciona nenhum método acessar seus assets você ainda familiares javascript_include_tag stylesheet_link_tag: você estiver usando turbolinks, incluída padrão rails, então inclua opção 'data-turbolinks-track' turbolinks verifique asset atualizado então carrega naquela página: views comuns você pode acessar imagens diretório app/assets/images como essa: pipeline estiver ativo aplicação desativado contexto ambiente atual), esse arquivo servido pelo sprockets. arquivo existir public/assets/rails.png servido pelo servidor web. alternativamente, requisição arquivo hash sha256 como public/assets/rails-f90d8a84c707a8dc923fca1ca1895ae8ed0a09237f6992015fef1e11be77c023.png tratado mesma maneira. forma como esses hashes gerados está coberta seção produção, posteriormente nesse guia. sprockets procurará através caminhos especificados config.assets.paths, inclui caminhos padrões aplicação quaisquer caminhos adicionados pelas engines rails. imagens também podem organizadas subdiretórios necessário, então podem acessadas pelo nome diretório tag: asset pipeline avalia automaticamente erb. isso significa você adicionar extensão asset (por exemplo, application.css.erb), então helpers como asset_path estarão disponíveis suas regras css: isso escreve caminho asset particular está sendo referenciado. nesse exemplo, faria sentido imagem caminhos carregados assets, como app/assets/images/image.png, seria referenciado aqui. essa imagem está disponível public/assets como arquivo impressão digital, então aquele caminho referenciado. você quiser usar dados método embutir imagem diretamente arquivo você pode usar helper asset_data_uri. isso insere dados corretamente formatada fonte. note fechamento pode estilo -%>. utilizar asset pipeline, caminhos assets devem reescritos sass-rails provê helpers -url -path (hifenizados sass, separados underscore ruby) seguintes classes assets: imagem, fonte, vídeo, áudio, javascript folha estilo. forma mais genérica também pode usada: você adicionar extensão asset javascript, fazendo algo como application.js.erb, você pode então usar helper asset_path código javascript: isso escreve caminho asset particular está sendo referenciado. similarmente, você pode usar helper asset_path arquivos coffeescript extensão (i.e., application.coffee.erb)."},{"id":1055,"title":"O Asset Pipeline","heading":"2 Como usar o Asset Pipeline","subheading":"2.4 Arquivos de Manifesto e Diretivas","content":"sprockets arquivos manifesto determinar quais assets incluir servir. esses arquivos manifesto contém diretivas instruções dirão sprockets quais arquivos solicitar construir arquivo javascript único. essas diretivas, sprockets carrega arquivos especificados, processa-os necessário, concatena-os único arquivo então comprime-os (baseado valor rails.application.config.assets.js_compressor). servir arquivo invés muitos, tempo carregamento páginas pode amplamente reduzido porque navegador menos requisições. compressão também reduz tamanho arquivos, permitindo navegador baixá-los mais rapidamente. exemplo, arquivo app/assets/javascripts/application.js contendo seguintes linhas: arquivos javascript, diretivas sprocket começam //=. caso acima, arquivo está usando diretivas require require_tree. diretiva require usada instruir sprockets arquivos você deseja solicitar. aqui, você está solicitando arquivos rails-ujs.js turbolinks.js, estão disponíveis algum lugar caminho busca sprockets. você precisa informar extensões explicitamente. sprockets assume você está solicitando arquivo quando feito dentro arquivo .js. diretiva require_tree instrui sprockets recursivamente incluir todos arquivos javascript diretório especificado output. esses caminhos deverão especificados maneira relativa arquivo manifesto. você também pode usar diretiva require_directory, inclui todos arquivos javascript somente diretório especificado, recursão. diretivas processadas cima baixo, ordem qual arquivos incluídos pelo require_tree garantida. você deve confiar nenhuma ordem particular entre eles. você precisar garantir javascript particular termine acima outro arquivo concatenado, solicite pré-requisito antes manifesto. note família diretivas require previne arquivos serem incluídos duas vezes output. rails também cria arquivo padrão app/assets/stylesheets/application.css contém essas linhas: rails cria app/assets/stylesheets/application.css independentemente opção --skip-sprockets usada criar nova aplicação rails. isso permite você facilmente adicione asset pipelining mais tarde assim quiser. diretivas funcionam arquivos javascript também funcionam folhas estilo (que obviamente incluem folhas estilo além arquivos javascript). diretiva require_tree manifesto funciona mesma maneira javascript, solicitando todas folhas estilo diretório corrente. nesse exemplo, require_self usado. isso coloca contido dentro arquivo houver algum) localização exata chamada require_self. você pode fazer globbing arquivos usando @import @import \"**/*\" adicionar árvore completa, equivalente como require_tree funciona. veja documentação sass-rails mais informações ressalvas importantes. você pode quantos arquivos manifesto quiser. exemplo, manifestos admin.css admin.js podem conter arquivos usados pela seção admin aplicação. mesmas afirmações sobre ordens feitas acima também aplicam. particular, você pode especificar arquivos individuais eles serão compilados ordem especificada. exemplo, você pode concatenar três arquivos juntos seguinte maneira:"},{"id":1056,"title":"O Asset Pipeline","heading":"2 Como usar o Asset Pipeline","subheading":"2.5 Pré-processamento","content":"extensões arquivos usadas asset determinam qual pré-processamento aplicado. quando controller scaffold gerado gemset padrão rails, arquivo coffeescript arquivo scss gerados lugar arquivo comum javascript css. exemplo usado anteriormente controller chamado \"projects\", gerou arquivo app/assets/stylesheets/projects.scss. modo desenvolvimento, asset pipeline estiver desabilitado, quando esses arquivos solicitados, eles serão processados pelos processors especificados pelas gems coffee-script sass então enviados volta navegador como javascript respectivamente. quando asset pipelining está habilitado, esses arquivos pré-processados colocados diretório public/assets, serem servidos seja pela aplicação rails pelo servidor web. camadas adicionais pré-processamento podem solicitadas adicionar outras extensões, onde cada extensão processada direita esquerda. essas devem usadas processamento seja aplicado. exemplo, folha estilos chamada app/assets/stylesheets/projects.scss.erb primeiramente processada como erb, depois como scss finalmente servida como css. mesmo aplica arquivo javascript app/assets/javascripts/projects.coffee.erb, processado como erb, depois coffeescript então servido como javascript. tenha mente ordem desses pré-processadores importante. exemplo, você chamou arquivo javascript app/assets/javascripts/projects.erb.coffee, então seria processado pelo interpretador coffeescript primeiro, entende erb, causaria problemas. development mode, assets served separate files order they specified manifest file. this manifest app/assets/javascripts/application.js: would generate this html: body param required sprockets."},{"id":1057,"title":"O Asset Pipeline","heading":"3 In Development","subheading":"3.1 Raise an Error When an Asset is Not Found","content":"using sprockets-rails 3.2.0 configure what happens when asset lookup performed nothing found. turn \"asset fallback\" then error will raised when asset cannot found. \"asset fallback\" enabled then when asset cannot found path will output instead error raised. asset fallback behavior disabled default."},{"id":1058,"title":"O Asset Pipeline","heading":"3 In Development","subheading":"3.2 Turning Digests Off","content":"turn digests updating config/environments/development.rb include: when this option true, digests will generated asset urls."},{"id":1059,"title":"O Asset Pipeline","heading":"3 In Development","subheading":"3.3 Turning Debugging Off","content":"turn debug mode updating config/environments/development.rb include: when debug mode off, sprockets concatenates runs necessary preprocessors files. with debug mode turned manifest above would generate instead: assets compiled cached first request after server started. sprockets sets must-revalidate cache-control http header reduce request overhead subsequent requests these browser gets (not modified) response. files manifest have changed between requests, server responds with compiled file. debug mode also enabled rails helper methods: :debug option redundant debug mode already also enable compression development mode sanity check, disable on-demand required debugging. production environment sprockets uses fingerprinting scheme outlined above. default rails assumes assets have been precompiled will served static assets your server. during precompilation phase sha256 generated from contents compiled files, inserted into filenames they written disk. these fingerprinted names used rails helpers place manifest name. example this: generates something like this: fingerprinting behavior controlled config.assets.digest initialization option (which defaults true)."},{"id":1060,"title":"O Asset Pipeline","heading":"4 In Production","subheading":"4.1 Precompiling Assets","content":"rails comes bundled with command compile asset manifests other files pipeline. compiled assets written location specified config.assets.prefix. default, this /assets directory. call this command server during deployment create compiled versions your assets directly server. next section information compiling locally. command capistrano (v2.15.1 above) includes recipe handle this deployment. following line capfile: this links folder specified config.assets.prefix shared/assets. already this shared folder you'll need write your deployment command. important that this folder shared between deployments that remotely cached pages referencing compiled assets still work life cached page. default matcher compiling files includes application.js, application.css non-js/css files (this will include image assets automatically) from app/assets folders including your gems: have other manifests individual stylesheets javascript files include, them precompile array config/initializers/assets.rb: command also generates .sprockets-manifest-randomhex.json (where randomhex 16-byte random string) that contains list with your assets their respective fingerprints. this used rails helper methods avoid handing mapping requests back sprockets. typical manifest file looks like: default location manifest root location specified config.assets.prefix ('/assets' default). precompiled assets exist file system served directly your server. they have far-future headers default, benefit fingerprinting you'll have update your server configuration those headers. apache: nginx:"},{"id":1061,"title":"O Asset Pipeline","heading":"4 In Production","subheading":"4.2 Local Precompilation","content":"there several reasons might want precompile your assets locally. among them are: local compilation allows commit compiled files into source control, deploy normal. there three caveats: config/environments/development.rb, place following line: prefix change makes sprockets different serving assets development mode, pass requests sprockets. prefix still /assets production environment. without this change, application would serve precompiled assets from /assets development, would local changes until compile assets again. practice, this will allow precompile locally, have those files your working tree, commit those files source control when needed. development mode will work expected."},{"id":1062,"title":"O Asset Pipeline","heading":"4 In Production","subheading":"4.3 Live Compilation","content":"some circumstances wish live compilation. this mode requests assets pipeline handled sprockets directly. enable this option set: first request assets compiled cached outlined development above, manifest names used helpers altered include sha256 hash. sprockets also sets cache-control http header max-age=31536000. this signals caches between your server client browser that this content (the file served) cached year. effect this reduce number requests this asset from your server; asset good chance being local browser cache some intermediate cache. this mode uses more memory, performs more poorly than default, recommended. deploying production application system without pre-existing javascript runtimes, want your gemfile:"},{"id":1063,"title":"O Asset Pipeline","heading":"4 In Production","subheading":"4.4 CDNs","content":"stands content delivery network, they primarily designed cache assets over world that when browser requests asset, cached copy will geographically close that browser. serving assets directly from your rails server production, best practice front your application. common pattern using your production application \"origin\" server. this means when browser requests asset from there cache miss, will grab file from your server then cache example running rails application example.com have configured mycdnsubdomain.fictional-cdn.com, then when request made mycdnsubdomain.fictional- cdn.com/assets/smile.png, will query your server once example.com/assets/smile.png cache request. next request that comes same will cached copy. when serve asset directly request never touches your rails server. since assets from geographically closer browser, request faster, since your server doesn't need spend time serving assets, focus serving application code fast possible. your have have your application running production internet publicly available url, example example.com. next you'll need sign service from cloud hosting provider. when this need configure \"origin\" point back your website example.com, check your provider documentation configuring origin server. provisioned should give custom subdomain your application such mycdnsubdomain.fictional-cdn.com (note fictional-cdn.com valid provider time this writing). that have configured your server, need tell browsers your grab assets instead your rails server directly. this configuring rails your asset host instead using relative path. your asset host rails, need config.action_controller.asset_host config/environments/production.rb: also this value through environment variable make running staging copy your site easier: once have configured your server your when serve webpage that asset: instead returning path such /assets/smile.png (digests left readability). generated will have full path your cdn. copy smile.png will serve browser your server doesn't even know requested. does have copy will find \"origin\" example.com/assets/smile.png then store future use. want serve only some assets from your cdn, custom :host option your asset helper, which overwrites value config.action_controller.asset_host. works caching content. stale content, then hurting rather than helping your application. purpose this section describe general caching behavior most cdns, your specific provider behave slightly differently. while described being good caching assets, reality caches entire request. this includes body asset well headers. most important being cache-control which tells (and browsers) cache contents. this means that someone requests asset that does exist /assets/i-dont-exist.png your rails application returns 404, then your will likely cache page valid cache-control header present. check headers cached properly your using curl. request headers from both your server your verify they same: versus copy. check your documentation additional information they provide such x-cache additional headers they add. cache control header specification that describes request cached. when used, browser will this information cache contents. this very helpful assets that modified that browser does need re-download website's javascript every request. generally want rails server tell (and browser) that asset \"public\", that means cache store request. also commonly want max-age which long cache will store object before invalidating cache. max-age value seconds with maximum possible value which year. this your rails application setting when your application serves asset production, will store asset year. since most cdns also cache headers request, this cache-control will passed along future browsers seeking this asset, browser then knows that store this asset very long time before needing re-request most cdns will cache contents asset based complete url. this means that request will completely different cache from want future max-age your cache-control (and do), then make sure when change your assets that your cache invalidated. example when changing smiley face image from yellow blue, want visitors your site blue face. when using with rails asset pipeline config.assets.digest true default that each asset will have different file name when changed. this don't have ever manually invalidate items your cache. using different unique asset name instead, your users latest asset."},{"id":1064,"title":"O Asset Pipeline","heading":"5 Customizing the Pipeline","subheading":"5.1 CSS Compression","content":"options compressing yui. compressor provides minification. following line enables compression, requires yui-compressor gem. other option compressing have sass-rails installed"},{"id":1065,"title":"O Asset Pipeline","heading":"5 Customizing the Pipeline","subheading":"5.2 JavaScript Compression","content":"possible options javascript compression :closure, :uglifier :yui. these require closure-compiler, uglifier yui-compressor gems, respectively. take uglifier gem, example. this wraps uglifyjs (written nodejs) ruby. compresses your code removing white space comments, shortening local variable names, performing other micro-optimizations such changing else statements ternary operators where possible. following line invokes uglifier javascript compression."},{"id":1066,"title":"O Asset Pipeline","heading":"5 Customizing the Pipeline","subheading":"5.3 GZipping your assets","content":"default, gzipped version compiled assets will generated, along with non-gzipped version assets. gzipped assets help reduce transmission data over wire. configure this setting gzip flag. refer your server's documentation instructions serve gzipped assets."},{"id":1067,"title":"O Asset Pipeline","heading":"5 Customizing the Pipeline","subheading":"5.4 Using Your Own Compressor","content":"compressor config settings javascript also take object. this object must have compress method that takes string sole argument must return string. enable this, pass object config option application.rb:"},{"id":1068,"title":"O Asset Pipeline","heading":"5 Customizing the Pipeline","subheading":"5.5 Changing the assets Path","content":"public path that sprockets uses default /assets. this changed something else: this handy option updating older project that didn't asset pipeline already uses this path wish this path resource."},{"id":1069,"title":"O Asset Pipeline","heading":"5 Customizing the Pipeline","subheading":"5.6 X-Sendfile Headers","content":"x-sendfile header directive server ignore response from application, instead serve specified file from disk. this option default, enabled your server supports when enabled, this passes responsibility serving file server, which faster. have look send_file this feature. apache nginx support this option, which enabled config/environments/production.rb: default, sprockets caches assets tmp/cache/assets development production environments. this changed follows: disable assets cache store: assets also come from external sources form gems. good example this jquery-rails gem. this contains engine class which inherits from rails::engine. doing this, rails informed that directory this contain assets app/assets, lib/assets vendor/assets directories this engine added search path sprockets. sprockets uses processors, transformers, compressors, exporters extend sprockets functionality. have look extending sprockets learn more. here registered preprocessor comment text/css (.css) files. that have module that modifies input data, it's time register preprocessor your mime type. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":1070,"title":"Ruby on Rails 6.0 Release Notes","heading":"1 Upgrading to Rails 6.0","subheading":"1 Upgrading to Rails 6.0","content":"you're upgrading existing application, it's great idea have good test coverage before going should also first upgrade rails case haven't make sure your application still runs expected before attempting update rails 6.0. list things watch when upgrading available upgrading ruby rails guide."},{"id":1071,"title":"Ruby on Rails 6.0 Release Notes","heading":"2 Major Features","subheading":"2.1 Action Mailbox","content":"pull request action mailbox allows route incoming emails controller-like mailboxes. read more about action mailbox action mailbox basics guide."},{"id":1072,"title":"Ruby on Rails 6.0 Release Notes","heading":"2 Major Features","subheading":"2.2 Action Text","content":"pull request action text brings rich text content editing rails. includes trix editor that handles everything from formatting links quotes lists embedded images galleries. rich text content generated trix editor saved richtext model that's associated with existing active record model application. embedded images other attachments) automatically stored using active storage associated with included richtext model. read more about action text action text overview guide."},{"id":1073,"title":"Ruby on Rails 6.0 Release Notes","heading":"2 Major Features","subheading":"2.3 Parallel Testing","content":"pull request parallel testing allows parallelize your test suite. while forking processes default method, threading supported well. running tests parallel reduces time takes your entire test suite run."},{"id":1074,"title":"Ruby on Rails 6.0 Release Notes","heading":"2 Major Features","subheading":"2.4 Action Cable Testing","content":"pull request action cable testing tools allow test your action cable functionality level: connections, channels, broadcasts. please refer changelog detailed changes."},{"id":1075,"title":"Ruby on Rails 6.0 Release Notes","heading":"3 Railties","subheading":"3.1 Removals","content":""},{"id":1076,"title":"Ruby on Rails 6.0 Release Notes","heading":"3 Railties","subheading":"3.2 Deprecations","content":""},{"id":1077,"title":"Ruby on Rails 6.0 Release Notes","heading":"3 Railties","subheading":"3.3 Notable changes","content":"please refer changelog detailed changes."},{"id":1078,"title":"Ruby on Rails 6.0 Release Notes","heading":"4 Action Cable","subheading":"4.1 Removals","content":""},{"id":1079,"title":"Ruby on Rails 6.0 Release Notes","heading":"4 Action Cable","subheading":"4.2 Deprecations","content":""},{"id":1080,"title":"Ruby on Rails 6.0 Release Notes","heading":"4 Action Cable","subheading":"4.3 Notable changes","content":"please refer changelog detailed changes."},{"id":1081,"title":"Ruby on Rails 6.0 Release Notes","heading":"5 Action Pack","subheading":"5.1 Removals","content":""},{"id":1082,"title":"Ruby on Rails 6.0 Release Notes","heading":"5 Action Pack","subheading":"5.2 Deprecations","content":""},{"id":1083,"title":"Ruby on Rails 6.0 Release Notes","heading":"5 Action Pack","subheading":"5.3 Notable changes","content":"please refer changelog detailed changes."},{"id":1084,"title":"Ruby on Rails 6.0 Release Notes","heading":"6 Action View","subheading":"6.1 Removals","content":""},{"id":1085,"title":"Ruby on Rails 6.0 Release Notes","heading":"6 Action View","subheading":"6.2 Deprecations","content":""},{"id":1086,"title":"Ruby on Rails 6.0 Release Notes","heading":"6 Action View","subheading":"6.3 Notable changes","content":"please refer changelog detailed changes."},{"id":1087,"title":"Ruby on Rails 6.0 Release Notes","heading":"7 Action Mailer","subheading":"7.1 Removals","content":""},{"id":1088,"title":"Ruby on Rails 6.0 Release Notes","heading":"7 Action Mailer","subheading":"7.2 Deprecations","content":""},{"id":1089,"title":"Ruby on Rails 6.0 Release Notes","heading":"7 Action Mailer","subheading":"7.3 Notable changes","content":"please refer changelog detailed changes."},{"id":1090,"title":"Ruby on Rails 6.0 Release Notes","heading":"8 Active Record","subheading":"8.1 Removals","content":""},{"id":1091,"title":"Ruby on Rails 6.0 Release Notes","heading":"8 Active Record","subheading":"8.2 Deprecations","content":""},{"id":1092,"title":"Ruby on Rails 6.0 Release Notes","heading":"8 Active Record","subheading":"8.3 Notable changes","content":"please refer changelog detailed changes."},{"id":1093,"title":"Ruby on Rails 6.0 Release Notes","heading":"9 Active Storage","subheading":"9.1 Removals","content":""},{"id":1094,"title":"Ruby on Rails 6.0 Release Notes","heading":"9 Active Storage","subheading":"9.2 Deprecations","content":""},{"id":1095,"title":"Ruby on Rails 6.0 Release Notes","heading":"9 Active Storage","subheading":"9.3 Notable changes","content":"please refer changelog detailed changes."},{"id":1096,"title":"Ruby on Rails 6.0 Release Notes","heading":"10 Active Model","subheading":"10.1 Removals","content":""},{"id":1097,"title":"Ruby on Rails 6.0 Release Notes","heading":"10 Active Model","subheading":"10.2 Deprecations","content":""},{"id":1098,"title":"Ruby on Rails 6.0 Release Notes","heading":"10 Active Model","subheading":"10.3 Notable changes","content":"please refer changelog detailed changes."},{"id":1099,"title":"Ruby on Rails 6.0 Release Notes","heading":"11 Active Support","subheading":"11.1 Removals","content":""},{"id":1100,"title":"Ruby on Rails 6.0 Release Notes","heading":"11 Active Support","subheading":"11.2 Deprecations","content":""},{"id":1101,"title":"Ruby on Rails 6.0 Release Notes","heading":"11 Active Support","subheading":"11.3 Notable changes","content":"please refer changelog detailed changes."},{"id":1102,"title":"Ruby on Rails 6.0 Release Notes","heading":"12 Active Job","subheading":"12.1 Removals","content":""},{"id":1103,"title":"Ruby on Rails 6.0 Release Notes","heading":"12 Active Job","subheading":"12.2 Deprecations","content":""},{"id":1104,"title":"Ruby on Rails 6.0 Release Notes","heading":"12 Active Job","subheading":"12.3 Notable changes","content":"please refer changelog detailed changes."},{"id":1105,"title":"Ruby on Rails 6.0 Release Notes","heading":"13 Ruby on Rails Guides","subheading":"13.1 Notable changes","content":"full list contributors rails many people spent many hours making rails, stable robust framework kudos them. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":1106,"title":"Ruby on Rails Guides Guidelines","heading":"1 Markdown","subheading":"1 Markdown","content":"guides written github flavored markdown. there comprehensive documentation markdown, well cheatsheet. each guide should start with motivational text (that's little introduction blue area). prologue should tell reader what guide about, what they will learn. example, routing guide. title every guide uses heading; guide sections headings; subsections headings; etc. note that generated html output will heading tags starting with <h2>. when writing headings, capitalize words except prepositions, conjunctions, internal articles, forms verb be\": same inline formatting regular text: links (api.rubyonrails.org) processed guides generator following manner: links that include release left untouched. example modified. please these release notes, since they should point corresponding version matter target being generated. link does include release edge guides being generated, domain replaced edgeapi.rubyonrails.org. example, becomes link does include release release guides being generated, rails version injected. example, generating guides v5.1.0 link becomes please don't link edgeapi.rubyonrails.org manually. guides should coherent consistent where appropriate. particular, these sections documentation guidelines also apply guides: before generating guides, make sure that have latest version bundler installed your system. find latest bundler version here. this writing, it's v1.17.1. install latest version bundler, install bundler."},{"id":1107,"title":"Ruby on Rails Guides Guidelines","heading":"6 HTML Guides","subheading":"6.1 Generation","content":"generate guides, just into guides directory, bundle install, execute:  resulting html files found ./output directory. process my_guide.md nothing else only environment variable: default, guides that have been modified processed, only rarely needed practice. force processing guides, pass all=1. want generate guides language other than english, keep them separate directory under source (eg. source/es) guides_language environment variable: want environment variables configure generation script just run:"},{"id":1108,"title":"Ruby on Rails Guides Guidelines","heading":"6 HTML Guides","subheading":"6.2 Validation","content":"please validate generated html with: particularly, titles generated from their content this often leads duplicates. please warnings=1 when generating guides detect them. warning messages suggest solution."},{"id":1109,"title":"Ruby on Rails Guides Guidelines","heading":"7 Kindle Guides","subheading":"7.1 Generation","content":"generate guides kindle, following rake task: você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":1110,"title":"Ruby on Rails 4.1 Release Notes","heading":"1 Upgrading to Rails 4.1","subheading":"1 Upgrading to Rails 4.1","content":"you're upgrading existing application, it's great idea have good test coverage before going should also first upgrade rails case haven't make sure your application still runs expected before attempting update rails 4.1. list things watch when upgrading available upgrading ruby rails guide."},{"id":1111,"title":"Ruby on Rails 4.1 Release Notes","heading":"2 Major Features","subheading":"2.1 Spring Application Preloader","content":"spring rails application preloader. speeds development keeping your application running background don't need boot every time test, rake task migration. rails applications will ship with \"springified\" binstubs. this means that bin/rails bin/rake will automatically take advantage preloaded spring environments. running rake tasks: running rails command: spring introspection: have look spring readme available features. upgrading ruby rails guide migrate existing applications this feature."},{"id":1112,"title":"Ruby on Rails 4.1 Release Notes","heading":"2 Major Features","subheading":"2.2 config/secrets.yml","content":"rails generates secrets.yml file config folder. default, this file contains application's secret_key_base, could also used store other secrets such access keys external apis. secrets added this file accessible rails.application.secrets. example, with following config/secrets.yml: rails.application.secrets.some_api_key returns somekey development environment. upgrading ruby rails guide migrate existing applications this feature."},{"id":1113,"title":"Ruby on Rails 4.1 Release Notes","heading":"2 Major Features","subheading":"2.3 Action Pack Variants","content":"often want render different html/json/xml templates phones, tablets, desktop browsers. variants make easy. request variant specialization request format, like :tablet, :phone, :desktop. variant before_action: respond variants action just like respond formats: provide separate templates each format variant: also simplify variants definition using inline syntax:"},{"id":1114,"title":"Ruby on Rails 4.1 Release Notes","heading":"2 Major Features","subheading":"2.4 Action Mailer Previews","content":"action mailer previews provide emails look visiting special that renders them. implement preview class whose methods return mail object you'd like check: preview available http://localhost:3000/rails/mailers/notifier/welcome, list them http://localhost:3000/rails/mailers. default, these preview classes live test/mailers/previews. this configured using preview_path option. documentation detailed write"},{"id":1115,"title":"Ruby on Rails 4.1 Release Notes","heading":"2 Major Features","subheading":"2.5 Active Record enums","content":"declare enum attribute where values integers database, queried name. documentation detailed write"},{"id":1116,"title":"Ruby on Rails 4.1 Release Notes","heading":"2 Major Features","subheading":"2.6 Message Verifiers","content":"message verifiers used generate verify signed messages. this useful safely transport sensitive data like remember-me tokens friends. method rails.application.message_verifier returns message verifier that signs messages with derived from secret_key_base given message verifier name:"},{"id":1117,"title":"Ruby on Rails 4.1 Release Notes","heading":"2 Major Features","subheading":"2.7 Module#concerning","content":"natural, low-ceremony separate responsibilities within class: this example equivalent defining eventtracking module inline, extending with activesupport::concern, then mixing todo class. documentation detailed write intended cases."},{"id":1118,"title":"Ruby on Rails 4.1 Release Notes","heading":"2 Major Features","subheading":"2.8 CSRF protection from remote <script> tags","content":"cross-site request forgery (csrf) protection covers requests with javascript responses, too. that prevents third-party site from referencing your javascript attempting extract sensitive data. this means your tests that urls will fail csrf protection unless they xhr. upgrade your tests explicit about expecting xmlhttprequests. instead post :create, format: :js, switch explicit :post, :create, format: :js. please refer changelog detailed changes."},{"id":1119,"title":"Ruby on Rails 4.1 Release Notes","heading":"3 Railties","subheading":"3.1 Removals","content":""},{"id":1120,"title":"Ruby on Rails 4.1 Release Notes","heading":"3 Railties","subheading":"3.2 Notable changes","content":"please refer changelog detailed changes."},{"id":1121,"title":"Ruby on Rails 4.1 Release Notes","heading":"4 Action Pack","subheading":"4.1 Removals","content":""},{"id":1122,"title":"Ruby on Rails 4.1 Release Notes","heading":"4 Action Pack","subheading":"4.2 Notable changes","content":"please refer changelog detailed changes."},{"id":1123,"title":"Ruby on Rails 4.1 Release Notes","heading":"5 Action Mailer","subheading":"5.1 Notable changes","content":"please refer changelog detailed changes."},{"id":1124,"title":"Ruby on Rails 4.1 Release Notes","heading":"6 Active Record","subheading":"6.1 Removals","content":""},{"id":1125,"title":"Ruby on Rails 4.1 Release Notes","heading":"6 Active Record","subheading":"6.2 Deprecations","content":""},{"id":1126,"title":"Ruby on Rails 4.1 Release Notes","heading":"6 Active Record","subheading":"6.3 Notable changes","content":"before this change when defined default_scope model overridden chained conditions same field. merged like other scope. more details. please refer changelog detailed changes."},{"id":1127,"title":"Ruby on Rails 4.1 Release Notes","heading":"7 Active Model","subheading":"7.1 Deprecations","content":""},{"id":1128,"title":"Ruby on Rails 4.1 Release Notes","heading":"7 Active Model","subheading":"7.2 Notable changes","content":"please refer changelog detailed changes."},{"id":1129,"title":"Ruby on Rails 4.1 Release Notes","heading":"8 Active Support","subheading":"8.1 Removals","content":""},{"id":1130,"title":"Ruby on Rails 4.1 Release Notes","heading":"8 Active Support","subheading":"8.2 Deprecations","content":""},{"id":1131,"title":"Ruby on Rails 4.1 Release Notes","heading":"8 Active Support","subheading":"8.3 Notable changes","content":"full list contributors rails many people spent many hours making rails, stable robust framework kudos them. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":1132,"title":"Começando a usar Action Mailer","heading":"1 Introdução","subheading":"1 Introdução","content":"action mailer permite você envie emails direto aplicação usando classes mailer views eles herdam actionmailer::base encontram app/mailers. mailers também funcionam maneira muito semelhante controllers. alguns exemplos semelhanças mostrados abaixo. mailers tem: esta seção guiar processo criação mailer view."},{"id":1133,"title":"Começando a usar Action Mailer","heading":"2 Enviando E-mails","subheading":"2.1 Passo a Passo para Gerar um Mailer","content":"como pôde exemplo acima, você pode gerar mailers como outros tipos arquivos rails. você prefere usar generator, você pode criar esses arquivos dentro app/mailers/, esqueça adicionar herança actionmailer::base mailers: mailers métodos chamados actions usam views estruturar conteúdo. onde controller gera conteúdo como html enviar volta cliente, mailer cria mensagem entregue e-mail. app/mailers/user_mailer.rb contém mailer vazio: vamos adicionar método chamado welcome_email, enviará e-mail endereço e-mail registrado pelo usuário. breve explicação sobre itens apresentados método acima. lista completa todas opções disponíveis, favor, olhada mais abaixo seção: lista completa atributos configuração action mailer. crie arquivo nome welcome_email.html.erb app/views/user_mailer/. este será modelo usaremos nosso e-mail, formatado usando html: vamos criar também modelo usando somente texto este e-mail. todos programas e-mail leem html, então enviar dois formatos prática. isto criaremos arquivo nome welcome_email.text.erb app/views/user_mailer/: quando você chamar método mail, actionmailer detectará existem dois modelos esse e-mail html outro somente texto) automaticamente gerar multipart/alternative (opção indica programa e-mail essa mensagem versão html outra somente texto) e-mail. mailers somente outra maneira renderizar view. invés renderizar view envia-la usando protocolo http, mailer envia através protocolos e-mail. esse motivo, sentido, exemplo anterior, controller informe mailer enviar mensagem assim usuário complete cadastro sucesso. configurar isto muito simples. primeiro, criaremos simples scaffold (esqueleto) nosso model user: agora temos model nossos usuários, podemos começar criar funcionalidade. isso vamos editar arquivo app/controllers/users_controller.rb chamar usermailer enviar e-mail novo usuário registrado. vamos editar action create inserindo seguinte chamada: usermailer.with(user: @user).welcome_email logo após usuário sido salvo sucesso. action mailer nativamente integrado active job, logo você pode enviar e-mails fora ciclo requisição-resposta, então usuário precisa aguardar esse processo terminar continuar usando aplicação. você deseja e-mail sejam enviados mesmo tempo chamar mailer, simplesmente chame deliver_now: qualquer chave-valor passado with torna parte hash params será usado action mailer. então with(user: @user, account: @user.account) cria params[:user] params[:account] disponíveis action mailer. como acontece controllers também params. método welcome_email como retorno objeto tipo actionmailer::messagedelivery você pode encadear métodos deliver_now deliver_later assim enviar como e-mail. objeto actionmailer::messagedelivery somente wrapper (embrulho) classe mail::message. você quiser inspecionar, alterar, fazer qualquer coisa objeto mail::message você pode acessa-lo através método message objeto actionmailer::messagedelivery."},{"id":1134,"title":"Começando a usar Action Mailer","heading":"2 Enviando E-mails","subheading":"2.2 Codificação automática","content":"action mailer gerencia automaticamente codificação caracteres multibytes (caracteres asiáticos, emojis etc) dentro cabeçalho corpo. exemplos mais complexos como definir lista alternativa caracteres codificar texto maneira diferente, essa biblioteca como referência: mail."},{"id":1135,"title":"Começando a usar Action Mailer","heading":"2 Enviando E-mails","subheading":"2.3 Lista Completa de Métodos do Action Mailer","content":"existem apenas três métodos você precisa enviar qualquer mensagem e-mail: action mailer muito fácil trabalhar anexos. quando método mail invocado, enviará e-mail modo multipart anexo, corretamente configurado, sendo anexo primeira parte como multipart/mixed mensagem sendo segunda multipart/alternative texto html e-mail. action mailer cria anexos dentro mensagem e-mail, algo antes versão envolvia algumas gambiarras, maneira muito simples trivia como sempre deveria sido. possível enviar e-mail mais destinatários usando mensagem e-mail (por exemplo: notificando administradores houve novo cadastro) bastando configurar lista e-mails parâmetro :to. essa lista e-mails pode array endereços e-mails string contendo todos e-mails separados vírgulas. mesmo formato pode usado enviar e-mails cópia (cc:) cópia oculta (cco: bcc: inglês), adicione :bcc enviar seguindo padrões descritos acima. alguns momentos você deseja exibir nome pessoa enviou recebe mensagem invés mostrar somente e-mail. truque conseguir isso usar seguinte formatação endereço e-mail \"nome completo\" <endereço_de_email>."},{"id":1136,"title":"Começando a usar Action Mailer","heading":"2 Enviando E-mails","subheading":"2.4 Mailer Views","content":"mailer views located app/views/name_of_mailer_class directory. specific mailer view known class because name same mailer method. example from above, mailer view welcome_email method will app/views/user_mailer/welcome_email.html.erb html version welcome_email.text.erb plain text version. change default mailer view your action something like: this case will look templates app/views/notifications with name another. also specify array paths template_path, they will searched order. want more flexibility also pass block render specific templates even render inline text without using template file: this will render template 'another_template.html.erb' html part rendered text text part. render command same used inside action controller, same options, such :text, :inline etc. would like render template located outside default app/views/mailer_name/ directory, apply prepend_view_path, like also consider using append_view_path method. perform fragment caching mailer views like application views using cache method. order this feature, need configure your application with this: fragment caching also supported multipart emails. read more about caching rails caching guide."},{"id":1137,"title":"Começando a usar Action Mailer","heading":"2 Enviando E-mails","subheading":"2.5 Action Mailer Layouts","content":"just like controller views, also have mailer layouts. layout name needs same your mailer, such user_mailer.html.erb user_mailer.text.erb automatically recognized your mailer layout. order different file, call layout your mailer: just like with controller views, yield render view inside layout. also pass layout: 'layout_name' option render call inside format block specify different layouts different formats: will render html part using my_layout.html.erb file text part with usual user_mailer.text.erb file exists."},{"id":1138,"title":"Começando a usar Action Mailer","heading":"2 Enviando E-mails","subheading":"2.6 Previewing Emails","content":"action mailer previews provide emails look visiting special that renders them. above example, preview class usermailer should named usermailerpreview located test/mailers/previews/user_mailer_preview.rb. preview welcome_email, implement method that same name call usermailer.welcome_email: then preview will available http://localhost:3000/rails/mailers/user_mailer/welcome_email. change something app/views/user_mailer/welcome_email.html.erb mailer itself, it'll automatically reload render visually style instantly. list previews also available http://localhost:3000/rails/mailers. default, these preview classes live test/mailers/previews. this configured using preview_path option. example, want change lib/mailer_previews, configure config/application.rb:"},{"id":1139,"title":"Começando a usar Action Mailer","heading":"2 Enviando E-mails","subheading":"2.7 Generating URLs in Action Mailer Views","content":"unlike controllers, mailer instance doesn't have context about incoming request you'll need provide :host parameter yourself. :host usually consistent across application configure globally config/application.rb: because this behavior cannot *_path helpers inside email. instead will need associated *_url helper. example instead using will need use: using full url, your links will work your emails. url_for generates full default templates. configure :host option globally make sure pass url_for. email clients have context paths have base form complete addresses. thus, should always \"_url\" variant named route helpers. configure :host option globally make sure pass helper."},{"id":1140,"title":"Começando a usar Action Mailer","heading":"2 Enviando E-mails","subheading":"2.8 Adding images in Action Mailer Views","content":"unlike controllers, mailer instance doesn't have context about incoming request you'll need provide :asset_host parameter yourself. :asset_host usually consistent across application configure globally config/application.rb: display image inside your email."},{"id":1141,"title":"Começando a usar Action Mailer","heading":"2 Enviando E-mails","subheading":"2.9 Sending Multipart Emails","content":"action mailer will automatically send multipart emails have different templates same action. usermailer example, have welcome_email.text.erb welcome_email.html.erb app/views/user_mailer, action mailer will automatically send multipart email with html text versions setup different parts. order parts getting inserted determined :parts_order inside actionmailer::base.default method."},{"id":1142,"title":"Começando a usar Action Mailer","heading":"2 Enviando E-mails","subheading":"2.10 Sending Emails with Dynamic Delivery Options","content":"wish override default delivery options (e.g. smtp credentials) while delivering emails, this using delivery_method_options mailer action."},{"id":1143,"title":"Começando a usar Action Mailer","heading":"2 Enviando E-mails","subheading":"2.11 Sending Emails without Template Rendering","content":"there cases which want skip template rendering step supply email body string. achieve this using :body option. such cases don't forget :content_type option. rails will default text/plain otherwise. action mailer permite você especifique before_action, after_action around_action. action mailer agora herda apenas abstractcontroller, você tenha acesso mesmos helpers genéricos action controller. seguintes opções configuração feitas melhor ambientes arquivos (environment.rb, production.rb, etc...) descrição completa configurações possíveis, consulte configuring action mailer dentro nosso guia configuração aplicativos rails."},{"id":1144,"title":"Começando a usar Action Mailer","heading":"5 Configuração do Action Mailer","subheading":"5.1 Exemplo de configuração do Action Mailer","content":"exemplo seria adicionar seguinte arquivo config/environments/$rails_env.rb:"},{"id":1145,"title":"Começando a usar Action Mailer","heading":"5 Configuração do Action Mailer","subheading":"5.2 Configuração do Action Mailer para Gmail","content":"como action mailer agora mail, torna-se simples quanto adicionar arquivo config/environment/$ rails_env.rb: você encontrará instruções detalhadas como testar seus mailers guia teste. action mailer fornece ganchos métodos observador interceptor mail. eles permitem você registre classes chamadas durante ciclo vida entrega cada e-mail enviado."},{"id":1146,"title":"Começando a usar Action Mailer","heading":"7 Interceptando e Observando Emails","subheading":"7.1 Interceptando Emails","content":"interceptores permitem você faça modificações emails antes eles sejam entregues agentes entrega. classe interceptor deve implementar método :delivering_email(message) será chamado antes e-mail enviado. antes interceptor possa fazer trabalho, você precisa registrá-lo action mailer. você pode fazer isso arquivo inicializador config/initializers/sandbox_email_interceptor.rb"},{"id":1147,"title":"Começando a usar Action Mailer","heading":"7 Interceptando e Observando Emails","subheading":"7.2 Observando Emails","content":"observadores fornecem acesso mensagem e-mail após sido enviada. classe observador deve implementar método :delivered_email(message), será chamado após e-mail enviado. como interceptores, você precisa registrar observadores estrutura action mailer. você pode fazer isso arquivo inicializador config/initializers/email_delivery_observer.rb você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":1148,"title":"Maintenance Policy for Ruby on Rails","heading":null,"subheading":null,"content":"rails follows shifted version semver: patch only fixes, changes, features. except necessary security fixes. minor features, contain changes (serve major versions semver). breaking changes paired with deprecation notices previous minor major release. major features, will likely contain changes. difference between rails' minor major releases magnitude breaking changes, usually reserved special occasions. features only added master branch will made available point releases. only latest release series will receive fixes. when enough bugs fixed deemed worthy release gem, this branch happens from. special situations, where someone from core team agrees support more series, they included list supported series. currently included series: 6.0.z. current release series next most recent will receive patches versions case security issue. these releases created taking last released version, applying security patches, releasing. those patches then applied x-y-stable branch. example, theoretical 1.2.2.1 security release would built from 1.2.2, then added 1-2-stable. this means that security releases easy upgrade you're running latest version rails. currently included series: 6.0.z, 5.2.z. severe security issues releases current major series, also last release previous major series will receive patches versions. classification security issue judged core team. currently included series: 6.0.z, 5.2.z. when release series longer supported, it's your responsibility deal with bugs security issues. provide backports fixes publish them git, however there will versions released. comfortable maintaining your versions, should upgrade supported version. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":1149,"title":"Autoloading and Reloading Constants (Zeitwerk Mode)","heading":"1 Introduction","subheading":"1 Introduction","content":"normal ruby program, dependencies need loaded hand. example, following controller uses classes applicationcontroller post, normally you'd need require calls them: this case rails applications, where application classes modules just available everywhere: idiomatic rails applications only issue require calls load stuff from their directory, ruby standard library, ruby gems, etc. that anything that does belong their autoload paths, explained below. autoloading zeitwerk mode enabled default rails applications running cruby: zeitwerk mode, rails uses zeitwerk internally autoload, reload, eager load. rails instantiates configures dedicated zeitwerk instance that manages project. rails application file names have match constants they define, with directories acting namespaces. example, file app/helpers/users_helper.rb should define usershelper file app/controllers/admin/payments_controller.rb should define admin::paymentscontroller. default, rails configures zeitwerk inflect file names with string#camelize. example, expects that app/controllers/users_controller.rb defines constant userscontroller because section customizing inflections below documents ways override this default. please, check zeitwerk documentation further details. call autoload paths list application directories whose contents autoloaded. example, app/models. such directories represent root namespace: object. within autoload path, file names must match constants they define documented here. default, autoload paths application consist subdirectories that exist when application boots ---except assets, javascripts, views,--- plus autoload paths engines might depend example, usershelper implemented app/helpers/users_helper.rb, module autoloadable, need (and should write) require call autoload paths automatically pick custom directories under app. example, your application app/presenters, app/services, etc., they added autoload paths. array autoload paths extended mutating config.autoload_paths, config/application.rb, nowadays this discouraged. autoload paths added $load_path default. however, zeitwerk uses absolute file names internally, your application should issue require calls autoloadable files, those directories actually needed there. opt-out with this flag: that speed legit require calls bit, since there less lookups. also, your application uses bootsnap, that saves library from building unnecessary indexes, saves they would need. rails automatically reloads classes modules application files change. more precisely, server running application files have been modified, rails unloads autoloaded constants just before next request processed. that way, application classes modules used during that request going autoloaded, thus picking their current implementation file system. reloading enabled disabled. setting that controls this behavior config.cache_classes, which false default development mode (reloading enabled), true default production mode (reloading disabled). rails detects files have changed using evented file monitor (default), walking autoload paths, depending config.file_watcher. rails console there file watcher active regardless value config.cache_classes. this because, normally, would confusing have code reloaded middle console session, same generally want individual request served consistent, non-changing application classes modules. however, force reload console executing reload!: see, class object stored user constant different after reloading."},{"id":1150,"title":"Autoloading and Reloading Constants (Zeitwerk Mode)","heading":"6 Reloading","subheading":"6.1 Reloading and Stale Objects","content":"very important understand that ruby does have truly reload classes modules memory, have that reflected everywhere they already used. technically, \"unloading\" user class means removing user constant object.send(:remove_const, \"user\"). therefore, store reloadable class module object place that reloaded, that value going become stale. example, initializer stores caches certain class object mockedgateway gets reloaded, $payment_gateway still stores class object mockedgateway evaluated when initializer ran. reloading does change class object stored $payment_gateway. similarly, rails console, have user instance reload: user object instance stale class object. ruby gives class evaluate user again, does update class user instance another case this gotcha subclassing reloadable classes place that reloaded: user reloaded, since vipuser not, superclass vipuser original stale class object. bottom line: cache reloadable classes modules. production-like environments generally better load application code when application boots. eager loading puts everything memory ready serve requests right away, also cow-friendly. eager loading controlled flag config.eager_load, which enabled default production mode. order which files eager loaded undefined. zeitwerk constant defined, rails invokes zeitwerk::loader.eager_load_all regardless application autoloading mode. that ensures dependencies managed zeitwerk eager loaded. single table inheritance feature that doesn't play well with lazy loading. reason generally needs able enumerate hierarchy work correctly, whereas lazy loading defers loading classes until they referenced. can't enumerate what haven't referenced yet. sense, applications need eager load hierarchies regardless loading mode. course, application eager loads boot, that already accomplished. when does not, practice enough instantiate existing types database, which development test modes usually fine. that throw this module into directory: then include root classes your project: default, rails uses string#camelize know which constant should given file directory name define. example, posts_controller.rb should define postscontroller because that what \"posts_controller\".camelize returns. could case that some particular file directory name does inflected want. instance, html_parser.rb expected define htmlparser default. what prefer class htmlparser? there ways customize this. easiest define acronyms config/initializers/inflections.rb: doing affects active support inflects globally. that fine some applications, also customize camelize individual basenames independently from active support passing collection overrides default inflectors: that technique still depends string#camelize, though, because that what default inflectors fallback. instead prefer depend active support inflections have absolute control over inflections, configure inflectors instances zeitwerk::inflector: there global configuration that affect said instances, they deterministic. even define custom inflector full flexibility. please, check zeitwerk documentation further details. best follow what loaders doing inspect their activity. easiest that throw config/application.rb after loading framework defaults. that will print traces standard output. prefer logging file, configure this instead: rails logger still ready config/application.rb, initializers: zeitwerk instances managing your application available former main one. latter there mostly backwards compatibility reasons, case application something config.autoload_once_paths (this discouraged nowadays). check zeitwerk mode enabled with applications load rails defaults still classic autoloader this way: that handy upgrading rails different phases, classic mode discouraged applications. zeitwerk mode available versions rails previous 6.0. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":1151,"title":"Ruby on Rails 3.1 Release Notes","heading":"1 Upgrading to Rails 3.1","subheading":"1 Upgrading to Rails 3.1","content":"you're upgrading existing application, it's great idea have good test coverage before going should also first upgrade rails case haven't make sure your application still runs expected before attempting update rails 3.1. then take heed following changes:"},{"id":1152,"title":"Ruby on Rails 3.1 Release Notes","heading":"1 Upgrading to Rails 3.1","subheading":"1.1 Rails 3.1 requires at least Ruby 1.8.7","content":"rails requires ruby 1.8.7 higher. support previous ruby versions been dropped officially should upgrade early possible. rails also compatible with ruby 1.9.2."},{"id":1153,"title":"Ruby on Rails 3.1 Release Notes","heading":"1 Upgrading to Rails 3.1","subheading":"1.2 What to update in your apps","content":"following changes meant upgrading your application rails 3.1.3, latest 3.1.x version rails. make following changes your gemfile."},{"id":1154,"title":"Ruby on Rails 3.1 Release Notes","heading":"2 Creating a Rails 3.1 application","subheading":"2.1 Vendoring Gems","content":"rails uses gemfile application root determine gems require your application start. this gemfile processed bundler gem, which then installs your dependencies. even install dependencies locally your application that doesn't depend system gems. more information: bundler homepage"},{"id":1155,"title":"Ruby on Rails 3.1 Release Notes","heading":"2 Creating a Rails 3.1 application","subheading":"2.2 Living on the Edge","content":"bundler gemfile makes freezing your rails application easy with dedicated bundle command. want bundle straight from repository, pass --edge flag: have local checkout rails repository want generate application using that, pass --dev flag:"},{"id":1156,"title":"Ruby on Rails 3.1 Release Notes","heading":"3 Rails Architectural Changes","subheading":"3.1 Assets Pipeline","content":"major change rails assets pipeline. makes javascript first-class code citizens enables proper organization, including plugins engines. assets pipeline powered sprockets covered asset pipeline guide."},{"id":1157,"title":"Ruby on Rails 3.1 Release Notes","heading":"3 Rails Architectural Changes","subheading":"3.2 HTTP Streaming","content":"http streaming another change that rails 3.1. this lets browser download your stylesheets javascript files while server still generating response. this requires ruby 1.9.2, opt-in requires support from server well, popular combo nginx unicorn ready take advantage"},{"id":1158,"title":"Ruby on Rails 3.1 Release Notes","heading":"3 Rails Architectural Changes","subheading":"3.3 Default JS library is now jQuery","content":"jquery default javascript library that ships with rails 3.1. prototype, it's simple switch."},{"id":1159,"title":"Ruby on Rails 3.1 Release Notes","heading":"3 Rails Architectural Changes","subheading":"3.4 Identity Map","content":"active record identity rails 3.1. identity keeps previously instantiated records returns object associated with record accessed again. identity created per-request basis flushed request completion. rails comes with identity turned default."},{"id":1160,"title":"Ruby on Rails 3.1 Release Notes","heading":"5 Action Pack","subheading":"5.1 Action Controller","content":""},{"id":1161,"title":"Ruby on Rails 3.1 Release Notes","heading":"5 Action Pack","subheading":"5.2 Action Dispatch","content":""},{"id":1162,"title":"Ruby on Rails 3.1 Release Notes","heading":"5 Action Pack","subheading":"5.3 Action View","content":"keys dasherized. values json-encoded, except strings symbols. deprecations: full list contributors rails many people spent many hours making rails, stable robust framework kudos them. rails release notes were compiled vijay você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":1163,"title":"Associações Active Record","heading":"1 Por Que Associações?","subheading":"1 Por Que Associações?","content":"rails, associação conexão entre dois models active record. precisamos associações entre models? porque eles tornam operações comuns mais simples fáceis entender código. exemplo, considere aplicação rails simples inclua model autores model livros. cada autor pode vários livros. associações, declarações model seriam assim: agora, suponha queremos adicionar novo livro autor existente. precisaríamos fazer algo assim: considere excluir autor, garantindo todos seus livros serão excluídos também: associações active record, podemos otimizar essas outras operações declarando rails conexão entre dois models. aqui está código revisado configurar autores livros: essa alteração, mais fácil criar novo livro autor específico: excluir autor todos seus livros muito mais fácil: saber mais sobre diferentes tipos associações, leia próxima seção deste guia. seguida algumas dicas truques trabalhar associações sequência, referência completa métodos opções associações rails. rails suporta seis tipos associações: associações implementadas usando chamadas macro-style, você possa adicionar declarativamente recursos seus models. exemplo, declarar model belongs_to (pertence outro), você instrui rails manter informações primary key-foreign (chave primária-chave estrangeira) entre instâncias dois models, também obtém vários métodos úteis adicionados model. restante deste guia, você aprenderá como declarar usar várias formas associação. primeiro, rápida introdução situações cada tipo associação apropriada."},{"id":1164,"title":"Associações Active Record","heading":"2 Os Tipos de Associações","subheading":"2.1 A Associação belongs_to","content":"associação belongs_to configura conexão um-para-um outro model, modo cada instância model declarante \"pertença instância outro model. exemplo, aplicação incluir autores livros, cada livro pertencer apenas autor, você declarará model livro seguinte maneira:  migration correpondente parecerá assim:"},{"id":1165,"title":"Associações Active Record","heading":"2 Os Tipos de Associações","subheading":"2.2 A associação has_one","content":"associação has_one também estabelece conexão um-para-um outro model, semânticas pouco diferentes consequências). essa associação indica cada instância model contém possui instância outro model. exemplo, cada fornecedor aplicação possuir apenas conta, você declarar model fornecedor seguinte maneira:  migration correpondente parecerá assim: dependendo caso uso, também pode necessário criar índice exclusivo e/ou restrição foreign coluna fornecedor tabela contas. nesse caso, definição coluna parecerá assim:"},{"id":1166,"title":"Associações Active Record","heading":"2 Os Tipos de Associações","subheading":"2.3 A Associação has_many","content":"associação has_many indica conexão um-para-muitos outro model. você encontrará frequentemente essa associação \"outro lado\" associação belongs_to. essa associação indica cada instância model possui zero mais instâncias outro model. exemplo, aplicação contém autores livros, model autor pode declarado assim:  migration correpondente parecerá assim:"},{"id":1167,"title":"Associações Active Record","heading":"2 Os Tipos de Associações","subheading":"2.4 A Associação has_many :through","content":"associação has_many :through frequentemente usada estabelecer conexão muitos-para-muitos outro model. essa associação indica model declarado pode correspondido zero mais instâncias outro model, prosseguindo através (through) terceiro model. exemplo, considere prática médica pacientes marcam consultas médicos. declarações associação relevantes podem seguinte aparência:  migration correspondente parecerá assim: conjunto junção models pode gerenciada através métodos associação has_many. exemplo, você atribuir: seguida, novos models junção criados automaticamente objetos recém-associados. alguns existiam anteriormente estão faltando agora, suas linhas junção excluídas automaticamente. associação has_many :through também útil configurar \"atalhos\" através associações aninhadas has_many. exemplo, documento possui muitas seções seção muitos parágrafos, você pode obter coleção simples todos parágrafos documento. você pode configurar dessa maneira: through: :section especificado, rails agora entenderá:"},{"id":1168,"title":"Associações Active Record","heading":"2 Os Tipos de Associações","subheading":"2.5 A Associação has_one :through","content":"associação has_one :through estabelece conexão um-para-um outro model. essa associação indica model declarante pode combinado instância outro model, prosseguindo através(through) terceiro model. exemplo, cada fornecedor tiver conta, cada conta estiver associada histórico conta, então model fornecedor poderia ficar assim:  migration correpondente parecerá assim:"},{"id":1169,"title":"Associações Active Record","heading":"2 Os Tipos de Associações","subheading":"2.6 A Associação has_and_belongs_to_many","content":"associação has_and_belongs_to_many cria conexão direta muitos-para-muitos outro model, nenhum model intermediário. exemplo, aplicação incluir conjuntos peças, cada conjunto tendo muitas peças cada peça aparecendo muitos conjuntos, você poderá declarar model desta maneira:  migration correpondente parecerá assim:"},{"id":1170,"title":"Associações Active Record","heading":"2 Os Tipos de Associações","subheading":"2.7 Escolhendo entre belongs_to and has_one","content":"você deseja configurar relacionamento um-para-um entre dois models, será necessário adicionar belongs_to has_one outro. como você sabe qual qual? distinção onde você coloca foreign (ela aparece tabela classe declara associação belongs_to), você deve pensar pouco significado real dados também. relacionamento has_one algo isto algo aponta você. exemplo, mais sentido dizer fornecedor possui conta conta possui fornecedor. isso sugere relacionamentos corretos assim: migration correpondente parecerá assim:"},{"id":1171,"title":"Associações Active Record","heading":"2 Os Tipos de Associações","subheading":"2.8 Escolhendo entre has_many :through e has_and_belongs_to_many","content":"rails oferece duas maneiras diferentes declarar relacionamento muitos-para-muitos entre models. maneira mais simples usar has_and_belongs_to_many, permite fazer associação diretamente: segunda maneira declara relacionamento muitos-para-muito usar has_many :through. isso associação forma indireta, através model junção: regra mais simples você deve configurar relacionamento has_many :through precisar trabalhar models relacionamento como entidade independente. você precisar fazer nada model relacionamento, pode mais simples configurar relacionamento has_and_belongs_to_many (embora seja necessário lembrar criar tabela junção banco dados). você deve usar has_many :through precisar validações, callbacks atributos extras join model(modelo junção)."},{"id":1172,"title":"Associações Active Record","heading":"2 Os Tipos de Associações","subheading":"2.9 Associações Polimórficas","content":"mudança pouco mais avançada associações associação polimórfica. associações polimórficas, model pode pertencer mais outro model, única associação. exemplo, você pode model foto pertença model funcionário model produto. veja como isso pode declarado: você pode pensar declaração polimórfica belongs_to como configuração interface qualquer outro model pode usar. instância model funcionário, você pode recuperar coleção fotos: @employee.pictures. mesma forma, você pode recuperar @product.pictures. você instância model fotos, você pode chegar @picture.imageable. fazer isso funcionar, você precisa declarar coluna foreign coluna tipo model declara interface polimórfica: esta migration pode simplificada usando forma t.references: "},{"id":1173,"title":"Associações Active Record","heading":"2 Os Tipos de Associações","subheading":"2.10 Self Joins","content":"projetar modelo dados, algumas vezes você encontrará model deve relação consigo mesmo. exemplo, você pode querer armazenar todos funcionários único modelo banco dados, conseguir rastrear relacionamentos como entre gerente subordinados. essa situação pode modelada associações self-joining: esta configuração, você pode recuperar @employee.subordinates @employee.manager. suas migrations/schema, você adicionará coluna referências próprio model. segue algumas coisas você deve saber utilizar associações active record suas aplicações rails:"},{"id":1174,"title":"Associações Active Record","heading":"3 Dicas, Truques e Avisos","subheading":"3.1 Controlando o Caching","content":"todos métodos associação construídos torno caching, mantém resultado query mais recente disponível operações futuras. cache compartilhado entre métodos. exemplo: você quiser recarregar cache, porque pode haver alterações dados devido outra parte aplicação? simplesmente chame reload associação:"},{"id":1175,"title":"Associações Active Record","heading":"3 Dicas, Truques e Avisos","subheading":"3.2 Evitando Colisões de Nome","content":"possível usar simplesmente qualquer nome suas associações. considerando criar associação adicionamos método nome especificado model, péssima ideia nome associação utilizado método instância activerecord::base. método associação sobrescreverá método base quebrará coisas. exemplo, attributes connection indicados como nomes associações."},{"id":1176,"title":"Associações Active Record","heading":"3 Dicas, Truques e Avisos","subheading":"3.3 Atualizando o Schema","content":"associações extremamente úteis, mágica. você fica responsável manter schema banco dados forma corresponda suas associações. prática, isto significa duas coisas, dependendo tipo associação você criar. associações belongs_to você precisa criar chaves estrangeiras, associações has_and_belongs_to_many você precisa criar tabela junção (join table) apropriada. quando você declara associação belongs_to, você precisa criar chaves estrangeiras apropriadas. exemplo, considere este model: esta declaração precisa apoio coluna chave estrangeira apropriada tabela books. tabela recém criada, migração pode parecer isto: enquanto tabela existente, pode parecer isto: você criar associação has_and_belongs_to_many, você precisa criar tabela junção forma explícita. menos nome tabela junção seja especificado forma explícita através opção :join_table, active record cria nome utilizando ordem léxica nomes classe. dessa forma, junção entre models author book resulta nome tabela junção padrão \"authors_books\" porque precede ordenação léxica. independente nome, você deve gerar manualmente tabela junção migração apropriada. exemplo, considere estas associações: elas precisam apoio migração criar tabela assemblies_parts. esta tabela deve criada chave primária: passamos false create_table porque esta tabela representa model. isto necessário associação funcionar maneira correta. você observar qualquer comportamento estranho numa associação has_and_belongs_to_many como model corrompidos, exceções envolvendo conflito, provável você tenha esquecido deste detalhe. você também pode utilizar método create_join_table"},{"id":1177,"title":"Associações Active Record","heading":"3 Dicas, Truques e Avisos","subheading":"3.4 Controlando o Escopo de Associação","content":"padrão, associações procuram objetos apenas dentro escopo model atual. isto relevante quando você declara models active record dentro módulo. exemplo: isto funciona corretamente, porque tanto classe supplier quanto classe account definidas dentro mesmo escopo. próximo exemplo funcionará, porque supplier account definidos escopos diferentes: associar model outro model namespace diferente, você deve especificar nome completo classe declaração associação:"},{"id":1178,"title":"Associações Active Record","heading":"3 Dicas, Truques e Avisos","subheading":"3.5 Associações Bidirecionais","content":"normal associações funcionar duas direções, necessitando declarações dois models diferentes: active record tentará identificar automaticamente estes dois models compartilham associação bidirecional baseando-se nome associação. desta forma, active record carregará apenas cópia objeto author, tornando aplicação mais eficiente evitando dados inconsistentes: active record suporte identificação automática maioria associações nomes padrão. contudo, active record identificará automaticamente associações bidirecionais contém escopo qualquer opções abaixo: exemplo, considere declarações models abaixo: active record reconhecerá mais associação bidirecional: active record fornece opção :inverse_of declarar associações bidirecionais forma explícita: incluir opção :inverse_of declaração associação has_many, active record agora reconhecerá associação bidirecional: seções seguintes detalhes sobre cada tipo associação, incluindo métodos elas adicionam opções você pode usar quando declarar associação."},{"id":1179,"title":"Associações Active Record","heading":"4 Referência Detalhada das Associações","subheading":"4.1 Referência da Associação belongs_to","content":"associação belongs_to cria relação um-para-um outro model. termos banco dados, esta associação esta classe contém chave estrangeira. outra classe contém chave estrangeira, então você deve utilizar has_one lugar. quando você declara associação belongs_to, classe declarada ganha automaticamente métodos relacionados associação: todos esses métodos, association substituída pelo symbol passado como primeiro argumento belongs_to. exemplo, dada declaração: cada instância model book terá estes métodos: método association retorna objeto associado, existir. nenhum objeto associado encontrado, retorna nil. objeto associado retornado pelo banco dados este objeto, versão cache será retornada. sobrescrever este comportamento forçar leitura banco dados), chame #reload_association objeto pai. método association= atribui objeto associado este objeto. trás cenas, isto significa extrair chave primária objeto associado atribuir chave estrangeira objeto mesmo valor. método build_association retorna objeto novo tipo associado. este objeto será instanciado atributos passados, ligação através chave estrangeira deste objeto será configurada, objeto associado ainda será salvo. método create_association retorna objeto novo tipo associado. este objeto será instanciado atributos passados, ligação através chave estrangeira deste objeto será configurada, passe todas validações especificadas model associado, objeto associado será salvo. mesma coisa método create_association acima, retorna activerecord::recordinvalid registro inválido. enquanto rails utiliza padrões inteligentes funcionarão maior parte situações, pode haver momentos onde você quer customizar comportamento referência associação belongs_to. estas customizações podem realizadas facilmente passar opções blocos escopo quando você cria associação. exemplo, esta associação utiliza duas destas opções: associação belongs_to suporte estas opções: você configurar opção :autosave true, rails salvará qualquer membro associação carregada destruirá membros forem marcados destruição quando você salvar objeto pai. configurar :autosave false mesmo configurar opção :autosave. opção :autosave estiver presente, então novos objetos associados serão salvos, objetos associados forem atualizados serão salvos. nome outro model puder derivado partir nome associação, você pode usar opção :class_name passar nome model. exemplo, book pertence author, nome fato model contendo authors patron, esta configuração seria necessária: opção :counter_cache pode usada tornar busca pela quantidade objetos pertencem associação mais eficiente. considere estes models: estas declarações, pedir valor @author.books.size requer fazer chamada banco dados realizar consulta count(*). evitar esta chamada, você pode adicionar cache contagem model pertencente outro: esta declaração, rails manterá valor cache atualizado, retornará esse valor resposta método size. embora opção :counter_cache seja especificada model inclui declaração belongs_to, coluna fato deve adicionada model associado (has_many). caso acima, você precisaria adicionar coluna nome books_count model author. você pode sobrescrever nome padrão coluna especificar nome coluna customizado declaração counter_cache invés especificar true. exemplo, usar count_of_books invés books_count: colunas contagem cache adicionadas lista atributos leitura model contendo associação através attr_readonly. você configurar opção :dependent para: convenção, rails presume coluna usada armazenar chave estrangeira model nome associação sufixo adicionado. opção :foreign_key permite você atribua nome chave estrangeira diretamente: convenção, rails presume coluna usada armazenar chave primária suas tabelas. opção :primary_key permite especificar coluna diferente isto. exemplo, dada tabela users guid como chave primária. quisermos tabela todos separada guarde chave estrangeira user_id coluna guid, então podemos usar primary_key realizar isto desta forma: quando executamos @user.todos.create então registro @todo terá valor user_id como valor guid @user. opção :inverse_of específica nome associação has_many has_one inverso desta associação definida. passar true opção :polymorphic indica esta associação polimórfica. associações polimórficas foram discutidas detalhes anteriormente neste guia. você configurar opção :touch como true, então timestamp updated_at updated_on objeto associado será configurado hora atual quando este objeto salvo destruído: neste caso, salvar destruir book atualizará timestamp author associado. você também pode especificar timestamp particular atualizar: você configurar opção :validate como true, então objetos associados serão validados quando você salvar este objeto. padrão, este valor false: objetos associados serão validados quando este objeto salvo. você configurar opção :optional como true, então presença objeto associado será validada. padrão, esta opção está configurada como false. podem haver momentos onde você pode querer customizar consulta utilizada belongs_to. estas customizações podem feitas através bloco escopo. exemplo: você pode utilizar qualquer métodos padrão consulta abaixo dentro bloco escopo. métodos seguintes discutidos abaixo: método where permite especificar condições objeto associado deve atender. você pode utilizar método includes especificar associações segunda ordem devem carregadas forma adiantada quando esta associação utilizada. exemplo, considere estes models: você consulta authors frequência diretamente chapters (@chapter.book.author), então você pode deixar código relativamente mais eficiente incluir authors associação chapters books: você utilizar método readonly, então objeto associado terá acesso leitura quando retornado através associação. método select permite sobrescrever cláusula select usada consultar dados sobre objeto associado. padrão, rails retorna todas colunas. você pode objetos associados existem utilizar método association.nil?: atribuir objeto associação belongs_to salva objeto automaticamente. isto também salva objeto associado."},{"id":1180,"title":"Associações Active Record","heading":"4 Referência Detalhada das Associações","subheading":"4.2 Referência da Associação has_one","content":"associação has_one cria relação um-para-um outro model. termos banco dados, esta associação outra classe contém chave estrangeira. esta classe contém chave estrangeira, então você deve utilizar belongs_to. quando você declara associação has_one, classe declarada ganha automaticamente métodos relacionados associação: todos estes métodos, association será substituído pelo symbol passado como primeiro argumento has_one. exemplo, dada declaração: cada instância model supplier terá estes métodos: método association retorna objeto associado, existir. nenhum objeto associado encontrado, retorna nil. objeto associado retornado pelo banco dados este objeto, versão cache será retornada. sobrescrever este comportamento forçar leitura banco dados), chame #reload_association objeto pai. método association= atribui objeto associado este objeto. trás cenas, isto significa extrair chave primária objeto associado atribuir chave estrangeira objeto mesmo valor. método build_association retorna objeto novo tipo associado. este objeto será instanciado atributos passados, ligação através chave estrangeira deste objeto será configurada, objeto associado ainda será salvo. método create_association retorna objeto novo tipo associado. este objeto será instanciado atributos passados, ligação através chave estrangeira deste objeto será configurada, passe todas validações especificadas model associado, objeto associado será salvo. mesma coisa método create_association acima, retorna activerecord::recordinvalid registro inválido. embora rails utilize padrões inteligentes funcionarão maioria situações, pode haver momentos onde você queira customizar comportamento referência associação has_one. tais customizações podem feitas facilmente passar opções quando você cria associação. exemplo, esta associação duas destas opções: associação has_one suporte estas opções: configurar opção indica esta associação polimórfica. associações polimórficas foram discutidas detalhes anteriormente neste guia. você configurar opção :autosave true, rails salvará qualquer membro associação carregada destruirá membros forem marcados destruição quando você salvar objeto pai. configurar :autosave false mesmo configurar opção :autosave. opção :autosave estiver presente, então novos objetos associados serão salvos, objetos associados forem atualizados serão salvos. nome outro model puder derivado partir nome associação, você pode usar opção :class_name fornecer nome model. exemplo, supplier account, nome fato model contendo accounts billing, esta configuração seria necessária: controla acontece objeto associado quando dono dele destruído: necessário configurar deixar opção :nullify estas associações restrição null banco dados. você configurar dependent estas associações você poderá mudar objeto associado porque chave estrangeira objeto associado inicial será configurada valor null permitido. convenção, rails presume coluna usada guardar chave estrangeira outro model nome deste model sufixo adicionado. opção :foreign_key permite você configure nome chave estrangeira diretamente: opção :inverse_of específica nome associação has_many has_one inverso desta associação definida. convenção, rails presume coluna usada armazenar chave primária suas tabelas. opção :primary_key permite especificar coluna diferente isto. opção :source especifica associação fonte associação has_one :through. opção :source_type especifica tipo associação fonte associação has_one :through procede através associação polimórfica. opção :through específica model junção realizar query através dele. associações has_one :through foram discutidas detalhes anteriormente neste guia. você configurar opção :touch como true, então timestamp updated_at updated_on objeto associado será configurado hora atual quando este objeto salvo destruído: neste caso, salvar destruir supplier atualizará timestamp account associada. você também pode especificar timestamp particular atualizar: você configurar opção :validate como true, então objetos associados serão validados quando você salvar este objeto. padrão, este valor false: objetos associados serão validados quando este objeto salvo. podem haver momentos onde você pode querer customizar consulta utilizada has_one. estas customizações podem feitas através bloco escopo. exemplo: você pode utilizar qualquer métodos padrão consulta abaixo dentro bloco escopo. métodos seguintes discutidos abaixo: método where permite especificar condições objeto associado deve atender. você pode utilizar método includes especificar associações segunda ordem devem carregadas forma adiantada quando esta associação utilizada. exemplo, considere estes models: você consulta representatives diretamente suppliers frequência (@supplier.account.representative), então você pode tornar código relativamente mais eficiente incluir representatives associação suppliers accounts: você utilizar método readonly, então objeto associado terá acesso leitura quando retornado através associação. método select permite sobrescrever cláusula select usada consultar dados sobre objeto associado. padrão, rails retorna todas colunas. você pode objetos associados existem utilizar método association.nil?: quando você atribui objeto associação has_one, este objeto será salvo automaticamente (para atualizar chave estrangeira). além disso, qualquer objeto substituído também será salvo automaticamente, porque chave estrangeira também mudar. qualquer destas operações escrita falharem devido erros validação, então atribuição retornará false atribuição será cancelada. objeto declarar associação has_one) salvo (isto new_record? retorna true) então objetos filhos serão salvos. eles serão salvos automaticamente quando objeto salvo. você quiser atribuir objeto associação has_one salvar objeto, utilize método build_association."},{"id":1181,"title":"Associações Active Record","heading":"4 Referência Detalhada das Associações","subheading":"4.3 Referência da Associação has_many","content":"associação has_many cria relação um-para-muitos outro model. termos banco dados, esta associação outra classe terá chave estrangeira refere instâncias desta classe. quando você declara associação has_many, classe declarada ganha automaticamente métodos relacionados associação: todos estes métodos, collection será substituído pelo symbol passado como primeiro argumento has_many, collection_singular será substituído pela versão singular daquele symbol. exemplo, dada declaração: cada instância model author terá estes métodos: método collection retorna relation todos objetos associados. objetos associados, retorna relation vazia. método collection<< acrescenta mais objetos coleção configurando chave estrangeira deles como chave primária model pai. método collection.delete remove mais objetos coleção configurar chave estrangeira deles como null. método collection.destroy remove mais objetos coleção executando destroy cada objeto. método collection= coleção contenha apenas objetos fornecidos, adicionar deletar forma mais apropriada. mudanças persistidas banco dados. método collection_singular_ids retorna array objetos coleção. método collection= coleção contenha apenas objetos identificados pelo valor chaves primárias fornecidas, adicionando deletando forma mais apropriada. mudanças persistidas banco dados. método collection.clear remove todos objetos coleção acordo estratégia especificada pela opção dependent. nenhuma opção especificada, segue estratégia padrão. estratégia padrão associações has_many :through delete_all, associações has_many configurar chaves estrangeiras como null. método collection.empty? retorna true coleção contiver nenhum objeto associado. método collection.size retorna número objetos coleção. método collection.find procura objetos dentro coleção. utiliza mesma sintaxe opções activerecord::base.find. método collection.where procura objetos dentro coleção base condições fornecidas objetos serão carregados apenas quando necessário (lazy loading) significando banco dados consultado apenas quando objetos acessados. método collection.exists? confere objeto atende condições fornecidas existe coleção. mesma sintaxe opções activerecord::base.exists?. método collection.build retorna apenas objeto array objetos. objetos serão instanciados base atributos passados método será criada ligação através chaves estrangeiras, objetos associados serão salvos ainda. método collection.create retorna objeto array novos objetos tipo associado. objetos serão instanciados base atributos foram passados método, ligação será criada através chave estrangeira, estes objetos passem todas validações especificadas model associado, objeto associado será salvo. mesmo collection.create acima, retorna activerecord::recordinvalid dado inválido. método collection.reload retorna relation todos objetos associados, forçando leitura banco dados. houver objetos associados, retorna relation vazia. embora rails utilize padrões inteligentes funcionarão maioria situações, pode haver momentos onde você queira customizar comportamento referência associação has_many. tais customizações podem feitas facilmente passar opções quando você cria associação. exemplo, esta associação duas destas opções: associação has_many suporte estas opções: configurar opção indica esta associação polimórfica, como discutido anteriomente neste guia. você configurar opção :autosave true, rails salvará qualquer membro associação carregada destruirá membros forem marcados destruição quando você salvar objeto pai. configurar :autosave false mesmo configurar opção :autosave. opção :autosave estiver presente, então novos objetos associados serão salvos, objetos associados forem atualizados serão salvos. nome outro model puder derivado partir nome associação, você pode usar opção :class_name fornecer nome model. exemplo, author muitos books, nome fato model contendo books transaction, esta configuração seria necessária: esta opção pode utilizada configurar :counter_cache personalizado. você precisa desta opção quando você personalizar nome :counter_cache associação belongs_to. controla acontece objetos associados quando dono deles destruído: opções :destroy :delete_all também afetam semântica métodos collection.delete collection= fazendo eles destruam objetos associados removê-los coleção. convenção, rails presume coluna usada guardar chave estrangeira outro model nome deste model sufixo adicionado. opção :foreign_key permite você configure nome chave estrangeira diretamente: opção :inverse_of específica nome associação has_many has_one inverso desta associação definida. convenção, rails presume coluna usada armazenar chave primária suas tabelas. opção :primary_key permite especificar coluna diferente isto. digamos tabela users tenha como chave primária também coluna guid. requerimento tabela todos deve guardar valor coluna guid como chave estrangeria valor podemos fazer isto desta forma: agora executar @todo @user.todos.create valor user_id registro @todo será valor guid @user. opção :source especifica associação fonte associação has_many :through. você precisa utilizar esta opção possível inferir nome associação fonte automaticamente. opção :source_type especifica tipo associação fonte associação has_many :through procede através associação polimórfica. opção :through específica model junção realizar query através dele. associações has_many :through fornecem maneira implementar relações muitos-para-muitos, como discutido anteriormente neste guia. você configurar opção :validate como false, então objetos associados serão validados quando você salvar este objeto. padrão, este valor true: objetos associados serão validados quando este objeto salvo. podem haver momentos onde você pode querer customizar consulta utilizada has_many. estas customizações podem feitas através bloco escopo. exemplo: você pode utilizar qualquer métodos padrão consulta abaixo dentro bloco escopo. métodos seguintes discutidos abaixo: método where permite especificar condições objeto associado deve atender. você também pode especificar condições através hash: você utilizar opção estilo hash, então criação dados através desta associação terá escopo limitado automaticamente utilizando hash. neste caso, utilizar @author.confirmed_books.create @author.confirmed_books.build criará books onde coluna confirmed terá valor true. método extending específica módulo nome estender delegação associação. extensões associações discutidas detalhes mais frente neste guia. método group fornece nome atributo agrupar resultado consulta banco dados, utilizando cláusula group busca sql. você pode utilizar método includes especificar associações segunda ordem devem carregadas forma adiantada quando esta associação utilizada. exemplo, considere estes models: você busca chapters frequência authors (@author.books.chapters), então você pode deixar código ligeiramente mais eficiente incluir chapters associação authors books: método limit permite restringir número total objetos serão retornados através associação. método permite especificar deslocamento inicial buscar objetos banco dados através associação. exemplo, offset(11) pulará primeiros registros banco dados. método order determina ordem pela qual objetos associados serão retornados sintaxe utilizada pela cláusula order by). você utilizar método readonly, então objetos associados terão acesso leitura quando retornados através associação. método select permite sobrescrever cláusula select utilizada retornar dados sobre objetos associados. padrão, rails retorna todas colunas. utilize método distinct manter coleção livre objetos duplicados. isto mais útil junto opção :through. caso acima dois readings person.articles retorna dois apesar destes registros apontarem mesmo article. agora vamos especificar distinct: caso acima ainda dois readings. contudo, person.articles mostra apenas article porque coleção carrega apenas registros únicos. você quiser certeza que, inserir dados novos banco, todos registros associação persistida sejam distintos forma você também possa certeza quando inspecionar associação, achará dados duplicados), você deve colocar índice único própria tabela. exemplo, você tabela chamada readings você quer certeza articles sejam adicionados person apenas vez, você pode colocar seguinte migração: você tenha este índice único, tentar incluir article person duas vezes retornará erro activerecord::recordnotunique: note conferir unicidade utilizando algo como include? está sujeito race conditions (exemplo: https://pt.wikipedia.org/wiki/condi%c3%a7%c3%a3o_de_corrida). tente utilizar include? impor objetos sejam distintos associação. exemplo, utilizando exemplo article acima, código seguinte teria race condition porque múltiplos usuários podem tentar isto mesmo tempo: quando você atribui objeto associação has_many, este objeto será salvo automaticamente (para atualizar chave estrangeira). você atribuir vários objetos declaração, então todos serão salvos. qualquer destas operações escrita falharem devido erros validação, então atribuição retornará false atribuição será cancelada. objeto declarar associação has_many) salvo (isto new_record? retorna true) então objetos filhos serão salvos quando forem adicionados coleção. todos membros associação forem salvos anteriormente serão salvos automaticamente quando objeto salvo. você quiser atribuir objeto associação has_many salvar objeto, utilize método collection.build."},{"id":1182,"title":"Associações Active Record","heading":"4 Referência Detalhada das Associações","subheading":"4.4 Referência da Associação has_and_belongs_to_many","content":"associação has_and_belongs_to_many cria relação muitos-para-muitos outro model. termos banco dados, isto associa duas classes através tabela junção intermediária inclui chaves estrangeiras fazendo referência cada classe. quando você declara associação has_and_belongs_to_many, classe declarada ganha automaticamente métodos relacionados associação: todos estes métodos, collection será substituído pelo symbol passado como primeiro argumento has_and_belongs_to_many, collection_singular será substituído versão singular daquele symbol. exemplo, dada declaração: cada instância model part terá estes métodos: tabela junção associação has_and_belongs_to_many colunas adicionais além duas chaves estrangeiras, estas colunas serão adicionadas como atributos registros retornados através associação. registros retornados atributos adicionais apenas poderão acesso leitura, porque rails pode salvar mudanças destes atributos. método collection retorna relation todos objetos associados. objetos associados, retorna relation vazia. método collection<< acrescenta mais objetos coleção criando dados tabela junção. método collection.delete remove mais objetos coleção deletando dados tabela junção. isto destrói objetos. método collection.destroy remove mais objetos coleção deletando dados tabela junção. isto destrói objetos. método collection= coleção contenha apenas objetos fornecidos, adicionar deletar forma mais apropriada. mudanças persistidas banco dados. método collection_singular_ids retorna array objetos coleção. método collection= coleção contenha apenas objetos identificados pelo valor chaves primárias fornecidas, adicionando deletando forma mais apropriada. mudanças persistidas banco dados. método collection.clear remove todos objetos coleção deletando todas linhas tabela junção. isto destrói objetos associados. método collection.empty? retorna true coleção contiver nenhum objeto associado. método collection.size retorna número objetos coleção. método collection.find procura objetos dentro coleção. utiliza mesma sintaxe opções activerecord::base.find. método collection.where procura objetos dentro coleção base condições fornecidas objetos serão carregados apenas quando necessário (lazy loading) significando banco dados consultado apenas quando objetos acessados. método collection.exists? confere objeto atende condições fornecidas existe coleção. mesma sintaxe opções activerecord::base.exists?. método collection.build retorna objeto novo tipo associado. objeto será instanciado base atributos passados método será criada ligação através chave estrangeira, objeto associado será salvo ainda. método collection.create retorna objeto novo tipo associado. este objeto será instanciado base atributos foram passados método, ligação através tabela junção será criado, objeto passe todas validações especificadas model associado, objeto associado será salvo. mesmo collection.create, retorna activerecord::recordinvalid dado inválido. método collection.reload retorna relation todos objetos associados, forçando leitura banco dados. houver objetos associados, retorna relation vazia. embora rails utilize padrões inteligentes funcionarão maioria situações, pode haver momentos onde você queira customizar comportamento referência associação has_and_belongs_to_many. tais customizações podem feitas facilmente passar opções quando você cria associação. exemplo, esta associação duas destas opções: associação has_and_belongs_to_many suporte estas opções: convenção, rails presume coluna tabela junção utilizada guardar chave estrangeira aponta outro model nome daquele model sufixo acrescentado. opção :association_foreign_key permite especificar nome chave estrangeira diretamente: você configurar opção :autosave true, rails salvará qualquer membro associação carregada destruirá membros forem marcados destruição quando você salvar objeto pai. configurar :autosave false mesmo configurar opção :autosave. opção :autosave estiver presente, então novos objetos associados serão salvos, objetos associados forem atualizados serão salvos. nome outro model puder derivado partir nome associação, você pode usar opção :class_name fornecer nome model. exemplo, part muitas assemblies, nome fato model contendo assemblies gadget, esta configuração seria necessária: convenção, rails presume coluna tabela junção utilizada armazenar chave estrangeira apontando este model nome deste model sufixo acrescentado. opção :foreign_key permite você atribua nome chave estrangeira diretamente: nome padrão tabela junção, baseado ordenamento léxico, você quer, você pode utilizar opção :join_table sobrescrever nome padrão. você configurar opção :validate como false, então objetos associados serão validados quando você salvar este objeto. padrão, este valor true: objetos associados serão validados quando este objeto salvo. podem haver momentos onde você pode querer customizar consulta utilizada has_and_belongs_to_many. estas customizações podem feitas através bloco escopo. exemplo: você pode utilizar qualquer métodos padrão consulta abaixo dentro bloco escopo. métodos seguintes discutidos abaixo: método where permite especificar condições objeto associado deve atender. você também pode especificar condições através hash: você utilizar opção where estilo hash, então criação dados através desta associação terá escopo limitado automaticamente utilizando hash. neste caso, utilizar @parts.assemblies.create @parts.assemblies.build criará orders onde coluna factory terá valor \"seattle\". método extending específica módulo nome estender delegação associação. extensões associações discutidas detalhes mais frente neste guia. método group fornece nome atributo agrupar resultado consulta banco dados, utilizando cláusula group busca sql. você pode utilizar método includes especificar associações segunda ordem devem carregadas antecedêncai quando esta associação utilizada. método limit permite restringir número total objetos serão retornados através associação. método permite especificar deslocamento inicial buscar objetos banco dados através associação. exemplo, você utilizar offset(11), pulará primeiros registros banco dados. método order determina ordem pela qual objetos associados serão retornados sintaxe utilizada pela cláusula order by). você utilizar método readonly, então objetos associados terão acesso leitura quando retornados através associação. método select permite sobrescrever cláusula select utilizada retornar dados sobre objetos associados. padrão, rails retorna todas colunas. utilize método distinct remover objetos duplicados coleção. quando você atribui objeto associação has_and_belongs_to_many, este objeto será salvo automaticamente (para atualizar tabela junção). você atribuir vários objetos declaração, então todos serão salvos. qualquer destas operações escrita falharem devido erros validação, então atribuição retornará false atribuição será cancelada. objeto declarar associação has_and_belongs_to_many) salvo (isto new_record? retorna true) então objetos filhos serão salvos quando forem adicionados coleção. todos membros associação forem salvos anteriormente serão salvos automaticamente quando objeto salvo. você quiser atribuir objeto associação has_and_belongs_to_many salvar objeto, utilize método collection.build."},{"id":1183,"title":"Associações Active Record","heading":"4 Referência Detalhada das Associações","subheading":"4.5 Callbacks de Associação","content":"callbacks normais aparecem ciclo vida objetos active record, permitindo trabalhar estes objetos vários pontos. exemplo, você pode utilizar callbacks :before_save fazer algo aconteça logo antes salvar objeto. callbacks associação similares callbacks normais, eles ativados eventos ciclo vida coleção. quatro callbacks associação disponíveis: você define callbacks associação adicionar opções declaração associação. exemplo: rails passa objeto adicionado removido callback. você pode empilhar callbacks único evento passá-los como array: callback before_add retornar exceção, objeto será adicionado coleção. forma similar, callback before_remove retornar exceção, objeto será removido coleção."},{"id":1184,"title":"Associações Active Record","heading":"4 Referência Detalhada das Associações","subheading":"4.6 Association Extensions","content":"suas opções estão limitadas funcionalidades rails monta automaticamente objetos referência associação. você também pode extender estes objetos através módulos anônimos, acrescentar finders novos, creators, outros métodos. exemplo: você extensão deve compartilhada várias associações, você pode utilizar módulo extensão nome. exemplo: extensões podem fazer referência detalehs internos objeto referência associação utilizando estes três atributos acessor proxy_association: vezes desejável compartilhar atributos comportamento entre models. vamos dizer temos models car, motorcycle bicycle. queremos compartilhar atributos color price também alguns métodos estes atributos, ainda mantendo comportamentos específicos cada deles, incluindo controllers separados. rails deixa isso fácil. primeiro, vamos gerar model base, vehicle: você notou estamos adicionando atributo type? dado todos models serão armazenados única tabela, rails armazenar nome model nesse atributo. nosso exemplo, possibilidades car, motorcycle bicycle. funciona atributo type tabela. seguida, vamos gerar três models herdam vehicle. isso podemos usar opção --parent=parent gerar model herda \"parent\" especificado migration equivalente (dado tabela existe). exemplo, gerar model car: model gerado parecer com: isso significa todo comportamento adicionado classe vehicle estará disponível também classe car, incluindo associações, métodos públicos, etc. criar carro armazená-lo tabela vehicles popular atributo type valor \"car\": gerar seguinte sql: query (consulta) registros carros simplesmente buscar veiculos tipo car. executar seguinte query: você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":1185,"title":"Validações do Active Record","heading":"1 Resumo das Validações","subheading":"1 Resumo das Validações","content":"este exemplo validação simples: como você pode ver, nossa validação deixa saber nossa person válida atributo name. segunda person existirá banco dados. antes entrarmos maiores detalhes, vamos falar sobre como validações funcionam nossa aplicação."},{"id":1186,"title":"Validações do Active Record","heading":"1 Resumo das Validações","subheading":"1.1 Por que usar validações?","content":"validações usadas garantir dados válidos sejam salvos banco dados. exemplo, pode importante aplicação garantir todo usuário forneça endereço e-mail endereço correspondência válidos. validações model melhor maneira garantir dados válidos sejam salvos banco dados. eles bancos dados agnósticos, podem contornados usuários, fáceis manter testar. rails elas sejam fáceis usar, fornece ajudantes build-in necessidades comuns, também permite você crie seus próprios métodos validação. exitem outros modos validar dados antes deles serem salvos banco dados, incluindo restrições nativas banco dados, validações lado cliente validações nível controller. este sumário prós contras: escolha essa opção validação alguns casos específicos. opinião equipe rails validações model mais apropriadas maior parte circunstâncias."},{"id":1187,"title":"Validações do Active Record","heading":"1 Resumo das Validações","subheading":"1.2 Quando as validações ocorrem?","content":"existem dois tipos objetos active record: aqueles correspondem linha banco dados aqueles correspondem. quando você cria objeto novo, exemplo, usando método new, esse objeto ainda existe banco dados. você chame save esse objeto será salvo tabela apropriada banco dados. active record método instância new_record? determinar objeto existe banco dados não. considere seguinte classe active record: podemos como funciona olhando resultado rails console: criar salvar novo record será enviada operação insert banco dados. atualizando registro existente mandar operação update lugar. validações tipicamente realizadas antes esses comandos sejam enviados banco dados. alguma validação falhar, objeto será marcados como inválido active record executar operações insert update. isso evita dado inválido seja armazenado banco dados. você pode escolher validações específicas atuem quando objeto criado, salvo, editado. métodos seguir acionam validações salvar objetos forem válidos banco dados: versões bang (ex: save!) levantam exceção objeto inválido. versões normais fazem isso: save update retornam false, create retorna objeto."},{"id":1188,"title":"Validações do Active Record","heading":"1 Resumo das Validações","subheading":"1.3 Pulando Validações","content":"seguintes métodos pulam validações, irão salvar objeto banco dados independente validade. eles devem usados cuidado. note save também habilidade pular validações estabelecido validate: false como argumento. essa técnica deve usada cuidado."},{"id":1189,"title":"Validações do Active Record","heading":"1 Resumo das Validações","subheading":"1.4 valid? e invalid?","content":"antes salvar objeto active record, rails executa suas validações. essas validações produzirem erro, rails salva objeto. você também pode executar essas validações valid? ativa suas validações, retornando true, nenhum erro encontrado objeto, false, caso contrário. como dito acima: depois active record executar validações, qualquer erro encontrado pode acessado através método instância errors.messages, retorna coleção erros. definição, objeto válido essa coleção estiver vazia após serem executadas validações. note objeto instanciado informará nenhum erro mesmo seja tecnicamente inválido, porque validações executadas automaticamente apenas quando objeto salvo, como acontece métodos create save. invalid? simplesmente inverso valid?. desencadeia suas validações retorna true algum erro encontrado objeto, false caso contrário."},{"id":1190,"title":"Validações do Active Record","heading":"1 Resumo das Validações","subheading":"1.5 errors[]","content":"verificar determinado atributo objeto válido, você pode usar errors[:attribute]. isso retorna array todos erros :attribute. houver nenhum erro atributo especificado, array vazio exibido. esse método útil após validações terem sido executadas, porque inspeciona coleções erros aciona nenhuma validação diferente método activerecord::base#invalid? explicado acima porque verifica todo objeto válido. apenas verifica existem erros determinado atributo objeto. vamos cobrir erros validações maior detalhe seção trabalhando erros validações."},{"id":1191,"title":"Validações do Active Record","heading":"1 Resumo das Validações","subheading":"1.6 errors.details","content":"checar quais validações falharam atributo inválido, você pode usar errors.details[:attribute]. isso retorna array hashes chave :error conseguir símbolo validador: details juntamente validadores tratado seção trabalhando erros validações. active record oferece vários helpers validação pré-definidos você pode utilizar dentro suas definições classes. esses helpers providenciam regras validações comuns. toda validação falha, mensagem erro adicionada coleção errors objeto, mensagem associada atributo está sendo validado. cada helper aceita número arbitrário nomes atributos, então única linha código você consegue adicionar mesmo tipo validação vários atributos. todas validações aceitam opções :message, definem quando validações devem utilizadas qual mensagem será adicionada coleção errors caso falhe, respectivamente. opção utiliza-se valores :create :update. existe mensagem padrão erro cada helpers validação. essas mensagens utilizadas quando opção :message especificada. vamos olhada cada helpers disponíveis."},{"id":1192,"title":"Validações do Active Record","heading":"2 Helpers de Validação","subheading":"2.1 acceptance","content":"esse método valida checkbox marcado quando formulário submetido. tipicamente isso utilizado quando usuário necessita concordar termos serviço aplicação, confirmar algum texto lido, qualquer conceito similar. essa verificação feita terms_of_service nil. mensagem padrão erro esse helper \"must accepted\". você também pode passar mensagem customizada opção message. método também pode receber opção :accept, determina valores serão considerados como aceito. como padrão valores ['1', true] pode facilmente mudado. essa validação específica aplicações \"aceitação\" precisa gravada lugar nenhum banco dados. você campo isso helper criará atributo virtual. campo existe banco dados opção accept deve definida como true validação acontecer."},{"id":1193,"title":"Validações do Active Record","heading":"2 Helpers de Validação","subheading":"2.2 validates_associated","content":"você deve usar esse helper quando modelo tiver associações outros modelos também precisam validados. quando você tentar salvar objeto, valid? será chamado cada seus objetos associados. essa validação funcionará todos tipos associação. mensagem padrão erro validates_associated invalid\". repare cada objeto associado terá própria coleção errors; erros irão juntar modelo onde validação chamada."},{"id":1194,"title":"Validações do Active Record","heading":"2 Helpers de Validação","subheading":"2.3 confirmation","content":"você deve utilizar esse helper quando você dois campos texto devem receber exatamente mesmo conteúdo. exemplo, você pode querer confirmar endereço email senha. essa validação cria atributo virtual onde nome nome atributo deve confirmado \"_confirmation\" anexado. template view você pode utilizar algo como this check performed only email_confirmation nil. require confirmation, make sure presence check confirmation attribute (we'll take look presence later this guide): essa checagem feita email_confirmation nil. requisitar confirmação tenha certeza adicionou checagem presença atributo confirmação (nós iremos presence breve nesse guia): também existe opção :case_sensitive caso você queira definir restrição confirmação deve sensível letras maiúsculas minúsculas. essa opção padrão verdadeira. mensagem padrão erro esse helper \"doesn't match confirmation\"."},{"id":1195,"title":"Validações do Active Record","heading":"2 Helpers de Validação","subheading":"2.4 exclusion","content":"esse helper valida atributos estão incluídos coleção. verdade, essa coleção pode qualquer objeto enumerável. helper exclusion opção recebe coleção valores serão aceitas atributos validados. opção atalho chamado :within pode utilizado mesmo propósito, caso queira. esse exemplo opção :message mostrar como você pode incluir valor atributo mensagem erro. lista completa opções argumento mensagem favor veja documentação sobre mensagens. mensagem erro padrão reserved\"."},{"id":1196,"title":"Validações do Active Record","heading":"2 Helpers de Validação","subheading":"2.5 format","content":"esse helper valida valores atributos testando eles correspondem expressão regular dada, especificada opção :with. alternativamente, você pode requerer atributo específico corresponde expressão regular usando opção :without. mensagem erro padrão invalid\"."},{"id":1197,"title":"Validações do Active Record","heading":"2 Helpers de Validação","subheading":"2.6 inclusion","content":"esse helper valida atributos estão incluídos coleção. verdade, essa coleção pode qualquer objeto enumerável. helper inclusion opção recebe coleção valores serão aceitas atributos validados. opção atalho chamado :within pode utilizado mesmo propósito, caso queira. esse exemplo opção :message mostrar como você pode incluir valor atributo mensagem erro. lista completa opções argumento mensagem favor veja documentação mensagem. mensagem erro padrão esse helper included list\"."},{"id":1198,"title":"Validações do Active Record","heading":"2 Helpers de Validação","subheading":"2.7 length","content":"esse helper valida tamanho valores atributos. disponibiliza variedade opções, então você pode especificar tamanho restrições maneiras diferentes. possible length constraint options are: possíveis opções restrições tamanho são: valor padrão mensagem erro depende tipo validação sendo usado. você pode personalizar essas mensagens usando opções :wrong_length, :too_long :muito curto %{count} como espaço reservado número correspondente tamanho restrição sendo utilizada. você ainda pode utilizar opção :message especificar mensagem erro. note that default error messages plural (e.g., short (minimum %{count} characters)\"). this reason, when :minimum should provide personalized message presence: true instead. when :within have lower limit should either provide personalized message call presence prior length. note mensagens erro padrão estão plural (por exemplo: short (minimum %{count} characters)\"). essa razão, quando :minimum você deve disponibilizar mensagem personalizada utilizar presence: true lugar. quando :within limite menor você deve disponibilizar mensagem personalizada usar presence antes length."},{"id":1199,"title":"Validações do Active Record","heading":"2 Helpers de Validação","subheading":"2.8 numericality","content":"esse helper válida seus atributos contém somente valores numéricos. padrão, corresponder número inteiro decimal precedido sinal opcional negativo positivo especificar somente números inteiros permitidos mude :only_integer verdadeiro. você mudar :only_integer verdadeiro, então usar como expressão regular validar valor atributo. não, tentar converter valor número usando classe float. além :only_integer, esse helper também aceita seguintes opções adicionar restrições valores aceitáveis: mensagem erro padrão number\"."},{"id":1200,"title":"Validações do Active Record","heading":"2 Helpers de Validação","subheading":"2.9 presence","content":"esse helper atributos especificados estão vazios. utiliza método blank? verificar valor string branco, isso string está vazia contém espaços. você quer certeza associação está presente, você precisará testar objeto associado mesmo está presente, chave estrangeira utilizada mapear associação. dessa maneira, checado chave estrangeira existe como também objeto referenciado existe. validar registros associados cuja presença necessária, você deve especificar opção :inverse_of associação: você validar presença objeto associado através relacionamento has_one ouhas_many, verificará objeto está blank? marked_for_destruction?. como false.blank? verdadeiro, você deseja validar presença valor booleano campo, você deve usar seguintes validações: usar dessas validações, você garantirá valor será resultaria valor null maioria casos."},{"id":1201,"title":"Validações do Active Record","heading":"2 Helpers de Validação","subheading":"2.10 absence","content":"este helper valida atributos especificados estão ausentes. método present? verificar valor string branco, isso string está vazia contém caracteres branco. você quer certeza associação está ausente, você precisará testar objeto associado mesmo está ausente, chave estrangeira utilizada mapear associação. validar registros associados cuja ausência necessária, você deve especificar opção :inverse_of associação: você validar ausência objeto associado através relacionamento has_one ouhas_many, verificará objeto está present? marked_for_destruction?. como false.present? false, você quer validar ausência campo booleano você deve usar validates :field_name, exclusion: [true, false] mensagem padrão erro \"must blank\"."},{"id":1202,"title":"Validações do Active Record","heading":"2 Helpers de Validação","subheading":"2.11 uniqueness","content":"este helper valida valor atributo único antes objeto salvo. cria restrição exclusividade banco dados, portanto pode acontecer duas conexões diferentes banco dados criarem dois registros mesmo valor coluna você pretende tornar exclusiva. evitar isso, você deve criar índice exclusivo nessa coluna banco dados. validação ocorre executando consulta tabela modelo, procurando registro existente mesmo valor nesse atributo. existe opção :scope você pode usar especificar mais atributos usados limitar verificação exclusividade: should wish create database constraint prevent possible violations uniqueness validation using :scope option, must create unique index both columns your database. mysql manual more details about multiple column indexes postgresql manual examples unique constraints that refer group columns. você deseja criar restrição banco dados previnir possiveis violações validação exclusividade usando opção :scope, você deve criar indexação única ambas colunas banco dados. veja manual mysql mais detalhes sobre indexação múltiplas colunas manual postgres exemplos restrições únicas referenciam esse grupo colunas também opção :case_sensitive você pode usar definir restrição exclusividade fará distinção entre maiúsculas minúsculas. padrão desta opção true. mensagem erro padrão \"has already been taken\"."},{"id":1203,"title":"Validações do Active Record","heading":"2 Helpers de Validação","subheading":"2.12 validates_with","content":"esse helper passa registro classe separada feita validação. helper validates_with pega classe lista classes usar validação. mensagem erro padrão validates_with. você deve adicionar manualmente erros coleção erros registro classe validadora. implementar método validador, você deve parâmetro record definido, registro validado. like other validations, validates_with takes :if, :unless options. pass other options, will send those options validator class options: como todas outras validações, validates_with utiliza opções:if, :unless :on. você passar outras opções, essas opções serão enviadas classe validadora como options: observe validador será inicializado apenas durante todo ciclo vida aplicativo, cada execução validação, portanto, tenha cuidado usar variáveis instância nele. validador suficientemente complexo você deseje variáveis instância, você poderá facilmente usar objeto ruby puro lugar:"},{"id":1204,"title":"Validações do Active Record","heading":"2 Helpers de Validação","subheading":"2.13 validates_each","content":"este helper valida atributos relação bloco. possui função validação predefinida. você deve criar usando bloco, todos atributos passados validates_each serão testados contra ele. exemplo seguir, queremos nomes sobrenomes comecem letras minúsculas. bloco recebe registro, nome atributo valor atributo. você pode fazer quiser verificar dados válidos dentro bloco. validação falhar, você deverá adicionar mensagem erro modelo, tornando-o inválido. essas opções validação comuns:"},{"id":1205,"title":"Validações do Active Record","heading":"3 Opções de Validação Comuns","subheading":"3.1 :allow_nil","content":"opção :allow_nil pula validação quando valor está sendo validado nil. opções completas argumento mensagem, consulte documentação mensagem."},{"id":1206,"title":"Validações do Active Record","heading":"3 Opções de Validação Comuns","subheading":"3.2 :allow_blank","content":"opção :allow_blank semelhante opção :allow_nil. esta opção deixará validação passar valor atributo blank?, string vazia exemplo."},{"id":1207,"title":"Validações do Active Record","heading":"3 Opções de Validação Comuns","subheading":"3.3 :message","content":"como você viu, opção :message permite você especifique mensagem será adicionada coleção errors quando validação falhar. quando esta opção usada, active record usará respectiva mensagem erro padrão cada helper validação. opção :message aceita string proc. valor string :message pode conter opcionalmente qualquer/tudo %{value}, %{attribute}, %{model} será substituído dinamicamente quando validação falhar. esta substituição feita usando i18n, posições devem exatamente correspondentes, permitidos espaços. valor proc :message recebe dois argumentos: objeto validado, hash pares chave-valor :model, :attributes :value."},{"id":1208,"title":"Validações do Active Record","heading":"3 Opções de Validação Comuns","subheading":"3.4 :on","content":"opção permite você especifique quando validação deve acontecer. comportamento padrão todos helpers validação integrados executado salvar (tanto criar novo registro quanto atualizá-lo). você quiser mudar, você pode usar :create rodar validação apenas quando novo registro criado :update rodar validação apenas quando registro atualizado. você também pode usar definir contextos customizados. contexto customizado precisa acionado explicitamente passando nome contexto valid?, invalid?, save. person.valid?(:account_setup) executa ambas validações salvar model. person.save(context: :account_setup) valida person contexto account_setup antes salvar. quando acionado contexto explícito, validações executadas esse contexto, assim como quaisquer validações contexto. você também pode especificar validações como estritas lançar activemodel::strictvalidationfailed quando objeto inválido. também possível passar exceção personalizada opção :strict. vezes fará sentido validar objeto apenas quando determinada condição satisfeita. você pode fazer isso usando :unless, podem usados como symbol, proc array. você pode usar quando quiser especificar quando validação deve ocorrer. você quiser especificar quando validação deve ocorrer, você pode usar :unless."},{"id":1209,"title":"Validações do Active Record","heading":"5 Validação com Condicional","subheading":"5.1 Usando um Symbol com :if e :unless","content":"você pode associar :unless symbol correspondente nome método será chamado logo antes validação acontecer. essa opção mais usada."},{"id":1210,"title":"Validações do Active Record","heading":"5 Validação com Condicional","subheading":"5.2 Usando uma Proc com :if e :unless","content":"possível associar :unless objeto proc será chamado. objeto proc permite escrever condição apenas linha invés método separado. como lambdas tipos proc, elas também podem usadas escrever condições apenas linha forma mais curta."},{"id":1211,"title":"Validações do Active Record","heading":"5 Validação com Condicional","subheading":"5.3 Agrupando Validações com Condicionais","content":"vezes, útil várias validações usando mesma condição. isso pode feito facilmente usando with_options. todas validações dentro bloco with_options terão automaticamente passado condição :is_admin?"},{"id":1212,"title":"Validações do Active Record","heading":"5 Validação com Condicional","subheading":"5.4 Combinando Validações com Condicionais","content":"outro lado, quando várias condições definem validação deve acontecer, podemos usar array. além disso, você pode usar ambos :unless mesma validação. validação executada apenas quando todas condições nenhuma condições :unless resultarem true. quando helpers validação embutidos bastante suas necessidades, você pode implementar seus próprios validadores métodos validação como preferir."},{"id":1213,"title":"Validações do Active Record","heading":"6 Realizando Validações Customizadas","subheading":"6.1 Validadores Customizados","content":"validadores customizados classes herdam activemodel::validator. essas classes devem implementar método validate, recebe record como argumento realiza validações nele. validador customizado chamado usando método validates_with. maneira mais fácil adicionar validadores customizados atributos individuais conveniente classe activemodel::eachvalidator. nesse caso, classe validadora customizada deve implementar método validate_each, recebe três argumentos: record, attribute value. esses correspondem respectivamente instância, atributo validado valor atributo instância recebida. como mostrado exemplo acima, você também pode combinar validações padrão seus próprios validadores customizados."},{"id":1214,"title":"Validações do Active Record","heading":"6 Realizando Validações Customizadas","subheading":"6.2 Métodos Customizados","content":"você também pode criar métodos verificam estado seus models adicionam mensagens coleção errors quando eles inválidos. você deve então registrar esses métodos usando método validate classe (api), passando symbols nomes métodos validação. você pode passar mais symbol cada método classe respectivas validações serão executadas mesma ordem elas foram registradas. método valid? verificará coleção erros está vazia, sendo assim seus métodos validação customizados devem adicionar erros quando você desejar validações falhem: padrão, tais validações executarão cada chamada método valid? salvar objeto. também possível controlar quando executar essas validações customizadas informando opção método validate, :create :update. adição métodos valid? invalid? cobertos anteriormente, rails provê outros métodos trabalhar coleção errors verificar validade objetos. seguir exibida lista métodos mais comumente utilizados. favor, verifique documentação activemodel::errors lista todos métodos disponíveis."},{"id":1215,"title":"Validações do Active Record","heading":"7 Trabalhando com Erros de Validação","subheading":"7.1 errors","content":"retorna instância classe activemodel::errors contendo todos erros. cada chave nome atributo valor array strings contendo todos erros."},{"id":1216,"title":"Validações do Active Record","heading":"7 Trabalhando com Erros de Validação","subheading":"7.2 errors[]","content":"errors[] utilizado quando você quiser verificar mensagens erro atributo específico. método array strings todas mensagens erro atributo informado, cada string contendo mensagem erro. erros relacionados atributo, método retorna array vazio."},{"id":1217,"title":"Validações do Active Record","heading":"7 Trabalhando com Erros de Validação","subheading":"7.3 errors.add","content":"método permite você adicionar mensagem erro relacionada atributo particular. recebe como argumentos atributo mensagem erro. método errors.full_messages equivalente, errors.to_a) retorna mensagens erro formato amigável usuário, nome atributo inicial maiúscula prefixado cada mensagem, como exemplo abaixo."},{"id":1218,"title":"Validações do Active Record","heading":"7 Trabalhando com Erros de Validação","subheading":"7.4 errors.details","content":"você pode especificar validador (validator) tipo hash detalhamento erro retornado usando método errors.add. aprimorar detalhamento erros contenha conjunto caracteres permitidos exemplo, você pode passar chaves adicionais errors.add. todos validadores (validators) embutidos rails populam hash detalhes validador (validator) tipo correspondente."},{"id":1219,"title":"Validações do Active Record","heading":"7 Trabalhando com Erros de Validação","subheading":"7.5 errors[:base]","content":"voce pode adicionar mensagens erro relacionadas estado objeto como todo, invés estarem relacionadas atributo específico. você pode usar este método quando você quiser dizer objeto inválido, importando valores seus atributos. sendo errors[:base] array, você pode simplesmente adicionar string método será usada como mensagem erro."},{"id":1220,"title":"Validações do Active Record","heading":"7 Trabalhando com Erros de Validação","subheading":"7.6 errors.clear","content":"método clear usado quando você intencionalmente quiser limpar todas mensagens coleção errors. claro que, chamar método errors.clear sobre objeto inválido, isso torná-lo válido: coleção errors estará agora vazia, próxima você chamar valid? qualquer método tente salvar esse objeto base dados, validações serão executadas novamente. qualquer validações falhar, coleção errors será preenchida novo."},{"id":1221,"title":"Validações do Active Record","heading":"7 Trabalhando com Erros de Validação","subheading":"7.7 errors.size","content":"método size retorna número total mensagens erro objeto. criado model adicionada validações, model criado formulário web, você provavelmente quer mostrar mensagem erro quando validações falhar. devido cada aplicação lidar esse tipo cenário forma diferente, rails inclui nenhum helper view ajudar gerar essas mensagens diretamente. contudo, devido rico número métodos rails interagirmos validações geral, muito fácil criar nossas próprias validações. além disso, quando geramos scaffold, rails colocará algum dentro _form.html.erb gera, exibindo lista completa erros naquele model. supondo temos modelo salvo variável instância chamada @article, terá seguinte aparência: portanto, você usar helpers formulário rails gerar seus formulários, quando erro validação ocorrer campo, isso gerar <div> extra redor entrada. você pode definir estilo desta como preferir. scaffold padrão rails gera, exemplo, adiciona essa regra css: isso significa qualquer campo erro termina pixels borda vermelha. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":1222,"title":"Action View Form Helpers","heading":"1 Trabalhando com formulários básicos.","subheading":"1 Trabalhando com formulários básicos.","content":"principal auxiliar formulário (form helper) form_with quando chamado nenhum argumento como este, criado formulário que, quando enviado, fará requisição http usando verbo post página atual. exemplo, supondo página atual seja inicial, html gerado terá seguinte aparência: note html contém elemento input tipo hidden. este input importante porque formulário pode enviado sucesso ele, exceto formulários método get. esse elemento oculto nome authenticity_token recurso segurança rails chamado proteção contra falsificação solicitação entre sites (cross-site request forgery protection), helpers formulário geram todos formulários (desde esse recurso segurança esteja ativado). você poderá mais sobre isso guia segurança aplicações rails."},{"id":1223,"title":"Action View Form Helpers","heading":"1 Trabalhando com formulários básicos.","subheading":"1.1 Formulário de pesquisa genérica","content":"formulários mais básicos você formulário pesquisa. este formulário contém: criar este formulário você usar form_with, label_tag, text_field_tag, submit_tag, respectivamente. como exemplo abaixo: isso gerar seguinte html:"},{"id":1224,"title":"Action View Form Helpers","heading":"1 Trabalhando com formulários básicos.","subheading":"1.2 Helpers para gerar elementos de formulário","content":"rails fornece série auxiliares gerar elementos formulário, como caixas seleção, campos texto botões opção. esses auxiliares básicos, nomes terminados _tag(como text_field check_box_tag), geram apenas único elemento <input>. primeiro parâmetro estes será sempre nome entrada. quando formulário enviado, nome será passado junto dados formulário será direcionado params controlador valor inserido pelo usuário esse campo. exemplo, formulário contiver text_field_tag(:query) podendo obter valor deste campo controlador params[:query] nomear entradas, rails certas convenções possibilitam enviar parâmetros valores escalares, como matrizes hashes, também estarão acessíveis params. poderá lido mais sobre eles capítulo noções básicas sobre convenções nomenclatura parâmetros deste guia. detalhes como usar precisão esses auxiliares, consulte documentação api. caixas seleção controles formulário fornecem usuário conjunto opções podem ativados desativados pelo usuário. isso gera seguinte: primeiro parâmetro check_box_tag, claro, nome entrada. segundo parâmetro, naturalmente, valor entrada. este valor será incluído dados formulário está presente params) quando caixa seleção estiver marcada. botões opção embora semelhantes caixas seleção, controles especificam conjunto opções mutuamente exclusivos seja, usuário pode escolher apenas uma). resultado: assim como check_box_tag, segundo parâmetro radio_button_tag valor entrada. como esses dois botões compartilham mesmo nome (age), usuário poderá selecionar apenas deles, params[:age] receberá \"child\" \"adult\"."},{"id":1225,"title":"Action View Form Helpers","heading":"1 Trabalhando com formulários básicos.","subheading":"1.3 Outros auxiliares interessantes","content":"outros controles formulários vale pena falar áreas texto, campos senha, campos ocultos, campos pesquisa, campos telefônicos, campos data, campos hora, campos cores, campos locais data hora, campos mês, mês, semana, url, campo email, número campos intervalo: resultado: entradas ocultas exibidas usuário, retêm dados como qualquer entrada texto. valores dentro deles podem alterados javascript."},{"id":1226,"title":"Action View Form Helpers","heading":"2 Trabalhando com Objetos Model","subheading":"2.1 Helpers de Objetos Model","content":"tarefa particularmente comum formulário editar criar objeto model. embora helpers *_tag possam usados essa tarefa, eles pouco verbosos, pois cada você teria garantir nome parâmetro correto seja usado atribuir valor padrão entrada maneira apropriada. rails fornece helpers personalizados essa função. esses helpers possuem sufixo _tag, exemplo text_field, text_area. esses helpers primeiro argumento nome variável instância segundo nome método (geralmente atributo) chamar esse objeto. rails definir valor controle entrada valor retorno daquele método objeto definirá nome entrada apropriado. controller definiu @person nome dessa pessoa henry, formulário contendo: produz saída semelhante após envio formulário, valor inserido pelo usuário fica armazenado params[:person][:name]. rails fornece helpers exibição validação erros associados objeto model. esses abordados detalhes guia validação active record."},{"id":1227,"title":"Action View Form Helpers","heading":"2 Trabalhando com Objetos Model","subheading":"2.2 Vinculando um Formulário a um Objeto","content":"embora isso seja muito confortável, está longe perfeito. person tiver muitos atributos editar, estaríamos repetindo nome objeto editado várias vezes. queremos fazer alguma forma vincular formulário objeto model, exatamente form_with :model faz. suponha temos controller lidar articles app/controllers/articles_controller.rb: view correspondente app/views/articles/new.html.erb usando form_with fica algo parecido com: existem algumas coisas serem observadas aqui: html produzido objeto passado como :model form_with controla chave usada params acessar valores fomulário. aqui está nome article portanto, todas entradas nomes formulário article[attribute_name]. assim, ação create haverá hash params[:article] chaves :title :body. você pode mais sobre importância nomes entrada capítulo entendendo convenções nomeação parâmetros deste guia. métodos helper chamados construtor formulário (form builder) identicos objeto model helper, exceto necessário especificar qual objeto está sendo editado, pois isso gerenciado pelo construtor formulário. você pode criar vinculação semelhante realmente criar <form> helper fields_for. isso útil editar objetos model adicionais mesmo formulário. exemplo, você model person vinculado model contactdetail, você pode criar formulário criar dois, assim: produz seguinte saída: objeto produzido fields_for construtor formulário igual produzido form_with."},{"id":1228,"title":"Action View Form Helpers","heading":"2 Trabalhando com Objetos Model","subheading":"2.3 Confiando na Identificação de Registro","content":"model article está disponível usuários aplicação, portanto seguindo melhores praticas desenvolvimento rails você deve declará-lo recurso (resource): lidar recursos restful, chamadas form_with ficam significativamente mais fáceis você contar identificação registros. resumindo, você pode apenas passar instância modelo fazer rails descubra nome modelo resto: observe como chamada estilo abreviado form_with convenientemente mesma, independentemente registro novo existente. identificação registros inteligente suficiente descobrir registro novo, chamando record.persisted?. também seleciona caminho correto enviar nome base classe objeto. você criou rotas namespaces, form_with abreviatura bacana isso também. aplicativo tiver namespace administrador, criar formulário submete articlescontroller dentro namespace administrador (submetendo admin_article_path(@article) caso atualização). você tiver vários níveis namespacing, sintaxe será semelhante: mais informações sobre sistema roteamento rails convenções associadas, consulte guia rotas rails fora dentro."},{"id":1229,"title":"Action View Form Helpers","heading":"2 Trabalhando com Objetos Model","subheading":"2.4 Como os formulários funcionam com os métodos PATCH, PUT, ou DELETE?","content":"framework rails incentiva design restful seus aplicativos, significa você fará muitas requisições \"patch\", \"put\", \"delete\" (além \"get\" \"post\"). entretanto, maioria navegadores suportam métodos diferentes \"get\" \"post\" quando trata envio formulários. rails contorna esse problema emulando outros métodos post entrada oculta \"_method\", definida refletir método desejado: resultado: analisar dados submetidos pelo post, rails levará consideração parâmetro especial _method agirá como método http fosse aquele especificado dentro dele (\"patch\" nesse exemplo). caixas seleção html requerem quantidade significativa marcação elemento option cada opção escolha), portanto, mais sentido sejam geradas dinamicamente. esta aparência marcação: aqui você lista cidades cujos nomes apresentados usuário. internamente, aplicativo deseja apenas manipular seus ids, sejam usados como atributo valor opções. vamos como rails pode ajudar aqui."},{"id":1230,"title":"Action View Form Helpers","heading":"3 Criando Caixas de Seleção (Select Boxes) com Facilidade","subheading":"3.1 As Tags de Seleção (Select) e Opção (Option)","content":"helper mais genérico select_tag, como nome indica simplesmente gera select encapsula string opções: isso começo, porém helper select_tag cria tags opção dinamicamente. você pode gerar tags opção helper options_for_select: resultado: primeiro argumento options_for_select array aninhado onde cada elemento dois elementos: texto opção (nome cidade) valor opção cidade). valor opção será enviado controller. frequentemente, esse será objeto banco dados correspondente, precisa caso. sabendo disso, possível combinar select_tag options_for_select obter marcação completa desejada: options_for_select permite pré-selecionar opção passando valor. resultado: sempre rails valor interno opção sendo gerada corresponde este valor, adicionará atributo selected aquela opção. possível adicionar atributos arbitrários opções usando hashes: resultado:"},{"id":1231,"title":"Action View Form Helpers","heading":"3 Criando Caixas de Seleção (Select Boxes) com Facilidade","subheading":"3.2 Caixas de Seleção (Select Boxes) com Objetos Model","content":"maioria casos, controles formulário serão vinculados model específico como você pode esperar, rails fornece helpers personalizados esse propósito. consistente outros helpers formulário, lidar objeto model elimine sufixo _tag select_tag: controller definiu @person city_id dessa pessoa produz resultado semelhante observe terceiro parâmetro, array opções, mesmo tipo argumento você passa options_for_select. vantagem aqui você precisa preocupar pré-selecionar cidade correta usuário tiver rails fará isso você lendo atributo @person.city_id. como acontece outros helpers, você fosse usar helper select construtor formulário escopo objeto @person, sintaxe seria: você também pode passar bloco helper select:"},{"id":1232,"title":"Action View Form Helpers","heading":"3 Criando Caixas de Seleção (Select Boxes) com Facilidade","subheading":"3.3 Tags de Opção (Option Tags) de uma Coleção de Objetos Arbitrários","content":"gerar tags opções options_for_select requer você crie array contendo texto valor cada opção. você tivesse model city (talvez active record) quisesse gerar tags opção coleção desses objetos? solução seria fazer array aninhada iterando sobre eles: esta solução perfeitamente válida, entretanto rails fornece alternativa menos verbosa: options_from_collection_for_select. este helper espera coleção objetos arbitrários dois argumentos adicionais: nomes métodos opção value text, respectivamente: como nome indica, isso gera tags opção. gerar select funcional, você precisará usar collection_select: como outros helpers, você fosse usar helper collection_select construtor formulário escopo objeto @person, sintaxe seria:"},{"id":1233,"title":"Action View Form Helpers","heading":"3 Criando Caixas de Seleção (Select Boxes) com Facilidade","subheading":"3.4 Fuso horário e Seleção de País","content":"usar suporte fuso horário rails, você perguntar seus usuários fuso horário eles estão. fazer isso exigiria geração opções selecionadas lista objetos activesupport::timezone usando collection_select, você pode simplesmente usar helper time_zone_select envolve isto: existe também helper time_zone_options_for_select maneira mais manual (portanto mais customizável) fazer isso. leia documentação aprender sobre possíveis argumentos esses dois métodos. rails tinha helper country_select escolher países, extraído plugin country_select. você pode optar usar helpers formulário geram campos data hora html5 usar helpers data hora alternativos. esses helpers data hora diferem todos outros helpers formulário dois aspectos importantes: ambas famílias helpers criarão série caixas seleção diferentes componentes (ano, mês, dia, etc.)."},{"id":1234,"title":"Action View Form Helpers","heading":"4 Usando Form Helpers para Data e Hora","subheading":"4.1 Helpers Essenciais","content":"família helpers select_* usam como primeiro argumento, instância date, time, datetime utilizada como valor selecionado momento. possível omitir esse parâmetro, onde data atual utilizada. exemplo: produz (com valores opções reais omitidos simplificação) entradas acima resultariam hash params[:start_date] chaves :year, :month, :day. pegar objetos date, time, datetime atuais,você deve extrair valores passá-los construtor apropriado, exemplo: opção :prefix chave utilizada retornar hash componentes datas hash params. aqui definido como start_date, omitido valor padrão será date."},{"id":1235,"title":"Action View Form Helpers","heading":"4 Usando Form Helpers para Data e Hora","subheading":"4.2 Helpers para Objetos Model","content":"objeto select_date funciona muito formulários atualizam criam objetos active record pois active record espera cada elemento hash params corresponda atributo. helpers objetos model datas horas enviam parâmetros nomes especiais; quando active record parâmetros estes nomes, sabe eles devem combinados outros parâmetros fornecidos construtor apropriado tipo coluna. exemplo: produz (com valores opções reais omitidos simplificação) produz hash params quando isso passado person.new update), active record mostra todos esses parâmetros devem usados construir atributo birth_date informação sufixo determinar ordem deve passar esses parâmetros funções como date.civil."},{"id":1236,"title":"Action View Form Helpers","heading":"4 Usando Form Helpers para Data e Hora","subheading":"4.3 Opções Frequentes","content":"ambas familias helpers usam mesmo core funções parar gerar tags select individuais ambas aceitam praticamente mesmas opções. particular, padrão rails gera opções anos cada lado atual. este intervalo suficiente, opções :start_year :end_year substituem esse intervalo. lista opções completas disponível, consulte documentação api. como regra geral, você deve usar date_select trabalhar objetos model select_date outros casos, como formulário pesquisa filtra resultados data."},{"id":1237,"title":"Action View Form Helpers","heading":"4 Usando Form Helpers para Data e Hora","subheading":"4.4 Componentes Individuais","content":"ocasionalmente, você precisa exibir apenas único componente data, como mês. rails fornece série helpers isso, cada componente select_year, select_month, select_day, select_hour, select_minute, select_second. esses helpers bastante diretos. padrão eles geram campo entrada nome componente tempo (por exemplo, \"year\" select_year, \"month\" select_month etc.) embora isso possa substituído opção :field_name. opção :prefix funciona mesma maneira select_date select_time mesmo valor padrão. primeiro parâmetro especifica quais valores devem selecionados pode instância date, time, datetime, caso componente relevante extraído, valor numérico. exemplo: produzir mesmo resultado valor escolhido pode retornado params[:date][:year]. tarefa muito comum fazer envio arquivos, seja imagem pessoa arquivo contendo dados serem processados. mais importante lembrar quando envio arquivos atributo enctype formulário renderizado deve \"multipart/form-data\". você usar form_with :model, isso feito automaticamente. você usar form_with :model, você deve colocar manualmente, assim como exemplo seguir. ambos formulários seguir realizam envio arquivo. rails disponibiliza dois helpers: simples file_field_tag orientado model file_field. primeiro caso, arquivo enviado está params[:picture] segundo está params[:person][:picture], assim como esperado."},{"id":1238,"title":"Action View Form Helpers","heading":"5 Enviando Arquivos","subheading":"5.1 O que é enviado","content":"objeto params instância actiondispatch::http::uploadedfile. trecho código seguir salva arquivo enviado #{rails.root}/public/uploads contendo mesmo nome arquivo original. arquivo enviado, infinidade tarefas potencial, variando entre onde armazenar arquivos disco, amazon etc), associá-lo models, redimensionar arquivos imagem gerar miniaturas, etc. active storage destinado ajudar essas tarefas. objeto dado yield form_with fields_for instância actionview::helpers::formbuilder. construtores formulários encapsulam noção exibir elementos formulário único objeto. enquanto você pode escrever helpers seus formulários forma usual, você também pode criar subclasse actionview::helpers::formbuilder adicionar helpers exemplo: pode substituído meio definição classe labellingformbuilder parecida segue: você reutilizar isso frequentemente, você pode definir helper labeled_form_with automaticamente aplica opção builder: labellingformbuilder: construtor formulários utilizado também determina acontece quando você escreve instância actionview::helpers::formbuilder então isso renderizar partial form, passando objeto partial construtor formulários. construtor formulário classe labellingformbuilder então partial labelling_form seria renderizada. valores formulários podem ficar topo hash params aninhados outro hash. exemplo, numa ação create padrão model person, params[:person] normalmente seria hash todos atributos necessários criar pessoa. hash params também pode conter arrays, arrays hashes, vai. fundamentalmente formulários html conhecimento nenhum tipo dado estruturado, tudo eles geram pares nomes valores, onde pares strings simples. arrays hashes você aplicação resultado algumas convenções nomeação rails utiliza."},{"id":1239,"title":"Action View Form Helpers","heading":"7 Entendendo Convenções de Nomeação de Parâmetros","subheading":"7.1 Estruturas Básicas","content":"duas estruturas básicas arrays hashes. hashes copiam sintaxe utilizada acessar valor params. exemplo, formulário contém: hash params conterá params[:person][:name] buscará valor enviado dentro controller. hashes podem aninhados quantos níveis necessário, exemplo: resultará hash params como normalmente rails ignora nomes parâmetros duplicados. parâmetro name contém conjunto vazio colchetes então eles serão acumulados array. você queria usuários pudessem informar vários números telefone, você poderia colocar isto formulário: isto resultará params[:person][:phone_number] como array contendo números telefone informados."},{"id":1240,"title":"Action View Form Helpers","heading":"7 Entendendo Convenções de Nomeação de Parâmetros","subheading":"7.2 Combinando os Conceitos","content":"podemos combinar estes dois conceitos. elemento hash pode array como exemplo anterior, você pode array hashes. exemplo, formulário pode permitir criação número arbitrário addresses repetir fragmento formulário seguinte isto resultará params[:person][:addresses] como array hashes chaves line1, line2, city. porém, restrição. enquanto hashes podem aninhados forma arbitrária, permitido nível \"arrayness\". arrays normalmente podem trocados hashes; exemplo, invés usar array model objects, possível usar hash model objects distinguidos pelo índice array, algum outro parâmetro."},{"id":1241,"title":"Action View Form Helpers","heading":"7 Entendendo Convenções de Nomeação de Parâmetros","subheading":"7.3 Utilizando Form Helpers","content":"seções anteriores utilizavam form helpers rails maneira alguma. embora você possa criar nomes input conta própria passá-los diretamente helpers como text_field_tag, rails também fornece suporte nível maior. duas ferramentas disposição aqui nome parâmetro form_with fields_for opção :index helpers recebem. você pode querer renderizar formulário conjunto campos edição cada address person. exemplo: presumindo pessoa (person) tenha dois endereços (addresses), isto trará resultado similar este: isto resultará hash params parecido rails sabe todos estes inputs devem parte hash person porque você chamou fields_for primeiro builder formulário. especificar opção :index você rails invés nomear inputs person[address][city] deve inserir aquele índice dentro entre address city. isso geralmente útil porque deixa mais fácil saber qual registro address deve modificado. você pode passar números algum outro significado, strings mesmo (que resultará array parâmetros sendo criado). criar aninhamentos mais complexos, você pode especificar primeira parte nome input (person[address] exemplo anterior) forma explícita: criará inputs como como regra geral nome final input concatenação nome passado fields_for/form_with, valor índice, nome atributo. você também pode passar opção :index diretamente helpers como text_field, normalmente menos repetitivo especificar isto dentro builder formulário invés especificar controles individuais input. como atalho você pode adicionar nome omitir opção :index. isto mesmo especificar index: address.id portanto produz exatamente mesmo resultado exemplo anterior. helpers formulários rails também podem usados construir formulários enviar dados recursos externos. entretanto alguns momentos pode necessário definir authenticity_token recurso; isso pode feito passando parâmetro authenticity_token: 'your_external_token' opções form_with vezes submeter dados recurso externo, como gateway pagamento, campos podem usado formulário limitados externa pode indesejável gerar authenticity_token. enviar token, simplesmente passe false parâmetro :authenticity_token: many apps grow beyond simple forms editing single object. example, when creating person might want allow user same form) create multiple address records (home, work, etc.). when later editing that person user should able add, remove, amend addresses necessary."},{"id":1242,"title":"Action View Form Helpers","heading":"9 Building Complex Forms","subheading":"9.1 Configuring the Model","content":"active record provides model level support accepts_nested_attributes_for method: this creates addresses_attributes= method person that allows create, update, (optionally) destroy addresses."},{"id":1243,"title":"Action View Form Helpers","heading":"9 Building Complex Forms","subheading":"9.2 Nested Forms","content":"following form allows user create person associated addresses. when association accepts nested attributes fields_for renders block once every element association. particular, person addresses renders nothing. common pattern controller build more empty children that least fields shown user. example below would result sets address fields being rendered person form. fields_for yields form builder. parameters' name will what accepts_nested_attributes_for expects. example, when creating user with addresses, submitted parameters would look like: keys :addresses_attributes hash unimportant, they need merely different each address. associated object already saved, fields_for autogenerates hidden input with saved record. disable this passing include_id: false fields_for."},{"id":1244,"title":"Action View Form Helpers","heading":"9 Building Complex Forms","subheading":"9.3 The Controller","content":"usual need declare permitted parameters controller before pass them model:"},{"id":1245,"title":"Action View Form Helpers","heading":"9 Building Complex Forms","subheading":"9.4 Removing Objects","content":"allow users delete associated objects passing allow_destroy: true accepts_nested_attributes_for hash attributes object contains _destroy with value that evaluates true (eg. '1', true, 'true') then object will destroyed. this form allows users remove addresses: don't forget update permitted params your controller also include _destroy field:"},{"id":1246,"title":"Action View Form Helpers","heading":"9 Building Complex Forms","subheading":"9.5 Preventing Empty Records","content":"often useful ignore sets fields that user filled control this passing :reject_if proc accepts_nested_attributes_for. this proc will called with each hash attributes submitted form. proc returns false then active record will build associated object that hash. example below only tries build address kind attribute set. convenience instead pass symbol :all_blank which will create proc that will reject records where attributes blank excluding value _destroy."},{"id":1247,"title":"Action View Form Helpers","heading":"9 Building Complex Forms","subheading":"9.6 Adding Fields on the Fly","content":"rather than rendering multiple sets fields ahead time wish them only when user clicks 'add address' button. rails does provide built-in support this. when generating sets fields must ensure associated array unique current javascript date (milliseconds since epoch) common choice. antes form_with introduzido rails funcionalidade costumava divida entre form_tag form_for. ambos estão agora depreciados (soft-deprecated). documentação sobre pode encontrada versão antiga deste guia. você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."},{"id":1248,"title":"Interface de Consulta do Active Record","heading":null,"subheading":null,"content":"você está acostumado puro encontrar registros banco dados, então você provavelmente encontrará maneiras melhores realizar mesmas operações rails. active record isola necessidade usar maioria casos. exemplos código longo desse guia irão referir mais seguintes modelos: active record executar consultas banco dados você compatível maioria sistemas banco dados, incluindo mysql, mariadb, postgresql sqlite. independente qual sistema banco dados você utilize, formato método active record será sempre mesmo. recuperar objetos banco dados, active record fornece diversos métodos localização. cada método localização permite você passe argumentos mesmo executar determinada consulta banco dados necessidade escrever puro. métodos são: métodos localização retornam coleção, como where group, retornam instância activerecord::relation. métodos localizam única entidade, como find first, retornam única instância model. principal operação model.find(options) pode resumida como:"},{"id":1249,"title":"Interface de Consulta do Active Record","heading":"1 Recuperando Objetos do Banco de Dados","subheading":"1.1 Retornando um Único Objeto","content":"active record possui diferentes formas retornar único objeto. utilizando método find, você pode retornar objeto correspondente primary especificada corresponde opções fornecidas. exemplo: equivalente cima, sql, seria: método find gerar exceção activerecord::recordnotfound nenhum registro correspondente encontrado. você pode, também, utilizar este método consultar múltiplos objetos. chame método find passe array primary keys. será retornado array contendo todos registros correspondentes primary keys fornecidas. exemplo: equivalente cima, sql, seria: método take retorna registro nenhuma ordem implícita. exemplo: equivalente cima, sql, seria: método take retorna nenhum registro encontrado nenhuma exceção será levantada. você pode passar argumento numérico método take retornar mesmo número resultados. exemplo: equivalente cima, sql, seria: método take! comporta exatamente como take, exceto gerar exceção activerecord::recordnotfound caso encontre nenhum registro correspondente. método first encontra primeiro registro ordenado pela primary (padrão). exemplo: equivalente cima, sql, seria: método first retorna encontrado nenhum registro correspondente nenhuma exceção gerada. default scope contém método ordenação, first retornar primeiro registro acordo essa ordenação. você pode passar argumento número métoddo first retornar mesmo número resultados. exemplo: equivalente cima, sql, seria: coleção ordenada utilizando order, first retornar primeiro registro ordenado atributo especificado order. equivalente cima, sql, seria: método first! comporta exatamente como first, exceto gerar exceção activerecord::recordnotfound nenhum registro correspondente encontrado. método last encontra último registro ordenado pela primary (padrão). exemplo: equivalente cima, sql, seria: método last retorna encontrar nenhum registro correspondente nenhuma exceção será levantada. default scope contém método ordenação, last retornar último registro acordo essa ordenação. você pode passar argumento número método last retornar mesmo número resultados. exemplo: equivalente cima, sql, seria: coleção ordenada utilizando order, last retornar último registro ordenado atributo especificado order. equivalente cima, sql, seria: método last! comporta exatamente como last, exceto gerar exceção activerecord::recordnotfound nenhum registro correspondente encontrado. método find_by retornar primeiro registro corresponde condições. exemplo: equivalente escrever: equivalente cima, sql, seria método find_by comporta exatamente como find_by, exceto gerar exceção activerecord::recordnotfound nenhum registro correspondente encontrado. exemplo: isto equivalente escrever:"},{"id":1250,"title":"Interface de Consulta do Active Record","heading":"1 Recuperando Objetos do Banco de Dados","subheading":"1.2 Retornando Múltiplos Objetos em Lotes","content":"frequentemente precisamos iterar sobre grande número registros, seja quando precisamos enviar newsletter grande número usuários, quando vamos exportar dados. isso pode parecer simples: essa abordagem torna cada mais impraticável medida tamanho tabela aumenta, pois user.all.each instrui active record buscar tabela inteira única passagem, cria model objeto linha mantém todo array objetos model memória. fato, você grande número registros, coleção inteira pode exceder quantidade memória disponível. rails fornece dois métodos solucionar esse problema, dividindo registros lotes memory-friendly processamento. primeiro método, find_each, retorna lote registros depois submete cada registro individualmente bloco como model. segundo método, find_in_batches, retorna lote registros depois submete lote inteiro bloco como array models. método find_each retorna registros lotes depois aloca cada bloco. exemplo seguir, find_each retorna users lotes aloca bloco esse processo repetido, buscando mais lotes sempre preciso, todos registros tenham sido processados. find_each funciona classes model, como visto acima, assim como relações: contanto tenha nenhuma ordenação, pois método necessita forçar ordem interna iterar. houver ordem presente receptor, comportamento depende flag config.active_record.error_on_ignored_order. verdadeiro, argumenterror levantado, caso contrário ordem será ignorada aviso gerado, padrão. isto pode substituído opção :error_on_ignore, explicado abaixo. :batch_size opção :batch_size permite você especifique número registros serem retornados cada lote, antes serem passados, individualmente, bloco. exemplo, retornar registros lote 5000: :start padrão, registros buscados ordem ascendente primary key. opção :start permite você configure primeiro sequência sempre menor seja você precisa. isto pode útil, exemplo, você quer retomar processo interrompido lotes, desde você tenha salvo último processado como ponto retorno. exemplo, enviar newsletters apenas usuários primary começando 2000: :finish similar opção :start, :finish permite você configure último sequência sempre maior seja você necessite. isso pode útil, exemplo, você quer executar processo lotes utilizando subconjuntos registros baseados :start :finish exemplo, enviar newsletters apenas usuários primary começando indo 10000: outro exemplo seria você queira múltiplos workers manipulando mesma fila processamento. você pode cada worker lidando registros atribuindo opção :start finish apropriadas cada worker :error_on_ignore sobrescreve configurações aplicação especificar erro deve levantado quando ordem está presente relação. método find_in_batches similar find_each, pois ambos retornam lotes registros. diferença find_in_batches fornece lotes bloco como array models, individualmente. exemplo seguir produzir bloco fornecido array notas fiscais vez, bloco final contendo qualquer nota fiscal remanescente: find_in_batches funcional classes model, como visto acima, também relações: contanto ordenação, pois método forçar ordem interna iteração. método find_in_batches aceita mesmas opção find_each método where permite você especifique condições limitar registros retornados, representando parte where instrução sql. condições podem especificadas como string, array, hash."},{"id":1251,"title":"Interface de Consulta do Active Record","heading":"2 Condições","subheading":"2.1 Condições de Strings Puras","content":"você gostaria adicionar condições busca, poderia apenas especificá-las, como, exemplo client.where(\"orders_count '2'\"). isso encontrará todos clientes campo ordes_count tenha valor igual"},{"id":1252,"title":"Interface de Consulta do Active Record","heading":"2 Condições","subheading":"2.2 Condições de Array","content":"agora, esse número pudesse variar, digamos como argumento algum lugar? comando busca então levaria forma: active record tomará primeiro argumento como string condições quaisquer argumentos adicionais substituir pontos interrogação nele. você quer especificar múltiplas condições: neste exemplo, primeiro ponto interrogação será substituído valor params[:orders] segundo será substituído representação false, depende adaptador. este código altamente preferível: este código: devido segurança argumento. colocando variável dentro condição string, passará variável banco dados como encontra. isto significa será variável escape diretamente usuário pode intenções maliciosas. você fizer isso, coloca todo banco dados risco, porque usuário descobre pode explorar banco dados, pode fazer qualquer coisa ele. nunca, jamais, coloque seus argumentos diretamente dentro condição string. similar estilo substituição parâmetros, você também pode especificar chaves condição string junto hash chaves/valores (keys/values) correspondentes: isso torna legibilidade mais clara você grande número condições variáveis."},{"id":1253,"title":"Interface de Consulta do Active Record","heading":"2 Condições","subheading":"2.3 Condições de Hash","content":"active record também permite você passe condições hash pode aumentar legibilidade suas sintaxes condições. condições hash, você passa hash chaves (keys) campos deseja qualificados valores (values) como deseja qualificá-los: isso gerar como este: nome campo também pode string: caso relacionamento belongs_to, chave associação pode usada especificar model objeto active record usado como valor. este método também funciona relacionamentos polimórficos. isso encontrar todos clientes criados ontem usando instrução between: isso demonstra sintaxe mais curta exemplos condições array você deseja procurar registros usando expressão pode passar array hash condições: esse código gerar como este:"},{"id":1254,"title":"Interface de Consulta do Active Record","heading":"2 Condições","subheading":"2.4 Condições NOT","content":"consultas podem construídas where.not: outras palavras, essa consulta pode gerada chamando where nenhum argumento, então imediatamente encadeie condições passando where. isso gerar como este:"},{"id":1255,"title":"Interface de Consulta do Active Record","heading":"2 Condições","subheading":"2.5 Condições OR","content":"condições entre duas relações podem construídas chamando primeira relação, passando segundo como argumento. recuperar registros banco dados ordem específica, você pode usar método order. exemplo, você deseja obter conjunto registros ordená-los ordem crescente pelo campo created_at tabela: você também pode especificar oudesc: ordenar campos diversos: você quiser chamar order várias vezes, ordens subsequentes serão anexados primeira: padrão, model.find seleciona todos campos conjunto resultado usando select selecionar somente subconjunto campos conjunto resultado, você pode especificar subconjunto método select. exemplo, selecionar somente colunas viewable_by locked: query usada esta chamada busca algo como: tome cuidado pois isso também significa você está inicializando objeto model somente campos você selecionou. você tentar acessar campo está registro inicializado, você receber: onde <attribute> atributo você pediu. método lançar activerecord::missingattributeerror, então fique atento quando estiver trabalhando associações, pois elas precisam método funcionar corretamente. você quiser pegar somente registro valor único certo campo, você pode usar distinct: isso gerar query como: você pode também remover restrição unicidade: aplicar limit disparado pelo método model.find, você pode especificar limit usando métodos limit offset relação. você pode utilizar limit especificar número registros buscar, usar offset especificar número registros pular antes retornar registros. exemplo retornará máximo clientes devido método especificar nenhum offset retornará primeiros registros tabela. método executa será parecido com: adicionar offset chamada retornará lugar máximo clientes iniciando trigésimo-primeiro. será parecido com: aplicar cláusula group disparado pelo localizador, você pode utilizar método group. exemplo, você quer encontrar coleção datas pedidos foram criados: isso dará único objeto order cada data pedidos banco dados. será executado parecerá algo como isso:"},{"id":1256,"title":"Interface de Consulta do Active Record","heading":"6 Agrupando","subheading":"6.1 Total de itens agrupados","content":"pegar total itens agrupados única query, chame count depois group. será executado parecerá algo como isso: cláusula having especificar condições campos group você pode adicionar cláusula having disparado pelo model.find adicionar método having busca. exemplo: será executado será parecido isso: isso retorna data preço total cada objeto pedido, agrupado pelo foram criados preço maior $100."},{"id":1257,"title":"Interface de Consulta do Active Record","heading":"8 Condições de Substituição","subheading":"8.1 unscope","content":"você pode especificar certas condições serem removidas usando método unscope. exemplo: será executado: você também pode remover escopo cláusulas where específicas. exemplo: relação usou unscope afetará quaisquer relações quais unida:"},{"id":1258,"title":"Interface de Consulta do Active Record","heading":"8 Condições de Substituição","subheading":"8.2 only","content":"você também pode substituir condições método only. exemplo: será executado:"},{"id":1259,"title":"Interface de Consulta do Active Record","heading":"8 Condições de Substituição","subheading":"8.3 reselect","content":"método reselect substitui declaração select existente. exemplo: será executado: caso cláusula reselect utilizada, executado será:"},{"id":1260,"title":"Interface de Consulta do Active Record","heading":"8 Condições de Substituição","subheading":"8.4 reorder","content":"método reorder substitui ordem escopo padrão. exemplo: será executado: caso reorder utilizado, executado será:"},{"id":1261,"title":"Interface de Consulta do Active Record","heading":"8 Condições de Substituição","subheading":"8.5 reverse_order","content":"método reverse_order reverte ordem cláusula, especificado. será executado: nenhuma cláusula ordenação especificada query, reverse_order ordena pela chave primária ordem reversa. será executado: esse método aceita argumentos."},{"id":1262,"title":"Interface de Consulta do Active Record","heading":"8 Condições de Substituição","subheading":"8.6 rewhere","content":"método rewhere substitui existente, nomeada condição where. exemplo: será executado: caso cláusula rewhere usada, será: método none retorna relação encadeada registros. quaisquer condições subsequentes encadeadas relação retornada continuarão gerando relações vazias. isso útil cenários onde você precisa resposta encadeada método escopo pode retornar zero resultados. active record provê método readonly relação desabilitar modificações explicitamente qualquer objetos retornados. qualquer tentativa alterar registro readonly ocorrerá, levantando exceção activerecord::readonlyrecord. como client explicitamente configurado objeto readonly, código acima levantará exceção activerecord::readonlyrecord chamar client.save valor atualizado visits. bloqueio útil prevenir condições corrida alterar registros banco dados garantir alterações atômicas. active record provê dois mecanismos bloqueio:"},{"id":1263,"title":"Interface de Consulta do Active Record","heading":"11 Bloqueando registros para alteração","subheading":"11.1 Bloqueio Otimista","content":"bloqueio otimista permite múltiplos usuários acessem mesmo registro edição presume mínimo conflitos dados. isto feito verificando outro processo mudanças registro desde aberto. exceção activerecord::staleobjecterror disparada isso ocorreu alteração ignorada. coluna bloqueio otimista usar bloqueio otimista, tabela precisa coluna chamada lock_version tipo inteiro. cada registro alterado, active record incrementa valor coluna lock_version. requisição alteração feita valor menor campo lock_version valor está atualmente coluna lock_version banco dados, requisição alteração falhará activerecord::staleobjecterror. exemplo: você fica então responsável lidar conflito tratando exceção desfazendo alterações, agrupando-as aplicando lógica negócio necessária resolver conflito. este comportamento pode desativado definindo activerecord::base.lock_optimistically false. usar outro nome coluna lock_version, activerecord::base oferece atributo classe chamado locking_column:"},{"id":1264,"title":"Interface de Consulta do Active Record","heading":"11 Bloqueando registros para alteração","subheading":"11.2 Bloqueio pessimista","content":"bloqueio pessimista mecansimo bloqueio fornecido pelo banco dados subjacente. usar lock quando relation (objeto tipo activerecord::relation) criada, obtém-se bloqueio exclusivo linhas selecionadas. relations usando lock normalmente executadas dentro transação permitir condições deadlock. exemplo: sessão acima produz seguinte banco dados mysql: você também pode passar diretamente método lock permitir diferentes tipos bloqueio. exemplo, mysql expressão chamada lock share mode permite bloquear registro ainda assim permitir outras consultas leiam. especificar esta expressão, basta passá-la método lock: você instância modelo, você pode iniciar transação obter bloqueio usando código seguinte: active record fornece dois métodos busca especificar cláusulas join resultante: joins left_outer_joins. enquanto joins deve utilizado inner join consultas personalizadas, left_outer_joins usado consultas usando left outer join."},{"id":1265,"title":"Interface de Consulta do Active Record","heading":"12 Associando Tabelas","subheading":"12.1 joins","content":"múltiplas maneiras usar método joins. você pode apenas fornecer literal especificando cláusula join joins: isso resultará seguinte sql: active record permite você nomes associações definidos model como atalho especificar cláusulas join essas associações quando estiver usando método joins. exemplo, considere seguintes models category, article, comment, guest tag: agora, todos itens seguir irão produzir consultas junção (join) esperadas usando inner join: isso produz: português: \"retorne objeto category todas categorias artigos\". observe você verá categorias duplicadas mais artigo tiver mesma categoria. você quiser categorias exclusivas, pode usar category.joins(:articles).distinct. isso produz: português: \"retorne todos artigos categoria menos comentário\". observe novamente artigos múltiplos comentários aparecerão múltiplas vezes. isso produz: português: \"retorne todos artigos comentário feito convidado.\" isso produz: português: \"retorne todas categorias artigos, sendo estes artigos comentário feito convidado, estes artigos também tenham tag.\" você pode especificar condições tabelas associadas condições array string. hash conditions fornecem sintaxe especial especificar condições tabelas associadas: sintaxe alternativa mais limpa aninhar condições hash: isso encontrará todos clientes pedidos criados ontem, novamente usando expressão between."},{"id":1266,"title":"Interface de Consulta do Active Record","heading":"12 Associando Tabelas","subheading":"12.2 left_outer_joins","content":"você deseja selecionar conjunto registros tendo registros associados, você pode usar método left_outer_joins. resulta significa: \"retorne todos autores suas contagens posts, tenham eles postagens não\" eager loading rápido mecanismo carregar registros associados objetos retornados model.find usando mínimo consultas possível. problema consultas considere seguinte código, encontra clientes imprime seus códigos postais: este código parece primeira vista. problema está número total consultas executadas. código acima executa (para encontrar clientes) cada cliente carregar endereço) consultas total. solução problemas consultas active record permite você especifique antecedência todas associações serão carregadas. isso possível especificando método includes chamada model.find. includes, active record garante todas associações especificadas sejam carregadas usando número mínimo possível consultas. revisitando caso acima, poderíamos reescrever client.limit(10) endereços carregamento antecipado: código acima executará apenas consultas, oposição consultas caso anterior:"},{"id":1267,"title":"Interface de Consulta do Active Record","heading":"13 Associations com Eager Loading","subheading":"13.1 Eager Loading Multiple Associations","content":"active record permite você carregue rapidamente qualquer número associações única chamada model.find usando array, hash, hash aninhado array hash método includes. isso carrega todos artigos categoria associada comentários cada artigo. isso encontrará categoria carregará antecipadamente todos artigos associados, tags comentários artigos associados todas associações comentários convidados."},{"id":1268,"title":"Interface de Consulta do Active Record","heading":"13 Associations com Eager Loading","subheading":"13.2 Especificando Condições em Associações Eager Loaded","content":"mesmo active record permita você especifique condições associações carregadas antecipadamente como joins, maneira recomendada usar joins invés. entanto, você deve fazer isso, você pode usar where como faria normalmente. isso geraria consulta contém left outer join enquanto método joins geraria usando função inner join. houvesse condição where, isso geraria conjunto normal duas consultas. nota: usar where assim funcionará quando você passar hash. fragmentos você precisa usar references forçar tabelas unidas: caso desta consulta includes, houve comentários qualquer artigos, todos artigos ainda seriam carregados. usando joins inner join), condições junção devem corresponder, caso contrário, nenhum registro será devolvido. definição escopo permite você especifique consultas comumente usadas, podem referenciadas como chamadas método objetos modelos associados. esses escopos, você pode usar todos métodos cobertos anteriormente, como where, joins includes. todos corpos escopo devem retornar activerecord::relation permitir métodos adicionais (como outros escopos) sejam chamados nele. definir escopo simples, usamos método scope dentro classe, passando consulta gostaríamos executar quando este escopo chamado: escopos também podem encadeados dentro escopos: chamar este escopo published, podemos chamá-lo tanto classe: associação consiste objetos article:"},{"id":1269,"title":"Interface de Consulta do Active Record","heading":"14 Scopes","subheading":"14.1 Transmitindo argumentos","content":"escopo pode receber argumentos: chame escopo como fosse método classe: entanto, isso apenas duplicação funcionalidade seria fornecida você método classe. usar método classe maneira preferida aceitar argumentos escopos. esses métodos ainda estarão acessíveis objetos associação:"},{"id":1270,"title":"Interface de Consulta do Active Record","heading":"14 Scopes","subheading":"14.2 Usando condicionais","content":"escopo pode utilizar condicionais: como outros exemplos, isso comportará maneira semelhante método classe. entanto, advertência importante: escopo sempre retornará objeto activerecord::relation, mesmo condicional avaliada como false, enquanto método classe retornará nil. isso pode causar nomethoderror encadear métodos classe condicionais, qualquer condicionais retornar false."},{"id":1271,"title":"Interface de Consulta do Active Record","heading":"14 Scopes","subheading":"14.3 Aplicando um escopo padrão","content":"desejarmos escopo seja aplicado todas consultas model, podemos usar método default_scope dentro próprio model. quando consultas executadas neste model, consulta agora será semelhante isto: você precisa fazer coisas mais complexas escopo padrão, você pode alternativamente defini-lo como método classe: esteja ciente que, quando fornecido formato array, argumentos consulta default_scope pode convertido hash atribuição atributo padrão. e.g.:"},{"id":1272,"title":"Interface de Consulta do Active Record","heading":"14 Scopes","subheading":"14.4 Mesclagem de escopos","content":"assim como escopos cláusulas where mesclados usando condições and. podemos misturar combinar condições scope where final terá todas condições unidas and. quisermos última cláusula where vença, então relation#merge pode usado. advertência importante default_scope será anexado condições scope where. como você pode acima, default_scope está sendo mesclado ambos condições scope where."},{"id":1273,"title":"Interface de Consulta do Active Record","heading":"14 Scopes","subheading":"14.5 Removendo todo o escopo","content":"desejarmos remover escopo qualquer motivo, podemos usar método unscoped. isto especialmente útil default_scope especificado model deve aplicado esta consulta particular. este método remove todo escopo fará consulta normal tabela. unscoped também pode aceitar bloqueio. cada campo (também conhecido como atributo) você define tabela, active record fornece método localizador. você tiver campo chamado first_name model client exemplo, você terá graça método find_by_first_name fornecido pelo active record. você tiver campo locked model client, você também receberá método find_by_locked. você pode especificar ponto exclamação final localizador dinâmico levante erro activerecord::recordnotfound caso seja retornado nenhum registro, exemplo client.find_by_name!(\"ryan\") você deseja localizar name locked, você pode encadear esses localizadores juntos simplesmente digitando \"and\" entre campos. exemplo, client.find_by_first_name_and_locked(\"ryan\", true). enum macro maps integer column possible values. this will automatically create corresponding scopes query model. methods transition between states query current state also added. read full documentation about enums rails docs. active record implementa padrão encadeamento métodos (method chaining) permite usar vários métodos active record juntos maneira simples direta. você pode encadear métodos numa sentença quando método chamado anteriormente retorna activerecord::relation, como all, where joins. métodos retornam único objeto (veja seção retornando único objeto) devem estar sentença. alguns exemplos abaixo. esse guia mostrar todas possibilidades, alguns exemplos. quando método active record chamado, consulta imediatamente gerada enviada banco dados, isso acontece quando dados realmente necessários. logo, cada exemplo abaixo gera consulta."},{"id":1274,"title":"Interface de Consulta do Active Record","heading":"17 Entendendo o Encadeamento de Métodos","subheading":"17.1 Buscando dados filtrados de múltiplas tabelas","content":"resultado deve algo parecido isso:"},{"id":1275,"title":"Interface de Consulta do Active Record","heading":"17 Entendendo o Encadeamento de Métodos","subheading":"17.2 Buscando dados específicos de múltiplas tabelas","content":"comando acima deve gerar: comum você precise localizar registro criá-lo existir. você pode fazer isso métodos find_or_create_by find_or_create_by!."},{"id":1276,"title":"Interface de Consulta do Active Record","heading":"18 Encontrando ou Construindo um Novo Objeto","subheading":"18.1 find_or_create_by","content":"método find_or_create_by verifica existe registro atributos especificados. não, então create chamado. vejamos exemplo. suponha você queira encontrar cliente chamado 'andy' houver nenhum, crie você pode fazer isso executando: gerado esse método parece isso: find_or_create_by retorna registro existe novo registro. nosso caso, ainda tínhamos cliente chamado andy, então registro criado retornado. novo registro pode salvo banco dados; isso depende validações foram aprovadas (assim como create). suponha queremos definir atributo 'bloqueado (locked)' false estamos criando novo registro, queremos incluí-lo consulta. então queremos encontrar cliente chamado \"andy\", esse cliente existir, crie cliente chamado \"andy\" esteja bloqueado. podemos conseguir isso duas maneiras. primeira usar create_with: segunda maneira usar bloco: bloco será executado cliente estiver sendo criado. segunda rodarmos este código, todo bloco será ignorado."},{"id":1277,"title":"Interface de Consulta do Active Record","heading":"18 Encontrando ou Construindo um Novo Objeto","subheading":"18.2 find_or_create_by!","content":"você também pode usar find_or_create_by! você também pode usar find_or_create_by! gerar exceção novo registro inválido. validações abordadas neste guia, vamos supor momento você adiciona temporariamente model client. você tentar criar novo client passar orders_count, registro será inválido exceção será levantada:"},{"id":1278,"title":"Interface de Consulta do Active Record","heading":"18 Encontrando ou Construindo um Novo Objeto","subheading":"18.3 find_or_initialize_by","content":"método find_or_initialize_by funcionará como find_or_create_by chamará invés create. isso significa nova instância model será criada memória, será salva banco dados. continuando exemplo find_or_create_by, agora queremos cliente chamado 'nick': como objeto ainda está armazenado banco dados, gerado seguinte aparência: quando você quiser salvar banco, apenas chame save: you'd like your find records table find_by_sql. find_by_sql method will return array objects even underlying query returns just single record. example could this query: find_by_sql provides with simple making custom calls database retrieving instantiated objects."},{"id":1279,"title":"Interface de Consulta do Active Record","heading":"19 Finding by SQL","subheading":"19.1 select_all","content":"find_by_sql close relative called connection#select_all. select_all will retrieve objects from database using custom just like find_by_sql will instantiate them. this method will return instance activerecord::result class calling to_a this object would return array hashes where each hash indicates record."},{"id":1280,"title":"Interface de Consulta do Active Record","heading":"19 Finding by SQL","subheading":"19.2 pluck","content":"pluck used query single multiple columns from underlying table model. accepts list column names argument returns array values specified columns with corresponding data type. pluck makes possible replace code like: with: unlike select, pluck directly converts database result into ruby array, without constructing activerecord objects. this mean better performance large often-running query. however, model method overrides will available. example: limited querying fields from single table, query multiple tables well. furthermore, unlike select other relation scopes, pluck triggers immediate query, thus cannot chained with further scopes, although work with scopes already constructed earlier:"},{"id":1281,"title":"Interface de Consulta do Active Record","heading":"19 Finding by SQL","subheading":"19.3 ids","content":"used pluck relation using table's primary key. você simplesmente quer checar existência objeto, existe método chamado exists?. este método consultar banco dados usando mesma consulta find, invés retornar objeto coleção objetos, retornar true false. método exists? também assume valores múltiplos, problema retornará true algum desses registros existirem. possível usar exists? algum argumento model relação. código acima retorna true existir menos cliente first_name 'ryan' false caso exista. código acima retorna false tabela clients estiver vazia true caso esteja. você também pode usar any? many? verificar existência model relação. essa seção count como exemplo método nessa introdução, opções descritas aplicam todas subseções. todos métodos cálculo funcionam diretamente model: relação: você também pode utilizar vários métodos busca relação fazer cálculos complexos: executar:"},{"id":1282,"title":"Interface de Consulta do Active Record","heading":"21 Cálculos","subheading":"21.1 Contar (count)","content":"você quiser saber quantos registros estão tabela model você pode chamar client.count isso retornar número. você quiser mais específico encontrar todos clientes idade presente banco dados, você pode utilizar client.count(:age) mais opções, veja seção pai, cálculos."},{"id":1283,"title":"Interface de Consulta do Active Record","heading":"21 Cálculos","subheading":"21.2 Média (average)","content":"você quiser saber média certo número suas tabelas, você pode chamar método average classe relaciona essa tabela. essa chamada método parecer desse jeito: isso retornar número (possivelmente número ponto flutuante como 3.14159265) representando valor médio desse campo. mais opções, veja seção pai, cálculos."},{"id":1284,"title":"Interface de Consulta do Active Record","heading":"21 Cálculos","subheading":"21.3 Mínimo (minimum)","content":"você quiser encontrar valor mínimo campo tabela, você pode chamar método minimum classe relaciona tabela. essa chamada método parecer desse jeito: mais opções, veja seção pai, cálculos."},{"id":1285,"title":"Interface de Consulta do Active Record","heading":"21 Cálculos","subheading":"21.4 Máximo (maximum)","content":"você quiser encontrar valor máximo campo tabela, você pode chamar método maximum classe relaciona tabela. essa chamada método parecer desse jeito: mais opções, veja seção pai, cálculos."},{"id":1286,"title":"Interface de Consulta do Active Record","heading":"21 Cálculos","subheading":"21.5 Soma (sum)","content":"você quiser encontrar soma todos registros tabela, você pode chamar método classe relaciona tabela. essa chamada método parecer desse jeito: mais opções, veja seção pai, cálculos. você pode executar explain queries disparadas relações. exemplo, pode produzir mysql mariadb. active record exibe impressão simula shell banco dados correspondente. então, mesma query sendo executada quando usado adaptador postgresql poderá produzir seguinte: eager loading pode disparar mais query debaixo panos, algumas queries podem necessitar resultados prévios. causa disso, explain verdade executa query somente depois solicita query planeja. exemplo, produz mysql mariadb."},{"id":1287,"title":"Interface de Consulta do Active Record","heading":"22 Executando o EXPLAIN","subheading":"22.1 Interpretando o EXPLAIN","content":"interpretação saída explain está além escopo deste guia. links seguir podem servir ajuda: você incentivado ajudar melhorar qualidade deste guia. favor, contribua qualquer erros, inclusive erros digitação. começar, você pode nossa sessão contribuindo documentação. você também pode encontrar conteúdo incompleto coisas estão atualizadas. favor, adicione qualquer documentação falta master rails. certifique-se checar edge guides (en-us) primeiro verificar problema resolvido branch master. verifique diretrizes guia ruby rails estilo convenções. qualquer motivo, você encontrar algo consertar, conseguir consertá-lo, favor abra issue nosso guia. último, menos importante, qualquer tipo discussão sobre documentação ruby rails muito vinda lista discussão rubyonrails-docs issues guia português."}];var linkMap = {"0":"plugins.html","1":"plugins.html#generate-a-gemified-plugin","2":"plugins.html#add-a-class-method","3":"plugins.html#add-an-instance-method","4":"plugins.html#references","5":"layouts_and_rendering.html","6":"layouts_and_rendering.html#renderizacao-por-padrao-convencao-sobre-configuracao-em-acao","7":"layouts_and_rendering.html#usando-render","8":"layouts_and_rendering.html#usando-redirect-to","9":"layouts_and_rendering.html#usando-head-para-criar-respostas-com-apenas-o-cabecalho-header-only","10":"layouts_and_rendering.html#helpers-de-asset-tags","11":"layouts_and_rendering.html#entendendo-yield","12":"layouts_and_rendering.html#usando-o-metodo-content-for","13":"layouts_and_rendering.html#usando-partials","14":"layouts_and_rendering.html#usando-layouts-aninhados","15":"security.html","16":"security.html#what-are-sessions-questionmark","17":"security.html#session-hijacking","18":"security.html#session-storage","19":"security.html#rotating-encrypted-and-signed-cookies-configurations","20":"security.html#replay-attacks-for-cookiestore-sessions","21":"security.html#session-fixation","22":"security.html#session-fixation-countermeasures","23":"security.html#session-expiry","24":"security.html#csrf-countermeasures","25":"security.html#redirection","26":"security.html#file-uploads","27":"security.html#executable-code-in-file-uploads","28":"security.html#file-downloads","29":"security.html#additional-precautions","30":"security.html#brute-forcing-accounts","31":"security.html#account-hijacking","32":"security.html#captchas","33":"security.html#logging","34":"security.html#regular-expressions","35":"security.html#privilege-escalation","36":"security.html#permitted-lists-versus-restricted-lists","37":"security.html#sql-injection","38":"security.html#cross-site-scripting-xss","39":"security.html#css-injection","40":"security.html#textile-injection","41":"security.html#ajax-injection","42":"security.html#command-line-injection","43":"security.html#header-injection","44":"security.html#content-security-policy","45":"security.html#custom-credentials","46":"active_support_core_extensions.html#active-support-stand-alone","47":"active_support_core_extensions.html#active-support-em-uma-aplicacao-ruby-on-rails","48":"active_support_core_extensions.html#blank-questionmark-e-present-questionmark","49":"active_support_core_extensions.html#presence","50":"active_support_core_extensions.html#duplicable-questionmark","51":"active_support_core_extensions.html#deep-dup","52":"active_support_core_extensions.html#try","53":"active_support_core_extensions.html#class-eval-args-block","54":"active_support_core_extensions.html#acts-like-questionmark-duck","55":"active_support_core_extensions.html#to-param","56":"active_support_core_extensions.html#to-query","57":"active_support_core_extensions.html#with-options","58":"active_support_core_extensions.html#suporte-ao-json","59":"active_support_core_extensions.html#variaveis-de-instancia","60":"active_support_core_extensions.html#silenciando-warnings-e-excecoes","61":"active_support_core_extensions.html#in-questionmark","62":"active_support_core_extensions.html#attributes","63":"active_support_core_extensions.html#parents","64":"active_support_core_extensions.html#anonymous","65":"active_support_core_extensions.html#method-delegation","66":"active_support_core_extensions.html#redefining-methods","67":"active_support_core_extensions.html#class-attributes","68":"active_support_core_extensions.html#subclasses-descendants","69":"active_support_core_extensions.html#output-safety","70":"active_support_core_extensions.html#remove","71":"active_support_core_extensions.html#squish","72":"active_support_core_extensions.html#truncate","73":"active_support_core_extensions.html#truncate-bytes","74":"active_support_core_extensions.html#truncate-words","75":"active_support_core_extensions.html#inquiry","76":"active_support_core_extensions.html#starts-with-questionmark-and-ends-with-questionmark","77":"active_support_core_extensions.html#strip-heredoc","78":"active_support_core_extensions.html#indent","79":"active_support_core_extensions.html#access","80":"active_support_core_extensions.html#inflections","81":"active_support_core_extensions.html#extensions-to-string-conversions","82":"active_support_core_extensions.html#bytes","83":"active_support_core_extensions.html#extensions-to-numeric-time","84":"active_support_core_extensions.html#formatting","85":"active_support_core_extensions.html#multiple-of-questionmark","86":"active_support_core_extensions.html#ordinal","87":"active_support_core_extensions.html#ordinalize","88":"active_support_core_extensions.html#extensions-to-integer-time","89":"active_support_core_extensions.html#extensions-to-bigdecimal-to-s","90":"active_support_core_extensions.html#sum","91":"active_support_core_extensions.html#index-by","92":"active_support_core_extensions.html#index-with","93":"active_support_core_extensions.html#many-questionmark","94":"active_support_core_extensions.html#exclude-questionmark","95":"active_support_core_extensions.html#without","96":"active_support_core_extensions.html#pluck","97":"active_support_core_extensions.html#accessing","98":"active_support_core_extensions.html#extensions-to-array-extracting","99":"active_support_core_extensions.html#options-extraction","100":"active_support_core_extensions.html#extensions-to-array-conversions","101":"active_support_core_extensions.html#wrapping","102":"active_support_core_extensions.html#duplicating","103":"active_support_core_extensions.html#grouping","104":"active_support_core_extensions.html#extensions-to-hash-conversions","105":"active_support_core_extensions.html#merging","106":"active_support_core_extensions.html#deep-duplicating","107":"active_support_core_extensions.html#working-with-keys","108":"active_support_core_extensions.html#working-with-values","109":"active_support_core_extensions.html#slicing","110":"active_support_core_extensions.html#extensions-to-hash-extracting","111":"active_support_core_extensions.html#indifferent-access","112":"active_support_core_extensions.html#multiline-questionmark","113":"active_support_core_extensions.html#extensions-to-range-to-s","114":"active_support_core_extensions.html#include-questionmark-and-cover-questionmark","115":"active_support_core_extensions.html#overlaps-questionmark","116":"active_support_core_extensions.html#extensions-to-date-calculations","117":"active_support_core_extensions.html#extensions-to-date-conversions","118":"active_support_core_extensions.html#extensions-to-datetime-calculations","119":"active_support_core_extensions.html#calculations","120":"active_support_core_extensions.html#time-constructors","121":"active_support_core_extensions.html#atomic-write","122":"active_support_core_extensions.html#load","123":"action_cable_overview.html","124":"action_cable_overview.html#connections","125":"action_cable_overview.html#channels","126":"action_cable_overview.html#conexoes","127":"action_cable_overview.html#streams","128":"action_cable_overview.html#broadcasting","129":"action_cable_overview.html#client-server-interactions-subscriptions","130":"action_cable_overview.html#passing-parameters-to-channels","131":"action_cable_overview.html#rebroadcasting-a-message","132":"action_cable_overview.html#example-1-user-appearances","133":"action_cable_overview.html#example-2-receiving-new-web-notifications","134":"action_cable_overview.html#more-complete-examples","135":"action_cable_overview.html#subscription-adapter","136":"action_cable_overview.html#allowed-request-origins","137":"action_cable_overview.html#consumer-configuration","138":"action_cable_overview.html#worker-pool-configuration","139":"action_cable_overview.html#other-configurations","140":"action_cable_overview.html#in-app","141":"action_cable_overview.html#standalone","142":"action_cable_overview.html#notes","143":"4_2_release_notes.html","144":"4_2_release_notes.html#active-job","145":"4_2_release_notes.html#asynchronous-mails","146":"4_2_release_notes.html#adequate-record","147":"4_2_release_notes.html#web-console","148":"4_2_release_notes.html#foreign-key-support","149":"4_2_release_notes.html#render-with-a-string-argument","150":"4_2_release_notes.html#respond-with-class-level-respond-to","151":"4_2_release_notes.html#default-host-for-rails-server","152":"4_2_release_notes.html#changed-status-option-symbols-for-render","153":"4_2_release_notes.html#html-sanitizer","154":"4_2_release_notes.html#assert-select","155":"4_2_release_notes.html#railties-removals","156":"4_2_release_notes.html#railties-deprecations","157":"4_2_release_notes.html#railties-notable-changes","158":"4_2_release_notes.html#action-pack-removals","159":"4_2_release_notes.html#action-pack-deprecations","160":"4_2_release_notes.html#action-pack-notable-changes","161":"4_2_release_notes.html#action-view-deprecations","162":"4_2_release_notes.html#action-view-notable-changes","163":"4_2_release_notes.html#action-mailer-deprecations","164":"4_2_release_notes.html#action-mailer-notable-changes","165":"4_2_release_notes.html#active-record-removals","166":"4_2_release_notes.html#active-record-deprecations","167":"4_2_release_notes.html#active-record-notable-changes","168":"4_2_release_notes.html#active-model-removals","169":"4_2_release_notes.html#active-model-deprecations","170":"4_2_release_notes.html#active-model-notable-changes","171":"4_2_release_notes.html#removals","172":"4_2_release_notes.html#deprecations","173":"4_2_release_notes.html#notable-changes","174":"2_3_release_notes.html","175":"2_3_release_notes.html#rack-integration","176":"2_3_release_notes.html#renewed-support-for-rails-engines","177":"2_3_release_notes.html#nested-attributes","178":"2_3_release_notes.html#nested-transactions","179":"2_3_release_notes.html#dynamic-scopes","180":"2_3_release_notes.html#default-scopes","181":"2_3_release_notes.html#batch-processing","182":"2_3_release_notes.html#multiple-conditions-for-callbacks","183":"2_3_release_notes.html#find-with-having","184":"2_3_release_notes.html#reconnecting-mysql-connections","185":"2_3_release_notes.html#other-active-record-changes","186":"2_3_release_notes.html#unified-rendering","187":"2_3_release_notes.html#application-controller-renamed","188":"2_3_release_notes.html#http-digest-authentication-support","189":"2_3_release_notes.html#more-efficient-routing","190":"2_3_release_notes.html#rack-based-lazy-loaded-sessions","191":"2_3_release_notes.html#mime-type-handling-changes","192":"2_3_release_notes.html#optimization-of-respond-to","193":"2_3_release_notes.html#improved-caching-performance","194":"2_3_release_notes.html#localized-views","195":"2_3_release_notes.html#partial-scoping-for-translations","196":"2_3_release_notes.html#other-action-controller-changes","197":"2_3_release_notes.html#nested-object-forms","198":"2_3_release_notes.html#smart-rendering-of-partials","199":"2_3_release_notes.html#prompts-for-date-select-helpers","200":"2_3_release_notes.html#assettag-timestamp-caching","201":"2_3_release_notes.html#asset-hosts-as-objects","202":"2_3_release_notes.html#grouped-options-for-select-helper-method","203":"2_3_release_notes.html#disabled-option-tags-for-form-select-helpers","204":"2_3_release_notes.html#a-note-about-template-loading","205":"2_3_release_notes.html#other-action-view-changes","206":"2_3_release_notes.html#object-try","207":"2_3_release_notes.html#object-tap-backport","208":"2_3_release_notes.html#swappable-parsers-for-xmlmini","209":"2_3_release_notes.html#fractional-seconds-for-timewithzone","210":"2_3_release_notes.html#json-key-quoting","211":"2_3_release_notes.html#other-active-support-changes","212":"2_3_release_notes.html#rails-metal","213":"2_3_release_notes.html#application-templates","214":"2_3_release_notes.html#quieter-backtraces","215":"2_3_release_notes.html#faster-boot-time-in-development-mode-with-lazy-loading-autoload","216":"2_3_release_notes.html#rake-gem-task-rewrite","217":"2_3_release_notes.html#other-railties-changes","218":"testing.html","219":"testing.html#rails-sets-up-for-testing-from-the-word-go","220":"testing.html#the-test-environment","221":"testing.html#rails-meets-minitest","222":"testing.html#available-assertions","223":"testing.html#rails-specific-assertions","224":"testing.html#a-brief-note-about-test-cases","225":"testing.html#the-rails-test-runner","226":"testing.html#parallel-testing-with-processes","227":"testing.html#parallel-testing-with-threads","228":"testing.html#maintaining-the-test-database-schema","229":"testing.html#the-low-down-on-fixtures","230":"testing.html#changing-the-default-settings","231":"testing.html#screenshot-helper","232":"testing.html#implementing-a-system-test","233":"testing.html#helpers-available-for-integration-tests","234":"testing.html#implementing-an-integration-test","235":"testing.html#what-to-include-in-your-functional-tests","236":"testing.html#available-request-types-for-functional-tests","237":"testing.html#testing-xhr-ajax-requests","238":"testing.html#the-three-hashes-of-the-apocalypse","239":"testing.html#instance-variables-available","240":"testing.html#setting-headers-and-cgi-variables","241":"testing.html#testing-flash-notices","242":"testing.html#putting-it-together","243":"testing.html#test-helpers","244":"testing.html#keeping-the-postman-in-check","245":"testing.html#unit-testing","246":"testing.html#functional-and-system-testing","247":"testing.html#a-basic-test-case","248":"testing.html#custom-assertions-and-testing-jobs-inside-other-components","249":"testing.html#asserting-time-arguments-in-jobs","250":"testing.html#connection-test-case","251":"testing.html#channel-test-case","252":"testing.html#custom-assertions-and-testing-broadcasts-inside-other-components","253":"testing.html#testing-time-dependent-code","254":"i18n.html","255":"i18n.html#the-overall-architecture-of-the-library","256":"i18n.html#the-public-i18n-api","257":"i18n.html#configure-the-i18n-module","258":"i18n.html#managing-the-locale-across-requests","259":"i18n.html#abstracting-localized-code","260":"i18n.html#providing-translations-for-internationalized-strings","261":"i18n.html#passing-variables-to-translations","262":"i18n.html#adding-date-time-formats","263":"i18n.html#inflection-rules-for-other-locales","264":"i18n.html#localized-views","265":"i18n.html#organization-of-locale-files","266":"i18n.html#looking-up-translations","267":"i18n.html#pluralization","268":"i18n.html#setting-and-passing-a-locale","269":"i18n.html#using-safe-html-translations","270":"i18n.html#translations-for-active-record-models","271":"i18n.html#translations-for-action-mailer-e-mail-subjects","272":"i18n.html#overview-of-other-built-in-methods-that-provide-i18n-support","273":"i18n.html#using-different-backends","274":"i18n.html#using-different-exception-handlers","275":"contributing_to_ruby_on_rails.html","276":"contributing_to_ruby_on_rails.html#creating-a-bug-report","277":"contributing_to_ruby_on_rails.html#create-an-executable-test-case","278":"contributing_to_ruby_on_rails.html#special-treatment-for-security-issues","279":"contributing_to_ruby_on_rails.html#what-about-feature-requests-questionmark","280":"contributing_to_ruby_on_rails.html#verifying-bug-reports","281":"contributing_to_ruby_on_rails.html#testing-patches","282":"contributing_to_ruby_on_rails.html#setting-up-a-development-environment","283":"contributing_to_ruby_on_rails.html#clone-the-rails-repository","284":"contributing_to_ruby_on_rails.html#bundle-install","285":"contributing_to_ruby_on_rails.html#running-an-application-against-your-local-branch","286":"contributing_to_ruby_on_rails.html#write-your-code","287":"contributing_to_ruby_on_rails.html#benchmark-your-code","288":"contributing_to_ruby_on_rails.html#running-tests","289":"contributing_to_ruby_on_rails.html#warnings","290":"contributing_to_ruby_on_rails.html#updating-the-changelog","291":"contributing_to_ruby_on_rails.html#updating-the-gemfile-lock","292":"contributing_to_ruby_on_rails.html#commit-your-changes","293":"contributing_to_ruby_on_rails.html#update-your-branch","294":"contributing_to_ruby_on_rails.html#fork","295":"contributing_to_ruby_on_rails.html#issue-a-pull-request","296":"contributing_to_ruby_on_rails.html#get-some-feedback","297":"contributing_to_ruby_on_rails.html#iterate-as-necessary","298":"contributing_to_ruby_on_rails.html#older-versions-of-ruby-on-rails","299":"configuring.html","300":"configuring.html#configuracao-geral-do-rails","301":"configuring.html#configuring-assets","302":"configuring.html#configuring-generators","303":"configuring.html#configuring-middleware","304":"configuring.html#configuring-i18n","305":"configuring.html#configuring-active-model","306":"configuring.html#configuring-active-record","307":"configuring.html#configuring-action-controller","308":"configuring.html#configuring-action-dispatch","309":"configuring.html#configuring-action-view","310":"configuring.html#configuring-action-mailbox","311":"configuring.html#configuring-action-mailer","312":"configuring.html#configuring-active-support","313":"configuring.html#configuring-active-job","314":"configuring.html#configuring-action-cable","315":"configuring.html#configuring-active-storage","316":"configuring.html#results-of-config-load-defaults","317":"configuring.html#configuring-a-database","318":"configuring.html#connection-preference","319":"configuring.html#creating-rails-environments","320":"configuring.html#deploy-to-a-subdirectory-relative-url-root","321":"configuring.html#rails-railtie-initializer","322":"configuring.html#initializers","323":"rails_on_rack.html","324":"rails_on_rack.html#rails-application-s-rack-object","325":"rails_on_rack.html#rails-server","326":"rails_on_rack.html#rackup","327":"rails_on_rack.html#development-and-auto-reloading","328":"rails_on_rack.html#inspecting-middleware-stack","329":"rails_on_rack.html#configuring-middleware-stack","330":"rails_on_rack.html#internal-middleware-stack","331":"rails_on_rack.html#learning-rack","332":"rails_on_rack.html#understanding-middlewares","333":"5_0_release_notes.html","334":"5_0_release_notes.html#action-cable","335":"5_0_release_notes.html#api-applications","336":"5_0_release_notes.html#active-record-attributes-api","337":"5_0_release_notes.html#test-runner","338":"5_0_release_notes.html#railties-removals","339":"5_0_release_notes.html#railties-deprecations","340":"5_0_release_notes.html#railties-notable-changes","341":"5_0_release_notes.html#action-pack-removals","342":"5_0_release_notes.html#action-pack-deprecations","343":"5_0_release_notes.html#action-pack-notable-changes","344":"5_0_release_notes.html#action-view-removals","345":"5_0_release_notes.html#action-view-notable-changes","346":"5_0_release_notes.html#action-mailer-removals","347":"5_0_release_notes.html#action-mailer-notable-changes","348":"5_0_release_notes.html#active-record-removals","349":"5_0_release_notes.html#active-record-deprecations","350":"5_0_release_notes.html#active-record-notable-changes","351":"5_0_release_notes.html#active-model-removals","352":"5_0_release_notes.html#active-model-deprecations","353":"5_0_release_notes.html#active-model-notable-changes","354":"5_0_release_notes.html#active-job-notable-changes","355":"5_0_release_notes.html#removals","356":"5_0_release_notes.html#deprecations","357":"5_0_release_notes.html#active-support-notable-changes","358":"active_model_basics.html","359":"active_model_basics.html#metodos-de-atributo","360":"active_model_basics.html#callbacks","361":"active_model_basics.html#conversao","362":"active_model_basics.html#sujeira","363":"active_model_basics.html#validacoes","364":"active_model_basics.html#nomeacao","365":"active_model_basics.html#model","366":"active_model_basics.html#serializacao","367":"active_model_basics.html#traducao","368":"active_model_basics.html#lint-tests","369":"active_model_basics.html#securepassword","370":"4_0_release_notes.html","371":"4_0_release_notes.html#vendoring-gems","372":"4_0_release_notes.html#living-on-the-edge","373":"4_0_release_notes.html#upgrade","374":"4_0_release_notes.html#actionpack","375":"4_0_release_notes.html#general","376":"4_0_release_notes.html#security","377":"4_0_release_notes.html#railties-notable-changes","378":"4_0_release_notes.html#railties-deprecations","379":"4_0_release_notes.html#action-mailer-notable-changes","380":"4_0_release_notes.html#action-mailer-deprecations","381":"4_0_release_notes.html#active-model-notable-changes","382":"4_0_release_notes.html#active-model-deprecations","383":"4_0_release_notes.html#active-support-notable-changes","384":"4_0_release_notes.html#active-support-deprecations","385":"4_0_release_notes.html#action-pack-notable-changes","386":"4_0_release_notes.html#action-pack-deprecations","387":"4_0_release_notes.html#active-record-notable-changes","388":"4_0_release_notes.html#active-record-deprecations","389":"working_with_javascript_in_rails.html","390":"working_with_javascript_in_rails.html#elementos-remotos","391":"working_with_javascript_in_rails.html#personalize-elementos-remotos","392":"working_with_javascript_in_rails.html#confirmations","393":"working_with_javascript_in_rails.html#desativando-automaticamente","394":"working_with_javascript_in_rails.html#manipuladores-de-eventos-rails-ujs","395":"working_with_javascript_in_rails.html#eventos-paraveis","396":"working_with_javascript_in_rails.html#um-exemplo-simples","397":"working_with_javascript_in_rails.html#como-o-turbolinks-funciona","398":"working_with_javascript_in_rails.html#eventos-de-mudanca-de-pagina","399":"5_2_release_notes.html","400":"5_2_release_notes.html#active-storage","401":"5_2_release_notes.html#redis-cache-store","402":"5_2_release_notes.html#http-2-early-hints","403":"5_2_release_notes.html#credentials","404":"5_2_release_notes.html#content-security-policy","405":"5_2_release_notes.html#railties-deprecations","406":"5_2_release_notes.html#railties-notable-changes","407":"5_2_release_notes.html#action-cable-removals","408":"5_2_release_notes.html#action-cable-notable-changes","409":"5_2_release_notes.html#action-pack-removals","410":"5_2_release_notes.html#action-pack-deprecations","411":"5_2_release_notes.html#action-pack-notable-changes","412":"5_2_release_notes.html#action-view-removals","413":"5_2_release_notes.html#action-view-deprecations","414":"5_2_release_notes.html#action-view-notable-changes","415":"5_2_release_notes.html#action-mailer-notable-changes","416":"5_2_release_notes.html#active-record-removals","417":"5_2_release_notes.html#active-record-deprecations","418":"5_2_release_notes.html#active-record-notable-changes","419":"5_2_release_notes.html#active-model-notable-changes","420":"5_2_release_notes.html#removals","421":"5_2_release_notes.html#deprecations","422":"5_2_release_notes.html#active-support-notable-changes","423":"5_2_release_notes.html#active-job-notable-changes","424":"5_2_release_notes.html#ruby-on-rails-guides-notable-changes","425":"action_controller_overview.html","426":"action_controller_overview.html#hash-e-parametros-de-array","427":"action_controller_overview.html#parametros-json","428":"action_controller_overview.html#parametros-de-rota","429":"action_controller_overview.html#default-url-options","430":"action_controller_overview.html#parametros-fortes","431":"action_controller_overview.html#acessando-a-sessao","432":"action_controller_overview.html#the-flash","433":"action_controller_overview.html#filtros-after-e-around","434":"action_controller_overview.html#outras-formas-de-usar","435":"action_controller_overview.html#o-objeto-request","436":"action_controller_overview.html#o-objeto-response","437":"action_controller_overview.html#autenticacao-http-basic","438":"action_controller_overview.html#autenticacao-http-digest","439":"action_controller_overview.html#enviando-arquivos","440":"action_controller_overview.html#restful-downloads","441":"action_controller_overview.html#transmissao-ao-vivo-de-dado-arbitrarios","442":"action_controller_overview.html#filtrando-parametros","443":"action_controller_overview.html#filtrando-redirecionamentos","444":"action_controller_overview.html#os-templates-404-e-500-padrao","445":"action_controller_overview.html#rescue-from","446":"action_mailbox_basics.html","447":"action_mailbox_basics.html#exim","448":"action_mailbox_basics.html#mailgun","449":"action_mailbox_basics.html#mandrill","450":"action_mailbox_basics.html#postfix","451":"action_mailbox_basics.html#postmark","452":"action_mailbox_basics.html#qmail","453":"action_mailbox_basics.html#sendgrid","454":"active_support_instrumentation.html","455":"active_support_instrumentation.html#write-fragment-action-controller","456":"active_support_instrumentation.html#read-fragment-action-controller","457":"active_support_instrumentation.html#expire-fragment-action-controller","458":"active_support_instrumentation.html#exist-fragment-questionmark-action-controller","459":"active_support_instrumentation.html#write-page-action-controller","460":"active_support_instrumentation.html#expire-page-action-controller","461":"active_support_instrumentation.html#start-processing-action-controller","462":"active_support_instrumentation.html#process-action-action-controller","463":"active_support_instrumentation.html#send-file-action-controller","464":"active_support_instrumentation.html#send-data-action-controller","465":"active_support_instrumentation.html#redirect-to-action-controller","466":"active_support_instrumentation.html#halted-callback-action-controller","467":"active_support_instrumentation.html#unpermitted-parameters-action-controller","468":"active_support_instrumentation.html#process-middleware-action-dispatch","469":"active_support_instrumentation.html#render-template-action-view","470":"active_support_instrumentation.html#render-partial-action-view","471":"active_support_instrumentation.html#render-collection-action-view","472":"active_support_instrumentation.html#sql-active-record","473":"active_support_instrumentation.html#instantiation-active-record","474":"active_support_instrumentation.html#deliver-action-mailer","475":"active_support_instrumentation.html#process-action-mailer","476":"active_support_instrumentation.html#cache-read-active-support","477":"active_support_instrumentation.html#cache-generate-active-support","478":"active_support_instrumentation.html#cache-fetch-hit-active-support","479":"active_support_instrumentation.html#cache-write-active-support","480":"active_support_instrumentation.html#cache-delete-active-support","481":"active_support_instrumentation.html#cache-exist-questionmark-active-support","482":"active_support_instrumentation.html#enqueue-at-active-job","483":"active_support_instrumentation.html#enqueue-active-job","484":"active_support_instrumentation.html#enqueue-retry-active-job","485":"active_support_instrumentation.html#perform-start-active-job","486":"active_support_instrumentation.html#perform-active-job","487":"active_support_instrumentation.html#retry-stopped-active-job","488":"active_support_instrumentation.html#discard-active-job","489":"active_support_instrumentation.html#perform-action-action-cable","490":"active_support_instrumentation.html#transmit-action-cable","491":"active_support_instrumentation.html#transmit-subscription-confirmation-action-cable","492":"active_support_instrumentation.html#transmit-subscription-rejection-action-cable","493":"active_support_instrumentation.html#broadcast-action-cable","494":"active_support_instrumentation.html#service-upload-active-storage","495":"active_support_instrumentation.html#service-streaming-download-active-storage","496":"active_support_instrumentation.html#service-download-chunk-active-storage","497":"active_support_instrumentation.html#service-download-active-storage","498":"active_support_instrumentation.html#service-delete-active-storage","499":"active_support_instrumentation.html#service-delete-prefixed-active-storage","500":"active_support_instrumentation.html#service-exist-active-storage","501":"active_support_instrumentation.html#service-url-active-storage","502":"active_support_instrumentation.html#service-update-metadata-active-storage","503":"active_support_instrumentation.html#preview-active-storage","504":"active_support_instrumentation.html#load-config-initializer-railties","505":"active_support_instrumentation.html#deprecation-rails","506":"3_2_release_notes.html","507":"3_2_release_notes.html#rails-3-2-requires-at-least-ruby-1-8-7","508":"3_2_release_notes.html#what-to-update-in-your-apps","509":"3_2_release_notes.html#what-to-update-in-your-engines","510":"3_2_release_notes.html#vendoring-gems","511":"3_2_release_notes.html#living-on-the-edge","512":"3_2_release_notes.html#faster-development-mode-routing","513":"3_2_release_notes.html#automatic-query-explains","514":"3_2_release_notes.html#tagged-logging","515":"3_2_release_notes.html#action-controller","516":"3_2_release_notes.html#action-dispatch","517":"3_2_release_notes.html#action-view","518":"3_2_release_notes.html#sprockets","519":"3_2_release_notes.html#active-record-deprecations","520":"3_2_release_notes.html#active-model-deprecations","521":"3_2_release_notes.html#deprecations","522":"active_record_callbacks.html","523":"active_record_callbacks.html#registro-de-callback","524":"active_record_callbacks.html#criando-um-objeto","525":"active_record_callbacks.html#atualizando-um-objeto","526":"active_record_callbacks.html#destruindo-um-objeto","527":"active_record_callbacks.html#after-initialize-e-after-find","528":"active_record_callbacks.html#after-touch","529":"active_record_callbacks.html#using-if-and-unless-with-a-symbol","530":"active_record_callbacks.html#using-if-and-unless-with-a-proc","531":"active_record_callbacks.html#multiple-conditions-for-callbacks","532":"active_record_callbacks.html#combining-callback-conditions","533":"active_job_basics.html","534":"active_job_basics.html#crie-o-job","535":"active_job_basics.html#enfileirar-o-job","536":"active_job_basics.html#backends","537":"active_job_basics.html#configurando-o-backend","538":"active_job_basics.html#iniciando-o-backend","539":"active_job_basics.html#callbacks-disponiveis","540":"active_job_basics.html#globalid","541":"active_job_basics.html#serializers","542":"active_job_basics.html#reexecucao-ou-descarte-de-jobs-falhos","543":"active_job_basics.html#desserializacao","544":"development_dependencies_install.html","545":"development_dependencies_install.html#install-git","546":"development_dependencies_install.html#clone-the-ruby-on-rails-repository","547":"development_dependencies_install.html#install-additional-tools-and-services","548":"development_dependencies_install.html#database-configuration","549":"development_dependencies_install.html#install-javascript-dependencies","550":"development_dependencies_install.html#install-bundler-gem","551":"development_dependencies_install.html#contribute-to-rails","552":"command_line.html","553":"command_line.html#rails-new","554":"command_line.html#rails-server","555":"command_line.html#rails-generate","556":"command_line.html#rails-console","557":"command_line.html#rails-dbconsole","558":"command_line.html#rails-runner","559":"command_line.html#rails-destroy","560":"command_line.html#rails-about","561":"command_line.html#rails-assets","562":"command_line.html#rails-db","563":"command_line.html#rails-notes","564":"command_line.html#rails-routes","565":"command_line.html#rails-test","566":"command_line.html#rails-tmp","567":"command_line.html#miscellaneous","568":"command_line.html#custom-rake-tasks","569":"command_line.html#rails-with-databases-and-scm","570":"autoloading_and_reloading_constants_classic_mode.html","571":"autoloading_and_reloading_constants_classic_mode.html#nesting","572":"autoloading_and_reloading_constants_classic_mode.html#class-and-module-definitions-are-constant-assignments","573":"autoloading_and_reloading_constants_classic_mode.html#constants-are-stored-in-modules","574":"autoloading_and_reloading_constants_classic_mode.html#resolution-algorithms","575":"autoloading_and_reloading_constants_classic_mode.html#parent-namespaces","576":"autoloading_and_reloading_constants_classic_mode.html#loading-mechanism","577":"autoloading_and_reloading_constants_classic_mode.html#autoloading-algorithms-relative-references","578":"autoloading_and_reloading_constants_classic_mode.html#autoloading-algorithms-qualified-references","579":"autoloading_and_reloading_constants_classic_mode.html#automatic-modules","580":"autoloading_and_reloading_constants_classic_mode.html#generic-procedure","581":"autoloading_and_reloading_constants_classic_mode.html#nesting-and-qualified-constants","582":"autoloading_and_reloading_constants_classic_mode.html#defining-vs-reopening-namespaces","583":"autoloading_and_reloading_constants_classic_mode.html#autoloading-and-sti","584":"autoloading_and_reloading_constants_classic_mode.html#autoloading-and-require","585":"autoloading_and_reloading_constants_classic_mode.html#autoloading-and-initializers","586":"autoloading_and_reloading_constants_classic_mode.html#require-dependency-and-initializers","587":"autoloading_and_reloading_constants_classic_mode.html#when-constants-aren-t-missed","588":"autoloading_and_reloading_constants_classic_mode.html#autoloading-within-singleton-classes","589":"autoloading_and_reloading_constants_classic_mode.html#autoloading-in-basicobject","590":"autoloading_and_reloading_constants_classic_mode.html#autoloading-in-the-test-environment","591":"autoloading_and_reloading_constants_classic_mode.html#tracing-autoloads","592":"autoloading_and_reloading_constants_classic_mode.html#where-is-a-given-autoload-triggered-questionmark","593":"autoloading_and_reloading_constants_classic_mode.html#which-constants-have-been-autoloaded-questionmark","594":"3_0_release_notes.html","595":"3_0_release_notes.html#rails-3-requires-at-least-ruby-1-8-7","596":"3_0_release_notes.html#rails-application-object","597":"3_0_release_notes.html#script-replaced-by-script-rails","598":"3_0_release_notes.html#dependencies-and-config-gem","599":"3_0_release_notes.html#upgrade-process","600":"3_0_release_notes.html#vendoring-gems","601":"3_0_release_notes.html#living-on-the-edge","602":"3_0_release_notes.html#railties-restrung","603":"3_0_release_notes.html#all-rails-core-components-are-decoupled","604":"3_0_release_notes.html#active-model-abstraction","605":"3_0_release_notes.html#controller-abstraction","606":"3_0_release_notes.html#arel-integration","607":"3_0_release_notes.html#mail-extraction","608":"3_0_release_notes.html#abstract-controller","609":"3_0_release_notes.html#action-controller","610":"3_0_release_notes.html#action-dispatch","611":"3_0_release_notes.html#action-view","612":"3_0_release_notes.html#orm-abstraction-and-action-pack-interface","613":"3_0_release_notes.html#validations","614":"3_0_release_notes.html#query-interface","615":"3_0_release_notes.html#enhancements","616":"3_0_release_notes.html#patches-and-deprecations","617":"debugging_rails_applications.html","618":"debugging_rails_applications.html#debug","619":"debugging_rails_applications.html#to-yaml","620":"debugging_rails_applications.html#inspect","621":"debugging_rails_applications.html#o-que-e-o-logger-questionmark","622":"debugging_rails_applications.html#niveis-de-log","623":"debugging_rails_applications.html#enviando-mensagens","624":"debugging_rails_applications.html#verbose-query-logs","625":"debugging_rails_applications.html#tagged-logging","626":"debugging_rails_applications.html#impact-of-logs-on-performance","627":"debugging_rails_applications.html#instalacao","628":"debugging_rails_applications.html#o-shell","629":"debugging_rails_applications.html#o-contexto","630":"debugging_rails_applications.html#threads","631":"debugging_rails_applications.html#inspecionando-variaveis","632":"debugging_rails_applications.html#passo-a-passo","633":"debugging_rails_applications.html#breakpoints","634":"debugging_rails_applications.html#captura-de-excecoes","635":"debugging_rails_applications.html#continuando-a-execucao","636":"debugging_rails_applications.html#edicao","637":"debugging_rails_applications.html#sair","638":"debugging_rails_applications.html#configuracoes","639":"debugging_rails_applications.html#console","640":"debugging_rails_applications.html#inspecting-variables","641":"debugging_rails_applications.html#settings","642":"debugging_rails_applications.html#valgrind","643":"active_record_multiple_databases.html","644":"active_record_multiple_databases.html#sharding","645":"active_record_multiple_databases.html#load-balancing-replicas","646":"active_record_multiple_databases.html#joining-across-databases","647":"active_record_multiple_databases.html#schema-cache","648":"action_text_overview.html","649":"threading_and_code_execution.html","650":"threading_and_code_execution.html#default-callbacks","651":"threading_and_code_execution.html#wrapping-application-code","652":"threading_and_code_execution.html#executor-concurrency","653":"threading_and_code_execution.html#callbacks","654":"threading_and_code_execution.html#class-unload","655":"threading_and_code_execution.html#reloader-concurrency","656":"threading_and_code_execution.html#configuration","657":"threading_and_code_execution.html#permit-concurrent-loads","658":"threading_and_code_execution.html#actiondispatch-debuglocks","659":"active_record_migrations.html","660":"active_record_migrations.html#criando-uma-migration-independente","661":"active_record_migrations.html#model-generators","662":"active_record_migrations.html#usando-modificadores","663":"active_record_migrations.html#criando-uma-tabela","664":"active_record_migrations.html#criando-uma-tabela-de-juncao-join-table","665":"active_record_migrations.html#mudando-tabelas","666":"active_record_migrations.html#mudando-colunas","667":"active_record_migrations.html#modificadores-de-coluna","668":"active_record_migrations.html#foreign-keys-chaves-estrangeiras","669":"active_record_migrations.html#quando-os-helpers-nao-sao-suficientes","670":"active_record_migrations.html#usando-o-metodo-change","671":"active_record_migrations.html#usando-reversible","672":"active_record_migrations.html#usando-os-metodos-up-down","673":"active_record_migrations.html#revertendo-migrations-anteriores","674":"active_record_migrations.html#revertendo-a-migration","675":"active_record_migrations.html#setup-do-banco-de-dados","676":"active_record_migrations.html#reinicializando-o-banco-de-dados","677":"active_record_migrations.html#executando-migrations-especificas","678":"active_record_migrations.html#executando-migrations-em-ambientes-diferentes","679":"active_record_migrations.html#alterando-o-output-saida-de-migrations-em-execucao","680":"active_record_migrations.html#para-que-servem-arquivos-de-schema-questionmark","681":"active_record_migrations.html#tipos-de-schema-dumps","682":"active_record_migrations.html#schema-dumps-e-o-controle-de-versao","683":"active_record_basics.html","684":"active_record_basics.html#o-padrao-active-record","685":"active_record_basics.html#mapeamento-objeto-relacional-object-relational-mapping","686":"active_record_basics.html#active-record-como-um-framework-orm","687":"active_record_basics.html#convencoes-para-nomeacao","688":"active_record_basics.html#convencoes-de-schema-esquema","689":"active_record_basics.html#create","690":"active_record_basics.html#read","691":"active_record_basics.html#update","692":"active_record_basics.html#delete","693":"rails_application_templates.html","694":"rails_application_templates.html#gem-args","695":"rails_application_templates.html#gem-group-names-block","696":"rails_application_templates.html#add-source-source-options-block","697":"rails_application_templates.html#environment-application-data-nil-options-block","698":"rails_application_templates.html#vendor-lib-file-initializer-filename-data-nil-block","699":"rails_application_templates.html#rakefile-filename-data-nil-block","700":"rails_application_templates.html#generate-what-args","701":"rails_application_templates.html#run-command","702":"rails_application_templates.html#rails-command-command-options","703":"rails_application_templates.html#route-routing-code","704":"rails_application_templates.html#inside-dir","705":"rails_application_templates.html#ask-question","706":"rails_application_templates.html#yes-questionmark-question-or-no-questionmark-question","707":"rails_application_templates.html#git-command","708":"rails_application_templates.html#after-bundle-block","709":"routing.html","710":"routing.html#conectando-urls-ao-codigo","711":"routing.html#gerando-caminhos-e-urls-a-partir-do-codigo","712":"routing.html#configurando-o-roteador-do-rails","713":"routing.html#resources-na-web","714":"routing.html#crud-verbos-e-actions","715":"routing.html#helpers-path-e-url","716":"routing.html#definindo-multiplos-resources-ao-mesmo-tempo","717":"routing.html#resources-no-singular","718":"routing.html#controller-namespaces-e-routing","719":"routing.html#nested-resources-recursos-aninhados","720":"routing.html#roteamento-com-metodo-concerns","721":"routing.html#criando-paths-e-urls-de-objetos","722":"routing.html#adicionando-mais-restful-actions","723":"routing.html#parametros-vinculados","724":"routing.html#segmentos-dinamicos","725":"routing.html#segmentos-estaticos","726":"routing.html#usando-query-string","727":"routing.html#definindo-padroes","728":"routing.html#nomeando-rotas","729":"routing.html#restringindo-verbos-http","730":"routing.html#restricoes-de-segmento","731":"routing.html#restricoes-baseadas-em-requisicoes","732":"routing.html#restricoes-avancadas","733":"routing.html#rotas-englobadas-glob-e-segmentos-curinga","734":"routing.html#redirecionamento","735":"routing.html#roteamento-para-aplicacoes-rack","736":"routing.html#usando-root","737":"routing.html#rotas-com-caracteres-unicode","738":"routing.html#rotas-diretas","739":"routing.html#usando-resolve","740":"routing.html#especificando-um-controller-para-usar","741":"routing.html#especificando-restricoes","742":"routing.html#sobrescrevendo-helpers-de-nome-de-rota","743":"routing.html#sobrescrevendo-os-segmentos-new-e-edit","744":"routing.html#prefixando-os-helpers-de-nome-de-rota","745":"routing.html#restringindo-as-rotas-criadas","746":"routing.html#traduzindo-caminhos","747":"routing.html#sobrescrevendo-a-forma-singular","748":"routing.html#usando-as-em-recursos-aninhados","749":"routing.html#sobrescrevendo-parametros-de-nome-de-rota","750":"routing.html#listando-rotas-existentes","751":"routing.html#testando-rotas","752":"action_view_overview.html","753":"action_view_overview.html#templates","754":"action_view_overview.html#partials","755":"action_view_overview.html#layouts","756":"action_view_overview.html#prepend-view-path","757":"action_view_overview.html#append-view-path","758":"action_view_overview.html#assettaghelper","759":"action_view_overview.html#atomfeedhelper","760":"action_view_overview.html#benchmarkhelper","761":"action_view_overview.html#cachehelper","762":"action_view_overview.html#capturehelper","763":"action_view_overview.html#datehelper","764":"action_view_overview.html#debughelper","765":"action_view_overview.html#formhelper","766":"action_view_overview.html#formoptionshelper","767":"action_view_overview.html#formtaghelper","768":"action_view_overview.html#javascripthelper","769":"action_view_overview.html#numberhelper","770":"action_view_overview.html#sanitizehelper","771":"action_view_overview.html#csrfhelper","772":"active_storage_overview.html","773":"active_storage_overview.html#servico-disk","774":"active_storage_overview.html#servico-amazon-s3","775":"active_storage_overview.html#servico-armazenamento-da-microsoft-azure","776":"active_storage_overview.html#servico-google-cloud-storage","777":"active_storage_overview.html#servico-espelho","778":"active_storage_overview.html#has-one-attached","779":"active_storage_overview.html#has-many-attached","780":"active_storage_overview.html#anexando-objetos-file-io","781":"active_storage_overview.html#usage","782":"active_storage_overview.html#cross-origin-resource-sharing-cors-configuration","783":"active_storage_overview.html#direct-upload-javascript-events","784":"active_storage_overview.html#example","785":"active_storage_overview.html#integrating-with-libraries-or-frameworks","786":"upgrading_ruby_on_rails.html","787":"upgrading_ruby_on_rails.html#cobertura-de-testes","788":"upgrading_ruby_on_rails.html#o-processo-de-atualizacao","789":"upgrading_ruby_on_rails.html#versoes-do-ruby","790":"upgrading_ruby_on_rails.html#a-tarefa-de-atualizacao","791":"upgrading_ruby_on_rails.html#configurar-padroes-de-framework","792":"upgrading_ruby_on_rails.html#using-webpacker","793":"upgrading_ruby_on_rails.html#force-ssl","794":"upgrading_ruby_on_rails.html#purpose-in-signed-or-encrypted-cookie-is-now-embedded-within-cookies","795":"upgrading_ruby_on_rails.html#all-npm-packages-have-been-moved-to-the-rails-scope","796":"upgrading_ruby_on_rails.html#action-cable-javascript-api-changes","797":"upgrading_ruby_on_rails.html#actiondispatch-response-content-type-now-returned-content-type-header-as-it-is","798":"upgrading_ruby_on_rails.html#autoloading","799":"upgrading_ruby_on_rails.html#active-storage-assignment-behavior-change","800":"upgrading_ruby_on_rails.html#upgrading-from-rails-5-1-to-rails-5-2-bootsnap","801":"upgrading_ruby_on_rails.html#expiry-in-signed-or-encrypted-cookie-is-now-embedded-in-the-cookies-values","802":"upgrading_ruby_on_rails.html#top-level-hashwithindifferentaccess-is-soft-deprecated","803":"upgrading_ruby_on_rails.html#application-secrets-now-loaded-with-all-keys-as-symbols","804":"upgrading_ruby_on_rails.html#removed-deprecated-support-to-text-and-nothing-in-render","805":"upgrading_ruby_on_rails.html#ruby-2-2-2-required","806":"upgrading_ruby_on_rails.html#active-record-models-now-inherit-from-applicationrecord-by-default","807":"upgrading_ruby_on_rails.html#halting-callback-chains-via-throw-abort","808":"upgrading_ruby_on_rails.html#activejob-now-inherits-from-applicationjob-by-default","809":"upgrading_ruby_on_rails.html#rails-controller-testing","810":"upgrading_ruby_on_rails.html#autoloading-is-disabled-after-booting-in-the-production-environment","811":"upgrading_ruby_on_rails.html#xml-serialization","812":"upgrading_ruby_on_rails.html#removed-support-for-legacy-mysql-database-adapter","813":"upgrading_ruby_on_rails.html#removed-support-for-debugger","814":"upgrading_ruby_on_rails.html#use-rails-for-running-tasks-and-tests","815":"upgrading_ruby_on_rails.html#actioncontroller-parameters-no-longer-inherits-from-hashwithindifferentaccess","816":"upgrading_ruby_on_rails.html#protect-from-forgery-now-defaults-to-prepend-false","817":"upgrading_ruby_on_rails.html#default-template-handler-is-now-raw","818":"upgrading_ruby_on_rails.html#added-wildcard-matching-for-template-dependencies","819":"upgrading_ruby_on_rails.html#actionview-helpers-recordtaghelper-moved-to-external-gem-record-tag-helper","820":"upgrading_ruby_on_rails.html#removed-support-for-protected-attributes-gem","821":"upgrading_ruby_on_rails.html#removed-support-for-activerecord-deprecated-finders-gem","822":"upgrading_ruby_on_rails.html#activesupport-testcase-default-test-order-is-now-random","823":"upgrading_ruby_on_rails.html#actioncontroller-live-became-a-concern","824":"upgrading_ruby_on_rails.html#new-framework-defaults","825":"upgrading_ruby_on_rails.html#changes-with-json-jsonb-serialization","826":"upgrading_ruby_on_rails.html#web-console","827":"upgrading_ruby_on_rails.html#responders","828":"upgrading_ruby_on_rails.html#error-handling-in-transaction-callbacks","829":"upgrading_ruby_on_rails.html#ordering-of-test-cases","830":"upgrading_ruby_on_rails.html#serialized-attributes","831":"upgrading_ruby_on_rails.html#production-log-level","832":"upgrading_ruby_on_rails.html#after-bundle-in-rails-templates","833":"upgrading_ruby_on_rails.html#rails-html-sanitizer","834":"upgrading_ruby_on_rails.html#rails-dom-testing","835":"upgrading_ruby_on_rails.html#masked-authenticity-tokens","836":"upgrading_ruby_on_rails.html#action-mailer","837":"upgrading_ruby_on_rails.html#foreign-key-support","838":"upgrading_ruby_on_rails.html#csrf-protection-from-remote-script-tags","839":"upgrading_ruby_on_rails.html#spring","840":"upgrading_ruby_on_rails.html#config-secrets-yml","841":"upgrading_ruby_on_rails.html#changes-to-test-helper","842":"upgrading_ruby_on_rails.html#cookies-serializer","843":"upgrading_ruby_on_rails.html#flash-structure-changes","844":"upgrading_ruby_on_rails.html#changes-in-json-handling","845":"upgrading_ruby_on_rails.html#usage-of-return-within-inline-callback-blocks","846":"upgrading_ruby_on_rails.html#methods-defined-in-active-record-fixtures","847":"upgrading_ruby_on_rails.html#i18n-enforcing-available-locales","848":"upgrading_ruby_on_rails.html#mutator-methods-called-on-relation","849":"upgrading_ruby_on_rails.html#changes-on-default-scopes","850":"upgrading_ruby_on_rails.html#rendering-content-from-string","851":"upgrading_ruby_on_rails.html#postgresql-json-and-hstore-datatypes","852":"upgrading_ruby_on_rails.html#explicit-block-use-for-activesupport-callbacks","853":"upgrading_ruby_on_rails.html#http-patch","854":"upgrading_ruby_on_rails.html#upgrading-from-rails-3-2-to-rails-4-0-gemfile","855":"upgrading_ruby_on_rails.html#upgrading-from-rails-3-2-to-rails-4-0-vendor-plugins","856":"upgrading_ruby_on_rails.html#upgrading-from-rails-3-2-to-rails-4-0-active-record","857":"upgrading_ruby_on_rails.html#active-resource","858":"upgrading_ruby_on_rails.html#active-model","859":"upgrading_ruby_on_rails.html#action-pack","860":"upgrading_ruby_on_rails.html#active-support","861":"upgrading_ruby_on_rails.html#helpers-loading-order","862":"upgrading_ruby_on_rails.html#active-record-observer-and-action-controller-sweeper","863":"upgrading_ruby_on_rails.html#sprockets-rails","864":"upgrading_ruby_on_rails.html#sass-rails","865":"upgrading_ruby_on_rails.html#upgrading-from-rails-3-1-to-rails-3-2-gemfile","866":"upgrading_ruby_on_rails.html#upgrading-from-rails-3-1-to-rails-3-2-config-environments-development-rb","867":"upgrading_ruby_on_rails.html#upgrading-from-rails-3-1-to-rails-3-2-config-environments-test-rb","868":"upgrading_ruby_on_rails.html#upgrading-from-rails-3-1-to-rails-3-2-vendor-plugins","869":"upgrading_ruby_on_rails.html#upgrading-from-rails-3-1-to-rails-3-2-active-record","870":"upgrading_ruby_on_rails.html#gemfile","871":"upgrading_ruby_on_rails.html#config-application-rb","872":"upgrading_ruby_on_rails.html#upgrading-from-rails-3-0-to-rails-3-1-config-environments-development-rb","873":"upgrading_ruby_on_rails.html#config-environments-production-rb","874":"upgrading_ruby_on_rails.html#upgrading-from-rails-3-0-to-rails-3-1-config-environments-test-rb","875":"upgrading_ruby_on_rails.html#config-initializers-wrap-parameters-rb","876":"upgrading_ruby_on_rails.html#config-initializers-session-store-rb","877":"upgrading_ruby_on_rails.html#remove-cache-and-concat-options-in-asset-helpers-references-in-views","878":"api_app.html","879":"api_app.html#criando-uma-nova-aplicacao","880":"api_app.html#alterando-uma-aplicacao-existente","881":"api_app.html#usando-o-middleware-de-cache","882":"api_app.html#usando-rack-sendfile","883":"api_app.html#usando-actiondispatch-request","884":"api_app.html#outros-middleware","885":"api_app.html#removendo-middleware","886":"api_app.html#adicionando-outros-modulos","887":"engines.html","888":"engines.html#inside-an-engine","889":"engines.html#generating-an-article-resource","890":"engines.html#generating-a-comments-resource","891":"engines.html#mounting-the-engine","892":"engines.html#engine-setup","893":"engines.html#using-a-class-provided-by-the-application","894":"engines.html#configuring-an-engine","895":"engines.html#functional-tests","896":"engines.html#overriding-models-and-controllers","897":"engines.html#overriding-views","898":"engines.html#routes","899":"engines.html#assets","900":"engines.html#separate-assets-precompiling","901":"engines.html#other-gem-dependencies","902":"engines.html#example-1","903":"engines.html#example-2","904":"engines.html#example-3","905":"engines.html#example","906":"generators.html","907":"generators.html#gem","908":"generators.html#gem-group","909":"generators.html#add-source","910":"generators.html#inject-into-file","911":"generators.html#gsub-file","912":"generators.html#application","913":"generators.html#git","914":"generators.html#vendor","915":"generators.html#lib","916":"generators.html#rakefile","917":"generators.html#initializer","918":"generators.html#generate","919":"generators.html#rake","920":"generators.html#route","921":"generators.html#readme","922":"initialization.html","923":"initialization.html#railties-exe-rails","924":"initialization.html#railties-lib-rails-app-loader-rb","925":"initialization.html#bin-rails","926":"initialization.html#config-boot-rb","927":"initialization.html#rails-commands-rb","928":"initialization.html#rails-command-rb","929":"initialization.html#actionpack-lib-action-dispatch-rb","930":"initialization.html#rails-commands-server-server-command-rb","931":"initialization.html#launch-bang-rack-lib-rack-server-rb","932":"initialization.html#config-application","933":"initialization.html#rails-server-start","934":"initialization.html#config-environment-rb","935":"initialization.html#config-application-rb","936":"initialization.html#railties-lib-rails-all-rb","937":"initialization.html#back-to-config-environment-rb","938":"initialization.html#railties-lib-rails-application-rb","939":"initialization.html#loading-rails-rack-lib-rack-server-rb","940":"api_documentation_guidelines.html","941":"api_documentation_guidelines.html#fixed-width-font","942":"api_documentation_guidelines.html#regular-font","943":"5_1_release_notes.html","944":"5_1_release_notes.html#yarn-support","945":"5_1_release_notes.html#optional-webpack-support","946":"5_1_release_notes.html#jquery-no-longer-a-default-dependency","947":"5_1_release_notes.html#system-tests","948":"5_1_release_notes.html#encrypted-secrets","949":"5_1_release_notes.html#parameterized-mailers","950":"5_1_release_notes.html#direct-resolved-routes","951":"5_1_release_notes.html#unification-of-form-for-and-form-tag-into-form-with","952":"5_1_release_notes.html#transactional-tests-with-multiple-connections","953":"5_1_release_notes.html#railties-removals","954":"5_1_release_notes.html#railties-notable-changes","955":"5_1_release_notes.html#action-cable-notable-changes","956":"5_1_release_notes.html#action-pack-removals","957":"5_1_release_notes.html#action-pack-deprecations","958":"5_1_release_notes.html#action-pack-notable-changes","959":"5_1_release_notes.html#action-view-removals","960":"5_1_release_notes.html#action-view-deprecations","961":"5_1_release_notes.html#action-view-notable-changes","962":"5_1_release_notes.html#action-mailer-notable-changes","963":"5_1_release_notes.html#active-record-removals","964":"5_1_release_notes.html#active-record-deprecations","965":"5_1_release_notes.html#active-record-notable-changes","966":"5_1_release_notes.html#active-model-removals","967":"5_1_release_notes.html#active-model-notable-changes","968":"5_1_release_notes.html#active-job-removals","969":"5_1_release_notes.html#active-job-notable-changes","970":"5_1_release_notes.html#removals","971":"5_1_release_notes.html#active-support-deprecations","972":"5_1_release_notes.html#notable-changes","973":"getting_started.html","974":"getting_started.html#criando-um-novo-projeto-em-rails-instalando-o-rails","975":"getting_started.html#criando-a-aplicacao-blog","976":"getting_started.html#inicializando-o-servidor-web","977":"getting_started.html#diga-ola-rails","978":"getting_started.html#configuracao-da-pagina-inicial-da-aplicacao","979":"getting_started.html#preparando-a-base","980":"getting_started.html#o-primeiro-formulario","981":"getting_started.html#criando-artigos","982":"getting_started.html#criando-um-model-para-o-article-artigo-ingles","983":"getting_started.html#executando-uma-migration","984":"getting_started.html#salvando-dados-no-controller","985":"getting_started.html#mostrando-artigos","986":"getting_started.html#listando-todos-os-artigos","987":"getting_started.html#adicionando-links","988":"getting_started.html#adicionando-algumas-validacoes","989":"getting_started.html#atualizando-artigos","990":"getting_started.html#usando-partials-para-limpar-duplicacoes-em-views","991":"getting_started.html#deletando-artigos","992":"getting_started.html#gerando-um-model","993":"getting_started.html#associando-models","994":"getting_started.html#adicionando-a-rota-para-comentarios","995":"getting_started.html#gerando-um-controller","996":"getting_started.html#renderizando-colecoes-de-partials","997":"getting_started.html#renderizando-um-formulario-com-partial","998":"getting_started.html#excluindo-objetos-associados","999":"getting_started.html#autenticacao-basica","1000":"getting_started.html#outras-consideracoes-de-seguranca","1001":"2_2_release_notes.html","1002":"2_2_release_notes.html#internationalization","1003":"2_2_release_notes.html#compatibility-with-ruby-1-9-and-jruby","1004":"2_2_release_notes.html#transactional-migrations","1005":"2_2_release_notes.html#connection-pooling","1006":"2_2_release_notes.html#hashes-for-join-table-conditions","1007":"2_2_release_notes.html#new-dynamic-finders","1008":"2_2_release_notes.html#associations-respect-private-protected-scope","1009":"2_2_release_notes.html#other-active-record-changes","1010":"2_2_release_notes.html#shallow-route-nesting","1011":"2_2_release_notes.html#method-arrays-for-member-or-collection-routes","1012":"2_2_release_notes.html#resources-with-specific-actions","1013":"2_2_release_notes.html#other-action-controller-changes","1014":"2_2_release_notes.html#memoization","1015":"2_2_release_notes.html#each-with-object","1016":"2_2_release_notes.html#delegates-with-prefixes","1017":"2_2_release_notes.html#other-active-support-changes","1018":"2_2_release_notes.html#config-gems","1019":"2_2_release_notes.html#other-railties-changes","1020":"caching_with_rails.html","1021":"caching_with_rails.html#page-caching","1022":"caching_with_rails.html#action-caching","1023":"caching_with_rails.html#fragment-caching","1024":"caching_with_rails.html#russian-doll-caching","1025":"caching_with_rails.html#shared-partial-caching","1026":"caching_with_rails.html#managing-dependencies","1027":"caching_with_rails.html#low-level-caching","1028":"caching_with_rails.html#sql-caching","1029":"caching_with_rails.html#configuration","1030":"caching_with_rails.html#activesupport-cache-store","1031":"caching_with_rails.html#activesupport-cache-memorystore","1032":"caching_with_rails.html#activesupport-cache-filestore","1033":"caching_with_rails.html#activesupport-cache-memcachestore","1034":"caching_with_rails.html#activesupport-cache-rediscachestore","1035":"caching_with_rails.html#activesupport-cache-nullstore","1036":"caching_with_rails.html#strong-v-s-weak-etags","1037":"active_record_postgresql.html","1038":"active_record_postgresql.html#bytea","1039":"active_record_postgresql.html#array","1040":"active_record_postgresql.html#hstore","1041":"active_record_postgresql.html#json-and-jsonb","1042":"active_record_postgresql.html#range-types","1043":"active_record_postgresql.html#composite-types","1044":"active_record_postgresql.html#enumerated-types","1045":"active_record_postgresql.html#uuid","1046":"active_record_postgresql.html#bit-string-types","1047":"active_record_postgresql.html#network-address-types","1048":"active_record_postgresql.html#geometric-types","1049":"asset_pipeline.html","1050":"asset_pipeline.html#principais-caracteristicas","1051":"asset_pipeline.html#o-que-e-impressao-digital-e-por-que-eu-deveria-me-importar-questionmark","1052":"asset_pipeline.html#assets-especificos-de-controllers","1053":"asset_pipeline.html#organizacao-dos-assets","1054":"asset_pipeline.html#codificando-links-para-assets","1055":"asset_pipeline.html#arquivos-de-manifesto-e-diretivas","1056":"asset_pipeline.html#pre-processamento","1057":"asset_pipeline.html#raise-an-error-when-an-asset-is-not-found","1058":"asset_pipeline.html#turning-digests-off","1059":"asset_pipeline.html#turning-debugging-off","1060":"asset_pipeline.html#precompiling-assets","1061":"asset_pipeline.html#local-precompilation","1062":"asset_pipeline.html#live-compilation","1063":"asset_pipeline.html#cdns","1064":"asset_pipeline.html#css-compression","1065":"asset_pipeline.html#javascript-compression","1066":"asset_pipeline.html#gzipping-your-assets","1067":"asset_pipeline.html#using-your-own-compressor","1068":"asset_pipeline.html#changing-the-assets-path","1069":"asset_pipeline.html#x-sendfile-headers","1070":"6_0_release_notes.html","1071":"6_0_release_notes.html#action-mailbox","1072":"6_0_release_notes.html#action-text","1073":"6_0_release_notes.html#parallel-testing","1074":"6_0_release_notes.html#action-cable-testing","1075":"6_0_release_notes.html#railties-removals","1076":"6_0_release_notes.html#railties-deprecations","1077":"6_0_release_notes.html#railties-notable-changes","1078":"6_0_release_notes.html#action-cable-removals","1079":"6_0_release_notes.html#action-cable-deprecations","1080":"6_0_release_notes.html#action-cable-notable-changes","1081":"6_0_release_notes.html#action-pack-removals","1082":"6_0_release_notes.html#action-pack-deprecations","1083":"6_0_release_notes.html#action-pack-notable-changes","1084":"6_0_release_notes.html#action-view-removals","1085":"6_0_release_notes.html#action-view-deprecations","1086":"6_0_release_notes.html#action-view-notable-changes","1087":"6_0_release_notes.html#action-mailer-removals","1088":"6_0_release_notes.html#action-mailer-deprecations","1089":"6_0_release_notes.html#action-mailer-notable-changes","1090":"6_0_release_notes.html#active-record-removals","1091":"6_0_release_notes.html#active-record-deprecations","1092":"6_0_release_notes.html#active-record-notable-changes","1093":"6_0_release_notes.html#active-storage-removals","1094":"6_0_release_notes.html#active-storage-deprecations","1095":"6_0_release_notes.html#active-storage-notable-changes","1096":"6_0_release_notes.html#active-model-removals","1097":"6_0_release_notes.html#active-model-deprecations","1098":"6_0_release_notes.html#active-model-notable-changes","1099":"6_0_release_notes.html#active-support-removals","1100":"6_0_release_notes.html#active-support-deprecations","1101":"6_0_release_notes.html#active-support-notable-changes","1102":"6_0_release_notes.html#active-job-removals","1103":"6_0_release_notes.html#active-job-deprecations","1104":"6_0_release_notes.html#active-job-notable-changes","1105":"6_0_release_notes.html#notable-changes","1106":"ruby_on_rails_guides_guidelines.html","1107":"ruby_on_rails_guides_guidelines.html#html-guides-generation","1108":"ruby_on_rails_guides_guidelines.html#validation","1109":"ruby_on_rails_guides_guidelines.html#kindle-guides-generation","1110":"4_1_release_notes.html","1111":"4_1_release_notes.html#spring-application-preloader","1112":"4_1_release_notes.html#config-secrets-yml","1113":"4_1_release_notes.html#action-pack-variants","1114":"4_1_release_notes.html#action-mailer-previews","1115":"4_1_release_notes.html#active-record-enums","1116":"4_1_release_notes.html#message-verifiers","1117":"4_1_release_notes.html#module-concerning","1118":"4_1_release_notes.html#csrf-protection-from-remote-script-tags","1119":"4_1_release_notes.html#railties-removals","1120":"4_1_release_notes.html#railties-notable-changes","1121":"4_1_release_notes.html#action-pack-removals","1122":"4_1_release_notes.html#action-pack-notable-changes","1123":"4_1_release_notes.html#action-mailer-notable-changes","1124":"4_1_release_notes.html#active-record-removals","1125":"4_1_release_notes.html#active-record-deprecations","1126":"4_1_release_notes.html#active-record-notable-changes","1127":"4_1_release_notes.html#active-model-deprecations","1128":"4_1_release_notes.html#active-model-notable-changes","1129":"4_1_release_notes.html#active-support-removals","1130":"4_1_release_notes.html#deprecations","1131":"4_1_release_notes.html#active-support-notable-changes","1132":"action_mailer_basics.html","1133":"action_mailer_basics.html#passo-a-passo-para-gerar-um-mailer","1134":"action_mailer_basics.html#codificacao-automatica","1135":"action_mailer_basics.html#lista-completa-de-metodos-do-action-mailer","1136":"action_mailer_basics.html#mailer-views","1137":"action_mailer_basics.html#action-mailer-layouts","1138":"action_mailer_basics.html#previewing-emails","1139":"action_mailer_basics.html#generating-urls-in-action-mailer-views","1140":"action_mailer_basics.html#adding-images-in-action-mailer-views","1141":"action_mailer_basics.html#sending-multipart-emails","1142":"action_mailer_basics.html#sending-emails-with-dynamic-delivery-options","1143":"action_mailer_basics.html#sending-emails-without-template-rendering","1144":"action_mailer_basics.html#exemplo-de-configuracao-do-action-mailer","1145":"action_mailer_basics.html#configuracao-do-action-mailer-para-gmail","1146":"action_mailer_basics.html#interceptando-emails","1147":"action_mailer_basics.html#observando-emails","1148":"maintenance_policy.html","1149":"autoloading_and_reloading_constants.html","1150":"autoloading_and_reloading_constants.html#reloading-and-stale-objects","1151":"3_1_release_notes.html","1152":"3_1_release_notes.html#rails-3-1-requires-at-least-ruby-1-8-7","1153":"3_1_release_notes.html#what-to-update-in-your-apps","1154":"3_1_release_notes.html#vendoring-gems","1155":"3_1_release_notes.html#living-on-the-edge","1156":"3_1_release_notes.html#assets-pipeline","1157":"3_1_release_notes.html#http-streaming","1158":"3_1_release_notes.html#default-js-library-is-now-jquery","1159":"3_1_release_notes.html#identity-map","1160":"3_1_release_notes.html#action-controller","1161":"3_1_release_notes.html#action-dispatch","1162":"3_1_release_notes.html#action-view","1163":"association_basics.html","1164":"association_basics.html#a-associacao-belongs-to","1165":"association_basics.html#a-associacao-has-one","1166":"association_basics.html#a-associacao-has-many","1167":"association_basics.html#a-associacao-has-many-through","1168":"association_basics.html#a-associacao-has-one-through","1169":"association_basics.html#a-associacao-has-and-belongs-to-many","1170":"association_basics.html#escolhendo-entre-belongs-to-and-has-one","1171":"association_basics.html#escolhendo-entre-has-many-through-e-has-and-belongs-to-many","1172":"association_basics.html#associacoes-polimorficas","1173":"association_basics.html#self-joins","1174":"association_basics.html#controlando-o-caching","1175":"association_basics.html#evitando-colisoes-de-nome","1176":"association_basics.html#atualizando-o-schema","1177":"association_basics.html#controlando-o-escopo-de-associacao","1178":"association_basics.html#associacoes-bidirecionais","1179":"association_basics.html#referencia-da-associacao-belongs-to","1180":"association_basics.html#referencia-da-associacao-has-one","1181":"association_basics.html#referencia-da-associacao-has-many","1182":"association_basics.html#referencia-da-associacao-has-and-belongs-to-many","1183":"association_basics.html#callbacks-de-associacao","1184":"association_basics.html#association-extensions","1185":"active_record_validations.html","1186":"active_record_validations.html#por-que-usar-validacoes-questionmark","1187":"active_record_validations.html#quando-as-validacoes-ocorrem-questionmark","1188":"active_record_validations.html#pulando-validacoes","1189":"active_record_validations.html#valid-questionmark-e-invalid-questionmark","1190":"active_record_validations.html#resumo-das-validacoes-errors","1191":"active_record_validations.html#resumo-das-validacoes-errors-details","1192":"active_record_validations.html#acceptance","1193":"active_record_validations.html#validates-associated","1194":"active_record_validations.html#confirmation","1195":"active_record_validations.html#exclusion","1196":"active_record_validations.html#format","1197":"active_record_validations.html#inclusion","1198":"active_record_validations.html#length","1199":"active_record_validations.html#numericality","1200":"active_record_validations.html#presence","1201":"active_record_validations.html#absence","1202":"active_record_validations.html#uniqueness","1203":"active_record_validations.html#validates-with","1204":"active_record_validations.html#validates-each","1205":"active_record_validations.html#allow-nil","1206":"active_record_validations.html#allow-blank","1207":"active_record_validations.html#message","1208":"active_record_validations.html#on","1209":"active_record_validations.html#usando-um-symbol-com-if-e-unless","1210":"active_record_validations.html#usando-uma-proc-com-if-e-unless","1211":"active_record_validations.html#agrupando-validacoes-com-condicionais","1212":"active_record_validations.html#combinando-validacoes-com-condicionais","1213":"active_record_validations.html#validadores-customizados","1214":"active_record_validations.html#metodos-customizados","1215":"active_record_validations.html#trabalhando-com-erros-de-validacao-errors","1216":"active_record_validations.html#errors","1217":"active_record_validations.html#errors-add","1218":"active_record_validations.html#trabalhando-com-erros-de-validacao-errors-details","1219":"active_record_validations.html#errors-base","1220":"active_record_validations.html#errors-clear","1221":"active_record_validations.html#errors-size","1222":"form_helpers.html","1223":"form_helpers.html#formulario-de-pesquisa-generica","1224":"form_helpers.html#helpers-para-gerar-elementos-de-formulario","1225":"form_helpers.html#outros-auxiliares-interessantes","1226":"form_helpers.html#helpers-de-objetos-model","1227":"form_helpers.html#vinculando-um-formulario-a-um-objeto","1228":"form_helpers.html#confiando-na-identificacao-de-registro","1229":"form_helpers.html#como-os-formularios-funcionam-com-os-metodos-patch-put-ou-delete-questionmark","1230":"form_helpers.html#as-tags-de-selecao-select-e-opcao-option","1231":"form_helpers.html#caixas-de-selecao-select-boxes-com-objetos-model","1232":"form_helpers.html#tags-de-opcao-option-tags-de-uma-colecao-de-objetos-arbitrarios","1233":"form_helpers.html#fuso-horario-e-selecao-de-pais","1234":"form_helpers.html#helpers-essenciais","1235":"form_helpers.html#helpers-para-objetos-model","1236":"form_helpers.html#opcoes-frequentes","1237":"form_helpers.html#componentes-individuais","1238":"form_helpers.html#o-que-e-enviado","1239":"form_helpers.html#estruturas-basicas","1240":"form_helpers.html#combinando-os-conceitos","1241":"form_helpers.html#utilizando-form-helpers","1242":"form_helpers.html#configuring-the-model","1243":"form_helpers.html#nested-forms","1244":"form_helpers.html#the-controller","1245":"form_helpers.html#removing-objects","1246":"form_helpers.html#preventing-empty-records","1247":"form_helpers.html#adding-fields-on-the-fly","1248":"active_record_querying.html","1249":"active_record_querying.html#retornando-um-unico-objeto","1250":"active_record_querying.html#retornando-multiplos-objetos-em-lotes","1251":"active_record_querying.html#condicoes-de-strings-puras","1252":"active_record_querying.html#condicoes-de-array","1253":"active_record_querying.html#condicoes-de-hash","1254":"active_record_querying.html#condicoes-not","1255":"active_record_querying.html#condicoes-or","1256":"active_record_querying.html#total-de-itens-agrupados","1257":"active_record_querying.html#unscope","1258":"active_record_querying.html#only","1259":"active_record_querying.html#reselect","1260":"active_record_querying.html#reorder","1261":"active_record_querying.html#reverse-order","1262":"active_record_querying.html#rewhere","1263":"active_record_querying.html#bloqueio-otimista","1264":"active_record_querying.html#bloqueio-pessimista","1265":"active_record_querying.html#joins","1266":"active_record_querying.html#left-outer-joins","1267":"active_record_querying.html#eager-loading-multiple-associations","1268":"active_record_querying.html#especificando-condicoes-em-associacoes-eager-loaded","1269":"active_record_querying.html#transmitindo-argumentos","1270":"active_record_querying.html#usando-condicionais","1271":"active_record_querying.html#aplicando-um-escopo-padrao","1272":"active_record_querying.html#mesclagem-de-escopos","1273":"active_record_querying.html#removendo-todo-o-escopo","1274":"active_record_querying.html#buscando-dados-filtrados-de-multiplas-tabelas","1275":"active_record_querying.html#buscando-dados-especificos-de-multiplas-tabelas","1276":"active_record_querying.html#find-or-create-by","1277":"active_record_querying.html#find-or-create-by-bang","1278":"active_record_querying.html#find-or-initialize-by","1279":"active_record_querying.html#select-all","1280":"active_record_querying.html#pluck","1281":"active_record_querying.html#ids","1282":"active_record_querying.html#contar-count","1283":"active_record_querying.html#media-average","1284":"active_record_querying.html#minimo-minimum","1285":"active_record_querying.html#maximo-maximum","1286":"active_record_querying.html#soma-sum","1287":"active_record_querying.html#interpretando-o-explain"};